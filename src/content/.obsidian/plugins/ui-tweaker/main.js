/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => UITweakerPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian15 = require("obsidian");

// src/settings.ts
var DEFAULT_SETTINGS = {
  // Auto-hide elements
  titleBar: "show",
  fileExplorerNavHeader: "show",
  otherNavHeaders: "show",
  leftTabHeaders: "show",
  rightTabHeaders: "show",
  ribbonRevealOnHover: false,
  vaultSwitcher: "show",
  helpButton: "show",
  settingsButton: "show",
  // Simple toggles
  tabBar: false,
  enableWindowDragging: false,
  newNoteButton: false,
  newFolderButton: false,
  sortOrderButton: false,
  autoRevealButton: false,
  collapseAllButton: false,
  readingModeButton: false,
  searchSettingsButton: false,
  tabListIcon: "show",
  newTabIcon: "show",
  tabCloseButton: "show",
  statusBar: false,
  scrollBars: "show",
  leftSidebarToggleButton: "show",
  rightSidebarToggleButton: "show",
  tooltips: false,
  searchSuggestions: false,
  searchTermCounts: false,
  propertiesInReadingView: false,
  propertiesInHeading: false,
  addPropertyButton: false,
  instructions: false,
  // Mobile-specific
  mobileChevronsIcon: false,
  navigateBackButton: false,
  navigateForwardButton: false,
  quickSwitcherButton: false,
  mobileNewTabButton: false,
  openTabButton: false,
  ribbonMenuButton: false,
  swapMobileNewTabIcon: false,
  hideMobileTitle: false,
  hideMobileSyncIcon: false,
  // Mobile navigation menu positions
  navigateButtonPosition: "1",
  navigationButtonPosition: "2",
  quickSwitcherPosition: "3",
  newTabPosition: "4",
  openTabsPosition: "5",
  ribbonMenuPosition: "6",
  // Advanced
  vaultSwitcherBackgroundTransparency: 0.98,
  helpButtonReplacement: {
    enabled: false,
    commandId: "",
    iconId: "wrench"
  },
  syncButtonReplacement: {
    enabled: false,
    commandId: "",
    iconId: "wrench"
  },
  // Tab Bar
  tabBarCommands: [],
  // Status Bar
  statusBarItems: [],
  // Explorer
  explorerCommands: [],
  // Native explorer button colors
  nativeExplorerButtonColors: {
    newNote: void 0,
    newFolder: void 0,
    sortOrder: void 0,
    autoReveal: void 0,
    collapseAll: void 0
  },
  // Native explorer button icon overrides
  nativeExplorerButtonIcons: {
    newNote: void 0,
    newFolder: void 0,
    sortOrder: void 0,
    autoReveal: void 0,
    collapseAll: void 0
  }
};

// src/uiManager.ts
var import_obsidian = require("obsidian");
function setCssProps(el, props) {
  Object.entries(props).forEach(([key, value]) => {
    el.style.setProperty(key, String(value));
  });
}
var UIManager = class {
  constructor(settings) {
    this.revealListeners = /* @__PURE__ */ new Map();
    this.settings = settings;
  }
  updateSettings(settings) {
    this.settings = settings;
    this.applyStyles();
  }
  detectOS() {
    if (import_obsidian.Platform.isMacOS) {
      return "macos";
    }
    if (import_obsidian.Platform.isWin) {
      return "windows";
    }
    return "neutral";
  }
  applyStyles() {
    const body = document.body;
    this.applyVisibilityState(body, "auto-hide-title-bar", this.settings.titleBar, true);
    this.applyVisibilityState(body, "auto-hide-file-explorer-nav-header", this.settings.fileExplorerNavHeader);
    this.applyVisibilityState(body, "auto-hide-other-nav-headers", this.settings.otherNavHeaders);
    this.applyVisibilityState(body, "auto-hide-left-tab-headers", this.settings.leftTabHeaders);
    this.applyVisibilityState(body, "auto-hide-right-tab-headers", this.settings.rightTabHeaders);
    this.applyVisibilityState(body, "auto-hide-vault-switcher", this.settings.vaultSwitcher);
    this.applyVisibilityState(body, "hider-help-button", this.settings.helpButton);
    this.applyVisibilityState(body, "auto-hide-settings-button", this.settings.settingsButton);
    body.classList.toggle("auto-collapse-ribbon", this.settings.ribbonRevealOnHover);
    body.classList.toggle("hider-tabs", this.settings.tabBar);
    if (this.settings.tabBar && this.settings.enableWindowDragging) {
      const os = this.detectOS();
      body.classList.remove("enable-window-dragging-windows", "enable-window-dragging-macos", "enable-window-dragging-neutral");
      body.classList.add(`enable-window-dragging-${os}`);
    } else {
      body.classList.remove("enable-window-dragging-windows", "enable-window-dragging-macos", "enable-window-dragging-neutral");
    }
    body.classList.toggle("hide-button-new-note", this.settings.newNoteButton);
    body.classList.toggle("hide-button-new-folder", this.settings.newFolderButton);
    body.classList.toggle("hide-button-sort-order", this.settings.sortOrderButton);
    body.classList.toggle("hide-button-auto-reveal", this.settings.autoRevealButton);
    body.classList.toggle("hide-button-collapse-all", this.settings.collapseAllButton);
    body.classList.toggle("hide-button-reading-mode", this.settings.readingModeButton);
    body.classList.toggle("hide-button-search-settings", this.settings.searchSettingsButton);
    this.applyVisibilityState(body, "hide-tab-list-icon", this.settings.tabListIcon);
    this.applyVisibilityState(body, "hide-new-tab-icon", this.settings.newTabIcon);
    this.applyVisibilityState(body, "hide-tab-close-button", this.settings.tabCloseButton);
    body.classList.toggle("hider-status", this.settings.statusBar);
    this.applyVisibilityState(body, "hider-scroll", this.settings.scrollBars);
    if (this.settings.scrollBars === "reveal") {
      this.setupScrollbarRevealListeners();
    } else {
      this.removeScrollbarRevealListeners();
    }
    this.applyVisibilityState(body, "hider-left-sidebar-button", this.settings.leftSidebarToggleButton);
    this.applyVisibilityState(body, "hider-right-sidebar-button", this.settings.rightSidebarToggleButton);
    body.classList.toggle("hider-tooltips", this.settings.tooltips);
    body.classList.toggle("hider-search-suggestions", this.settings.searchSuggestions);
    body.classList.toggle("hider-search-counts", this.settings.searchTermCounts);
    body.classList.toggle("hider-meta", this.settings.propertiesInReadingView);
    body.classList.toggle("metadata-heading-off", this.settings.propertiesInHeading);
    body.classList.toggle("metadata-add-property-off", this.settings.addPropertyButton);
    body.classList.toggle("hider-instructions", this.settings.instructions);
    body.classList.toggle("hide-icon-mobile-chevrons", this.settings.mobileChevronsIcon);
    body.classList.toggle("hide-button-mobile-navbar-action-back", this.settings.navigateBackButton);
    body.classList.toggle("hide-button-mobile-navbar-action-forward", this.settings.navigateForwardButton);
    body.classList.toggle("hide-button-mobile-navbar-action-quick-switcher", this.settings.quickSwitcherButton);
    body.classList.toggle("hide-button-mobile-navbar-action-new-tab", this.settings.mobileNewTabButton);
    body.classList.toggle("hide-button-mobile-navbar-action-tabs", this.settings.openTabButton);
    body.classList.toggle("hide-button-mobile-navbar-action-menu", this.settings.ribbonMenuButton);
    body.classList.toggle("swap-mobile-new-tab-icon", this.settings.swapMobileNewTabIcon);
    body.classList.toggle("hide-mobile-title", this.settings.hideMobileTitle);
    body.classList.toggle("hide-mobile-sync-icon", this.settings.hideMobileSyncIcon);
    const orderClasses = Array.from(body.classList).filter(
      (cls) => cls.startsWith("order-navbar-button-nth-child-")
    );
    orderClasses.forEach((cls) => body.classList.remove(cls));
    body.classList.add(`order-navbar-button-nth-child-1-${this.settings.navigateButtonPosition}`);
    body.classList.add(`order-navbar-button-nth-child-2-${this.settings.navigationButtonPosition}`);
    body.classList.add(`order-navbar-button-nth-child-3-${this.settings.quickSwitcherPosition}`);
    body.classList.add(`order-navbar-button-nth-child-4-${this.settings.newTabPosition}`);
    body.classList.add(`order-navbar-button-nth-child-5-${this.settings.openTabsPosition}`);
    body.classList.add(`order-navbar-button-nth-child-6-${this.settings.ribbonMenuPosition}`);
    const maskValue = this.settings.vaultSwitcherBackgroundTransparency >= 1 ? "none" : "linear-gradient(to top, hsl(0, 0%, 0%) 0%, hsla(0, 0%, 0%, 0.99) 18.4%, hsla(0, 0%, 0%, 0.963) 33.7%, hsla(0, 0%, 0%, 0.92) 46.4%, hsla(0, 0%, 0%, 0.864) 56.7%, hsla(0, 0%, 0%, 0.796) 64.8%, hsla(0, 0%, 0%, 0.72) 71.2%, hsla(0, 0%, 0%, 0.637) 76.1%, hsla(0, 0%, 0%, 0.55) 79.9%, hsla(0, 0%, 0%, 0.46) 82.8%, hsla(0, 0%, 0%, 0.37) 85.2%, hsla(0, 0%, 0%, 0.283) 87.3%, hsla(0, 0%, 0%, 0.2) 89.6%, hsla(0, 0%, 0%, 0.124) 92.3%, hsla(0, 0%, 0%, 0.056) 95.6%, hsla(0, 0%, 0%, 0) 100%)";
    setCssProps(body, {
      "--auto-hide-vault-switcher-bg-transparency": String(this.settings.vaultSwitcherBackgroundTransparency),
      "--auto-hide-vault-switcher-mask": maskValue
    });
    const colors = this.settings.nativeExplorerButtonColors;
    if (colors) {
      if (colors.newNote) {
        setCssProps(body, { "--native-button-color-new-note": colors.newNote });
      } else {
        body.style.removeProperty("--native-button-color-new-note");
      }
      if (colors.newFolder) {
        setCssProps(body, { "--native-button-color-new-folder": colors.newFolder });
      } else {
        body.style.removeProperty("--native-button-color-new-folder");
      }
      if (colors.sortOrder) {
        setCssProps(body, { "--native-button-color-sort-order": colors.sortOrder });
      } else {
        body.style.removeProperty("--native-button-color-sort-order");
      }
      if (colors.autoReveal) {
        setCssProps(body, { "--native-button-color-auto-reveal": colors.autoReveal });
      } else {
        body.style.removeProperty("--native-button-color-auto-reveal");
      }
      if (colors.collapseAll) {
        setCssProps(body, { "--native-button-color-collapse-all": colors.collapseAll });
      } else {
        body.style.removeProperty("--native-button-color-collapse-all");
      }
    } else {
      body.style.removeProperty("--native-button-color-new-note");
      body.style.removeProperty("--native-button-color-new-folder");
      body.style.removeProperty("--native-button-color-sort-order");
      body.style.removeProperty("--native-button-color-auto-reveal");
      body.style.removeProperty("--native-button-color-collapse-all");
    }
  }
  applyVisibilityState(body, className, state, useAlwaysShow = false) {
    if (useAlwaysShow) {
      body.classList.remove("always-show-title-bar", `${className}-hide`, `${className}-reveal`);
    } else {
      body.classList.remove(`${className}-show`, `${className}-hide`, `${className}-reveal`);
    }
    if (state === "show") {
      if (useAlwaysShow) {
        body.classList.add("always-show-title-bar");
      }
    } else if (state === "hide") {
      body.classList.add(`${className}-hide`);
    } else if (state === "reveal") {
      body.classList.add(`${className}-reveal`);
    }
  }
  setupScrollbarRevealListeners() {
    this.removeScrollbarRevealListeners();
    const isScrollable = (element) => {
      const style = window.getComputedStyle(element);
      const overflow = style.overflow + style.overflowY + style.overflowX;
      if (!overflow.includes("scroll") && !overflow.includes("auto")) {
        return false;
      }
      return element.scrollHeight > element.clientHeight || element.scrollWidth > element.clientWidth;
    };
    const hoveredElements = /* @__PURE__ */ new Set();
    const handleMouseMove = (e) => {
      const target = e.target;
      if (!target) return;
      hoveredElements.forEach((el) => {
        el.classList.remove("ui-tweaker-scrollbar-hover");
      });
      hoveredElements.clear();
      let element = target;
      while (element && element !== document.body && element !== document.documentElement) {
        if (isScrollable(element)) {
          const rect = element.getBoundingClientRect();
          const scrollbarArea = 25;
          const isInVerticalScrollbarArea = e.clientX >= rect.right - scrollbarArea && e.clientX <= rect.right;
          const isInHorizontalScrollbarArea = e.clientY >= rect.bottom - scrollbarArea && e.clientY <= rect.bottom;
          if (isInVerticalScrollbarArea || isInHorizontalScrollbarArea) {
            element.classList.add("ui-tweaker-scrollbar-hover");
            hoveredElements.add(element);
          }
        }
        element = element.parentElement;
      }
    };
    const handleMouseLeave = () => {
      hoveredElements.forEach((el) => {
        el.classList.remove("ui-tweaker-scrollbar-hover");
      });
      hoveredElements.clear();
    };
    document.addEventListener("mousemove", handleMouseMove, true);
    document.addEventListener("mouseleave", handleMouseLeave, true);
    this.revealListeners.set("scrollbar-reveal", () => {
      document.removeEventListener("mousemove", handleMouseMove, true);
      document.removeEventListener("mouseleave", handleMouseLeave, true);
      hoveredElements.forEach((el) => {
        el.classList.remove("ui-tweaker-scrollbar-hover");
      });
      hoveredElements.clear();
    });
  }
  removeScrollbarRevealListeners() {
    const cleanup = this.revealListeners.get("scrollbar-reveal");
    if (cleanup) {
      cleanup();
      this.revealListeners.delete("scrollbar-reveal");
    }
  }
  cleanup() {
    this.revealListeners.forEach((cleanup) => cleanup());
    this.revealListeners.clear();
    const body = document.body;
    const classesToRemove = [];
    body.classList.forEach((className) => {
      if (className.startsWith("ui-tweaker-") || className.startsWith("auto-hide-") || className.startsWith("hider-") || className.startsWith("hide-") || className.startsWith("metadata-") || className.startsWith("order-navbar-button-") || className.startsWith("enable-window-dragging-") || className === "auto-collapse-ribbon" || className === "swap-mobile-new-tab-icon" || className === "always-show-title-bar") {
        classesToRemove.push(className);
      }
    });
    classesToRemove.forEach((className) => body.classList.remove(className));
    body.style.removeProperty("--auto-hide-vault-switcher-bg-transparency");
    body.style.removeProperty("--auto-hide-vault-switcher-mask");
    body.style.removeProperty("--native-button-color-new-note");
    body.style.removeProperty("--native-button-color-new-folder");
    body.style.removeProperty("--native-button-color-sort-order");
    body.style.removeProperty("--native-button-color-auto-reveal");
    body.style.removeProperty("--native-button-color-collapse-all");
  }
};

// src/commands.ts
function registerCommands(context) {
  const { plugin, settings, saveSettings, refresh } = context;
  registerToggleCommand(plugin, "toggle-title-bar", "Toggle title bar", async () => {
    settings.titleBar = toggleVisibilityState(settings.titleBar);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-file-explorer-nav-header", "Toggle file explorer navigation header", async () => {
    settings.fileExplorerNavHeader = toggleVisibilityState(settings.fileExplorerNavHeader);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-other-nav-headers", "Toggle other navigation headers", async () => {
    settings.otherNavHeaders = toggleVisibilityState(settings.otherNavHeaders);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-left-tab-headers", "Toggle left tab headers", async () => {
    settings.leftTabHeaders = toggleVisibilityState(settings.leftTabHeaders);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-right-tab-headers", "Toggle right tab headers", async () => {
    settings.rightTabHeaders = toggleVisibilityState(settings.rightTabHeaders);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-vault-switcher", "Toggle vault switcher", async () => {
    settings.vaultSwitcher = toggleVisibilityState(settings.vaultSwitcher);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-help-button", "Toggle help button", async () => {
    settings.helpButton = toggleVisibilityState(settings.helpButton);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-settings-button", "Toggle settings button", async () => {
    settings.settingsButton = toggleVisibilityState(settings.settingsButton);
    await saveSettings();
    refresh();
  });
  plugin.addCommand({
    id: "open-settings",
    name: "Open settings",
    callback: () => {
      var _a, _b;
      const app = plugin.app;
      const settingApi = app.setting;
      if (settingApi) {
        (_a = settingApi.open) == null ? void 0 : _a.call(settingApi);
        const pluginInstance = plugin;
        if (((_b = pluginInstance.settingTab) == null ? void 0 : _b.id) && settingApi.openTabById) {
          settingApi.openTabById(pluginInstance.settingTab.id);
        }
      }
    }
  });
  registerToggleCommand(plugin, "toggle-tab-bar", "Toggle tab bar", async () => {
    settings.tabBar = !settings.tabBar;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-new-note-button", "Toggle new note button", async () => {
    settings.newNoteButton = !settings.newNoteButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-new-folder-button", "Toggle new folder button", async () => {
    settings.newFolderButton = !settings.newFolderButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-sort-order-button", "Toggle sort order button", async () => {
    settings.sortOrderButton = !settings.sortOrderButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-auto-reveal-button", "Toggle auto reveal button", async () => {
    settings.autoRevealButton = !settings.autoRevealButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-collapse-all-button", "Toggle collapse all button", async () => {
    settings.collapseAllButton = !settings.collapseAllButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-reading-mode-button", "Toggle reading mode button", async () => {
    settings.readingModeButton = !settings.readingModeButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-search-settings-button", "Toggle search settings button", async () => {
    settings.searchSettingsButton = !settings.searchSettingsButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-tab-list-icon", "Toggle tab list icon", async () => {
    settings.tabListIcon = toggleVisibilityState(settings.tabListIcon);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-new-tab-icon", "Toggle new tab icon", async () => {
    settings.newTabIcon = toggleVisibilityState(settings.newTabIcon);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-tab-close-button", "Toggle tab close button", async () => {
    settings.tabCloseButton = toggleVisibilityState(settings.tabCloseButton);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-status-bar", "Toggle status bar", async () => {
    settings.statusBar = !settings.statusBar;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-scroll-bars", "Toggle scroll bars", async () => {
    settings.scrollBars = toggleVisibilityState(settings.scrollBars);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-left-sidebar-toggle-button", "Toggle left sidebar toggle button", async () => {
    settings.leftSidebarToggleButton = toggleVisibilityState(settings.leftSidebarToggleButton);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-right-sidebar-toggle-button", "Toggle right sidebar toggle button", async () => {
    settings.rightSidebarToggleButton = toggleVisibilityState(settings.rightSidebarToggleButton);
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-tooltips", "Toggle tooltips", async () => {
    settings.tooltips = !settings.tooltips;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-search-suggestions", "Toggle search suggestions", async () => {
    settings.searchSuggestions = !settings.searchSuggestions;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-search-term-counts", "Toggle search term counts", async () => {
    settings.searchTermCounts = !settings.searchTermCounts;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-properties-reading-view", "Toggle properties in Reading view", async () => {
    settings.propertiesInReadingView = !settings.propertiesInReadingView;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-properties-heading", "Toggle properties heading", async () => {
    settings.propertiesInHeading = !settings.propertiesInHeading;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-add-property-button", "Toggle add property button", async () => {
    settings.addPropertyButton = !settings.addPropertyButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-instructions", "Toggle instructions", async () => {
    settings.instructions = !settings.instructions;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-mobile-chevrons-icon", "Toggle mobile chevrons icon", async () => {
    settings.mobileChevronsIcon = !settings.mobileChevronsIcon;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-navigate-back-button", "Toggle navigate back button", async () => {
    settings.navigateBackButton = !settings.navigateBackButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-navigate-forward-button", "Toggle navigate forward button", async () => {
    settings.navigateForwardButton = !settings.navigateForwardButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-quick-switcher-button", "Toggle quick switcher button", async () => {
    settings.quickSwitcherButton = !settings.quickSwitcherButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-mobile-new-tab-button", "Toggle mobile new tab button", async () => {
    settings.mobileNewTabButton = !settings.mobileNewTabButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-open-tab-button", "Toggle open tab button", async () => {
    settings.openTabButton = !settings.openTabButton;
    await saveSettings();
    refresh();
  });
  registerToggleCommand(plugin, "toggle-ribbon-menu-button", "Toggle ribbon menu button", async () => {
    settings.ribbonMenuButton = !settings.ribbonMenuButton;
    await saveSettings();
    refresh();
  });
}
function registerToggleCommand(plugin, id, name, callback) {
  plugin.addCommand({
    id,
    name,
    callback
  });
}
function toggleVisibilityState(currentState) {
  if (currentState === "reveal") {
    return "hide";
  }
  return currentState === "show" ? "hide" : "show";
}

// src/ui/SettingsTab.ts
var import_obsidian10 = require("obsidian");

// src/ui/common/TabRenderer.ts
var import_obsidian2 = require("obsidian");
var TabRenderer = class {
  constructor(app, plugin) {
    this.app = app;
    this.plugin = plugin;
  }
  getSettings() {
    return this.plugin.settings;
  }
  async saveSettings() {
    await this.plugin.saveSettings();
    this.plugin.refresh();
  }
  createDropdownSetting(container, name, description, value, options, onChange) {
    return new import_obsidian2.Setting(container).setName(name).setDesc(description).addDropdown((dropdown) => {
      Object.entries(options).forEach(([key, label]) => {
        dropdown.addOption(key, label);
      });
      dropdown.setValue(value);
      dropdown.onChange(async (value2) => {
        onChange(value2);
        await this.saveSettings();
      });
      return dropdown;
    });
  }
  createToggleSetting(container, name, description, value, onChange) {
    return new import_obsidian2.Setting(container).setName(name).setDesc(description).addToggle((toggle) => {
      toggle.setValue(value);
      toggle.onChange(async (value2) => {
        onChange(value2);
        await this.saveSettings();
      });
      return toggle;
    });
  }
  createSliderSetting(container, name, description, value, min, max, step, onChange) {
    return new import_obsidian2.Setting(container).setName(name).setDesc(description).addSlider((slider) => {
      slider.setLimits(min, max, step).setValue(value).setDynamicTooltip().onChange(async (value2) => {
        onChange(value2);
        await this.saveSettings();
      });
      return slider;
    });
  }
};

// src/utils/settings-compat.ts
var import_obsidian3 = require("obsidian");
var ObsidianModule = __toESM(require("obsidian"), 1);
function createSettingsGroup(containerEl, heading, manifestId) {
  if ((0, import_obsidian3.requireApiVersion)("1.11.0")) {
    const SettingGroupClass = ObsidianModule.SettingGroup;
    if (SettingGroupClass) {
      const group = heading ? new SettingGroupClass(containerEl).setHeading(heading) : new SettingGroupClass(containerEl);
      return {
        addSetting(cb) {
          group.addSetting(cb);
        }
      };
    }
  }
  if (manifestId) {
    containerEl.addClass(`${manifestId}-settings-compat`);
  }
  {
    if (heading) {
      const headingEl = containerEl.createDiv("setting-group-heading");
      headingEl.createEl("h3", { text: heading });
    }
    return {
      addSetting(cb) {
        const setting = new import_obsidian3.Setting(containerEl);
        cb(setting);
      }
    };
  }
}

// src/modals/CommandPickerModal.ts
var import_obsidian4 = require("obsidian");
var CommandPickerModal = class extends import_obsidian4.FuzzySuggestModal {
  constructor(app, onSelect) {
    super(app);
    this.onSelect = onSelect;
  }
  getItems() {
    const commandRegistry = this.app.commands;
    const commandMap = /* @__PURE__ */ new Map();
    if (commandRegistry && typeof commandRegistry.listCommands === "function") {
      try {
        const commands = commandRegistry.listCommands();
        for (const command of commands) {
          if (command && command.id && command.name && !commandMap.has(command.id)) {
            commandMap.set(command.id, {
              id: command.id,
              name: command.name
            });
          }
        }
      } catch (e) {
      }
    }
    return Array.from(commandMap.values()).sort((a, b) => a.name.localeCompare(b.name));
  }
  getItemText(item) {
    return item.name;
  }
  onChooseItem(item, evt) {
    this.onSelect(item.id);
  }
};

// src/modals/IconPickerModal.ts
var import_obsidian5 = require("obsidian");
var getIconList = () => {
  if (import_obsidian5.requireApiVersion && (0, import_obsidian5.requireApiVersion)("1.7.3") && import_obsidian5.getIconIds) {
    try {
      return (0, import_obsidian5.getIconIds)();
    } catch (e) {
    }
  }
  return [
    "settings-2",
    "settings",
    "help-circle",
    "info",
    "star",
    "heart",
    "bookmark",
    "home",
    "search",
    "bell",
    "mail",
    "user",
    "users",
    "folder",
    "file",
    "file-text",
    "image",
    "video",
    "music",
    "calendar",
    "clock",
    "edit",
    "pencil",
    "trash",
    "copy",
    "cut",
    "paste",
    "download",
    "upload",
    "save",
    "share",
    "link",
    "external-link",
    "lock",
    "unlock",
    "eye",
    "eye-off",
    "key",
    "shield",
    "check",
    "x",
    "plus",
    "minus",
    "arrow-left",
    "arrow-right",
    "arrow-up",
    "arrow-down",
    "chevron-left",
    "chevron-right",
    "chevron-up",
    "chevron-down",
    "menu",
    "more-horizontal",
    "more-vertical",
    "grid",
    "list",
    "layout",
    "columns",
    "rows",
    "maximize",
    "minimize",
    "zoom-in",
    "zoom-out",
    "refresh-cw",
    "play",
    "pause",
    "stop",
    "sun",
    "moon",
    "cloud",
    "zap",
    "wand-2",
    "wand",
    "wand-sparkles",
    "palette",
    "brush",
    "sliders",
    "power",
    "wifi",
    "bluetooth",
    "monitor",
    "laptop",
    "smartphone",
    "camera",
    "mic",
    "headphones",
    "code",
    "terminal",
    "terminal-square",
    "github",
    "gitlab",
    "git-branch",
    "git-commit",
    "database",
    "server",
    "cloud-download",
    "cloud-upload",
    "tag",
    "tags",
    "flag",
    "pin",
    "map-pin",
    "compass",
    "globe",
    "rocket",
    "car",
    "bike",
    "robot",
    "apple",
    "windows",
    "linux",
    "chrome",
    "firefox",
    "safari",
    "credit-card",
    "wallet",
    "coins",
    "book",
    "book-open",
    "award",
    "trophy",
    "badge",
    "wrench",
    "tool",
    "package",
    "box",
    "archive",
    "send",
    "reply",
    "forward",
    "mail-open",
    "tag-plus",
    "tag-minus",
    "flag-off",
    "pin-off",
    "map-pin-off",
    "navigation",
    "map",
    "earth",
    "plane",
    "ship",
    "anchor",
    "helicopter",
    "drone",
    "android",
    "keyhole",
    "keys",
    "fingerprint",
    "scan",
    "qr-code",
    "barcode",
    "receipt",
    "piggy-bank",
    "banknote"
  ];
};
var LUCIDE_ICONS = getIconList().map((id) => ({
  id,
  name: id.replace(/^lucide-/, "").replace(/-/g, " ").replace(/(^\w{1})|(\s+\w{1})/g, (letter) => letter.toUpperCase())
})).sort((a, b) => a.name.localeCompare(b.name));
var IconPickerModal = class extends import_obsidian5.FuzzySuggestModal {
  constructor(app, onSelect) {
    super(app);
    this.onSelect = onSelect;
  }
  getItems() {
    return LUCIDE_ICONS;
  }
  getItemText(item) {
    return item.name;
  }
  onChooseItem(item, evt) {
    this.onSelect(item.id);
    this.close();
  }
  // Override to show icon preview
  renderSuggestion(match, el) {
    const item = match.item;
    el.addClass("mod-complex");
    const content = el.createDiv({ cls: "suggestion-content" });
    content.createDiv({ cls: "suggestion-title", text: item.name });
    const aux = el.createDiv({ cls: "suggestion-aux" });
    const iconSpan = aux.createSpan({ cls: "suggestion-flair ui-tweaker-icon-no-bg" });
    (0, import_obsidian5.setIcon)(iconSpan, item.id);
  }
};

// src/ui/tabs/HiderTab.ts
var HiderTab = class extends TabRenderer {
  render(container) {
    const generalGroup = createSettingsGroup(container, void 0, "ui-tweaker");
    this.addVisibilitySetting(
      generalGroup,
      "Title bar",
      "Hide title bar until hover. Turn off to always show.",
      "titleBar"
    );
    this.addVisibilitySetting(
      generalGroup,
      "File explorer nav header",
      "Hide file explorer navigation header until hover. Elegantly reveals on hover.",
      "fileExplorerNavHeader"
    );
    this.addVisibilitySetting(
      generalGroup,
      "Other nav headers",
      "Hide navigation headers for tag, backlinks, outgoing links, outline, and bookmarks panes until hover.",
      "otherNavHeaders"
    );
    this.addVisibilitySetting(
      generalGroup,
      "Left tab headers",
      "Hide left panel tab headers until hover. Elegantly reveals on hover.",
      "leftTabHeaders"
    );
    this.addVisibilitySetting(
      generalGroup,
      "Right tab headers",
      "Hide right panel tab headers until hover. Elegantly reveals on hover.",
      "rightTabHeaders"
    );
    generalGroup.addSetting((setting) => {
      setting.setName("Collapse ribbon").setDesc("Collapse the left ribbon to a thin strip until hover. Elegantly expands on hover.").addToggle(
        (toggle) => toggle.setValue(this.getSettings().ribbonRevealOnHover).onChange((value) => {
          this.getSettings().ribbonRevealOnHover = value;
          void this.saveSettings();
        })
      );
    });
    const navigationGroup = createSettingsGroup(container, "Navigation", "ui-tweaker");
    this.addToggleSetting(navigationGroup, "Hide tab bar", "Hides the tab container at the top of the window.", "tabBar");
    this.addToggleSetting(navigationGroup, "Make top of window draggable without tab bar", 'Enables window dragging from the top of the window when the tab bar is hidden. Only works when "Hide tab bar" is enabled.', "enableWindowDragging");
    this.addToggleSetting(navigationGroup, 'Hide "Reading mode" button', 'Hide "Reading mode" button in view headers.', "readingModeButton");
    this.addToggleSetting(navigationGroup, 'Hide "Search settings" button', 'Hide "Search settings" button in search pane.', "searchSettingsButton");
    const vaultProfileGroup = createSettingsGroup(container, "Vault profile area", "ui-tweaker");
    this.addVisibilitySetting(
      vaultProfileGroup,
      "Vault switcher",
      "Hide vault switcher until hover. Does not work when vault name is hidden.",
      "vaultSwitcher"
    );
    this.addVisibilitySetting(
      vaultProfileGroup,
      "Help button",
      "Hide help button until hover. Elegantly reveals on hover.",
      "helpButton"
    );
    this.renderHelpButtonReplacement(vaultProfileGroup);
    this.addVisibilitySetting(
      vaultProfileGroup,
      "Settings button",
      "Hide settings button until hover. Elegantly reveals on hover.",
      "settingsButton"
    );
    vaultProfileGroup.addSetting((setting) => {
      setting.setName("Vault switcher background transparency").setDesc("Adjust the transparency of the vault switcher background when hidden. Range: 0 (fully transparent) to 1 (fully opaque).").addSlider(
        (slider) => slider.setLimits(0, 1, 0.01).setValue(this.getSettings().vaultSwitcherBackgroundTransparency).setDynamicTooltip().onChange((value) => {
          this.getSettings().vaultSwitcherBackgroundTransparency = value;
          void this.saveSettings();
        })
      );
    });
    const tabIconsGroup = createSettingsGroup(container, "Tab icons", "ui-tweaker");
    this.addVisibilitySetting(
      tabIconsGroup,
      "Hide tab list icon",
      "Hides the tab list icon. You can still access tabs via other methods.",
      "tabListIcon"
    );
    this.addVisibilitySetting(
      tabIconsGroup,
      "Hide new tab icon",
      "Hides the new tab icon. You can still create new tabs with Ctrl+T (Cmd+T on Mac).",
      "newTabIcon"
    );
    this.addVisibilitySetting(
      tabIconsGroup,
      "Hide tab close button",
      "Hides the close button on tabs. You can still close tabs with middle click or other methods.",
      "tabCloseButton"
    );
    const statusUIGroup = createSettingsGroup(container, "Status & UI elements", "ui-tweaker");
    this.addToggleSetting(statusUIGroup, "Hide status bar", "Hides word count, character count and backlink count.", "statusBar");
    this.addVisibilitySetting(
      statusUIGroup,
      "Scroll bars",
      "Control scrollbar visibility. Reveal option hides scrollbars until hover.",
      "scrollBars"
    );
    this.addVisibilitySetting(
      statusUIGroup,
      "Hide left sidebar toggle button",
      "Hides the left sidebar toggle button.",
      "leftSidebarToggleButton"
    );
    this.addVisibilitySetting(
      statusUIGroup,
      "Hide right sidebar toggle button",
      "Hides the right sidebar toggle button.",
      "rightSidebarToggleButton"
    );
    this.addToggleSetting(statusUIGroup, "Hide tooltips", "Hides all tooltips.", "tooltips");
    this.addToggleSetting(statusUIGroup, "Hide instructions", "Hides instructional tips in modals.", "instructions");
    const searchGroup = createSettingsGroup(container, "Search", "ui-tweaker");
    this.addToggleSetting(searchGroup, "Hide search suggestions", "Hides suggestions in search pane.", "searchSuggestions");
    this.addToggleSetting(searchGroup, "Hide count of search term matches", "Hides the number of matches within each search result.", "searchTermCounts");
    const propertiesGroup = createSettingsGroup(container, "Properties", "ui-tweaker");
    this.addToggleSetting(propertiesGroup, "Hide properties in Reading view", "Hides the properties section in Reading view.", "propertiesInReadingView");
    this.addToggleSetting(propertiesGroup, "Hide properties heading", 'Hide "Properties" heading above properties.', "propertiesInHeading");
    this.addToggleSetting(propertiesGroup, 'Hide "Add property" button', 'Hide "Add property" button below properties.', "addPropertyButton");
  }
  addVisibilitySetting(group, name, desc, key) {
    group.addSetting((setting) => {
      setting.setName(name).setDesc(desc).addDropdown((dropdown) => {
        const currentValue = this.getSettings()[key];
        const stringValue = typeof currentValue === "string" ? currentValue : "show";
        dropdown.addOption("show", "Show").addOption("hide", "Hide").addOption("reveal", "Reveal").setValue(stringValue).onChange((value) => {
          this.getSettings()[key] = value;
          void this.saveSettings();
        });
      });
    });
  }
  addToggleSetting(group, name, desc, key) {
    group.addSetting((setting) => {
      setting.setName(name).setDesc(desc).addToggle(
        (toggle) => toggle.setValue(Boolean(this.getSettings()[key])).onChange((value) => {
          this.getSettings()[key] = value;
          void this.saveSettings();
        })
      );
    });
  }
  renderHelpButtonReplacement(group) {
    const settings = this.getSettings();
    if (!settings.helpButtonReplacement) {
      settings.helpButtonReplacement = {
        enabled: false,
        commandId: "",
        iconId: "wrench"
      };
    }
    group.addSetting((setting) => {
      setting.setName("Replace help button with custom action").setDesc("Replace the help button with a custom icon and command. This will hide the original help button and show your custom button instead.").addToggle(
        (toggle) => toggle.setValue(settings.helpButtonReplacement.enabled).onChange((value) => {
          if (!settings.helpButtonReplacement) {
            settings.helpButtonReplacement = {
              enabled: true,
              commandId: "",
              iconId: "wrench"
            };
          }
          settings.helpButtonReplacement.enabled = value;
          void this.saveSettings();
        })
      );
    });
    if (settings.helpButtonReplacement.enabled) {
      const getCommandName = (commandId) => {
        if (!commandId) return "Select command...";
        try {
          const commandRegistry = this.app.commands;
          if (commandRegistry && typeof commandRegistry.listCommands === "function") {
            const commands = commandRegistry.listCommands();
            const command = commands.find(
              (cmd) => cmd && cmd.name && (cmd.id === commandId || cmd.id === commandId.replace(/^ui-tweaker:+/g, "") || cmd.id === `ui-tweaker:${commandId.replace(/^ui-tweaker:+/g, "")}`)
            );
            if (command == null ? void 0 : command.name) {
              return command.name;
            }
          }
        } catch (e) {
        }
        return "Select command...";
      };
      const commandName = getCommandName(settings.helpButtonReplacement.commandId);
      group.addSetting((setting) => {
        setting.setName("Command").setDesc("Select the command to execute when the button is clicked").addButton(
          (button) => button.setButtonText(commandName || "Select command...").onClick(() => {
            const modal = new CommandPickerModal(this.app, (commandId) => {
              if (!settings.helpButtonReplacement) {
                settings.helpButtonReplacement = {
                  enabled: true,
                  commandId: "",
                  iconId: "wrench"
                };
              }
              settings.helpButtonReplacement.commandId = commandId;
              void this.saveSettings();
            });
            modal.open();
          })
        );
      });
      const getIconName = (iconId) => {
        if (!iconId) return "";
        return iconId.replace(/^lucide-/, "").split("-").map((word) => word.charAt(0).toUpperCase() + word.slice(1)).join(" ");
      };
      const iconName = getIconName(settings.helpButtonReplacement.iconId);
      group.addSetting((setting) => {
        setting.setName("Icon").setDesc("Select the icon to display on the button").addButton(
          (button) => button.setButtonText(iconName || "Select icon...").onClick(() => {
            const modal = new IconPickerModal(this.app, (iconId) => {
              if (!settings.helpButtonReplacement) {
                settings.helpButtonReplacement = {
                  enabled: true,
                  commandId: "open-settings",
                  iconId: "wrench"
                };
              }
              settings.helpButtonReplacement.iconId = iconId;
              void this.saveSettings();
            });
            modal.open();
          })
        );
      });
    }
  }
};

// src/ui/tabs/TabBarTab.ts
var import_obsidian7 = require("obsidian");

// src/modals/NamePickerModal.ts
var import_obsidian6 = require("obsidian");
var NamePickerModal = class extends import_obsidian6.Modal {
  constructor(app, defaultName, onSubmit) {
    super(app);
    this.defaultName = defaultName;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "Enter name" });
    const inputContainer = contentEl.createDiv();
    const input = new import_obsidian6.TextComponent(inputContainer);
    input.setValue(this.defaultName);
    input.setPlaceholder("Enter custom name...");
    input.inputEl.addClass("ui-tweaker-name-input");
    input.inputEl.select();
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const submitButton = buttonContainer.createEl("button", { text: "OK", cls: "mod-cta" });
    const cancelButton = buttonContainer.createEl("button", { text: "Cancel" });
    const handleSubmit = () => {
      const value = input.getValue().trim();
      if (value) {
        this.onSubmit(value);
        this.close();
      }
    };
    submitButton.addEventListener("click", handleSubmit);
    cancelButton.addEventListener("click", () => this.close());
    input.inputEl.addEventListener("keydown", (evt) => {
      if (evt.key === "Enter") {
        evt.preventDefault();
        handleSubmit();
      }
      if (evt.key === "Escape") {
        evt.preventDefault();
        this.close();
      }
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/utils/chooseCommand.ts
async function chooseNewCommand(plugin) {
  return new Promise((resolve, reject) => {
    let commandSelected = false;
    let iconSelected = false;
    const commandModal = new CommandPickerModal(plugin.app, (commandId) => {
      var _a;
      commandSelected = true;
      const commands = plugin.app.commands;
      const command = (_a = commands == null ? void 0 : commands.commands) == null ? void 0 : _a[commandId];
      setTimeout(() => {
        commandModal.close();
      }, 0);
      const displayName = (command == null ? void 0 : command.name) || "Custom Command";
      const iconModal = new IconPickerModal(plugin.app, (iconId) => {
        iconSelected = true;
        iconModal.close();
        setTimeout(() => {
          let nameSelected = false;
          const nameModal = new NamePickerModal(plugin.app, displayName, (customName) => {
            nameSelected = true;
            nameModal.close();
            resolve({
              id: commandId,
              icon: iconId,
              name: customName,
              displayName,
              mode: "any"
            });
          });
          nameModal.onClose = () => {
            setTimeout(() => {
              if (!nameSelected && iconSelected && commandSelected) {
                reject(new Error("No name selected"));
              }
            }, 0);
          };
          nameModal.open();
        }, 100);
      });
      iconModal.onClose = () => {
        setTimeout(() => {
          if (!iconSelected && commandSelected) {
            reject(new Error("No icon selected"));
          }
        }, 0);
      };
      setTimeout(() => {
        iconModal.open();
      }, 100);
    });
    commandModal.onClose = () => {
      setTimeout(() => {
        if (!commandSelected) {
          reject(new Error("No command selected"));
        }
      }, 0);
    };
    commandModal.open();
  });
}

// src/ui/tabs/TabBarTab.ts
function arrayMoveMutable(array, from, to) {
  const item = array[from];
  array.splice(from, 1);
  array.splice(to, 0, item);
}
var TabBarTab = class extends TabRenderer {
  constructor() {
    super(...arguments);
    this.expandedStates = /* @__PURE__ */ new Map();
  }
  render(container) {
    container.empty();
    const settings = this.getSettings();
    if (!settings.tabBarCommands) {
      settings.tabBarCommands = [];
    }
    settings.tabBarCommands.forEach((pair, index) => {
      this.renderCommandItem(container, pair, index);
    });
    if (settings.tabBarCommands.length > 0) {
      container.createEl("hr");
    }
    const addGroup = createSettingsGroup(container, void 0, "ui-tweaker");
    addGroup.addSetting((setting) => {
      setting.setName("Add command").setDesc("Add a new command button to the tab bar").addButton((button) => {
        const buttonEl = button.buttonEl;
        const iconContainer = buttonEl.createSpan({ cls: "ui-tweaker-add-icon" });
        (0, import_obsidian7.setIcon)(iconContainer, "lucide-image-plus");
        buttonEl.insertBefore(iconContainer, buttonEl.firstChild);
        button.setButtonText("Add command").setCta().onClick(() => {
          void (async () => {
            var _a;
            try {
              const pair = await chooseNewCommand(this.plugin);
              await ((_a = this.plugin.tabBarManager) == null ? void 0 : _a.addCommand(pair));
              this.render(container);
            } catch (e) {
            }
          })();
        });
      });
    });
  }
  renderCommandItem(container, pair, index) {
    const settings = this.getSettings();
    const group = createSettingsGroup(container, void 0, "ui-tweaker");
    const otherSettings = [];
    const displayName = pair.displayName || pair.name;
    group.addSetting((setting) => {
      var _a;
      setting.settingEl.addEventListener("click", (e) => {
        const target = e.target;
        const isChevronClick = target.closest(".ui-tweaker-collapse-icon") !== null;
        const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
        const isNameEdit = target.closest(".ui-tweaker-name-display") !== null || target.closest(".ui-tweaker-edit-icon") !== null || target.closest(".ui-tweaker-editable-name") !== null;
        if (!isChevronClick && !isExtraButton && !isNameEdit) {
          e.stopPropagation();
          e.stopImmediatePropagation();
          e.preventDefault();
          return false;
        }
      }, true);
      setting.settingEl.addEventListener("click", (e) => {
        const target = e.target;
        const isChevronClick = target.closest(".ui-tweaker-collapse-icon") !== null;
        const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
        const isNameEdit = target.closest(".ui-tweaker-name-display") !== null || target.closest(".ui-tweaker-edit-icon") !== null || target.closest(".ui-tweaker-editable-name") !== null;
        if (!isChevronClick && !isExtraButton && !isNameEdit) {
          e.stopPropagation();
          e.stopImmediatePropagation();
          e.preventDefault();
          return false;
        }
      }, false);
      const nameEl = setting.nameEl;
      setCssProps(nameEl, { display: "flex", alignItems: "center", gap: "0.5rem", width: "100%" });
      const chevronContainer = document.createElement("div");
      chevronContainer.className = "ui-tweaker-collapse-icon";
      setCssProps(chevronContainer, {
        cursor: "default",
        background: "transparent",
        padding: "0",
        margin: "0",
        display: "inline-flex",
        alignItems: "center",
        justifyContent: "center"
      });
      nameEl.insertBefore(chevronContainer, nameEl.firstChild);
      let isExpanded = (_a = this.expandedStates.get(pair.id)) != null ? _a : false;
      (0, import_obsidian7.setIcon)(chevronContainer, isExpanded ? "chevrons-down-up" : "chevrons-up-down");
      chevronContainer.addEventListener("click", (e) => {
        e.stopPropagation();
        e.stopImmediatePropagation();
        e.preventDefault();
        isExpanded = !isExpanded;
        this.expandedStates.set(pair.id, isExpanded);
        (0, import_obsidian7.setIcon)(chevronContainer, isExpanded ? "chevrons-down-up" : "chevrons-up-down");
        otherSettings.forEach((settingEl) => {
          setCssProps(settingEl, { display: isExpanded ? "" : "none" });
        });
      });
      const nameContainer = nameEl.createDiv({ cls: "ui-tweaker-editable-name" });
      setCssProps(nameContainer, { display: "flex", alignItems: "center", gap: "0.5rem" });
      const createNameDisplay = (name) => {
        nameContainer.empty();
        const display = nameContainer.createSpan({
          text: name === displayName ? name : `${name} (${displayName})`,
          cls: "ui-tweaker-name-display"
        });
        const iconContainer = nameContainer.createDiv({ cls: "ui-tweaker-edit-icon" });
        setCssProps(iconContainer, { opacity: "0.6" });
        (0, import_obsidian7.setIcon)(iconContainer, "lucide-pencil-line");
        const startEdit = () => {
          const currentName = pair.name;
          nameContainer.empty();
          const nameInput = nameContainer.createEl("input", {
            type: "text",
            value: currentName
          });
          nameInput.addClass("mod-text-input");
          nameInput.focus();
          nameInput.select();
          const saveName = () => {
            var _a2;
            nameInput.removeEventListener("blur", saveName);
            let newName = nameInput.value.trim();
            if (!newName) {
              newName = currentName;
            }
            pair.name = newName;
            (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.updateButtonNames();
            void (async () => {
              await this.saveSettings();
              this.render(container);
            })();
          };
          nameInput.addEventListener("keydown", (e) => {
            if (e.key === "Enter") {
              e.preventDefault();
              saveName();
            } else if (e.key === "Escape") {
              e.preventDefault();
              createNameDisplay(currentName);
            }
          });
          nameInput.addEventListener("blur", saveName);
        };
        display.addEventListener("click", startEdit);
        iconContainer.addEventListener("click", startEdit);
        iconContainer.addEventListener("mouseenter", () => {
          setCssProps(iconContainer, { opacity: "1" });
        });
        iconContainer.addEventListener("mouseleave", () => {
          setCssProps(iconContainer, { opacity: "0.6" });
        });
      };
      createNameDisplay(pair.name);
      setting.setDesc("").addExtraButton((button) => {
        const iconEl = button.extraSettingsEl;
        (0, import_obsidian7.setIcon)(iconEl, pair.icon);
        iconEl.setAttribute("data-command-id", pair.id);
        if (pair.color && pair.color !== "#000000") {
          setCssProps(iconEl, { color: pair.color });
        } else {
          iconEl.style.removeProperty("color");
        }
        button.setTooltip("Change icon");
        button.onClick(() => {
          const modal = new IconPickerModal(this.app, (iconId) => {
            void (async () => {
              var _a2;
              if (iconId && iconId !== pair.icon) {
                pair.icon = iconId;
                await this.saveSettings();
                (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
                this.render(container);
              }
            })();
          });
          modal.open();
        });
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("chevron-up");
        if (index > 0) {
          button.setTooltip("Move up");
          button.onClick(() => {
            const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
            const scrollPos = scrollContainer.scrollTop;
            void (async () => {
              var _a2;
              arrayMoveMutable(settings.tabBarCommands, index, index - 1);
              await this.saveSettings();
              (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
              this.render(container);
              requestAnimationFrame(() => {
                scrollContainer.scrollTop = scrollPos;
                setTimeout(() => {
                  scrollContainer.scrollTop = scrollPos;
                }, 0);
              });
            })();
          });
        } else {
          button.setTooltip("Already at top");
          button.extraSettingsEl.addClass("ui-tweaker-disabled-button");
          setCssProps(button.extraSettingsEl, { pointerEvents: "none" });
        }
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("chevron-down");
        if (index < settings.tabBarCommands.length - 1) {
          button.setTooltip("Move down");
          button.onClick(() => {
            const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
            const scrollPos = scrollContainer.scrollTop;
            void (async () => {
              var _a2;
              arrayMoveMutable(settings.tabBarCommands, index, index + 1);
              await this.saveSettings();
              (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
              this.render(container);
              requestAnimationFrame(() => {
                scrollContainer.scrollTop = scrollPos;
                setTimeout(() => {
                  scrollContainer.scrollTop = scrollPos;
                }, 0);
              });
            })();
          });
        } else {
          button.setTooltip("Already at bottom");
          button.extraSettingsEl.addClass("ui-tweaker-disabled-button");
          setCssProps(button.extraSettingsEl, { pointerEvents: "none" });
        }
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("trash");
        button.setTooltip("Delete");
        button.extraSettingsEl.addClass("mod-warning");
        setCssProps(button.extraSettingsEl, { color: "var(--text-error)" });
        button.onClick(() => {
          void (async () => {
            var _a2;
            settings.tabBarCommands.splice(index, 1);
            await this.saveSettings();
            await ((_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.removeCommand(pair));
            this.render(container);
          })();
        });
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      setting.setName("Device mode").setDesc("Choose which devices this command appears on").addDropdown((dropdown) => {
        const appId = this.app.appId || "this-device";
        dropdown.addOption("any", "All devices").addOption("desktop", "Desktop only").addOption("mobile", "Mobile only").addOption(appId, "This device");
        const currentValue = pair.mode === "any" || pair.mode === "desktop" || pair.mode === "mobile" ? pair.mode : appId;
        dropdown.setValue(currentValue);
        dropdown.onChange((value) => {
          void (async () => {
            var _a;
            pair.mode = value;
            await this.saveSettings();
            (_a = this.plugin.tabBarManager) == null ? void 0 : _a.reorder();
            this.render(container);
          })();
        });
        dropdown.selectEl.addEventListener("click", (e) => e.stopPropagation());
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      const hasColor = pair.color !== void 0;
      setting.setName("Custom color").setDesc("Set a custom color for this icon").addColorPicker((colorPicker) => {
        var _a;
        const currentColor = (_a = pair.color) != null ? _a : "#000000";
        colorPicker.setValue(currentColor);
        const controlEl = setting.controlEl;
        controlEl.addEventListener("click", (e) => e.stopPropagation());
        setTimeout(() => {
          const colorInput = controlEl.querySelector('input[type="color"]');
          if (colorInput) {
            colorInput.addEventListener("click", (e) => e.stopPropagation());
          }
        }, 0);
        if (hasColor) {
          setTimeout(() => {
            const colorPickerEl = controlEl.querySelector(".color-picker") || controlEl.lastElementChild;
            const resetButton = controlEl.createEl("button", {
              cls: "clickable-icon ui-tweaker-color-reset",
              attr: { "aria-label": "Reset to default color" }
            });
            (0, import_obsidian7.setIcon)(resetButton, "lucide-rotate-cw");
            setCssProps(resetButton, { marginRight: "0.5rem" });
            resetButton.addEventListener("click", (e) => {
              e.stopPropagation();
              e.stopImmediatePropagation();
              e.preventDefault();
              void (async () => {
                var _a2;
                pair.color = void 0;
                const iconButton = container.querySelector(`[data-command-id="${pair.id}"]`);
                if (iconButton) {
                  iconButton.style.removeProperty("color");
                }
                await this.saveSettings();
                (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
                this.render(container);
              })();
            });
            if (colorPickerEl) {
              controlEl.insertBefore(resetButton, colorPickerEl);
            } else {
              controlEl.insertBefore(resetButton, controlEl.firstChild);
            }
          }, 0);
        }
        colorPicker.onChange((value) => {
          if (value === "#000000") {
            pair.color = void 0;
          } else {
            pair.color = value;
          }
          const iconButton = container.querySelector(`[data-command-id="${pair.id}"]`);
          if (iconButton) {
            if (pair.color && pair.color !== "#000000") {
              setCssProps(iconButton, { color: pair.color });
            } else {
              iconButton.style.removeProperty("color");
            }
          }
          void (async () => {
            var _a2;
            await this.saveSettings();
            (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
            this.render(container);
          })();
        });
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      const hasToggleIcon = pair.toggleIcon !== void 0;
      setting.setName("Toggle icon").setDesc("Icon to show when command is toggled on (leave empty to disable toggle). Commands with check callback work automatically. See readme for plugin developer compatibility notes.").setTooltip("For plugin developers: Commands with checkCallback work automatically. See https://github.com/davidvkimball/obsidian-ui-tweaker#toggle-icon-feature-compatibility for details.").addButton((button) => {
        const currentToggleIcon = pair.toggleIcon || "None";
        button.setButtonText(currentToggleIcon === "None" ? "Set toggle icon..." : currentToggleIcon).onClick(() => {
          const modal = new IconPickerModal(this.app, (iconId) => {
            void (async () => {
              var _a;
              if (iconId) {
                pair.toggleIcon = iconId;
              } else {
                pair.toggleIcon = void 0;
              }
              await this.saveSettings();
              (_a = this.plugin.tabBarManager) == null ? void 0 : _a.reorder();
              this.render(container);
            })();
          });
          modal.open();
        });
        button.buttonEl.addEventListener("click", (e) => e.stopPropagation());
        if (hasToggleIcon) {
          setTimeout(() => {
            const controlEl = setting.controlEl;
            const buttonEl = controlEl.querySelector("button") || controlEl.lastElementChild;
            const resetButton = controlEl.createEl("button", {
              cls: "clickable-icon ui-tweaker-toggle-icon-reset",
              attr: { "aria-label": "Reset toggle icon" }
            });
            (0, import_obsidian7.setIcon)(resetButton, "lucide-rotate-cw");
            setCssProps(resetButton, { marginRight: "0.5rem" });
            resetButton.addEventListener("click", (e) => {
              e.stopPropagation();
              e.stopImmediatePropagation();
              e.preventDefault();
              const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
              const scrollPos = scrollContainer.scrollTop;
              void (async () => {
                var _a;
                pair.toggleIcon = void 0;
                await this.saveSettings();
                (_a = this.plugin.tabBarManager) == null ? void 0 : _a.reorder();
                this.render(container);
                requestAnimationFrame(() => {
                  scrollContainer.scrollTop = scrollPos;
                  setTimeout(() => {
                    scrollContainer.scrollTop = scrollPos;
                  }, 0);
                });
              })();
            });
            if (buttonEl) {
              controlEl.insertBefore(resetButton, buttonEl);
            } else {
              controlEl.insertBefore(resetButton, controlEl.firstChild);
            }
          }, 0);
        }
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      setting.setName("Show only on these file types").setDesc("Show button only on specified file types. Enter comma-separated file extensions. Leave empty to show on all file types.").addText((text) => {
        var _a;
        text.setPlaceholder("md");
        text.setValue((_a = pair.showOnFileTypes) != null ? _a : "");
        text.onChange((value) => {
          void (async () => {
            var _a2;
            pair.showOnFileTypes = value.trim() || void 0;
            await this.saveSettings();
            (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
          })();
        });
        text.inputEl.addEventListener("click", (e) => e.stopPropagation());
        text.inputEl.addEventListener("focus", (e) => e.stopPropagation());
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      setting.setName("Never show on these file types").setDesc("Hide button on specified file types. Enter comma-separated file extensions. Leave empty to allow all file types.").addText((text) => {
        var _a;
        text.setPlaceholder("jpg");
        text.setValue((_a = pair.hideOnFileTypes) != null ? _a : "");
        text.onChange((value) => {
          void (async () => {
            var _a2;
            pair.hideOnFileTypes = value.trim() || void 0;
            await this.saveSettings();
            (_a2 = this.plugin.tabBarManager) == null ? void 0 : _a2.reorder();
          })();
        });
        text.inputEl.addEventListener("click", (e) => e.stopPropagation());
        text.inputEl.addEventListener("focus", (e) => e.stopPropagation());
      });
    });
    setTimeout(() => {
      var _a;
      const savedExpanded = (_a = this.expandedStates.get(pair.id)) != null ? _a : false;
      otherSettings.forEach((settingEl) => {
        setCssProps(settingEl, { display: savedExpanded ? "" : "none" });
      });
    }, 0);
  }
};

// src/ui/tabs/StatusBarTab.ts
var import_obsidian8 = require("obsidian");
function arrayMoveMutable2(array, from, to) {
  const item = array[from];
  array.splice(from, 1);
  array.splice(to, 0, item);
}
var dragging = false;
var StatusBarTab = class extends TabRenderer {
  render(container) {
    container.empty();
    const settings = this.getSettings();
    this.container = container;
    if (!settings.statusBarItems) {
      settings.statusBarItems = [];
    }
    const wrapper = container.createDiv("ui-tweaker-status-bar-rows-wrapper");
    const rowsContainer = wrapper.createDiv("ui-tweaker-status-bar-rows-container");
    settings.statusBarItems.forEach((item, index) => {
      if (item.type === "existing") {
        this.renderExistingRow(rowsContainer, item, settings, index, settings.statusBarItems.length);
      } else {
        this.renderCustomRow(rowsContainer, item, settings, index, settings.statusBarItems.length);
      }
    });
    if (settings.statusBarItems.length > 0) {
      container.createEl("hr");
    }
    const addGroup = createSettingsGroup(container, void 0, "ui-tweaker");
    addGroup.addSetting((setting) => {
      setting.setName("Add command").setDesc("Add a new command button to the status bar").addButton((button) => {
        const buttonEl = button.buttonEl;
        const iconContainer = buttonEl.createSpan({ cls: "ui-tweaker-add-icon" });
        (0, import_obsidian8.setIcon)(iconContainer, "lucide-image-plus");
        buttonEl.insertBefore(iconContainer, buttonEl.firstChild);
        button.setButtonText("Add command").setCta().onClick(() => {
          void (async () => {
            var _a;
            try {
              const pair = await chooseNewCommand(this.plugin);
              await ((_a = this.plugin.statusBarManager) == null ? void 0 : _a.addCustomCommand(pair));
              const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.parentElement;
              const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
              this.render(container);
              requestAnimationFrame(() => {
                if (scrollContainer) {
                  scrollContainer.scrollTop = scrollTop;
                }
              });
            } catch (e) {
            }
          })();
        });
      });
    });
  }
  /**
   * Render an existing status bar item row (EXACTLY like Status Bar Organizer)
   */
  renderExistingRow(rowsContainer, item, settings, index, totalItems) {
    var _a;
    const statusBarContainer = (_a = this.plugin.app.statusBar) == null ? void 0 : _a.containerEl;
    const actualElement = statusBarContainer == null ? void 0 : statusBarContainer.querySelector(`[data-ui-tweaker-status-bar-id="${item.id}"]`);
    const exists = !!actualElement;
    const entry = rowsContainer.createDiv("ui-tweaker-status-bar-row");
    entry.addClass("ui-tweaker-row");
    if (!exists) entry.addClass("ui-tweaker-status-bar-row-disabled");
    if (item.hidden) entry.addClass("ui-tweaker-status-bar-row-hidden");
    entry.setAttribute("data-ui-tweaker-id", item.id);
    const handle = entry.createSpan("ui-tweaker-status-bar-row-handle");
    handle.addEventListener(
      "mousedown",
      (event) => this.handleMouseDown(event, rowsContainer, item, settings)
    );
    const titleSpan = entry.createSpan("ui-tweaker-status-bar-row-title");
    titleSpan.textContent = item.name;
    const previewSpan = entry.createSpan("ui-tweaker-status-bar-row-preview");
    if (exists && actualElement) {
      const cloned = actualElement.cloneNode(true);
      previewSpan.appendChild(cloned);
    }
    entry.createSpan("ui-tweaker-status-bar-row-reset-color");
    entry.createSpan("ui-tweaker-status-bar-row-color-picker");
    entry.createSpan("ui-tweaker-status-bar-row-device-mode");
    entry.createSpan("ui-tweaker-status-bar-row-md-only");
    const lockSpan = entry.createSpan("ui-tweaker-status-bar-row-lock");
    lockSpan.setAttribute("aria-label", item.sticky ? `Locked to ${item.sticky}` : "Unlocked - click to lock position");
    lockSpan.addEventListener("click", (e) => {
      e.stopPropagation();
      this.toggleLock(item, lockSpan, index, totalItems, rowsContainer, settings);
    });
    (0, import_obsidian8.setIcon)(lockSpan, item.sticky ? "lock" : "unlock");
    if (item.sticky) {
      lockSpan.addClass("ui-tweaker-locked");
    }
    const visibilitySpan = entry.createSpan("ui-tweaker-status-bar-row-visibility");
    if (item.type === "custom") {
      visibilitySpan.setAttribute("aria-label", "Delete item");
      visibilitySpan.addClass("mod-warning");
      setCssProps(visibilitySpan, { color: "var(--text-error)" });
      visibilitySpan.addEventListener("click", () => {
        void this.removeItem(rowsContainer, item, settings);
      });
      (0, import_obsidian8.setIcon)(visibilitySpan, "trash-2");
    } else {
      visibilitySpan.setAttribute("aria-label", item.hidden ? "Hidden - click to show" : "Visible - click to hide");
      visibilitySpan.addEventListener("click", () => {
        this.toggleVisibility(item, visibilitySpan, entry);
      });
      (0, import_obsidian8.setIcon)(visibilitySpan, item.hidden ? "eye-off" : "eye");
    }
  }
  /**
   * Render a custom status bar item row (EXACTLY like Status Bar Organizer, but with editable name)
   */
  renderCustomRow(rowsContainer, item, settings, index, totalItems) {
    const entry = rowsContainer.createDiv("ui-tweaker-status-bar-row");
    entry.addClass("ui-tweaker-row");
    if (item.hidden) entry.addClass("ui-tweaker-status-bar-row-hidden");
    entry.setAttribute("data-ui-tweaker-id", item.id);
    const handle = entry.createSpan("ui-tweaker-status-bar-row-handle");
    handle.addEventListener(
      "mousedown",
      (event) => this.handleMouseDown(event, rowsContainer, item, settings)
    );
    const titleSpan = entry.createSpan("ui-tweaker-status-bar-row-title");
    const displayName = item.displayName || item.name;
    const nameText = item.name === displayName ? item.name : `${item.name} (${displayName})`;
    titleSpan.textContent = nameText;
    titleSpan.addEventListener("dblclick", () => {
      const currentName = item.name;
      const input = document.createElement("input");
      input.type = "text";
      input.value = currentName;
      input.addClass("mod-text-input");
      setCssProps(input, { width: "100%" });
      titleSpan.empty();
      titleSpan.appendChild(input);
      input.focus();
      input.select();
      const saveName = () => {
        var _a;
        let newName = input.value.trim();
        if (!newName) newName = currentName;
        item.name = newName;
        (_a = this.plugin.statusBarManager) == null ? void 0 : _a.updateButtonNames();
        titleSpan.textContent = newName === displayName ? newName : `${newName} (${displayName})`;
        void this.saveSettings();
      };
      input.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          e.preventDefault();
          saveName();
        } else if (e.key === "Escape") {
          e.preventDefault();
          titleSpan.textContent = nameText;
        }
      });
      input.addEventListener("blur", saveName);
    });
    const previewSpan = entry.createSpan("ui-tweaker-status-bar-row-preview");
    if (item.icon) {
      const previewIcon = previewSpan.createSpan("status-bar-item clickable-icon");
      (0, import_obsidian8.setIcon)(previewIcon, item.icon);
      if (item.color && item.color !== "#000000") {
        setCssProps(previewIcon, { color: item.color });
      }
    }
    const resetColorContainer = entry.createSpan("ui-tweaker-status-bar-row-reset-color");
    if (item.color) {
      const resetButton = resetColorContainer.createEl("button", {
        cls: "clickable-icon ui-tweaker-color-reset",
        attr: { "aria-label": "Reset to default color" }
      });
      (0, import_obsidian8.setIcon)(resetButton, "rotate-cw");
      resetButton.addEventListener("click", (e) => {
        var _a;
        e.stopPropagation();
        item.color = void 0;
        const previewIcon = previewSpan.querySelector(".clickable-icon");
        if (previewIcon) {
          previewIcon.style.removeProperty("color");
        }
        (_a = this.plugin.statusBarManager) == null ? void 0 : _a.reorder();
        void this.saveSettings();
        if (this.container) {
          this.render(this.container);
        }
      });
    }
    const colorPickerContainer = entry.createSpan("ui-tweaker-status-bar-row-color-picker");
    const colorPickerEl = colorPickerContainer.createDiv();
    const colorPicker = new import_obsidian8.ColorComponent(colorPickerEl);
    colorPicker.setValue(item.color || "#000000");
    colorPicker.onChange((value) => {
      var _a;
      if (value === "#000000") {
        item.color = void 0;
      } else {
        item.color = value;
      }
      const previewIcon = previewSpan.querySelector(".clickable-icon");
      if (previewIcon) {
        if (item.color && item.color !== "#000000") {
          setCssProps(previewIcon, { color: item.color });
        } else {
          previewIcon.style.removeProperty("color");
        }
      }
      (_a = this.plugin.statusBarManager) == null ? void 0 : _a.reorder();
      void this.saveSettings();
      if (this.container) {
        this.render(this.container);
      }
    });
    const deviceModeSpan = entry.createSpan("ui-tweaker-status-bar-row-device-mode");
    deviceModeSpan.setAttribute("aria-label", this.getDeviceModeTooltip(item.mode || "any"));
    deviceModeSpan.addEventListener("click", (e) => {
      e.stopPropagation();
      this.toggleDeviceMode(item);
    });
    (0, import_obsidian8.setIcon)(deviceModeSpan, this.getDeviceModeIcon(item.mode || "any"));
    if (item.mode && item.mode !== "any") {
      deviceModeSpan.addClass("ui-tweaker-active");
    }
    const mdOnlySpan = entry.createSpan("ui-tweaker-status-bar-row-md-only");
    mdOnlySpan.setAttribute("aria-label", item.mdOnly ? "Only show on Markdown files (enabled)" : "Only show on Markdown files (disabled)");
    mdOnlySpan.addEventListener("click", (e) => {
      var _a;
      e.stopPropagation();
      item.mdOnly = !item.mdOnly;
      (0, import_obsidian8.setIcon)(mdOnlySpan, item.mdOnly ? "file-check" : "file-x");
      mdOnlySpan.setAttribute("aria-label", item.mdOnly ? "Only show on Markdown files (enabled)" : "Only show on Markdown files (disabled)");
      if (item.mdOnly) {
        mdOnlySpan.addClass("ui-tweaker-active");
      } else {
        mdOnlySpan.removeClass("ui-tweaker-active");
      }
      (_a = this.plugin.statusBarManager) == null ? void 0 : _a.reorder();
      void this.saveSettings();
    });
    (0, import_obsidian8.setIcon)(mdOnlySpan, item.mdOnly ? "file-check" : "file-x");
    if (item.mdOnly) {
      mdOnlySpan.addClass("ui-tweaker-active");
    }
    const lockSpan = entry.createSpan("ui-tweaker-status-bar-row-lock");
    lockSpan.setAttribute("aria-label", item.sticky ? `Locked to ${item.sticky}` : "Unlocked - click to lock position");
    lockSpan.addEventListener("click", (e) => {
      e.stopPropagation();
      this.toggleLock(item, lockSpan, index, totalItems, rowsContainer, settings);
    });
    (0, import_obsidian8.setIcon)(lockSpan, item.sticky ? "lock" : "unlock");
    if (item.sticky) {
      lockSpan.addClass("ui-tweaker-locked");
    }
    const visibilitySpan = entry.createSpan("ui-tweaker-status-bar-row-visibility");
    if (item.type === "custom") {
      visibilitySpan.setAttribute("aria-label", "Delete item");
      visibilitySpan.addClass("mod-warning");
      setCssProps(visibilitySpan, { color: "var(--text-error)" });
      visibilitySpan.addEventListener("click", () => {
        void this.removeItem(rowsContainer, item, settings);
      });
      (0, import_obsidian8.setIcon)(visibilitySpan, "trash-2");
    } else {
      visibilitySpan.setAttribute("aria-label", item.hidden ? "Hidden - click to show" : "Visible - click to hide");
      visibilitySpan.addEventListener("click", () => {
        this.toggleVisibility(item, visibilitySpan, entry);
      });
      (0, import_obsidian8.setIcon)(visibilitySpan, item.hidden ? "eye-off" : "eye");
    }
  }
  /**
   * Toggle lock position based on current position
   */
  toggleLock(item, lockSpan, currentIndex, totalItems, rowsContainer, settings) {
    var _a;
    if (item.sticky) {
      item.sticky = false;
      (0, import_obsidian8.setIcon)(lockSpan, "unlock");
      lockSpan.removeClass("ui-tweaker-locked");
      lockSpan.setAttribute("aria-label", "Unlocked - click to lock position");
    } else {
      if (currentIndex === 0 || currentIndex === 1) {
        item.sticky = "left";
      } else if (currentIndex === totalItems - 1 || currentIndex === totalItems - 2) {
        item.sticky = "right";
      } else {
        const distanceToStart = currentIndex;
        const distanceToEnd = totalItems - 1 - currentIndex;
        item.sticky = distanceToStart <= distanceToEnd ? "left" : "right";
      }
      (0, import_obsidian8.setIcon)(lockSpan, "lock");
      lockSpan.addClass("ui-tweaker-locked");
      lockSpan.setAttribute("aria-label", `Locked to ${item.sticky}`);
    }
    (_a = this.plugin.statusBarManager) == null ? void 0 : _a.reorder();
    void this.saveSettings();
  }
  /**
   * Toggle visibility (exactly like Status Bar Organizer)
   */
  toggleVisibility(item, visibilitySpan, entry) {
    var _a;
    item.hidden = !item.hidden;
    if (item.hidden) {
      entry.addClass("ui-tweaker-status-bar-row-hidden");
      (0, import_obsidian8.setIcon)(visibilitySpan, "eye-off");
      visibilitySpan.setAttribute("aria-label", "Hidden - click to show");
    } else {
      entry.removeClass("ui-tweaker-status-bar-row-hidden");
      (0, import_obsidian8.setIcon)(visibilitySpan, "eye");
      visibilitySpan.setAttribute("aria-label", "Visible - click to hide");
    }
    (_a = this.plugin.statusBarManager) == null ? void 0 : _a.reorder();
    void this.saveSettings();
  }
  /**
   * Toggle device mode (cycles through: any -> desktop -> mobile -> this device -> any)
   */
  toggleDeviceMode(item) {
    var _a;
    const appId = this.app.appId || "this-device";
    const currentMode = item.mode || "any";
    if (currentMode === "any") {
      item.mode = "desktop";
    } else if (currentMode === "desktop") {
      item.mode = "mobile";
    } else if (currentMode === "mobile") {
      item.mode = appId;
    } else {
      item.mode = "any";
    }
    const deviceModeSpan = document.querySelector(`[data-ui-tweaker-id="${item.id}"] .ui-tweaker-status-bar-row-device-mode`);
    if (deviceModeSpan) {
      (0, import_obsidian8.setIcon)(deviceModeSpan, this.getDeviceModeIcon(item.mode));
      const tooltip = this.getDeviceModeTooltip(item.mode);
      deviceModeSpan.setAttribute("aria-label", tooltip);
      if (item.mode && item.mode !== "any") {
        deviceModeSpan.addClass("ui-tweaker-active");
      } else {
        deviceModeSpan.removeClass("ui-tweaker-active");
      }
    }
    (_a = this.plugin.statusBarManager) == null ? void 0 : _a.reorder();
    void this.saveSettings();
  }
  /**
   * Get device mode icon
   */
  getDeviceModeIcon(mode) {
    if (mode === "desktop") return "monitor";
    if (mode === "mobile") return "smartphone";
    if (mode === "any" || !mode) return "monitor-smartphone";
    return "monitor-check";
  }
  /**
   * Get device mode tooltip
   */
  getDeviceModeTooltip(mode) {
    if (mode === "desktop") return "Device mode: Desktop only";
    if (mode === "mobile") return "Device mode: Mobile only";
    if (mode === "any" || !mode) return "Device mode: All devices";
    return "Device mode: This device";
  }
  /**
   * Remove item (exactly like Status Bar Organizer)
   */
  async removeItem(rowsContainer, item, settings) {
    var _a;
    const entry = rowsContainer.querySelector(`[data-ui-tweaker-id="${item.id}"]`);
    if (entry) {
      rowsContainer.removeChild(entry);
    }
    await ((_a = this.plugin.statusBarManager) == null ? void 0 : _a.removeItem(item));
    void this.saveSettings();
  }
  /**
   * Handle mouse down for dragging (exactly like Status Bar Organizer)
   */
  handleMouseDown(event, rowsContainer, item, settings) {
    var _a, _b;
    if (dragging) return;
    dragging = true;
    const entry = rowsContainer.querySelector(`[data-ui-tweaker-id="${item.id}"]`);
    if (!entry) return;
    const stationaryRow = entry;
    stationaryRow.addClass("ui-tweaker-status-bar-row-clone");
    const movableRow = document.createElement("div");
    movableRow.addClass("ui-tweaker-status-bar-row");
    movableRow.addClass("ui-tweaker-status-bar-row-drag");
    setCssProps(movableRow, {
      display: "grid",
      gridTemplateColumns: "1.25em 0.5fr 0.8fr 2em 2em 2em 2em 2em 2em"
    });
    if (item.hidden) movableRow.addClass("ui-tweaker-status-bar-row-hidden");
    if (item.type === "existing") {
      const statusBarContainer = (_a = this.plugin.app.statusBar) == null ? void 0 : _a.containerEl;
      const actualElement = statusBarContainer == null ? void 0 : statusBarContainer.querySelector(`[data-ui-tweaker-id="${item.id}"]`);
      if (!actualElement) movableRow.addClass("ui-tweaker-status-bar-row-disabled");
    }
    const wrapper = rowsContainer.closest(".ui-tweaker-status-bar-rows-wrapper") || rowsContainer.parentElement || rowsContainer;
    wrapper.appendChild(movableRow);
    const containerX = wrapper.getBoundingClientRect().left;
    const containerY = wrapper.getBoundingClientRect().top;
    const stationaryRect = stationaryRow.getBoundingClientRect();
    setCssProps(movableRow, {
      position: "absolute",
      left: stationaryRect.left - containerX + "px",
      top: stationaryRect.top - containerY + "px",
      width: stationaryRow.offsetWidth + "px"
    });
    movableRow.createSpan("ui-tweaker-status-bar-row-handle");
    const dragTitle = movableRow.createSpan("ui-tweaker-status-bar-row-title");
    dragTitle.textContent = item.name;
    const dragPreview = movableRow.createSpan("ui-tweaker-status-bar-row-preview");
    if (item.type === "existing") {
      const statusBarContainer = (_b = this.plugin.app.statusBar) == null ? void 0 : _b.containerEl;
      const actualElement = statusBarContainer == null ? void 0 : statusBarContainer.querySelector(`[data-ui-tweaker-status-bar-id="${item.id}"]`);
      if (actualElement) {
        const cloned = actualElement.cloneNode(true);
        cloned.removeAttribute("aria-label");
        cloned.removeAttribute("title");
        cloned.querySelectorAll("[aria-label], [title]").forEach((el) => {
          el.removeAttribute("aria-label");
          el.removeAttribute("title");
        });
        dragPreview.appendChild(cloned);
      }
    } else if (item.icon) {
      const previewIcon = dragPreview.createSpan("status-bar-item clickable-icon");
      (0, import_obsidian8.setIcon)(previewIcon, item.icon);
      previewIcon.removeAttribute("aria-label");
      previewIcon.removeAttribute("title");
      if (item.color && item.color !== "#000000") {
        setCssProps(previewIcon, { color: item.color });
      }
    }
    movableRow.createSpan("ui-tweaker-status-bar-row-reset-color");
    movableRow.createSpan("ui-tweaker-status-bar-row-color-picker");
    movableRow.createSpan("ui-tweaker-status-bar-row-device-mode");
    movableRow.createSpan("ui-tweaker-status-bar-row-md-only");
    const dragLock = movableRow.createSpan("ui-tweaker-status-bar-row-lock");
    (0, import_obsidian8.setIcon)(dragLock, item.sticky ? "lock" : "unlock");
    const dragVisibility = movableRow.createSpan("ui-tweaker-status-bar-row-visibility");
    (0, import_obsidian8.setIcon)(dragVisibility, item.hidden ? "eye-off" : "eye");
    let offsetX = event.clientX - movableRow.getBoundingClientRect().left;
    let offsetY = event.clientY - movableRow.getBoundingClientRect().top;
    offsetX = offsetX + containerX;
    offsetY = offsetY + containerY;
    let index = Array.from(rowsContainer.children).indexOf(stationaryRow);
    const handleMouseMove = (e) => {
      var _a2;
      setCssProps(movableRow, {
        left: e.clientX - offsetX + "px",
        top: e.clientY - offsetY + "px"
      });
      const dist = movableRow.getBoundingClientRect().top - stationaryRow.getBoundingClientRect().top;
      if (Math.abs(dist) > stationaryRow.offsetHeight * 0.75) {
        const dir = dist / Math.abs(dist);
        const newIndex = Math.max(0, Math.min(index + dir, rowsContainer.children.length - 1));
        if (newIndex !== index) {
          rowsContainer.removeChild(stationaryRow);
          if (newIndex < rowsContainer.children.length) {
            rowsContainer.insertBefore(stationaryRow, rowsContainer.children[newIndex]);
          } else {
            rowsContainer.appendChild(stationaryRow);
          }
          if (settings.statusBarItems) {
            const oldIndex = settings.statusBarItems.findIndex((i) => i.id === item.id);
            if (oldIndex !== -1 && oldIndex !== newIndex) {
              arrayMoveMutable2(settings.statusBarItems, oldIndex, newIndex);
              (_a2 = this.plugin.statusBarManager) == null ? void 0 : _a2.reorder();
            }
          }
          index = newIndex;
        }
      }
    };
    const handleMouseUp = () => {
      var _a2;
      stationaryRow.removeClass("ui-tweaker-status-bar-row-clone");
      if (movableRow.parentElement === wrapper) {
        wrapper.removeChild(movableRow);
      }
      dragging = false;
      window.removeEventListener("mousemove", handleMouseMove);
      window.removeEventListener("mouseup", handleMouseUp);
      (_a2 = this.plugin.statusBarManager) == null ? void 0 : _a2.reorder();
      void this.saveSettings();
    };
    window.addEventListener("mousemove", handleMouseMove);
    window.addEventListener("mouseup", handleMouseUp);
  }
};

// src/ui/tabs/ExplorerTab.ts
var import_obsidian9 = require("obsidian");
function arrayMoveMutable3(array, from, to) {
  const item = array[from];
  array.splice(from, 1);
  array.splice(to, 0, item);
}
var ExplorerTab = class extends TabRenderer {
  constructor() {
    super(...arguments);
    this.expandedStates = /* @__PURE__ */ new Map();
  }
  render(container) {
    container.empty();
    const settings = this.getSettings();
    if (!settings.explorerCommands) {
      settings.explorerCommands = [];
    }
    if (!settings.nativeExplorerButtonColors) {
      settings.nativeExplorerButtonColors = {
        newNote: void 0,
        newFolder: void 0,
        sortOrder: void 0,
        autoReveal: void 0,
        collapseAll: void 0
      };
    }
    if (!settings.nativeExplorerButtonIcons) {
      settings.nativeExplorerButtonIcons = {
        newNote: void 0,
        newFolder: void 0,
        sortOrder: void 0,
        autoReveal: void 0,
        collapseAll: void 0
      };
    }
    const nativeButtonsContainer = container.createDiv({ cls: "native-explorer-buttons-container" });
    this.renderNativeButtonControls(nativeButtonsContainer, container);
    container.createEl("hr");
    settings.explorerCommands.forEach((pair, index) => {
      this.renderCommandItem(container, pair, index);
    });
    if (settings.explorerCommands.length > 0) {
      container.createEl("hr");
    }
    const addGroup = createSettingsGroup(container, void 0, "ui-tweaker");
    addGroup.addSetting((setting) => {
      setting.setName("Add command").setDesc("Add a new command button to the file explorer navigation area").addButton((button) => {
        const buttonEl = button.buttonEl;
        const iconContainer = buttonEl.createSpan({ cls: "ui-tweaker-add-icon" });
        (0, import_obsidian9.setIcon)(iconContainer, "lucide-image-plus");
        buttonEl.insertBefore(iconContainer, buttonEl.firstChild);
        button.setButtonText("Add command").setCta().onClick(() => {
          void (async () => {
            var _a;
            try {
              const pair = await chooseNewCommand(this.plugin);
              settings.explorerCommands.push(pair);
              await this.saveSettings();
              (_a = this.plugin.explorerManager) == null ? void 0 : _a.reorder();
              this.render(container);
            } catch (e) {
            }
          })();
        });
      });
    });
    const warningDiv = container.createEl("div", {
      cls: "callout",
      attr: { "data-callout": "warning" }
    });
    warningDiv.createEl("p", {
      text: "When clicking on a command in the explorer, the explorer view will become focused. This might interfere with commands that are supposed to be executed on an active file or explorer."
    });
  }
  renderNativeButtonControls(container, mainContainer) {
    container.empty();
    const settings = this.getSettings();
    const group = createSettingsGroup(container, "Native explorer buttons", "ui-tweaker");
    const scrollContainer = mainContainer || container;
    const renderNativeButton = (name, settingKey, colorKey) => {
      var _a, _b;
      const isHidden = settings[settingKey];
      const color = (_a = settings.nativeExplorerButtonColors) == null ? void 0 : _a[colorKey];
      const iconOverride = (_b = settings.nativeExplorerButtonIcons) == null ? void 0 : _b[colorKey];
      group.addSetting((setting) => {
        setting.setName(name).setDesc("").addExtraButton((button) => {
          const iconEl = button.extraSettingsEl;
          (0, import_obsidian9.setIcon)(iconEl, isHidden ? "eye-off" : "eye");
          button.setTooltip(isHidden ? "Show button" : "Hide button");
          button.onClick(() => {
            void (async () => {
              const currentValue = settings[settingKey];
              settings[settingKey] = !currentValue;
              await this.saveSettings();
              const newIsHidden = settings[settingKey];
              (0, import_obsidian9.setIcon)(iconEl, newIsHidden ? "eye-off" : "eye");
              button.setTooltip(newIsHidden ? "Show button" : "Hide button");
            })();
          });
          button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
        });
        if (color) {
          setting.addColorPicker((colorPicker) => {
            colorPicker.setValue(color);
            const controlEl = setting.controlEl;
            controlEl.addEventListener("click", (e) => e.stopPropagation());
            setTimeout(() => {
              const colorInput = controlEl.querySelector('input[type="color"]');
              if (colorInput) {
                colorInput.addEventListener("click", (e) => e.stopPropagation());
              }
            }, 0);
            setTimeout(() => {
              const colorPickerEl = controlEl.querySelector(".color-picker") || controlEl.lastElementChild;
              const resetButton = controlEl.createEl("button", {
                cls: "clickable-icon ui-tweaker-color-reset",
                attr: { "aria-label": "Reset to default color" }
              });
              (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
              setCssProps(resetButton, { marginRight: "0.5rem" });
              resetButton.addEventListener("click", (e) => {
                e.stopPropagation();
                e.stopImmediatePropagation();
                e.preventDefault();
                const scrollPos = scrollContainer.scrollTop;
                void (async () => {
                  if (!settings.nativeExplorerButtonColors) {
                    settings.nativeExplorerButtonColors = {};
                  }
                  settings.nativeExplorerButtonColors[colorKey] = void 0;
                  await this.saveSettings();
                  this.renderNativeButtonControls(container, mainContainer);
                  requestAnimationFrame(() => {
                    scrollContainer.scrollTop = scrollPos;
                  });
                })();
              });
              if (colorPickerEl) {
                controlEl.insertBefore(resetButton, colorPickerEl);
              } else {
                controlEl.insertBefore(resetButton, controlEl.firstChild);
              }
            }, 0);
            colorPicker.onChange((value) => {
              void (async () => {
                if (!settings.nativeExplorerButtonColors) {
                  settings.nativeExplorerButtonColors = {};
                }
                settings.nativeExplorerButtonColors[colorKey] = value;
                await this.saveSettings();
              })();
            });
          });
        } else {
          setting.addButton((button) => {
            button.setButtonText("Set color...").onClick(() => {
              const scrollPos = scrollContainer.scrollTop;
              if (!settings.nativeExplorerButtonColors) {
                settings.nativeExplorerButtonColors = {};
              }
              settings.nativeExplorerButtonColors[colorKey] = "#000000";
              void (async () => {
                await this.saveSettings();
                this.renderNativeButtonControls(container, mainContainer);
                requestAnimationFrame(() => {
                  scrollContainer.scrollTop = scrollPos;
                });
              })();
            });
            button.buttonEl.addEventListener("click", (e) => e.stopPropagation());
          });
        }
        setting.addButton((button) => {
          const currentIcon = iconOverride || "Default";
          button.setButtonText(currentIcon === "Default" ? "Set icon..." : currentIcon).onClick(() => {
            const modal = new IconPickerModal(this.app, (iconId) => {
              void (async () => {
                var _a2;
                const scrollPos = scrollContainer.scrollTop;
                if (!settings.nativeExplorerButtonIcons) {
                  settings.nativeExplorerButtonIcons = {};
                }
                if (iconId) {
                  settings.nativeExplorerButtonIcons[colorKey] = iconId;
                } else {
                  settings.nativeExplorerButtonIcons[colorKey] = void 0;
                }
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
                this.renderNativeButtonControls(container, mainContainer);
                requestAnimationFrame(() => {
                  scrollContainer.scrollTop = scrollPos;
                });
              })();
            });
            modal.open();
          });
          button.buttonEl.addEventListener("click", (e) => e.stopPropagation());
          if (iconOverride) {
            setTimeout(() => {
              const controlEl = setting.controlEl;
              const buttonEl = controlEl.querySelector("button") || controlEl.lastElementChild;
              const resetButton = controlEl.createEl("button", {
                cls: "clickable-icon ui-tweaker-icon-reset",
                attr: { "aria-label": "Reset to default icon" }
              });
              (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
              setCssProps(resetButton, { marginRight: "0.5rem" });
              resetButton.addEventListener("click", (e) => {
                e.stopPropagation();
                e.stopImmediatePropagation();
                e.preventDefault();
                const scrollPos = scrollContainer.scrollTop;
                void (async () => {
                  var _a2;
                  if (!settings.nativeExplorerButtonIcons) {
                    settings.nativeExplorerButtonIcons = {};
                  }
                  settings.nativeExplorerButtonIcons[colorKey] = void 0;
                  await this.saveSettings();
                  (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.applyNativeIconOverrides();
                  this.renderNativeButtonControls(container, mainContainer);
                  requestAnimationFrame(() => {
                    scrollContainer.scrollTop = scrollPos;
                  });
                })();
              });
              if (buttonEl) {
                controlEl.insertBefore(resetButton, buttonEl);
              } else {
                controlEl.insertBefore(resetButton, controlEl.firstChild);
              }
            }, 0);
          }
        });
      });
    };
    renderNativeButton("New note", "newNoteButton", "newNote");
    renderNativeButton("New folder", "newFolderButton", "newFolder");
    renderNativeButton("Sort order", "sortOrderButton", "sortOrder");
    renderNativeButton("Auto-reveal", "autoRevealButton", "autoReveal");
    renderNativeButton("Collapse all", "collapseAllButton", "collapseAll");
  }
  renderCommandItem(container, pair, index) {
    const settings = this.getSettings();
    const group = createSettingsGroup(container, void 0, "ui-tweaker");
    const otherSettings = [];
    const displayName = pair.displayName || pair.name;
    group.addSetting((setting) => {
      var _a;
      setting.settingEl.addEventListener("click", (e) => {
        const target = e.target;
        const isChevronClick = target.closest(".ui-tweaker-collapse-icon") !== null;
        const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
        const isNameEdit = target.closest(".ui-tweaker-name-display") !== null || target.closest(".ui-tweaker-edit-icon") !== null || target.closest(".ui-tweaker-editable-name") !== null;
        if (!isChevronClick && !isExtraButton && !isNameEdit) {
          e.stopPropagation();
          e.stopImmediatePropagation();
          e.preventDefault();
          return false;
        }
      }, true);
      setting.settingEl.addEventListener("click", (e) => {
        const target = e.target;
        const isChevronClick = target.closest(".ui-tweaker-collapse-icon") !== null;
        const isExtraButton = target.closest(".extra-setting-button") !== null || target.closest(".clickable-icon.extra-setting-button") !== null;
        const isNameEdit = target.closest(".ui-tweaker-name-display") !== null || target.closest(".ui-tweaker-edit-icon") !== null || target.closest(".ui-tweaker-editable-name") !== null;
        if (!isChevronClick && !isExtraButton && !isNameEdit) {
          e.stopPropagation();
          e.stopImmediatePropagation();
          e.preventDefault();
          return false;
        }
      }, false);
      const nameEl = setting.nameEl;
      setCssProps(nameEl, { display: "flex", alignItems: "center", gap: "0.5rem", width: "100%" });
      const chevronContainer = document.createElement("div");
      chevronContainer.className = "ui-tweaker-collapse-icon";
      setCssProps(chevronContainer, {
        cursor: "default",
        background: "transparent",
        padding: "0",
        margin: "0",
        display: "inline-flex",
        alignItems: "center",
        justifyContent: "center"
      });
      nameEl.insertBefore(chevronContainer, nameEl.firstChild);
      let isExpanded = (_a = this.expandedStates.get(pair.id)) != null ? _a : false;
      (0, import_obsidian9.setIcon)(chevronContainer, isExpanded ? "chevrons-down-up" : "chevrons-up-down");
      chevronContainer.addEventListener("click", (e) => {
        e.stopPropagation();
        e.stopImmediatePropagation();
        e.preventDefault();
        isExpanded = !isExpanded;
        this.expandedStates.set(pair.id, isExpanded);
        (0, import_obsidian9.setIcon)(chevronContainer, isExpanded ? "chevrons-down-up" : "chevrons-up-down");
        otherSettings.forEach((settingEl) => {
          setCssProps(settingEl, { display: isExpanded ? "" : "none" });
        });
      });
      const nameContainer = nameEl.createDiv({ cls: "ui-tweaker-editable-name" });
      setCssProps(nameContainer, { display: "flex", alignItems: "center", gap: "0.5rem" });
      const createNameDisplay = (name) => {
        nameContainer.empty();
        const display = nameContainer.createSpan({
          text: name === displayName ? name : `${name} (${displayName})`,
          cls: "ui-tweaker-name-display"
        });
        const iconContainer = nameContainer.createDiv({ cls: "ui-tweaker-edit-icon" });
        setCssProps(iconContainer, { opacity: "0.6" });
        (0, import_obsidian9.setIcon)(iconContainer, "lucide-pencil-line");
        const startEdit = () => {
          const currentName = pair.name;
          nameContainer.empty();
          const nameInput = nameContainer.createEl("input", {
            type: "text",
            value: currentName
          });
          nameInput.addClass("mod-text-input");
          nameInput.focus();
          nameInput.select();
          const saveName = () => {
            var _a2;
            nameInput.removeEventListener("blur", saveName);
            let newName = nameInput.value.trim();
            if (!newName) {
              newName = currentName;
            }
            pair.name = newName;
            (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.updateButtonNames();
            void (async () => {
              await this.saveSettings();
              this.render(container);
            })();
          };
          nameInput.addEventListener("keydown", (e) => {
            if (e.key === "Enter") {
              e.preventDefault();
              saveName();
            } else if (e.key === "Escape") {
              e.preventDefault();
              createNameDisplay(currentName);
            }
          });
          nameInput.addEventListener("blur", saveName);
        };
        display.addEventListener("click", startEdit);
        iconContainer.addEventListener("click", startEdit);
        iconContainer.addEventListener("mouseenter", () => {
          setCssProps(iconContainer, { opacity: "1" });
        });
        iconContainer.addEventListener("mouseleave", () => {
          setCssProps(iconContainer, { opacity: "0.6" });
        });
      };
      createNameDisplay(pair.name);
      setting.setDesc("").addExtraButton((button) => {
        const iconEl = button.extraSettingsEl;
        (0, import_obsidian9.setIcon)(iconEl, pair.icon);
        iconEl.setAttribute("data-explorer-command-id", pair.id);
        if (pair.color && pair.color !== "#000000") {
          setCssProps(iconEl, { color: pair.color });
        } else {
          iconEl.style.removeProperty("color");
        }
        button.setTooltip("Change icon");
        button.onClick(() => {
          const modal = new IconPickerModal(this.app, (iconId) => {
            void (async () => {
              var _a2;
              if (iconId && iconId !== pair.icon) {
                pair.icon = iconId;
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
                this.render(container);
              }
            })();
          });
          modal.open();
        });
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("chevron-up");
        if (index > 0) {
          button.setTooltip("Move up");
          button.onClick(() => {
            void (async () => {
              var _a2;
              arrayMoveMutable3(settings.explorerCommands, index, index - 1);
              await this.saveSettings();
              (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
              this.render(container);
            })();
          });
        } else {
          button.setTooltip("Already at top");
          button.extraSettingsEl.addClass("ui-tweaker-disabled-button");
          setCssProps(button.extraSettingsEl, { pointerEvents: "none" });
        }
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("chevron-down");
        if (index < settings.explorerCommands.length - 1) {
          button.setTooltip("Move down");
          button.onClick(() => {
            void (async () => {
              var _a2;
              arrayMoveMutable3(settings.explorerCommands, index, index + 1);
              await this.saveSettings();
              (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
              this.render(container);
            })();
          });
        } else {
          button.setTooltip("Already at bottom");
          button.extraSettingsEl.addClass("ui-tweaker-disabled-button");
          setCssProps(button.extraSettingsEl, { pointerEvents: "none" });
        }
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      }).addExtraButton((button) => {
        button.setIcon("trash");
        button.setTooltip("Delete");
        button.extraSettingsEl.addClass("mod-warning");
        setCssProps(button.extraSettingsEl, { color: "var(--text-error)" });
        button.onClick(() => {
          void (async () => {
            var _a2;
            const idx = settings.explorerCommands.indexOf(pair);
            if (idx > -1) {
              settings.explorerCommands.splice(idx, 1);
              await this.saveSettings();
              (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
              this.render(container);
            }
          })();
        });
        button.extraSettingsEl.addEventListener("click", (e) => e.stopPropagation());
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      setting.setName("Device mode").setDesc("Choose which devices this button appears on").addDropdown((dropdown) => {
        const appId = this.app.appId || "this-device";
        dropdown.addOption("any", "All devices").addOption("desktop", "Desktop only").addOption("mobile", "Mobile only").addOption(appId, "This device").setValue(pair.mode || "any").onChange((value) => {
          void (async () => {
            var _a;
            pair.mode = value;
            await this.saveSettings();
            (_a = this.plugin.explorerManager) == null ? void 0 : _a.reorder();
            this.render(container);
          })();
        });
        dropdown.selectEl.addEventListener("click", (e) => e.stopPropagation());
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      const hasColor = pair.color !== void 0;
      setting.setName("Custom color").setDesc("Set a custom color for this icon").addColorPicker((colorPicker) => {
        var _a;
        const currentColor = (_a = pair.color) != null ? _a : "#000000";
        colorPicker.setValue(currentColor);
        const controlEl = setting.controlEl;
        controlEl.addEventListener("click", (e) => e.stopPropagation());
        setTimeout(() => {
          const colorInput = controlEl.querySelector('input[type="color"]');
          if (colorInput) {
            colorInput.addEventListener("click", (e) => e.stopPropagation());
          }
        }, 0);
        if (hasColor) {
          setTimeout(() => {
            const colorPickerEl = controlEl.querySelector(".color-picker") || controlEl.lastElementChild;
            const resetButton = controlEl.createEl("button", {
              cls: "clickable-icon ui-tweaker-color-reset",
              attr: { "aria-label": "Reset to default color" }
            });
            (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
            setCssProps(resetButton, { marginRight: "0.5rem" });
            resetButton.addEventListener("click", (e) => {
              e.stopPropagation();
              e.stopImmediatePropagation();
              e.preventDefault();
              void (async () => {
                var _a2;
                pair.color = void 0;
                const iconButton = container.querySelector(`[data-explorer-command-id="${pair.id}"]`);
                if (iconButton) {
                  iconButton.style.removeProperty("color");
                }
                await this.saveSettings();
                (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
                this.render(container);
              })();
            });
            if (colorPickerEl) {
              controlEl.insertBefore(resetButton, colorPickerEl);
            } else {
              controlEl.insertBefore(resetButton, controlEl.firstChild);
            }
          }, 0);
        }
        colorPicker.onChange((value) => {
          if (value === "#000000") {
            pair.color = void 0;
          } else {
            pair.color = value;
          }
          const iconButton = container.querySelector(`[data-explorer-command-id="${pair.id}"]`);
          if (iconButton) {
            if (pair.color && pair.color !== "#000000") {
              setCssProps(iconButton, { color: pair.color });
            } else {
              iconButton.style.removeProperty("color");
            }
          }
          void (async () => {
            var _a2;
            await this.saveSettings();
            (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
            this.render(container);
          })();
        });
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      const hasToggleIcon = pair.toggleIcon !== void 0;
      setting.setName("Toggle icon").setDesc("Icon to show when command is toggled on (leave empty to disable toggle). Commands with check callback work automatically. See readme for plugin developer compatibility notes.").setTooltip("For plugin developers: Commands with checkCallback work automatically. See https://github.com/davidvkimball/obsidian-ui-tweaker#toggle-icon-feature-compatibility for details.").addButton((button) => {
        const currentToggleIcon = pair.toggleIcon || "None";
        button.setButtonText(currentToggleIcon === "None" ? "Set toggle icon..." : currentToggleIcon).onClick(() => {
          const modal = new IconPickerModal(this.app, (iconId) => {
            void (async () => {
              var _a;
              if (iconId) {
                pair.toggleIcon = iconId;
              } else {
                pair.toggleIcon = void 0;
              }
              await this.saveSettings();
              (_a = this.plugin.explorerManager) == null ? void 0 : _a.reorder();
              this.render(container);
            })();
          });
          modal.open();
        });
        button.buttonEl.addEventListener("click", (e) => e.stopPropagation());
        if (hasToggleIcon) {
          setTimeout(() => {
            const controlEl = setting.controlEl;
            const buttonEl = controlEl.querySelector("button") || controlEl.lastElementChild;
            const resetButton = controlEl.createEl("button", {
              cls: "clickable-icon ui-tweaker-toggle-icon-reset",
              attr: { "aria-label": "Reset toggle icon" }
            });
            (0, import_obsidian9.setIcon)(resetButton, "lucide-rotate-cw");
            setCssProps(resetButton, { marginRight: "0.5rem" });
            resetButton.addEventListener("click", (e) => {
              e.stopPropagation();
              e.stopImmediatePropagation();
              e.preventDefault();
              const scrollContainer = container.closest(".vertical-tab-content") || container.closest(".settings-content") || container.closest(".vertical-tab-content-container") || container;
              const scrollPos = scrollContainer.scrollTop;
              void (async () => {
                var _a;
                pair.toggleIcon = void 0;
                await this.saveSettings();
                (_a = this.plugin.explorerManager) == null ? void 0 : _a.reorder();
                this.render(container);
                requestAnimationFrame(() => {
                  scrollContainer.scrollTop = scrollPos;
                  setTimeout(() => {
                    scrollContainer.scrollTop = scrollPos;
                  }, 0);
                });
              })();
            });
            if (buttonEl) {
              controlEl.insertBefore(resetButton, buttonEl);
            } else {
              controlEl.insertBefore(resetButton, controlEl.firstChild);
            }
          }, 0);
        }
      });
    });
    group.addSetting((setting) => {
      otherSettings.push(setting.settingEl);
      setting.setName("Use active class instead of icon swap").setDesc("When toggled on, add is-active class instead of swapping icon (explorer only)").addToggle((toggle) => {
        var _a;
        toggle.setValue((_a = pair.useActiveClass) != null ? _a : false);
        toggle.onChange((value) => {
          void (async () => {
            var _a2;
            pair.useActiveClass = value;
            await this.saveSettings();
            (_a2 = this.plugin.explorerManager) == null ? void 0 : _a2.reorder();
            this.render(container);
          })();
        });
        toggle.toggleEl.addEventListener("click", (e) => e.stopPropagation());
      });
    });
    setTimeout(() => {
      var _a;
      const savedExpanded = (_a = this.expandedStates.get(pair.id)) != null ? _a : false;
      otherSettings.forEach((settingEl) => {
        setCssProps(settingEl, { display: savedExpanded ? "" : "none" });
      });
    }, 0);
  }
};

// src/ui/tabs/MobileTab.ts
var MobileTab = class extends TabRenderer {
  render(container) {
    const mobileGroup = createSettingsGroup(container, "Mobile", "ui-tweaker");
    this.addToggleSetting(mobileGroup, 'Hide "Mobile chevrons" icon', 'Hide "Mobile chevrons" icon (long-press flair) in mobile navbar.', "mobileChevronsIcon");
    this.addToggleSetting(mobileGroup, 'Hide "Navigate back" button', 'Hide "Navigate back" button in mobile navbar.', "navigateBackButton");
    this.addToggleSetting(mobileGroup, 'Hide "Navigate forward" button', 'Hide "Navigate forward" button in mobile navbar.', "navigateForwardButton");
    this.addToggleSetting(mobileGroup, 'Hide "Quick switcher" button', 'Hide "Quick switcher" button in mobile navbar.', "quickSwitcherButton");
    this.addToggleSetting(mobileGroup, 'Hide "New tab" button', 'Hide "New tab" button in mobile navbar.', "mobileNewTabButton");
    this.addToggleSetting(mobileGroup, 'Hide "Open tabs" button', 'Hide "Open tabs" button in mobile navbar.', "openTabButton");
    this.addToggleSetting(mobileGroup, 'Hide "Ribbon menu" button', 'Hide "Ribbon menu" button in mobile navbar.', "ribbonMenuButton");
    this.addToggleSetting(mobileGroup, "Swap mobile new tab icon", "Replace the new tab plus icon with a home button icon in mobile navbar.", "swapMobileNewTabIcon");
    this.addToggleSetting(mobileGroup, "Hide title", "Hide the title in mobile view headers.", "hideMobileTitle");
    this.addToggleSetting(mobileGroup, "Hide sync icon", "Hide sync status icons in mobile interface.", "hideMobileSyncIcon");
    this.renderSyncButtonReplacement(mobileGroup);
    const mobileNavGroup = createSettingsGroup(container, "Mobile navigation menu", "ui-tweaker");
    this.addPositionSetting(mobileNavGroup, '"Navigate back" button position', 'Select the position for the "Navigate back" button (default 1).', "navigateButtonPosition");
    this.addPositionSetting(mobileNavGroup, '"Navigate forward" button position', 'Select the position for the "Navigate forward" button (default 2).', "navigationButtonPosition");
    this.addPositionSetting(mobileNavGroup, '"Quick switcher" button position', 'Select the position for the "Quick switcher" button (default 3).', "quickSwitcherPosition");
    this.addPositionSetting(mobileNavGroup, '"New tab" button position', 'Select the position for the "New tab" button (default 4).', "newTabPosition");
    this.addPositionSetting(mobileNavGroup, '"Open tabs" button position', 'Select the position for the "Open tabs" button (default 5).', "openTabsPosition");
    this.addPositionSetting(mobileNavGroup, '"Ribbon menu" button position', 'Select the position for the "Ribbon menu" button (default 6).', "ribbonMenuPosition");
  }
  addToggleSetting(group, name, desc, key) {
    group.addSetting((setting) => {
      setting.setName(name).setDesc(desc).addToggle(
        (toggle) => toggle.setValue(Boolean(this.getSettings()[key])).onChange((value) => {
          this.getSettings()[key] = value;
          void this.saveSettings();
        })
      );
    });
  }
  addPositionSetting(group, name, desc, key) {
    group.addSetting((setting) => {
      setting.setName(name).setDesc(desc).addDropdown((dropdown) => {
        for (let i = 1; i <= 6; i++) {
          dropdown.addOption(String(i), String(i));
        }
        const currentValue = this.getSettings()[key];
        const stringValue = typeof currentValue === "string" ? currentValue : "1";
        dropdown.setValue(stringValue).onChange((value) => {
          this.getSettings()[key] = value;
          void this.saveSettings();
        });
      });
    });
  }
  renderSyncButtonReplacement(group) {
    const settings = this.getSettings();
    if (!settings.syncButtonReplacement) {
      settings.syncButtonReplacement = {
        enabled: false,
        commandId: "open-settings",
        iconId: "wrench"
      };
    }
    group.addSetting((setting) => {
      setting.setName("Replace sync button with custom action").setDesc("Replace the sync button in the mobile sidebar with a custom icon and command. This will hide the original sync button and show your custom button instead.").addToggle(
        (toggle) => toggle.setValue(settings.syncButtonReplacement.enabled).onChange((value) => {
          if (!settings.syncButtonReplacement) {
            settings.syncButtonReplacement = {
              enabled: true,
              commandId: "",
              iconId: "wrench"
            };
          }
          settings.syncButtonReplacement.enabled = value;
          void this.saveSettings();
        })
      );
    });
    if (settings.syncButtonReplacement.enabled) {
      const getCommandName = (commandId) => {
        if (!commandId) return "Select command...";
        try {
          const commandRegistry = this.app.commands;
          if (commandRegistry && typeof commandRegistry.listCommands === "function") {
            const commands = commandRegistry.listCommands();
            const command = commands.find(
              (cmd) => cmd && cmd.name && (cmd.id === commandId || cmd.id === commandId.replace(/^ui-tweaker:+/g, "") || cmd.id === `ui-tweaker:${commandId.replace(/^ui-tweaker:+/g, "")}`)
            );
            if (command == null ? void 0 : command.name) {
              return command.name;
            }
          }
        } catch (e) {
        }
        return "Select command...";
      };
      const commandName = getCommandName(settings.syncButtonReplacement.commandId);
      group.addSetting((setting) => {
        setting.setName("Command").setDesc("Select the command to execute when the button is clicked").addButton(
          (button) => button.setButtonText(commandName || "Select command...").onClick(() => {
            const modal = new CommandPickerModal(this.app, (commandId) => {
              if (!settings.syncButtonReplacement) {
                settings.syncButtonReplacement = {
                  enabled: true,
                  commandId: "",
                  iconId: "wrench"
                };
              }
              settings.syncButtonReplacement.commandId = commandId;
              void this.saveSettings();
            });
            modal.open();
          })
        );
      });
      const getIconName = (iconId) => {
        if (!iconId) return "";
        return iconId.replace(/^lucide-/, "").split("-").map((word) => word.charAt(0).toUpperCase() + word.slice(1)).join(" ");
      };
      const iconName = getIconName(settings.syncButtonReplacement.iconId);
      group.addSetting((setting) => {
        setting.setName("Icon").setDesc("Select the icon to display on the button").addButton(
          (button) => button.setButtonText(iconName || "Select icon...").onClick(() => {
            const modal = new IconPickerModal(this.app, (iconId) => {
              if (!settings.syncButtonReplacement) {
                settings.syncButtonReplacement = {
                  enabled: true,
                  commandId: "open-settings",
                  iconId: "wrench"
                };
              }
              settings.syncButtonReplacement.iconId = iconId;
              void this.saveSettings();
            });
            modal.open();
          })
        );
      });
    }
  }
};

// src/ui/SettingsTab.ts
var UITweakerSettingTab = class extends import_obsidian10.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    this.render();
  }
  render() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.addClass("ui-tweaker-settings");
    const tabContainer = containerEl.createDiv("tab-container");
    const tabNav = tabContainer.createDiv("tab-nav");
    const tabContent = tabContainer.createDiv("tab-content");
    const tabs = [
      {
        id: "hider",
        name: "Hider",
        renderer: new HiderTab(this.app, this.plugin)
      },
      {
        id: "status-bar",
        name: "Status bar",
        renderer: new StatusBarTab(this.app, this.plugin)
      },
      {
        id: "tab-bar",
        name: "Tab bar",
        renderer: new TabBarTab(this.app, this.plugin)
      },
      {
        id: "explorer",
        name: "Explorer",
        renderer: new ExplorerTab(this.app, this.plugin)
      },
      {
        id: "mobile",
        name: "Mobile",
        renderer: new MobileTab(this.app, this.plugin)
      }
    ];
    tabs.forEach((tab, index) => {
      const button = tabNav.createEl("button", {
        text: tab.name,
        cls: `tab-button ${index === 0 ? "active" : ""}`
      });
      button.addEventListener("click", () => {
        tabNav.querySelectorAll(".tab-button").forEach((btn) => btn.classList.remove("active"));
        button.classList.add("active");
        tabContent.empty();
        void tab.renderer.render(tabContent);
      });
    });
    void tabs[0].renderer.render(tabContent);
  }
};

// src/manager/TabBarManager.ts
var import_obsidian12 = require("obsidian");

// src/utils/commandUtils.ts
var import_obsidian11 = require("obsidian");
function isMarkdownView(leaf) {
  if (!(leaf == null ? void 0 : leaf.view)) return false;
  if (leaf.view instanceof import_obsidian11.MarkdownView) {
    const file = leaf.view.file;
    if (!file) return false;
    const ext = file.extension.toLowerCase();
    return ext === "md" || ext === "mdx";
  }
  return false;
}
function getFileExtension(leaf) {
  if (!(leaf == null ? void 0 : leaf.view)) return null;
  const view = leaf.view;
  const file = view.file;
  if (!file) return null;
  return file.extension.toLowerCase();
}
function parseFileTypes(types) {
  if (!types || !types.trim()) return [];
  return types.split(",").map((p) => p.trim().replace(/^\./, "").toLowerCase()).filter((p) => p);
}
function matchesFileTypeFilter(leaf, showOnFileTypes, hideOnFileTypes) {
  const fileExt = getFileExtension(leaf);
  if (!fileExt) return false;
  const showTypes = parseFileTypes(showOnFileTypes);
  const hideTypes = parseFileTypes(hideOnFileTypes);
  if (hideTypes.length > 0 && hideTypes.includes(fileExt)) {
    return false;
  }
  if (showTypes.length > 0) {
    return showTypes.includes(fileExt);
  }
  return true;
}
function isModeActive(mode, plugin) {
  var _a;
  const app = plugin.app;
  const isMobile = (_a = app.isMobile) != null ? _a : false;
  const appId = app.appId;
  if (mode !== "any" && mode !== "desktop" && mode !== "mobile") {
    return mode === appId;
  }
  return mode === "any" || mode === "mobile" && isMobile || mode === "desktop" && !isMobile;
}
function getCommandFromId(id, plugin) {
  var _a, _b;
  const commands = plugin.app.commands;
  return (_b = (_a = commands == null ? void 0 : commands.commands) == null ? void 0 : _a[id]) != null ? _b : null;
}
var CommandToggleTracker = class {
  constructor() {
    this.toggleStates = /* @__PURE__ */ new Map();
    this.previousStates = /* @__PURE__ */ new Map();
    this.executionCounts = /* @__PURE__ */ new Map();
  }
  /**
   * Record that a command was executed
   */
  recordExecution(id) {
    const currentCount = this.executionCounts.get(id) || 0;
    this.executionCounts.set(id, currentCount + 1);
    this.toggleStates.set(id, (currentCount + 1) % 2 === 1);
  }
  /**
   * Get tracked toggle state (for commands without checkCallback)
   */
  getTrackedState(id) {
    var _a;
    return (_a = this.toggleStates.get(id)) != null ? _a : null;
  }
  /**
   * Get previous toggle state (for change detection)
   */
  getPreviousState(id) {
    var _a;
    return (_a = this.previousStates.get(id)) != null ? _a : null;
  }
  /**
   * Reset tracked state for a command
   */
  resetState(id) {
    this.toggleStates.delete(id);
    this.previousStates.delete(id);
    this.executionCounts.delete(id);
  }
  /**
   * Sync tracked state with actual command state
   * Used when checkCallback reports a different state than tracked
   * Returns true if state changed, false otherwise
   */
  syncState(id, actualState) {
    const currentTrackedState = this.toggleStates.get(id);
    if (currentTrackedState !== void 0) {
      this.previousStates.set(id, currentTrackedState);
    }
    if (currentTrackedState !== actualState) {
      const currentCount = this.executionCounts.get(id) || 0;
      this.executionCounts.set(id, currentCount + 1);
      this.toggleStates.set(id, actualState);
      return true;
    }
    return false;
  }
  /**
   * Check if state has changed since last check
   */
  hasStateChanged(id, currentState) {
    const previousState = this.previousStates.get(id);
    return previousState !== void 0 && previousState !== currentState;
  }
};
var commandToggleTracker = new CommandToggleTracker();
function isCommandChecked(id, plugin) {
  var _a, _b, _c, _d, _e, _f;
  if (id === "theme:toggle-light-dark") {
    const isDark = document.body.classList.contains("theme-dark");
    commandToggleTracker.syncState(id, isDark);
    return isDark;
  }
  if (id === "editing-toolbar:hide-show-menu" || id === "hide-show-menu") {
    const plugins = plugin.app.plugins;
    const editingToolbarPlugin = (_a = plugins == null ? void 0 : plugins.plugins) == null ? void 0 : _a["editing-toolbar"];
    if (((_b = editingToolbarPlugin == null ? void 0 : editingToolbarPlugin.settings) == null ? void 0 : _b.cMenuVisibility) !== void 0) {
      const isVisible = editingToolbarPlugin.settings.cMenuVisibility;
      commandToggleTracker.syncState(id, isVisible);
      return isVisible;
    }
    return (_c = commandToggleTracker.getTrackedState(id)) != null ? _c : false;
  }
  const command = getCommandFromId(id, plugin);
  if (!command) {
    return (_d = commandToggleTracker.getTrackedState(id)) != null ? _d : false;
  }
  if (typeof command.checkCallback === "function") {
    try {
      const result = command.checkCallback(true);
      const isChecked = result === true;
      commandToggleTracker.syncState(id, isChecked);
      return isChecked;
    } catch (e) {
      return (_e = commandToggleTracker.getTrackedState(id)) != null ? _e : false;
    }
  }
  return (_f = commandToggleTracker.getTrackedState(id)) != null ? _f : false;
}
function recordCommandExecution(id) {
  commandToggleTracker.recordExecution(id);
}

// src/manager/TabBarManager.ts
var TabBarManager = class {
  constructor(plugin) {
    this.buttons = /* @__PURE__ */ new WeakMap();
    this.plugin = plugin;
    this.init();
  }
  get pairs() {
    return this.plugin.settings.tabBarCommands || [];
  }
  init() {
    this.plugin.register(() => {
      this.removeButtonsFromAllLeaves();
    });
    this.plugin.registerEvent(
      this.plugin.app.workspace.on("layout-change", () => {
        this.addButtonsToAllLeaves();
      })
    );
    this.plugin.app.workspace.onLayoutReady(
      () => setTimeout(() => this.addButtonsToAllLeaves(), 100)
    );
  }
  addPageHeaderButton(leaf, pair) {
    const { id } = pair;
    const name = pair.name;
    const { view } = leaf;
    if (!(view instanceof import_obsidian12.ItemView)) {
      return;
    }
    const buttons = this.buttonsFor(leaf, true);
    if (!buttons) {
      return;
    }
    if (buttons.has(id)) {
      const existingButton = buttons.get(id);
      if (existingButton) {
        existingButton.setAttribute("aria-label", name);
        existingButton.setAttribute("title", name);
        if (pair.color && pair.color !== "#000000") {
          setCssProps(existingButton, { color: pair.color });
        } else {
          existingButton.style.removeProperty("color");
        }
        this.updateButtonToggleState(existingButton, pair);
        return;
      }
    }
    if (!matchesFileTypeFilter(leaf, pair.showOnFileTypes, pair.hideOnFileTypes)) {
      return;
    }
    const initialIcon = this.getIconForToggleState(pair);
    const buttonIcon = view.addAction(initialIcon, name, () => {
      this.plugin.app.workspace.setActiveLeaf(leaf, { focus: true });
      const commands = this.plugin.app.commands;
      if (commands == null ? void 0 : commands.executeCommandById) {
        void commands.executeCommandById(id);
        setTimeout(() => {
          this.updateButtonToggleState(buttonIcon, pair);
          this.updateAllButtonsForCommand(id);
        }, 100);
      }
    });
    buttons.set(id, buttonIcon);
    buttonIcon.addClasses(["ui-tweaker-tab-bar-button", id]);
    if (pair.color && pair.color !== "#000000") {
      setCssProps(buttonIcon, { color: pair.color });
    }
    this.updateButtonToggleState(buttonIcon, pair);
    buttonIcon.addEventListener("contextmenu", (event) => {
      event.stopImmediatePropagation();
      new import_obsidian12.Menu().addItem((item) => {
        item.setTitle("Change icon").setIcon("lucide-image-plus").onClick(() => {
          const modal = new IconPickerModal(this.plugin.app, (iconId) => {
            if (iconId && iconId !== pair.icon) {
              pair.icon = iconId;
              void this.plugin.saveSettings();
              this.reorder();
            }
          });
          modal.open();
        });
      }).addItem((item) => {
        item.setTitle("Delete").setIcon("lucide-trash").onClick(() => {
          void this.removeCommand(pair);
        });
        const dom = item.dom;
        if (dom) {
          dom.classList.add("mod-warning");
          const iconEl = dom.querySelector(".menu-item-icon svg");
          if (iconEl) {
            setCssProps(iconEl, { color: "var(--text-error)" });
          }
        }
      }).showAtMouseEvent(event);
    });
  }
  buttonsFor(leaf, create = false) {
    if (!(leaf.view instanceof import_obsidian12.ItemView)) return;
    if (create && !this.buttons.has(leaf.view))
      this.buttons.set(leaf.view, /* @__PURE__ */ new Map());
    return this.buttons.get(leaf.view);
  }
  addButtonsToAllLeaves(refresh = false) {
    requestAnimationFrame(() => {
      this.plugin.app.workspace.iterateAllLeaves((leaf) => {
        this.addButtonsToLeaf(leaf, refresh);
      });
    });
  }
  removeButtonsFromAllLeaves() {
    requestAnimationFrame(
      () => this.plugin.app.workspace.iterateAllLeaves(
        (leaf) => this.removeButtonsFromLeaf(leaf)
      )
    );
  }
  addButtonsToLeaf(leaf, refresh = false) {
    var _a;
    if (!(leaf.view instanceof import_obsidian12.ItemView)) {
      return;
    }
    if (refresh) {
      this.removeButtonsFromLeaf(leaf);
    } else if ((_a = this.buttonsFor(leaf)) == null ? void 0 : _a.size) {
      return;
    }
    for (let i = this.pairs.length - 1; i >= 0; i--) {
      const pair = this.pairs[i];
      if (isModeActive(pair.mode, this.plugin)) {
        this.addPageHeaderButton(leaf, pair);
      }
    }
  }
  removeButtonsFromLeaf(leaf) {
    const buttons = this.buttonsFor(leaf);
    if (buttons) {
      for (const button of buttons.values()) button.detach();
      buttons == null ? void 0 : buttons.clear();
    }
  }
  reorder() {
    this.addButtonsToAllLeaves(true);
  }
  /**
   * Update button names/tooltips for all existing buttons
   */
  updateButtonNames() {
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      if (!(leaf.view instanceof import_obsidian12.ItemView)) return;
      const buttons = this.buttonsFor(leaf);
      if (!buttons) return;
      for (const [id, button] of buttons.entries()) {
        const pair = this.pairs.find((p) => p.id === id);
        if (pair) {
          button.setAttribute("aria-label", pair.name);
          button.setAttribute("title", pair.name);
          if (pair.color && pair.color !== "#000000") {
            setCssProps(button, { color: pair.color });
          } else {
            button.style.removeProperty("color");
          }
          this.updateButtonToggleState(button, pair);
        }
      }
    });
  }
  /**
   * Get icon for current toggle state
   */
  getIconForToggleState(pair) {
    if (!pair.toggleIcon) {
      return pair.icon;
    }
    const isChecked = isCommandChecked(pair.id, this.plugin);
    return isChecked ? pair.toggleIcon : pair.icon;
  }
  /**
   * Update button toggle state (icon swap only for tab bar)
   */
  updateButtonToggleState(button, pair) {
    if (!pair.toggleIcon) {
      (0, import_obsidian12.setIcon)(button, pair.icon);
      return;
    }
    const isChecked = isCommandChecked(pair.id, this.plugin);
    (0, import_obsidian12.setIcon)(button, isChecked ? pair.toggleIcon : pair.icon);
  }
  /**
   * Update all buttons for a specific command ID across all leaves
   */
  updateAllButtonsForCommand(commandId) {
    const pair = this.pairs.find((p) => p.id === commandId);
    if (!pair) return;
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      if (!(leaf.view instanceof import_obsidian12.ItemView)) return;
      const buttons = this.buttonsFor(leaf);
      if (!buttons) return;
      const button = buttons.get(commandId);
      if (button) {
        this.updateButtonToggleState(button, pair);
      }
    });
  }
  /**
   * Refresh toggle states for all buttons
   */
  refreshToggleStates() {
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      if (!(leaf.view instanceof import_obsidian12.ItemView)) return;
      const buttons = this.buttonsFor(leaf);
      if (!buttons) return;
      for (const [id, button] of buttons.entries()) {
        const pair = this.pairs.find((p) => p.id === id);
        if (pair && pair.toggleIcon) {
          this.updateButtonToggleState(button, pair);
        }
      }
    });
  }
  async addCommand(pair) {
    if (!this.plugin.settings.tabBarCommands) {
      this.plugin.settings.tabBarCommands = [];
    }
    this.plugin.settings.tabBarCommands.push(pair);
    this.addButtonsToAllLeaves(true);
    await this.plugin.saveSettings();
  }
  async removeCommand(pair) {
    if (!this.plugin.settings.tabBarCommands) return;
    const index = this.plugin.settings.tabBarCommands.indexOf(pair);
    if (index > -1) {
      this.plugin.settings.tabBarCommands.splice(index, 1);
    }
    this.addButtonsToAllLeaves(true);
    await this.plugin.saveSettings();
  }
  async updateCommand(oldPair, newPair) {
    if (!this.plugin.settings.tabBarCommands) return;
    const index = this.plugin.settings.tabBarCommands.indexOf(oldPair);
    if (index > -1) {
      this.plugin.settings.tabBarCommands[index] = newPair;
      this.addButtonsToAllLeaves(true);
      await this.plugin.saveSettings();
    }
  }
};

// src/manager/StatusBarManager.ts
var import_obsidian13 = require("obsidian");
var StatusBarManager = class {
  constructor(plugin) {
    this.customActions = /* @__PURE__ */ new Map();
    this.container = null;
    this.isReordering = false;
    this.plugin = plugin;
    this.init();
  }
  // Flag to prevent observer from triggering during reorder
  get items() {
    return this.plugin.settings.statusBarItems || [];
  }
  init() {
    this.plugin.app.workspace.onLayoutReady(() => {
      var _a, _b;
      this.container = (_b = (_a = this.plugin.app.statusBar) == null ? void 0 : _a.containerEl) != null ? _b : null;
      if (!this.container) {
        return;
      }
      if (!this.plugin.settings.statusBarItems) {
        this.plugin.settings.statusBarItems = [];
      }
      this.consolidateSettingsAndElements();
      this.reorder();
      let observerTimeout = null;
      this.observer = new MutationObserver(() => {
        if (this.isReordering) {
          return;
        }
        if (observerTimeout) {
          clearTimeout(observerTimeout);
        }
        observerTimeout = setTimeout(() => {
          if (!this.isReordering) {
            this.consolidateSettingsAndElements();
            this.reorder();
          }
        }, 200);
      });
      this.observer.observe(this.container, { childList: true, subtree: false });
      this.plugin.register(() => {
        if (this.observer) {
          this.observer.disconnect();
        }
        this.customActions.forEach((action) => action.remove());
        this.customActions.clear();
      });
    });
  }
  /**
   * Consolidate settings and elements (EXACTLY like Status Bar Organizer)
   * Merges saved items with current DOM elements, preserves order and settings
   * Saves immediately to prevent duplicates
   */
  consolidateSettingsAndElements() {
    if (!this.container) return;
    const ignoredClasses = ["mod-clickable", "status-bar-item", "ui-tweaker-status-bar-item", "ui-tweaker-status-bar-hidden"];
    const existingElements = Array.from(this.container.children).filter(
      (el) => el.classList.contains("status-bar-item") && !el.classList.contains("ui-tweaker-status-bar-item")
    );
    const savedItems = this.items.filter((item) => item.type === "existing");
    const savedItemsMap = new Map(savedItems.map((item) => [item.id, item]));
    const matchedSavedIds = /* @__PURE__ */ new Set();
    const newItems = [];
    existingElements.forEach((element) => {
      const existingId = element.getAttribute("data-ui-tweaker-status-bar-id");
      if (existingId && savedItemsMap.has(existingId)) {
        matchedSavedIds.add(existingId);
        return;
      }
    });
    existingElements.forEach((element) => {
      var _a;
      const existingId = element.getAttribute("data-ui-tweaker-status-bar-id");
      if (existingId && matchedSavedIds.has(existingId)) {
        return;
      }
      const name = Array.from(element.classList).filter((cls) => !ignoredClasses.includes(cls)).join("-") || "status-bar-item";
      const matchingSavedItems = savedItems.filter((item) => item.id.startsWith(name + ";"));
      if (matchingSavedItems.length > 0) {
        for (const savedItem of matchingSavedItems) {
          if (matchedSavedIds.has(savedItem.id)) continue;
          element.setAttribute("data-ui-tweaker-status-bar-id", savedItem.id);
          matchedSavedIds.add(savedItem.id);
          return;
        }
      }
      let maxIndex = 0;
      for (const savedItem of savedItems) {
        if (savedItem.id.startsWith(name + ";")) {
          const match = savedItem.id.match(/;(\d+)$/);
          if (match) {
            maxIndex = Math.max(maxIndex, parseInt(match[1], 10));
          }
        }
      }
      const indexNum = maxIndex + 1;
      const id = `${name};${indexNum}`;
      element.setAttribute("data-ui-tweaker-status-bar-id", id);
      const elementName = element.getAttribute("aria-label") || element.getAttribute("title") || ((_a = element.textContent) == null ? void 0 : _a.trim()) || id.split(";")[0] || "Status bar item";
      newItems.push({
        id,
        name: elementName,
        type: "existing",
        hidden: false,
        mdOnly: false
      });
    });
    if (newItems.length > 0) {
      this.plugin.settings.statusBarItems.push(...newItems);
      void this.plugin.saveSettings();
    }
  }
  /**
   * Reorder and apply visibility to all status bar items (like Status Bar Organizer)
   * Handles sticky items (left/right) and items that aren't currently visible
   * 
   * Note: Items with the same sticky position maintain their relative order
   * (e.g., if 3 items are sticky-left, they appear in the order they're in settings)
   */
  reorder() {
    var _a;
    if (!this.container) return;
    this.isReordering = true;
    this.customActions.forEach((action) => action.remove());
    this.customActions.clear();
    const allExistingElements = Array.from(this.container.children).filter(
      (el) => el.classList.contains("status-bar-item") && !el.classList.contains("ui-tweaker-status-bar-item")
    );
    const leftSticky = [];
    const rightSticky = [];
    const regular = [];
    const activeLeaf = this.plugin.app.workspace.getMostRecentLeaf();
    for (const item of this.items) {
      if (item.hidden) {
        if (item.type === "existing") {
          const element = allExistingElements.find(
            (el) => el.getAttribute("data-ui-tweaker-status-bar-id") === item.id
          );
          if (element) {
            element.addClass("ui-tweaker-status-bar-hidden");
          }
        }
        continue;
      }
      if (item.mdOnly && !isMarkdownView(activeLeaf)) {
        if (item.type === "existing") {
          const element = allExistingElements.find(
            (el) => el.getAttribute("data-ui-tweaker-status-bar-id") === item.id
          );
          if (element) {
            element.addClass("ui-tweaker-status-bar-hidden");
          }
        }
        continue;
      }
      if (item.type === "custom") {
        const commands = this.plugin.app.commands;
        const command = (_a = commands == null ? void 0 : commands.commands) == null ? void 0 : _a[item.commandId || ""];
        const mode = item.mode || "any";
        if (command && isModeActive(mode, this.plugin)) {
          this.addCustomAction(item);
          const action = this.customActions.get(item);
          if (action) {
            if (item.sticky === "left") {
              leftSticky.push(action);
            } else if (item.sticky === "right") {
              rightSticky.push(action);
            } else {
              regular.push(action);
            }
          }
        }
      } else {
        const element = allExistingElements.find(
          (el) => el.getAttribute("data-ui-tweaker-status-bar-id") === item.id
        );
        if (element) {
          element.removeClass("ui-tweaker-status-bar-hidden");
          if (item.sticky === "left") {
            leftSticky.push(element);
          } else if (item.sticky === "right") {
            rightSticky.push(element);
          } else {
            regular.push(element);
          }
        }
      }
    }
    const orderedElements = [...leftSticky, ...regular, ...rightSticky];
    orderedElements.forEach((element) => {
      if (this.container && element.parentElement === this.container) {
        this.container.appendChild(element);
      }
    });
    orderedElements.forEach((element, index) => {
      setCssProps(element, { order: (index + 1).toString() });
    });
    setTimeout(() => {
      this.isReordering = false;
    }, 50);
  }
  /**
   * Add a custom command action to the status bar (like Commander)
   */
  addCustomAction(item) {
    if (!this.container || !item.commandId) return;
    if (this.customActions.has(item)) return;
    const btn = this.container.createDiv({
      cls: "ui-tweaker-status-bar-item status-bar-item clickable-icon",
      attr: {
        "aria-label": item.name,
        "data-tooltip-position": "top",
        "data-ui-tweaker-status-bar-id": item.id
      }
    });
    if (item.icon) {
      (0, import_obsidian13.setIcon)(btn, item.icon);
    }
    if (item.color && item.color !== "#000000") {
      setCssProps(btn, { color: item.color });
    }
    btn.onclick = () => {
      const commands = this.plugin.app.commands;
      if ((commands == null ? void 0 : commands.executeCommandById) && item.commandId) {
        void commands.executeCommandById(item.commandId);
      }
    };
    btn.addEventListener("contextmenu", (event) => {
      event.stopImmediatePropagation();
      new import_obsidian13.Menu().addItem((menuItem) => {
        menuItem.setTitle("Change icon").setIcon("lucide-image-plus").onClick(() => {
          const modal = new IconPickerModal(this.plugin.app, (iconId) => {
            if (iconId && iconId !== item.icon) {
              item.icon = iconId;
              void this.plugin.saveSettings();
              this.reorder();
            }
          });
          modal.open();
        });
      }).addItem((menuItem) => {
        menuItem.setTitle("Delete").setIcon("lucide-trash").onClick(() => {
          void this.removeItem(item);
        });
        const dom = menuItem.dom;
        if (dom) {
          dom.classList.add("mod-warning");
          const iconEl = dom.querySelector(".menu-item-icon svg");
          if (iconEl) {
            setCssProps(iconEl, { color: "var(--text-error)" });
          }
        }
      }).showAtMouseEvent(event);
    });
    this.customActions.set(item, btn);
  }
  /**
   * Add a new custom command item
   */
  async addCustomCommand(pair) {
    if (!this.plugin.settings.statusBarItems) {
      this.plugin.settings.statusBarItems = [];
    }
    const hasMarkdownFilter = pair.showOnFileTypes && (pair.showOnFileTypes.includes("md") || pair.showOnFileTypes.includes("mdx"));
    const mdOnly = hasMarkdownFilter ? true : false;
    const item = {
      id: `custom-${pair.id}`,
      name: pair.name,
      displayName: pair.displayName,
      icon: pair.icon,
      type: "custom",
      hidden: false,
      mdOnly,
      commandId: pair.id,
      color: pair.color,
      mode: pair.mode
    };
    this.plugin.settings.statusBarItems.push(item);
    this.reorder();
    await this.plugin.saveSettings();
  }
  /**
   * Remove an item
   */
  async removeItem(item) {
    if (!this.plugin.settings.statusBarItems) return;
    const index = this.plugin.settings.statusBarItems.indexOf(item);
    if (index > -1) {
      this.plugin.settings.statusBarItems.splice(index, 1);
    }
    this.reorder();
    await this.plugin.saveSettings();
  }
  /**
   * Update item visibility
   */
  async updateItemVisibility(item, hidden) {
    item.hidden = hidden;
    this.reorder();
    await this.plugin.saveSettings();
  }
  /**
   * Update item md/mdx-only setting
   */
  async updateItemMdOnly(item, mdOnly) {
    item.mdOnly = mdOnly;
    this.reorder();
    await this.plugin.saveSettings();
  }
  /**
   * Update button names/tooltips for all existing custom buttons
   */
  updateButtonNames() {
    this.customActions.forEach((button, item) => {
      button.setAttribute("aria-label", item.name);
      if (item.color && item.color !== "#000000") {
        setCssProps(button, { color: item.color });
      } else {
        button.style.removeProperty("color");
      }
    });
  }
};

// src/manager/ExplorerManager.ts
var import_obsidian14 = require("obsidian");
var ExplorerManager = class {
  constructor(plugin) {
    this.buttons = /* @__PURE__ */ new Map();
    this.plugin = plugin;
    this.init();
  }
  init() {
    this.plugin.app.workspace.onLayoutReady(() => {
      this.plugin.registerEvent(
        this.plugin.app.workspace.on("layout-change", () => {
          this.addButtonsToAllLeaves();
          this.applyNativeIconOverrides();
        })
      );
      this.addButtonsToAllLeaves();
    });
  }
  addButtonsToAllLeaves() {
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    explorers.forEach((leaf) => {
      this.addButtonsToExplorer(leaf);
    });
  }
  addButtonsToExplorer(leaf) {
    var _a, _b;
    const navButtonsContainer = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
    if (!navButtonsContainer) {
      return;
    }
    for (const pair of this.plugin.settings.explorerCommands) {
      this.addExplorerButton(navButtonsContainer, pair, leaf);
    }
  }
  addExplorerButton(container, pair, leaf) {
    const existingButton = container.querySelector(`[data-explorer-command-id="${pair.id}"]`);
    if (existingButton) {
      existingButton.setAttribute("aria-label", pair.name);
      if (pair.color && pair.color !== "#000000") {
        existingButton.style.color = pair.color;
      } else {
        existingButton.style.removeProperty("color");
      }
      this.updateButtonToggleState(existingButton, pair);
      return;
    }
    if (!isModeActive(pair.mode, this.plugin)) {
      return;
    }
    const button = createDiv({
      cls: "clickable-icon nav-action-button",
      attr: {
        "data-explorer-command-id": pair.id,
        "aria-label": pair.name,
        "aria-label-position": "top"
      }
    });
    this.updateButtonToggleState(button, pair);
    button.onclick = () => {
      const commands = this.plugin.app.commands;
      if (commands == null ? void 0 : commands.executeCommandById) {
        void commands.executeCommandById(pair.id);
        setTimeout(() => {
          this.updateButtonToggleState(button, pair);
          this.updateAllButtonsForCommand(pair.id);
        }, 100);
      }
    };
    this.buttons.set(pair.id, button);
    button.addEventListener("contextmenu", (event) => {
      event.stopImmediatePropagation();
      new import_obsidian14.Menu().addItem((item) => {
        item.setTitle("Change icon").setIcon("lucide-image-plus").onClick(() => {
          const modal = new IconPickerModal(this.plugin.app, (iconId) => {
            if (iconId && iconId !== pair.icon) {
              pair.icon = iconId;
              void this.plugin.saveSettings();
              this.reorder();
            }
          });
          modal.open();
        });
      }).addItem((item) => {
        item.setTitle("Delete").setIcon("lucide-trash").onClick(() => {
          void this.removeCommand(pair);
        });
        const dom = item.dom;
        if (dom) {
          dom.classList.add("mod-warning");
          const iconEl = dom.querySelector(".menu-item-icon svg");
          if (iconEl) {
            setCssProps(iconEl, { color: "var(--text-error)" });
          }
        }
      }).showAtMouseEvent(event);
    });
    container.appendChild(button);
  }
  /**
   * Reorder buttons based on settings order
   */
  reorder() {
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    explorers.forEach((leaf) => {
      var _a, _b;
      const navButtonsContainer = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
      if (!navButtonsContainer) return;
      navButtonsContainer.querySelectorAll("[data-explorer-command-id]").forEach((btn) => btn.remove());
      for (const pair of this.plugin.settings.explorerCommands) {
        this.addExplorerButton(navButtonsContainer, pair, leaf);
      }
    });
  }
  /**
   * Update button toggle state (icon or is-active class)
   */
  updateButtonToggleState(button, pair) {
    if (!pair.toggleIcon && !pair.useActiveClass) {
      button.empty();
      (0, import_obsidian14.setIcon)(button, pair.icon);
      button.classList.remove("is-active");
      if (pair.color && pair.color !== "#000000") {
        button.style.color = pair.color;
      } else {
        button.style.removeProperty("color");
      }
      return;
    }
    const isChecked = isCommandChecked(pair.id, this.plugin);
    if (pair.useActiveClass) {
      const currentIcon = button.querySelector(".svg-icon");
      const iconName = pair.icon.replace("lucide-", "");
      if (!currentIcon || !currentIcon.classList.contains(iconName)) {
        button.empty();
        (0, import_obsidian14.setIcon)(button, pair.icon);
      }
      if (isChecked) {
        button.classList.add("is-active");
      } else {
        button.classList.remove("is-active");
      }
    } else if (pair.toggleIcon) {
      button.empty();
      (0, import_obsidian14.setIcon)(button, isChecked ? pair.toggleIcon : pair.icon);
      button.classList.remove("is-active");
    }
    if (pair.color && pair.color !== "#000000") {
      button.style.color = pair.color;
    } else {
      button.style.removeProperty("color");
    }
  }
  /**
   * Update button names/tooltips for all existing buttons
   */
  updateButtonNames() {
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    explorers.forEach((leaf) => {
      var _a, _b;
      const navButtonsContainer = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
      if (!navButtonsContainer) return;
      for (const pair of this.plugin.settings.explorerCommands) {
        const button = navButtonsContainer.querySelector(`[data-explorer-command-id="${pair.id}"]`);
        if (button) {
          button.setAttribute("aria-label", pair.name);
          this.updateButtonToggleState(button, pair);
        }
      }
    });
  }
  /**
   * Update all buttons for a specific command ID across all explorers
   */
  updateAllButtonsForCommand(commandId) {
    const pair = this.plugin.settings.explorerCommands.find((p) => p.id === commandId);
    if (!pair) return;
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    explorers.forEach((leaf) => {
      var _a, _b;
      const navButtonsContainer = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
      if (!navButtonsContainer) return;
      const button = navButtonsContainer.querySelector(`[data-explorer-command-id="${commandId}"]`);
      if (button) {
        this.updateButtonToggleState(button, pair);
      }
    });
  }
  /**
   * Refresh toggle states for all buttons
   */
  refreshToggleStates() {
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    explorers.forEach((leaf) => {
      var _a, _b;
      const navButtonsContainer = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
      if (!navButtonsContainer) return;
      for (const pair of this.plugin.settings.explorerCommands) {
        const button = navButtonsContainer.querySelector(`[data-explorer-command-id="${pair.id}"]`);
        if (button && (pair.toggleIcon || pair.useActiveClass)) {
          this.updateButtonToggleState(button, pair);
        }
      }
    });
  }
  /**
   * Apply icon overrides to native explorer buttons
   */
  applyNativeIconOverrides() {
    const explorers = this.plugin.app.workspace.getLeavesOfType("file-explorer");
    const iconOverrides = this.plugin.settings.nativeExplorerButtonIcons;
    if (!iconOverrides) return;
    explorers.forEach((leaf) => {
      var _a, _b;
      const navButtonsContainer = (_b = (_a = leaf.view) == null ? void 0 : _a.containerEl) == null ? void 0 : _b.querySelector("div.nav-buttons-container");
      if (!navButtonsContainer) return;
      const buttonMap = {
        "New note": "newNote",
        "New folder": "newFolder",
        "Change sort order": "sortOrder",
        "Auto-reveal current file": "autoReveal",
        "Collapse all": "collapseAll"
      };
      const nativeButtons = navButtonsContainer.querySelectorAll(".nav-action-button:not([data-explorer-command-id])");
      nativeButtons.forEach((button) => {
        const ariaLabel = button.getAttribute("aria-label");
        if (!ariaLabel) return;
        const iconKey = buttonMap[ariaLabel];
        if (!iconKey) return;
        const iconOverride = iconOverrides[iconKey];
        const colorOverrides = this.plugin.settings.nativeExplorerButtonColors;
        const color = colorOverrides == null ? void 0 : colorOverrides[iconKey];
        if (iconOverride) {
          button.empty();
          (0, import_obsidian14.setIcon)(button, iconOverride);
          if (color) {
            button.style.color = color;
          } else {
            button.style.removeProperty("color");
          }
        } else {
          const originalIcons = {
            "New note": "lucide-edit",
            "New folder": "lucide-folder-plus",
            "Change sort order": "lucide-sort-asc",
            "Auto-reveal current file": "lucide-gallery-vertical",
            "Collapse all": "lucide-chevrons-up-down"
            // May vary, but this is the default
          };
          const originalIcon = originalIcons[ariaLabel];
          if (originalIcon) {
            button.empty();
            (0, import_obsidian14.setIcon)(button, originalIcon);
            button.style.removeProperty("color");
          }
        }
      });
    });
  }
  /**
   * Remove a command from explorer
   */
  async removeCommand(pair) {
    if (!this.plugin.settings.explorerCommands) return;
    const index = this.plugin.settings.explorerCommands.indexOf(pair);
    if (index > -1) {
      this.plugin.settings.explorerCommands.splice(index, 1);
    }
    this.reorder();
    await this.plugin.saveSettings();
  }
};

// src/main.ts
var UITweakerPlugin = class extends import_obsidian15.Plugin {
  constructor() {
    super(...arguments);
    // Store original to restore later
    this.isUpdatingSyncButton = false;
  }
  async onload() {
    await this.loadSettings();
    this.uiManager = new UIManager(this.settings);
    this.uiManager.applyStyles();
    if (!this.settings.tabBarCommands) {
      this.settings.tabBarCommands = [];
    }
    this.tabBarManager = new TabBarManager(this);
    if (!this.settings.statusBarItems) {
      this.settings.statusBarItems = [];
    }
    this.statusBarManager = new StatusBarManager(this);
    if (!this.settings.explorerCommands) {
      this.settings.explorerCommands = [];
    }
    this.explorerManager = new ExplorerManager(this);
    registerCommands({
      plugin: this,
      settings: this.settings,
      saveSettings: () => this.saveSettings(),
      refresh: () => this.refresh()
    });
    this.setupToggleStateRefresh();
    this.registerInterval(
      window.setInterval(() => {
        var _a, _b, _c, _d;
        const hasToggleCommands = ((_b = (_a = this.settings.explorerCommands) == null ? void 0 : _a.some((p) => p.toggleIcon)) != null ? _b : false) || ((_d = (_c = this.settings.tabBarCommands) == null ? void 0 : _c.some((p) => p.toggleIcon)) != null ? _d : false);
        if (hasToggleCommands) {
          if (this.explorerManager) {
            this.explorerManager.refreshToggleStates();
          }
          if (this.tabBarManager) {
            this.tabBarManager.refreshToggleStates();
          }
        }
      }, 300)
      // Refresh every 300ms to keep buttons in sync (increased frequency)
    );
    const themeObserver = new MutationObserver(() => {
      if (this.explorerManager) {
        this.explorerManager.refreshToggleStates();
      }
      if (this.tabBarManager) {
        this.tabBarManager.refreshToggleStates();
      }
    });
    themeObserver.observe(document.body, {
      attributes: true,
      attributeFilter: ["class"]
    });
    this.settingTab = new UITweakerSettingTab(this.app, this);
    this.addSettingTab(this.settingTab);
    this.setupHelpButtonReplacement();
    if (import_obsidian15.Platform.isMobile) {
      this.setupSyncButtonReplacement();
    } else {
      document.body.classList.remove("ui-tweaker-hide-sync-button");
    }
  }
  onunload() {
    if (this.uiManager) {
      this.uiManager.cleanup();
    }
    this.restoreHelpButton();
    if (this.helpButtonObserver) {
      this.helpButtonObserver.disconnect();
    }
    this.restoreSyncButton();
    if (this.syncButtonObserver) {
      this.syncButtonObserver.disconnect();
    }
  }
  async loadSettings() {
    var _a, _b;
    try {
      const data = await this.loadData();
      if (!data || typeof data !== "object" || Array.isArray(data)) {
        this.settings = Object.assign({}, DEFAULT_SETTINGS);
        await this.saveSettings();
        return;
      }
      this.settings = Object.assign({}, DEFAULT_SETTINGS, data);
      if (!this.settings.helpButtonReplacement) {
        this.settings.helpButtonReplacement = {
          enabled: false,
          commandId: "",
          iconId: "settings-2"
        };
      } else {
        if (!this.settings.helpButtonReplacement.iconId) {
          this.settings.helpButtonReplacement.iconId = "wrench";
        }
        if ((_a = this.settings.helpButtonReplacement.commandId) == null ? void 0 : _a.startsWith("ui-tweaker:")) {
          this.settings.helpButtonReplacement.commandId = this.settings.helpButtonReplacement.commandId.replace(/^ui-tweaker:+/g, "");
          await this.saveSettings();
        }
      }
      if (!this.settings.syncButtonReplacement) {
        this.settings.syncButtonReplacement = {
          enabled: false,
          commandId: "",
          iconId: "wrench"
        };
      } else {
        if (!this.settings.syncButtonReplacement.iconId) {
          this.settings.syncButtonReplacement.iconId = "wrench";
        }
        if ((_b = this.settings.syncButtonReplacement.commandId) == null ? void 0 : _b.startsWith("ui-tweaker:")) {
          this.settings.syncButtonReplacement.commandId = this.settings.syncButtonReplacement.commandId.replace(/^ui-tweaker:+/g, "");
          await this.saveSettings();
        }
      }
      if (this.settings.tabBarCommands) {
        let needsSave = false;
        for (const pair of this.settings.tabBarCommands) {
          const pairWithOldProps = pair;
          if (pair.showOnFileTypes !== void 0 || pair.hideOnFileTypes !== void 0) {
            continue;
          }
          if (pairWithOldProps.mdOnly === true && !pair.showOnFileTypes) {
            pair.showOnFileTypes = "md,mdx";
            delete pairWithOldProps.mdOnly;
            needsSave = true;
          }
          if (pairWithOldProps.fileTypeFilter && !pair.showOnFileTypes && !pair.hideOnFileTypes) {
            const filter = pairWithOldProps.fileTypeFilter;
            const parts = filter.split(",").map((p) => p.trim()).filter((p) => p);
            const showTypes = [];
            const hideTypes = [];
            for (const part of parts) {
              if (part.startsWith("-")) {
                const ext = part.slice(1).replace(/^\./, "").toLowerCase();
                if (ext) hideTypes.push(ext);
              } else {
                const ext = part.replace(/^\./, "").toLowerCase();
                if (ext) showTypes.push(ext);
              }
            }
            if (showTypes.length > 0) {
              pair.showOnFileTypes = showTypes.join(",");
            }
            if (hideTypes.length > 0) {
              pair.hideOnFileTypes = hideTypes.join(",");
            }
            delete pairWithOldProps.fileTypeFilter;
            needsSave = true;
          }
        }
        if (needsSave) {
          await this.saveSettings();
        }
      }
    } catch (error) {
      console.error("[UI Tweaker] Failed to load settings:", error);
      this.settings = { ...DEFAULT_SETTINGS };
    }
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  refresh() {
    var _a;
    if (this.uiManager) {
      this.uiManager.updateSettings(this.settings);
    }
    (_a = this.explorerManager) == null ? void 0 : _a.applyNativeIconOverrides();
    this.setupHelpButtonReplacement();
    this.updateSyncButtonCSS();
    if (import_obsidian15.Platform.isMobile) {
      this.setupSyncButtonReplacement();
    } else {
      document.body.classList.remove("ui-tweaker-hide-sync-button");
    }
  }
  setupHelpButtonReplacement() {
    var _a;
    if (!((_a = this.settings.helpButtonReplacement) == null ? void 0 : _a.enabled)) {
      this.restoreHelpButton();
      return;
    }
    this.updateHelpButtonCSS();
    const trySetup = () => {
      var _a2;
      if ((_a2 = this.settings.helpButtonReplacement) == null ? void 0 : _a2.enabled) {
        void this.updateHelpButton();
      }
    };
    trySetup();
    setTimeout(trySetup, 500);
    setTimeout(() => {
      this.setupHelpButtonObserver();
    }, 1e3);
  }
  updateHelpButtonCSS() {
    var _a;
    const shouldHideHelpButton = this.settings.helpButton === "hide" || ((_a = this.settings.helpButtonReplacement) == null ? void 0 : _a.enabled);
    document.body.classList.toggle("ui-tweaker-hide-help-button", shouldHideHelpButton);
  }
  async updateHelpButton() {
    var _a, _b, _c, _d, _e;
    if (!((_a = this.settings.helpButtonReplacement) == null ? void 0 : _a.enabled)) {
      this.restoreHelpButton();
      return;
    }
    if (this.helpButtonObserver) {
      this.helpButtonObserver.disconnect();
    }
    await this.loadSettings();
    this.updateHelpButtonCSS();
    try {
      if (!((_b = this.settings.helpButtonReplacement) == null ? void 0 : _b.enabled)) {
        this.restoreHelpButton();
        return;
      }
      const vaultActions = document.querySelector(".workspace-drawer-vault-actions");
      if (!vaultActions) {
        this.setupHelpButtonObserver();
        setTimeout(() => {
          var _a2;
          if ((_a2 = this.settings.helpButtonReplacement) == null ? void 0 : _a2.enabled) {
            void this.updateHelpButton();
          }
        }, 500);
        return;
      }
      const clickableIcons = Array.from(vaultActions.querySelectorAll(".clickable-icon"));
      let helpButton = null;
      for (const icon of clickableIcons) {
        const svg = icon.querySelector("svg.help");
        if (svg) {
          helpButton = icon;
          break;
        }
      }
      if (!helpButton) {
        this.setupHelpButtonObserver();
        setTimeout(() => {
          var _a2;
          if ((_a2 = this.settings.helpButtonReplacement) == null ? void 0 : _a2.enabled) {
            void this.updateHelpButton();
          }
        }, 500);
        return;
      }
      if (this.customHelpButton && this.customHelpButton.parentElement && document.body.contains(this.customHelpButton)) {
        this.customHelpButton.remove();
      }
      this.customHelpButton = void 0;
      const customButton = helpButton.cloneNode(true);
      customButton.removeAttribute("aria-label");
      customButton.setAttribute("data-ui-tweaker-help-replacement", "true");
      customButton.classList.add("ui-tweaker-help-replacement");
      customButton.onclick = null;
      const iconContainer = ((_c = customButton.querySelector("svg")) == null ? void 0 : _c.parentElement) || customButton;
      const iconId = (_d = this.settings.helpButtonReplacement) == null ? void 0 : _d.iconId;
      if (iconId) {
        try {
          (0, import_obsidian15.setIcon)(iconContainer, iconId);
        } catch (e) {
        }
      } else {
        try {
          (0, import_obsidian15.setIcon)(iconContainer, "wrench");
        } catch (e) {
        }
      }
      customButton.addEventListener("click", (evt) => {
        var _a2;
        evt.preventDefault();
        evt.stopPropagation();
        const commandId = (_a2 = this.settings.helpButtonReplacement) == null ? void 0 : _a2.commandId;
        if (commandId) {
          void (async () => {
            try {
              const commands = this.app.commands;
              if (commands == null ? void 0 : commands.executeCommandById) {
                await commands.executeCommandById(commandId);
              } else {
                throw new Error("Command execution not available");
              }
            } catch (e) {
              new import_obsidian15.Notice(`Failed to execute command: ${commandId}`);
            }
          })();
        }
      }, true);
      (_e = helpButton.parentElement) == null ? void 0 : _e.insertBefore(customButton, helpButton.nextSibling);
      this.customHelpButton = customButton;
    } finally {
      setTimeout(() => {
        var _a2;
        if ((_a2 = this.settings.helpButtonReplacement) == null ? void 0 : _a2.enabled) {
          this.setupHelpButtonObserver();
        }
      }, 1e3);
    }
  }
  setupHelpButtonObserver() {
    var _a;
    if (this.helpButtonObserver) {
      this.helpButtonObserver.disconnect();
    }
    if (!((_a = this.settings.helpButtonReplacement) == null ? void 0 : _a.enabled)) {
      return;
    }
    let updateTimeout = null;
    this.helpButtonObserver = new MutationObserver(() => {
      if (updateTimeout) {
        clearTimeout(updateTimeout);
      }
      updateTimeout = window.setTimeout(() => {
        const vaultActions2 = document.querySelector(".workspace-drawer-vault-actions");
        if (!vaultActions2) return;
        const customButtonExists = this.customHelpButton && this.customHelpButton.parentElement && document.body.contains(this.customHelpButton) && this.customHelpButton.hasAttribute("data-ui-tweaker-help-replacement");
        if (!customButtonExists) {
          if (this.customHelpButton && !document.body.contains(this.customHelpButton)) {
            this.customHelpButton = void 0;
          }
          void this.updateHelpButton();
        }
      }, 100);
    });
    const vaultActions = document.querySelector(".workspace-drawer-vault-actions");
    if (vaultActions) {
      this.helpButtonObserver.observe(vaultActions, {
        childList: true,
        subtree: true
      });
    }
    const vaultProfile = document.querySelector(".workspace-sidedock-vault-profile");
    if (vaultProfile) {
      this.helpButtonObserver.observe(vaultProfile, {
        childList: true,
        subtree: false
      });
    }
    if (!vaultActions && !vaultProfile) {
      const workspace = document.querySelector(".workspace-split");
      if (workspace) {
        this.helpButtonObserver.observe(workspace, {
          childList: true,
          subtree: true
        });
      } else {
        this.helpButtonObserver.observe(document.body, {
          childList: true,
          subtree: true
        });
      }
    }
  }
  restoreHelpButton() {
    var _a, _b;
    const shouldHideHelpButton = this.settings.helpButton === "hide" || ((_a = this.settings.helpButtonReplacement) == null ? void 0 : _a.enabled);
    if (!shouldHideHelpButton) {
      document.body.classList.remove("ui-tweaker-hide-help-button");
    }
    if (!((_b = this.settings.helpButtonReplacement) == null ? void 0 : _b.enabled) && this.customHelpButton) {
      if (document.body.contains(this.customHelpButton)) {
        this.customHelpButton.remove();
      }
      this.customHelpButton = void 0;
    }
  }
  setupSyncButtonReplacement() {
    var _a;
    this.updateSyncButtonCSS();
    if (!((_a = this.settings.syncButtonReplacement) == null ? void 0 : _a.enabled) || !import_obsidian15.Platform.isMobile) {
      this.restoreSyncButton();
      return;
    }
    const trySetup = () => {
      var _a2;
      if ((_a2 = this.settings.syncButtonReplacement) == null ? void 0 : _a2.enabled) {
        void this.updateSyncButton();
      }
    };
    trySetup();
    setTimeout(trySetup, 500);
    setTimeout(() => {
      this.setupSyncButtonObserver();
    }, 1e3);
  }
  updateSyncButtonCSS() {
    var _a, _b;
    const shouldHide = ((_b = (_a = this.settings.syncButtonReplacement) == null ? void 0 : _a.enabled) != null ? _b : false) && import_obsidian15.Platform.isMobile;
    document.body.classList.toggle("ui-tweaker-hide-sync-button", shouldHide);
  }
  async updateSyncButton() {
    var _a, _b, _c, _d;
    if (!((_a = this.settings.syncButtonReplacement) == null ? void 0 : _a.enabled)) {
      this.restoreSyncButton();
      return;
    }
    if (this.syncButtonObserver) {
      this.syncButtonObserver.disconnect();
    }
    await this.loadSettings();
    this.updateSyncButtonCSS();
    try {
      if (!((_b = this.settings.syncButtonReplacement) == null ? void 0 : _b.enabled)) {
        this.restoreSyncButton();
        return;
      }
      let syncButton = null;
      const rightDrawer = document.querySelector(".workspace-drawer.mod-right");
      if (rightDrawer) {
        const drawerHeader = rightDrawer.querySelector(".workspace-drawer-header");
        if (drawerHeader) {
          syncButton = drawerHeader.querySelector(".sync-status-icon, .workspace-drawer-header-icon.sync-status-icon");
          if (!syncButton) {
            const clickableIcons = Array.from(drawerHeader.querySelectorAll(".clickable-icon"));
            for (const icon of clickableIcons) {
              const svg = icon.querySelector("svg.refresh-cw-off, svg.refresh-cw");
              if (svg) {
                syncButton = icon;
                break;
              }
            }
          }
        }
      }
      if (!syncButton) {
        this.setupSyncButtonObserver();
        setTimeout(() => {
          var _a2;
          if ((_a2 = this.settings.syncButtonReplacement) == null ? void 0 : _a2.enabled) {
            void this.updateSyncButton();
          }
        }, 500);
        return;
      }
      if (this.customSyncButton && this.customSyncButton.parentElement && document.body.contains(this.customSyncButton)) {
        this.customSyncButton.remove();
      }
      this.customSyncButton = void 0;
      const customButton = syncButton.cloneNode(true);
      customButton.removeAttribute("aria-label");
      customButton.setAttribute("data-ui-tweaker-sync-replacement", "true");
      customButton.classList.add("ui-tweaker-sync-replacement");
      customButton.onclick = null;
      customButton.removeAttribute("data-command");
      let iconContainer = null;
      const existingSvg = customButton.querySelector("svg");
      if (existingSvg) {
        iconContainer = existingSvg.parentElement;
        existingSvg.remove();
      } else {
        iconContainer = customButton;
      }
      if (iconContainer) {
        setCssProps(iconContainer, {
          display: "flex",
          alignItems: "center",
          justifyContent: "center"
        });
      }
      const iconId = (_c = this.settings.syncButtonReplacement) == null ? void 0 : _c.iconId;
      if (iconId) {
        try {
          (0, import_obsidian15.setIcon)(iconContainer, iconId);
        } catch (e) {
        }
      } else {
        try {
          (0, import_obsidian15.setIcon)(iconContainer, "wrench");
        } catch (e) {
        }
      }
      const parent = syncButton.parentElement;
      if (parent) {
        parent.insertBefore(customButton, syncButton);
      } else {
        (_d = syncButton.parentElement) == null ? void 0 : _d.insertBefore(customButton, syncButton.nextSibling);
      }
      customButton.addEventListener("click", (evt) => {
        var _a2, _b2, _c2, _d2, _e;
        evt.preventDefault();
        evt.stopPropagation();
        const commandId = (_a2 = this.settings.syncButtonReplacement) == null ? void 0 : _a2.commandId;
        if (commandId) {
          if (commandId === "open-settings" || commandId === "ui-tweaker:open-settings") {
            const settingApi = this.app.setting;
            if (settingApi) {
              (_b2 = settingApi.open) == null ? void 0 : _b2.call(settingApi);
              const pluginInstance = this;
              if (((_c2 = pluginInstance.settingTab) == null ? void 0 : _c2.id) && settingApi.openTabById) {
                settingApi.openTabById(pluginInstance.settingTab.id);
              }
            }
          } else {
            (_e = (_d2 = this.app.commands) == null ? void 0 : _d2.executeCommandById) == null ? void 0 : _e.call(_d2, commandId).catch((error) => {
              console.warn("[UI Tweaker] Error executing command:", error);
              new import_obsidian15.Notice(`Failed to execute command: ${commandId}`);
            });
          }
        }
      }, true);
      customButton.addEventListener("touchstart", (evt) => {
        var _a2, _b2, _c2, _d2, _e;
        evt.preventDefault();
        evt.stopPropagation();
        const commandId = (_a2 = this.settings.syncButtonReplacement) == null ? void 0 : _a2.commandId;
        if (commandId) {
          if (commandId === "open-settings" || commandId === "ui-tweaker:open-settings") {
            const settingApi = this.app.setting;
            if (settingApi) {
              (_b2 = settingApi.open) == null ? void 0 : _b2.call(settingApi);
              const pluginInstance = this;
              if (((_c2 = pluginInstance.settingTab) == null ? void 0 : _c2.id) && settingApi.openTabById) {
                settingApi.openTabById(pluginInstance.settingTab.id);
              }
            }
          } else {
            (_e = (_d2 = this.app.commands) == null ? void 0 : _d2.executeCommandById) == null ? void 0 : _e.call(_d2, commandId).catch((error) => {
              console.warn("[UI Tweaker] Error executing command:", error);
              new import_obsidian15.Notice(`Failed to execute command: ${commandId}`);
            });
          }
        }
      }, true);
      setCssProps(syncButton, { display: "none" });
      syncButton.setAttribute("data-ui-tweaker-original-sync-hidden", "true");
      this.originalSyncButton = syncButton;
      this.customSyncButton = customButton;
    } finally {
      setTimeout(() => {
        var _a2;
        if ((_a2 = this.settings.syncButtonReplacement) == null ? void 0 : _a2.enabled) {
          this.setupSyncButtonObserver();
        }
      }, 1e3);
    }
  }
  setupSyncButtonObserver() {
    var _a;
    if (this.syncButtonObserver) {
      this.syncButtonObserver.disconnect();
    }
    if (!((_a = this.settings.syncButtonReplacement) == null ? void 0 : _a.enabled)) {
      return;
    }
    let updateTimeout = null;
    this.syncButtonObserver = new MutationObserver(() => {
      if (updateTimeout) {
        clearTimeout(updateTimeout);
      }
      updateTimeout = window.setTimeout(() => {
        const rightDrawer2 = document.querySelector(".workspace-drawer.mod-right");
        if (!rightDrawer2) return;
        if (this.originalSyncButton && document.body.contains(this.originalSyncButton)) {
          setCssProps(this.originalSyncButton, { display: "none" });
        }
        const drawerHeader = rightDrawer2.querySelector(".workspace-drawer-header");
        if (drawerHeader) {
          const allSyncButtons = Array.from(drawerHeader.querySelectorAll(".sync-status-icon, .workspace-drawer-header-icon.sync-status-icon, .clickable-icon.sync-status-icon"));
          for (const btn of allSyncButtons) {
            const button = btn;
            if (!button.hasAttribute("data-ui-tweaker-sync-replacement") && !button.hasAttribute("data-ui-tweaker-original-sync-hidden")) {
              setCssProps(button, { display: "none" });
              button.setAttribute("data-ui-tweaker-original-sync-hidden", "true");
              this.originalSyncButton = button;
            }
          }
        }
        const customButtonExists = this.customSyncButton && this.customSyncButton.parentElement && document.body.contains(this.customSyncButton) && this.customSyncButton.hasAttribute("data-ui-tweaker-sync-replacement");
        if (!customButtonExists && !this.isUpdatingSyncButton) {
          if (this.customSyncButton && !document.body.contains(this.customSyncButton)) {
            this.customSyncButton = void 0;
          }
          this.isUpdatingSyncButton = true;
          void this.updateSyncButton().finally(() => {
            this.isUpdatingSyncButton = false;
          });
        }
      }, 100);
    });
    const rightDrawer = document.querySelector(".workspace-drawer.mod-right");
    if (rightDrawer) {
      this.syncButtonObserver.observe(rightDrawer, {
        childList: true,
        subtree: true
      });
      const drawerHeader = rightDrawer.querySelector(".workspace-drawer-header");
      if (drawerHeader) {
        this.syncButtonObserver.observe(drawerHeader, {
          childList: true,
          subtree: true
        });
      }
    }
    if (!rightDrawer) {
      const workspace = document.querySelector(".workspace-split.mod-right-split");
      if (workspace) {
        this.syncButtonObserver.observe(workspace, {
          childList: true,
          subtree: true
        });
      } else {
        this.syncButtonObserver.observe(document.body, {
          childList: true,
          subtree: true
        });
      }
    }
  }
  /**
   * Set up command execution interceptor to update button toggle states
   * This intercepts command execution globally to update buttons when commands are run
   * from anywhere (command palette, hotkeys, etc.)
   */
  setupToggleStateRefresh() {
    const commands = this.app.commands;
    if (!(commands == null ? void 0 : commands.executeCommandById)) return;
    const originalExecute = commands.executeCommandById.bind(commands);
    commands.executeCommandById = async (id) => {
      var _a, _b;
      const isTracked = ((_a = this.settings.explorerCommands) == null ? void 0 : _a.some((p) => p.id === id && p.toggleIcon)) || ((_b = this.settings.tabBarCommands) == null ? void 0 : _b.some((p) => p.id === id && p.toggleIcon));
      if (isTracked) {
        recordCommandExecution(id);
        await originalExecute(id);
        setTimeout(() => {
          if (this.explorerManager) {
            this.explorerManager.refreshToggleStates();
          }
          if (this.tabBarManager) {
            this.tabBarManager.refreshToggleStates();
          }
        }, 50);
        setTimeout(() => {
          if (this.explorerManager) {
            this.explorerManager.refreshToggleStates();
          }
          if (this.tabBarManager) {
            this.tabBarManager.refreshToggleStates();
          }
        }, 300);
      } else {
        await originalExecute(id);
      }
    };
  }
  restoreSyncButton() {
    var _a, _b;
    if (!((_a = this.settings.syncButtonReplacement) == null ? void 0 : _a.enabled) || !import_obsidian15.Platform.isMobile) {
      document.body.classList.remove("ui-tweaker-hide-sync-button");
    }
    if (!((_b = this.settings.syncButtonReplacement) == null ? void 0 : _b.enabled)) {
      if (this.customSyncButton && document.body.contains(this.customSyncButton)) {
        this.customSyncButton.remove();
      }
      this.customSyncButton = void 0;
      if (this.originalSyncButton && document.body.contains(this.originalSyncButton)) {
        this.originalSyncButton.style.removeProperty("display");
      }
      this.originalSyncButton = void 0;
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy91aU1hbmFnZXIudHMiLCAic3JjL2NvbW1hbmRzLnRzIiwgInNyYy91aS9TZXR0aW5nc1RhYi50cyIsICJzcmMvdWkvY29tbW9uL1RhYlJlbmRlcmVyLnRzIiwgInNyYy91dGlscy9zZXR0aW5ncy1jb21wYXQudHMiLCAic3JjL21vZGFscy9Db21tYW5kUGlja2VyTW9kYWwudHMiLCAic3JjL21vZGFscy9JY29uUGlja2VyTW9kYWwudHMiLCAic3JjL3VpL3RhYnMvSGlkZXJUYWIudHMiLCAic3JjL3VpL3RhYnMvVGFiQmFyVGFiLnRzIiwgInNyYy9tb2RhbHMvTmFtZVBpY2tlck1vZGFsLnRzIiwgInNyYy91dGlscy9jaG9vc2VDb21tYW5kLnRzIiwgInNyYy91aS90YWJzL1N0YXR1c0JhclRhYi50cyIsICJzcmMvdWkvdGFicy9FeHBsb3JlclRhYi50cyIsICJzcmMvdWkvdGFicy9Nb2JpbGVUYWIudHMiLCAic3JjL21hbmFnZXIvVGFiQmFyTWFuYWdlci50cyIsICJzcmMvdXRpbHMvY29tbWFuZFV0aWxzLnRzIiwgInNyYy9tYW5hZ2VyL1N0YXR1c0Jhck1hbmFnZXIudHMiLCAic3JjL21hbmFnZXIvRXhwbG9yZXJNYW5hZ2VyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvKipcbiAqIE1haW4gcGx1Z2luIGZpbGVcbiAqL1xuXG5pbXBvcnQgeyBQbHVnaW4sIE5vdGljZSwgc2V0SWNvbiwgUGxhdGZvcm0gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBVSVNldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyBVSU1hbmFnZXIsIHNldENzc1Byb3BzIH0gZnJvbSAnLi91aU1hbmFnZXInO1xuaW1wb3J0IHsgcmVnaXN0ZXJDb21tYW5kcyB9IGZyb20gJy4vY29tbWFuZHMnO1xuaW1wb3J0IHsgVUlUd2Vha2VyU2V0dGluZ1RhYiB9IGZyb20gJy4vdWkvU2V0dGluZ3NUYWInO1xuaW1wb3J0IHsgVGFiQmFyTWFuYWdlciB9IGZyb20gJy4vbWFuYWdlci9UYWJCYXJNYW5hZ2VyJztcbmltcG9ydCB7IFN0YXR1c0Jhck1hbmFnZXIgfSBmcm9tICcuL21hbmFnZXIvU3RhdHVzQmFyTWFuYWdlcic7XG5pbXBvcnQgeyBFeHBsb3Jlck1hbmFnZXIgfSBmcm9tICcuL21hbmFnZXIvRXhwbG9yZXJNYW5hZ2VyJztcbmltcG9ydCB7IHJlY29yZENvbW1hbmRFeGVjdXRpb24gfSBmcm9tICcuL3V0aWxzL2NvbW1hbmRVdGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVJVHdlYWtlclBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiBVSVNldHRpbmdzO1xuXHRwcml2YXRlIHVpTWFuYWdlcjogVUlNYW5hZ2VyO1xuXHRwcml2YXRlIGN1c3RvbUhlbHBCdXR0b24/OiBIVE1MRWxlbWVudDtcblx0cHJpdmF0ZSBoZWxwQnV0dG9uT2JzZXJ2ZXI/OiBNdXRhdGlvbk9ic2VydmVyO1xuXHRwcml2YXRlIGN1c3RvbVN5bmNCdXR0b24/OiBIVE1MRWxlbWVudDtcblx0cHJpdmF0ZSBzeW5jQnV0dG9uT2JzZXJ2ZXI/OiBNdXRhdGlvbk9ic2VydmVyO1xuXHRwcml2YXRlIG9yaWdpbmFsU3luY0J1dHRvbj86IEhUTUxFbGVtZW50OyAvLyBTdG9yZSBvcmlnaW5hbCB0byByZXN0b3JlIGxhdGVyXG5cdHByaXZhdGUgaXNVcGRhdGluZ1N5bmNCdXR0b246IGJvb2xlYW4gPSBmYWxzZTsgLy8gUHJldmVudCBpbmZpbml0ZSBsb29wc1xuXHRwdWJsaWMgc2V0dGluZ1RhYj86IFVJVHdlYWtlclNldHRpbmdUYWI7XG5cdHB1YmxpYyB0YWJCYXJNYW5hZ2VyPzogVGFiQmFyTWFuYWdlcjtcblx0cHVibGljIHN0YXR1c0Jhck1hbmFnZXI/OiBTdGF0dXNCYXJNYW5hZ2VyO1xuXHRwdWJsaWMgZXhwbG9yZXJNYW5hZ2VyPzogRXhwbG9yZXJNYW5hZ2VyO1xuXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG5cdFx0Ly8gSW5pdGlhbGl6ZSBVSSBtYW5hZ2VyXG5cdFx0dGhpcy51aU1hbmFnZXIgPSBuZXcgVUlNYW5hZ2VyKHRoaXMuc2V0dGluZ3MpO1xuXHRcdHRoaXMudWlNYW5hZ2VyLmFwcGx5U3R5bGVzKCk7XG5cblx0XHQvLyBJbml0aWFsaXplIFRhYiBCYXIgTWFuYWdlclxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy50YWJCYXJDb21tYW5kcykge1xuXHRcdFx0dGhpcy5zZXR0aW5ncy50YWJCYXJDb21tYW5kcyA9IFtdO1xuXHRcdH1cblx0XHR0aGlzLnRhYkJhck1hbmFnZXIgPSBuZXcgVGFiQmFyTWFuYWdlcih0aGlzKTtcblxuXHRcdC8vIEluaXRpYWxpemUgU3RhdHVzIEJhciBNYW5hZ2VyXG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zKSB7XG5cdFx0XHR0aGlzLnNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zID0gW107XG5cdFx0fVxuXHRcdHRoaXMuc3RhdHVzQmFyTWFuYWdlciA9IG5ldyBTdGF0dXNCYXJNYW5hZ2VyKHRoaXMpO1xuXG5cdFx0Ly8gSW5pdGlhbGl6ZSBFeHBsb3JlciBNYW5hZ2VyXG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMpIHtcblx0XHRcdHRoaXMuc2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcyA9IFtdO1xuXHRcdH1cblx0XHR0aGlzLmV4cGxvcmVyTWFuYWdlciA9IG5ldyBFeHBsb3Jlck1hbmFnZXIodGhpcyk7XG5cblx0XHQvLyBSZWdpc3RlciBjb21tYW5kc1xuXHRcdHJlZ2lzdGVyQ29tbWFuZHMoe1xuXHRcdFx0cGx1Z2luOiB0aGlzLFxuXHRcdFx0c2V0dGluZ3M6IHRoaXMuc2V0dGluZ3MsXG5cdFx0XHRzYXZlU2V0dGluZ3M6ICgpID0+IHRoaXMuc2F2ZVNldHRpbmdzKCksXG5cdFx0XHRyZWZyZXNoOiAoKSA9PiB0aGlzLnJlZnJlc2goKSxcblx0XHR9KTtcblxuXHRcdC8vIFNldCB1cCBjb21tYW5kIGV4ZWN1dGlvbiBpbnRlcmNlcHRvciBhbmQgcGVyaW9kaWMgcmVmcmVzaCBmb3IgYnV0dG9uIHRvZ2dsZSBzdGF0ZXNcblx0XHR0aGlzLnNldHVwVG9nZ2xlU3RhdGVSZWZyZXNoKCk7XG5cdFx0XG5cdFx0Ly8gU2V0IHVwIHBlcmlvZGljIHJlZnJlc2ggdG8gY2F0Y2ggY29tbWFuZHMgZXhlY3V0ZWQgb3V0c2lkZSB0aGUgaW50ZXJjZXB0b3Jcblx0XHQvLyAoZS5nLiwga2V5Ym9hcmQgc2hvcnRjdXRzIHRoYXQgYnlwYXNzIGV4ZWN1dGVDb21tYW5kQnlJZClcblx0XHQvLyBQZXJpb2RpYyByZWZyZXNoIHRvIGNhdGNoIGNvbW1hbmRzIGV4ZWN1dGVkIG91dHNpZGUgdGhlIGludGVyY2VwdG9yXG5cdFx0Ly8gVGhpcyBpcyBjcml0aWNhbCBmb3IgY29tbWFuZHMgZXhlY3V0ZWQgdmlhIGtleWJvYXJkIHNob3J0Y3V0cywgY29tbWFuZCBwYWxldHRlLCBldGMuXG5cdFx0Ly8gV2UgcmVmcmVzaCBmcmVxdWVudGx5IHRvIGVuc3VyZSBidXR0b25zIHN0YXkgaW4gc3luY1xuXHRcdHRoaXMucmVnaXN0ZXJJbnRlcnZhbChcblx0XHRcdHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGhhc1RvZ2dsZUNvbW1hbmRzID0gXG5cdFx0XHRcdFx0KHRoaXMuc2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcz8uc29tZShwID0+IHAudG9nZ2xlSWNvbikgPz8gZmFsc2UpIHx8XG5cdFx0XHRcdFx0KHRoaXMuc2V0dGluZ3MudGFiQmFyQ29tbWFuZHM/LnNvbWUocCA9PiBwLnRvZ2dsZUljb24pID8/IGZhbHNlKTtcblx0XHRcdFx0XG5cdFx0XHRcdGlmIChoYXNUb2dnbGVDb21tYW5kcykge1xuXHRcdFx0XHRcdC8vIEFsd2F5cyByZWZyZXNoIC0gaXNDb21tYW5kQ2hlY2tlZCB3aWxsIGNoZWNrIGFjdHVhbCBzdGF0ZSB2aWEgY2hlY2tDYWxsYmFja1xuXHRcdFx0XHRcdC8vIG9yIGRpcmVjdCBkZXRlY3Rpb24sIGVuc3VyaW5nIGJ1dHRvbnMgc3RheSBpbiBzeW5jXG5cdFx0XHRcdFx0aWYgKHRoaXMuZXhwbG9yZXJNYW5hZ2VyKSB7XG5cdFx0XHRcdFx0XHR0aGlzLmV4cGxvcmVyTWFuYWdlci5yZWZyZXNoVG9nZ2xlU3RhdGVzKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICh0aGlzLnRhYkJhck1hbmFnZXIpIHtcblx0XHRcdFx0XHRcdHRoaXMudGFiQmFyTWFuYWdlci5yZWZyZXNoVG9nZ2xlU3RhdGVzKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LCAzMDApIGFzIHVua25vd24gYXMgbnVtYmVyIC8vIFJlZnJlc2ggZXZlcnkgMzAwbXMgdG8ga2VlcCBidXR0b25zIGluIHN5bmMgKGluY3JlYXNlZCBmcmVxdWVuY3kpXG5cdFx0KTtcblxuXHRcdC8vIFdhdGNoIGZvciB0aGVtZSBjaGFuZ2VzIG9uIGJvZHkgZWxlbWVudCB0byBpbW1lZGlhdGVseSB1cGRhdGUgdGhlbWUgdG9nZ2xlIGJ1dHRvbnNcblx0XHQvLyBUaGlzIGNhdGNoZXMgdGhlbWUgY2hhbmdlcyBmcm9tIGFueSBzb3VyY2UgKGtleWJvYXJkIHNob3J0Y3V0cywgY29tbWFuZCBwYWxldHRlLCBldGMuKVxuXHRcdGNvbnN0IHRoZW1lT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XG5cdFx0XHQvLyBUaGVtZSBjbGFzcyBjaGFuZ2VkIC0gcmVmcmVzaCB0b2dnbGUgc3RhdGVzIGltbWVkaWF0ZWx5XG5cdFx0XHRpZiAodGhpcy5leHBsb3Jlck1hbmFnZXIpIHtcblx0XHRcdFx0dGhpcy5leHBsb3Jlck1hbmFnZXIucmVmcmVzaFRvZ2dsZVN0YXRlcygpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRoaXMudGFiQmFyTWFuYWdlcikge1xuXHRcdFx0XHR0aGlzLnRhYkJhck1hbmFnZXIucmVmcmVzaFRvZ2dsZVN0YXRlcygpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gT2JzZXJ2ZSBib2R5IGZvciBjbGFzcyBjaGFuZ2VzICh0aGVtZSBjaGFuZ2VzKVxuXHRcdHRoZW1lT2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7XG5cdFx0XHRhdHRyaWJ1dGVzOiB0cnVlLFxuXHRcdFx0YXR0cmlidXRlRmlsdGVyOiBbJ2NsYXNzJ11cblx0XHR9KTtcblxuXHRcdC8vIFJlZ2lzdGVyIHNldHRpbmdzIHRhYlxuXHRcdHRoaXMuc2V0dGluZ1RhYiA9IG5ldyBVSVR3ZWFrZXJTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKTtcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIodGhpcy5zZXR0aW5nVGFiKTtcblxuXHRcdC8vIFNldCB1cCBoZWxwIGJ1dHRvbiByZXBsYWNlbWVudFxuXHRcdHRoaXMuc2V0dXBIZWxwQnV0dG9uUmVwbGFjZW1lbnQoKTtcblx0XHRcblx0XHQvLyBTZXQgdXAgc3luYyBidXR0b24gcmVwbGFjZW1lbnQgKG9ubHkgb24gbW9iaWxlKVxuXHRcdGlmIChQbGF0Zm9ybS5pc01vYmlsZSkge1xuXHRcdFx0dGhpcy5zZXR1cFN5bmNCdXR0b25SZXBsYWNlbWVudCgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBNYWtlIHN1cmUgY2xhc3MgaXMgcmVtb3ZlZCBvbiBkZXNrdG9wXG5cdFx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3VpLXR3ZWFrZXItaGlkZS1zeW5jLWJ1dHRvbicpO1xuXHRcdH1cblx0fVxuXG5cdG9udW5sb2FkKCkge1xuXHRcdGlmICh0aGlzLnVpTWFuYWdlcikge1xuXHRcdFx0dGhpcy51aU1hbmFnZXIuY2xlYW51cCgpO1xuXHRcdH1cblx0XHR0aGlzLnJlc3RvcmVIZWxwQnV0dG9uKCk7XG5cdFx0aWYgKHRoaXMuaGVscEJ1dHRvbk9ic2VydmVyKSB7XG5cdFx0XHR0aGlzLmhlbHBCdXR0b25PYnNlcnZlci5kaXNjb25uZWN0KCk7XG5cdFx0fVxuXHRcdHRoaXMucmVzdG9yZVN5bmNCdXR0b24oKTtcblx0XHRpZiAodGhpcy5zeW5jQnV0dG9uT2JzZXJ2ZXIpIHtcblx0XHRcdHRoaXMuc3luY0J1dHRvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmxvYWREYXRhKCkgYXMgUGFydGlhbDxVSVNldHRpbmdzPiB8IG51bGw7XG5cdFx0XHQvLyBIYW5kbGUgY29ycnVwdGVkIG9yIGVtcHR5IGRhdGFcblx0XHRcdGlmICghZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcgfHwgQXJyYXkuaXNBcnJheShkYXRhKSkge1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUyk7XG5cdFx0XHRcdC8vIFNhdmUgZGVmYXVsdHMgdG8gZml4IGNvcnJ1cHRlZCBmaWxlXG5cdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBkYXRhKTtcblx0XHRcdC8vIEVuc3VyZSBoZWxwQnV0dG9uUmVwbGFjZW1lbnQgc3RydWN0dXJlIGV4aXN0c1xuXHRcdFx0aWYgKCF0aGlzLnNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudCkge1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudCA9IHtcblx0XHRcdFx0XHRlbmFibGVkOiBmYWxzZSxcblx0XHRcdFx0XHRjb21tYW5kSWQ6ICcnLFxuXHRcdFx0XHRcdGljb25JZDogJ3NldHRpbmdzLTInLFxuXHRcdFx0XHR9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gRW5zdXJlIGljb25JZCBpcyBkZWZpbmVkIGV2ZW4gaWYgaGVscEJ1dHRvblJlcGxhY2VtZW50IGV4aXN0c1xuXHRcdFx0XHRpZiAoIXRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Lmljb25JZCkge1xuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Lmljb25JZCA9ICd3cmVuY2gnO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIE1pZ3JhdGUgb2xkIGNvbW1hbmQgSURzIChyZW1vdmUgdWktdHdlYWtlcjogcHJlZml4KVxuXHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQuY29tbWFuZElkPy5zdGFydHNXaXRoKCd1aS10d2Vha2VyOicpKSB7XG5cdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQuY29tbWFuZElkID0gdGhpcy5zZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQuY29tbWFuZElkLnJlcGxhY2UoL151aS10d2Vha2VyOisvZywgJycpO1xuXHRcdFx0XHRcdC8vIFNhdmUgbWlncmF0ZWQgc2V0dGluZ3Ncblx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIEVuc3VyZSBzeW5jQnV0dG9uUmVwbGFjZW1lbnQgc3RydWN0dXJlIGV4aXN0c1xuXHRcdFx0aWYgKCF0aGlzLnNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudCkge1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudCA9IHtcblx0XHRcdFx0XHRlbmFibGVkOiBmYWxzZSxcblx0XHRcdFx0XHRjb21tYW5kSWQ6ICcnLFxuXHRcdFx0XHRcdGljb25JZDogJ3dyZW5jaCcsXG5cdFx0XHRcdH07XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBFbnN1cmUgaWNvbklkIGlzIGRlZmluZWQgZXZlbiBpZiBzeW5jQnV0dG9uUmVwbGFjZW1lbnQgZXhpc3RzXG5cdFx0XHRcdGlmICghdGhpcy5zZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQuaWNvbklkKSB7XG5cdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQuaWNvbklkID0gJ3dyZW5jaCc7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gTWlncmF0ZSBvbGQgY29tbWFuZCBJRHMgKHJlbW92ZSB1aS10d2Vha2VyOiBwcmVmaXgpXG5cdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudC5jb21tYW5kSWQ/LnN0YXJ0c1dpdGgoJ3VpLXR3ZWFrZXI6JykpIHtcblx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudC5jb21tYW5kSWQgPSB0aGlzLnNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudC5jb21tYW5kSWQucmVwbGFjZSgvXnVpLXR3ZWFrZXI6Ky9nLCAnJyk7XG5cdFx0XHRcdFx0Ly8gU2F2ZSBtaWdyYXRlZCBzZXR0aW5nc1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gTWlncmF0ZSBtZE9ubHkgb3IgZmlsZVR5cGVGaWx0ZXIgdG8gc2hvd09uRmlsZVR5cGVzL2hpZGVPbkZpbGVUeXBlcyBmb3IgdGFiQmFyQ29tbWFuZHNcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnRhYkJhckNvbW1hbmRzKSB7XG5cdFx0XHRcdGxldCBuZWVkc1NhdmUgPSBmYWxzZTtcblx0XHRcdFx0Zm9yIChjb25zdCBwYWlyIG9mIHRoaXMuc2V0dGluZ3MudGFiQmFyQ29tbWFuZHMpIHtcblx0XHRcdFx0XHQvLyBDaGVjayBpZiBvbGQgcHJvcGVydGllcyBleGlzdCBpbiB0aGUgbG9hZGVkIGRhdGEgKGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5KVxuXHRcdFx0XHRcdGNvbnN0IHBhaXJXaXRoT2xkUHJvcHMgPSBwYWlyIGFzIHsgXG5cdFx0XHRcdFx0XHRtZE9ubHk/OiBib29sZWFuOyBcblx0XHRcdFx0XHRcdGZpbGVUeXBlRmlsdGVyPzogc3RyaW5nO1xuXHRcdFx0XHRcdFx0c2hvd09uRmlsZVR5cGVzPzogc3RyaW5nO1xuXHRcdFx0XHRcdFx0aGlkZU9uRmlsZVR5cGVzPzogc3RyaW5nO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gU2tpcCBpZiBhbHJlYWR5IG1pZ3JhdGVkXG5cdFx0XHRcdFx0aWYgKHBhaXIuc2hvd09uRmlsZVR5cGVzICE9PSB1bmRlZmluZWQgfHwgcGFpci5oaWRlT25GaWxlVHlwZXMgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIE1pZ3JhdGUgZnJvbSBtZE9ubHk6IHRydWVcblx0XHRcdFx0XHRpZiAocGFpcldpdGhPbGRQcm9wcy5tZE9ubHkgPT09IHRydWUgJiYgIXBhaXIuc2hvd09uRmlsZVR5cGVzKSB7XG5cdFx0XHRcdFx0XHRwYWlyLnNob3dPbkZpbGVUeXBlcyA9ICdtZCxtZHgnO1xuXHRcdFx0XHRcdFx0ZGVsZXRlIHBhaXJXaXRoT2xkUHJvcHMubWRPbmx5O1xuXHRcdFx0XHRcdFx0bmVlZHNTYXZlID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gTWlncmF0ZSBmcm9tIGZpbGVUeXBlRmlsdGVyIChvbGQgbWl4ZWQgc3ludGF4KVxuXHRcdFx0XHRcdGlmIChwYWlyV2l0aE9sZFByb3BzLmZpbGVUeXBlRmlsdGVyICYmICFwYWlyLnNob3dPbkZpbGVUeXBlcyAmJiAhcGFpci5oaWRlT25GaWxlVHlwZXMpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGZpbHRlciA9IHBhaXJXaXRoT2xkUHJvcHMuZmlsZVR5cGVGaWx0ZXI7XG5cdFx0XHRcdFx0XHRjb25zdCBwYXJ0cyA9IGZpbHRlci5zcGxpdCgnLCcpLm1hcChwID0+IHAudHJpbSgpKS5maWx0ZXIocCA9PiBwKTtcblx0XHRcdFx0XHRcdGNvbnN0IHNob3dUeXBlczogc3RyaW5nW10gPSBbXTtcblx0XHRcdFx0XHRcdGNvbnN0IGhpZGVUeXBlczogc3RyaW5nW10gPSBbXTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChwYXJ0LnN0YXJ0c1dpdGgoJy0nKSkge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGV4dCA9IHBhcnQuc2xpY2UoMSkucmVwbGFjZSgvXlxcLi8sICcnKS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdFx0XHRcdGlmIChleHQpIGhpZGVUeXBlcy5wdXNoKGV4dCk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgZXh0ID0gcGFydC5yZXBsYWNlKC9eXFwuLywgJycpLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGV4dCkgc2hvd1R5cGVzLnB1c2goZXh0KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRpZiAoc2hvd1R5cGVzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdFx0cGFpci5zaG93T25GaWxlVHlwZXMgPSBzaG93VHlwZXMuam9pbignLCcpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKGhpZGVUeXBlcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRcdHBhaXIuaGlkZU9uRmlsZVR5cGVzID0gaGlkZVR5cGVzLmpvaW4oJywnKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0ZGVsZXRlIHBhaXJXaXRoT2xkUHJvcHMuZmlsZVR5cGVGaWx0ZXI7XG5cdFx0XHRcdFx0XHRuZWVkc1NhdmUgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAobmVlZHNTYXZlKSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCdbVUkgVHdlYWtlcl0gRmFpbGVkIHRvIGxvYWQgc2V0dGluZ3M6JywgZXJyb3IpO1xuXHRcdFx0Ly8gRmFsbCBiYWNrIHRvIGRlZmF1bHRzIGlmIGxvYWRpbmcgZmFpbHNcblx0XHRcdHRoaXMuc2V0dGluZ3MgPSB7IC4uLkRFRkFVTFRfU0VUVElOR1MgfTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxuXG5cdHJlZnJlc2goKSB7XG5cdFx0aWYgKHRoaXMudWlNYW5hZ2VyKSB7XG5cdFx0XHR0aGlzLnVpTWFuYWdlci51cGRhdGVTZXR0aW5ncyh0aGlzLnNldHRpbmdzKTtcblx0XHR9XG5cdFx0dGhpcy5leHBsb3Jlck1hbmFnZXI/LmFwcGx5TmF0aXZlSWNvbk92ZXJyaWRlcygpO1xuXHRcdHRoaXMuc2V0dXBIZWxwQnV0dG9uUmVwbGFjZW1lbnQoKTtcblx0XHQvLyBBbHdheXMgdXBkYXRlIHN5bmMgYnV0dG9uIENTUyB0byBlbnN1cmUgaXQgbWF0Y2hlcyBjdXJyZW50IHNldHRpbmdzXG5cdFx0dGhpcy51cGRhdGVTeW5jQnV0dG9uQ1NTKCk7XG5cdFx0aWYgKFBsYXRmb3JtLmlzTW9iaWxlKSB7XG5cdFx0XHR0aGlzLnNldHVwU3luY0J1dHRvblJlcGxhY2VtZW50KCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIE1ha2Ugc3VyZSBjbGFzcyBpcyByZW1vdmVkIG9uIGRlc2t0b3Bcblx0XHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgndWktdHdlYWtlci1oaWRlLXN5bmMtYnV0dG9uJyk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBzZXR1cEhlbHBCdXR0b25SZXBsYWNlbWVudCgpIHtcblx0XHQvLyBPbmx5IHByb2NlZWQgaWYgcmVwbGFjZW1lbnQgaXMgZW5hYmxlZFxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQ/LmVuYWJsZWQpIHtcblx0XHRcdHRoaXMucmVzdG9yZUhlbHBCdXR0b24oKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gVXBkYXRlIENTUyBhbmQgYnV0dG9uXG5cdFx0dGhpcy51cGRhdGVIZWxwQnV0dG9uQ1NTKCk7XG5cdFx0XG5cdFx0Ly8gV2FpdCBmb3IgdGhlIERPTSB0byBiZSByZWFkeVxuXHRcdGNvbnN0IHRyeVNldHVwID0gKCkgPT4ge1xuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkKSB7XG5cdFx0XHRcdHZvaWQgdGhpcy51cGRhdGVIZWxwQnV0dG9uKCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8vIFRyeSBpbW1lZGlhdGVseVxuXHRcdHRyeVNldHVwKCk7XG5cblx0XHQvLyBBbHNvIHRyeSBhZnRlciBhIHNob3J0IGRlbGF5IHRvIGVuc3VyZSBET00gaXMgcmVhZHlcblx0XHRzZXRUaW1lb3V0KHRyeVNldHVwLCA1MDApO1xuXG5cdFx0Ly8gU2V0IHVwIG9ic2VydmVyIGFmdGVyIGluaXRpYWwgc2V0dXAgdG8gd2F0Y2ggZm9yIGJ1dHRvbiByZWNyZWF0aW9uXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHR0aGlzLnNldHVwSGVscEJ1dHRvbk9ic2VydmVyKCk7XG5cdFx0fSwgMTAwMCk7XG5cdH1cblxuXHRwdWJsaWMgdXBkYXRlSGVscEJ1dHRvbkNTUygpIHtcblx0XHQvLyBIaWRlIGhlbHAgYnV0dG9uIGlmIGVpdGhlciBoZWxwQnV0dG9uIGlzIHNldCB0byBcImhpZGVcIiBPUiByZXBsYWNlbWVudCBpcyBlbmFibGVkXG5cdFx0Y29uc3Qgc2hvdWxkSGlkZUhlbHBCdXR0b24gPSB0aGlzLnNldHRpbmdzLmhlbHBCdXR0b24gPT09ICdoaWRlJyB8fCB0aGlzLnNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudD8uZW5hYmxlZDtcblx0XHRcblx0XHQvLyBVc2UgQ1NTIGNsYXNzIGluc3RlYWQgb2Ygc3R5bGUgZWxlbWVudFxuXHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgndWktdHdlYWtlci1oaWRlLWhlbHAtYnV0dG9uJywgc2hvdWxkSGlkZUhlbHBCdXR0b24pO1xuXHR9XG5cblx0cHVibGljIGFzeW5jIHVwZGF0ZUhlbHBCdXR0b24oKSB7XG5cdFx0Ly8gT25seSBwcm9jZWVkIGlmIHJlcGxhY2VtZW50IGlzIGVuYWJsZWRcblx0XHRpZiAoIXRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkKSB7XG5cdFx0XHR0aGlzLnJlc3RvcmVIZWxwQnV0dG9uKCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdFxuXHRcdC8vIFRlbXBvcmFyaWx5IGRpc2Nvbm5lY3Qgb2JzZXJ2ZXIgdG8gcHJldmVudCBpbmZpbml0ZSBsb29wc1xuXHRcdGlmICh0aGlzLmhlbHBCdXR0b25PYnNlcnZlcikge1xuXHRcdFx0dGhpcy5oZWxwQnV0dG9uT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuXHRcdH1cblxuXHRcdC8vIEVuc3VyZSB3ZSBoYXZlIHRoZSBsYXRlc3Qgc2V0dGluZ3Ncblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG5cdFx0Ly8gVXBkYXRlIENTUyBmaXJzdCAodGhpcyB3aWxsIGhpZGUgdGhlIGhlbHAgYnV0dG9uIGdsb2JhbGx5KVxuXHRcdHRoaXMudXBkYXRlSGVscEJ1dHRvbkNTUygpO1xuXG5cdFx0dHJ5IHtcblx0XHRcdC8vIENoZWNrIGlmIHJlcGxhY2VtZW50IGlzIHN0aWxsIGVuYWJsZWRcblx0XHRcdGlmICghdGhpcy5zZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQ/LmVuYWJsZWQpIHtcblx0XHRcdFx0dGhpcy5yZXN0b3JlSGVscEJ1dHRvbigpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIEZpbmQgdGhlIGhlbHAgYnV0dG9uXG5cdFx0XHRjb25zdCB2YXVsdEFjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLWRyYXdlci12YXVsdC1hY3Rpb25zJyk7XG5cdFx0XHRpZiAoIXZhdWx0QWN0aW9ucykge1xuXHRcdFx0XHQvLyBTZXQgdXAgb2JzZXJ2ZXIgdG8gY2F0Y2ggaXQgd2hlbiBpdCBhcHBlYXJzXG5cdFx0XHRcdHRoaXMuc2V0dXBIZWxwQnV0dG9uT2JzZXJ2ZXIoKTtcblx0XHRcdFx0Ly8gQWxzbyByZXRyeSBhZnRlciBhIHNob3J0IGRlbGF5XG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudD8uZW5hYmxlZCkge1xuXHRcdFx0XHRcdFx0dm9pZCB0aGlzLnVwZGF0ZUhlbHBCdXR0b24oKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sIDUwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRmluZCB0aGUgaGVscCBidXR0b24gLSBpdCdzIHRoZSBmaXJzdCBjbGlja2FibGUtaWNvbiB0aGF0IGNvbnRhaW5zIGFuIFNWRyB3aXRoIGNsYXNzIFwiaGVscFwiXG5cdFx0XHRjb25zdCBjbGlja2FibGVJY29ucyA9IEFycmF5LmZyb20odmF1bHRBY3Rpb25zLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jbGlja2FibGUtaWNvbicpKTtcblx0XHRcdGxldCBoZWxwQnV0dG9uOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXHRcdFx0XG5cdFx0XHRmb3IgKGNvbnN0IGljb24gb2YgY2xpY2thYmxlSWNvbnMpIHtcblx0XHRcdFx0Y29uc3Qgc3ZnID0gaWNvbi5xdWVyeVNlbGVjdG9yKCdzdmcuaGVscCcpO1xuXHRcdFx0XHRpZiAoc3ZnKSB7XG5cdFx0XHRcdFx0aGVscEJ1dHRvbiA9IGljb24gYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0aWYgKCFoZWxwQnV0dG9uKSB7XG5cdFx0XHRcdC8vIFNldCB1cCBvYnNlcnZlciB0byBjYXRjaCBpdCB3aGVuIGl0IGFwcGVhcnNcblx0XHRcdFx0dGhpcy5zZXR1cEhlbHBCdXR0b25PYnNlcnZlcigpO1xuXHRcdFx0XHQvLyBBbHNvIHJldHJ5IGFmdGVyIGEgc2hvcnQgZGVsYXlcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkKSB7XG5cdFx0XHRcdFx0XHR2b2lkIHRoaXMudXBkYXRlSGVscEJ1dHRvbigpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSwgNTAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZW1vdmUgZXhpc3RpbmcgY3VzdG9tIGJ1dHRvbiBpZiBpdCBleGlzdHMgKGFsd2F5cyByZWNyZWF0ZSB0byB1cGRhdGUgaWNvbi9jb21tYW5kKVxuXHRcdFx0aWYgKHRoaXMuY3VzdG9tSGVscEJ1dHRvbiAmJiB0aGlzLmN1c3RvbUhlbHBCdXR0b24ucGFyZW50RWxlbWVudCAmJiBkb2N1bWVudC5ib2R5LmNvbnRhaW5zKHRoaXMuY3VzdG9tSGVscEJ1dHRvbikpIHtcblx0XHRcdFx0dGhpcy5jdXN0b21IZWxwQnV0dG9uLnJlbW92ZSgpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5jdXN0b21IZWxwQnV0dG9uID0gdW5kZWZpbmVkO1xuXG5cdFx0XHQvLyBDcmVhdGUgYSBuZXcgY3VzdG9tIGJ1dHRvblxuXHRcdFx0Y29uc3QgY3VzdG9tQnV0dG9uID0gaGVscEJ1dHRvbi5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRjdXN0b21CdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWxhYmVsJyk7XG5cdFx0XHQvLyBBZGQgdW5pcXVlIGlkZW50aWZpZXIgdG8gYXZvaWQgY29uZmxpY3RzIHdpdGggb3RoZXIgcGx1Z2luc1xuXHRcdFx0Y3VzdG9tQnV0dG9uLnNldEF0dHJpYnV0ZSgnZGF0YS11aS10d2Vha2VyLWhlbHAtcmVwbGFjZW1lbnQnLCAndHJ1ZScpO1xuXHRcdFx0Y3VzdG9tQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3VpLXR3ZWFrZXItaGVscC1yZXBsYWNlbWVudCcpO1xuXHRcdFx0XG5cdFx0XHQvLyBDbGVhciBhbnkgZXhpc3RpbmcgY2xpY2sgaGFuZGxlcnNcblx0XHRcdGN1c3RvbUJ1dHRvbi5vbmNsaWNrID0gbnVsbDtcblx0XHRcdFxuXHRcdFx0Ly8gUmVwbGFjZSB0aGUgaWNvbiB1c2luZyBPYnNpZGlhbidzIHNldEljb24gZnVuY3Rpb25cblx0XHRcdGNvbnN0IGljb25Db250YWluZXIgPSBjdXN0b21CdXR0b24ucXVlcnlTZWxlY3Rvcignc3ZnJyk/LnBhcmVudEVsZW1lbnQgfHwgY3VzdG9tQnV0dG9uO1xuXHRcdFx0Y29uc3QgaWNvbklkID0gdGhpcy5zZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQ/Lmljb25JZDtcblx0XHRcdGlmIChpY29uSWQpIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRzZXRJY29uKGljb25Db250YWluZXIsIGljb25JZCk7XG5cdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdC8vIEVycm9yIHNldHRpbmcgaWNvblxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHNldEljb24oaWNvbkNvbnRhaW5lciwgJ3dyZW5jaCcpO1xuXHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHQvLyBFcnJvciBzZXR0aW5nIGRlZmF1bHQgaWNvblxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFkZCBvdXIgY3VzdG9tIGNsaWNrIGhhbmRsZXJcblx0XHRcdGN1c3RvbUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQ6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnN0IGNvbW1hbmRJZCA9IHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Py5jb21tYW5kSWQ7XG5cdFx0XHRcdGlmIChjb21tYW5kSWQpIHtcblx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHQvLyBVc2UgdHlwZSBhc3NlcnRpb24gZm9yIGV4ZWN1dGVDb21tYW5kQnlJZCBhcyBpdCdzIG5vdCBpbiB0aGUgcHVibGljIEFQSSB0eXBlc1xuXHRcdFx0XHRcdFx0XHQvLyBidXQgaXMgYXZhaWxhYmxlIGluIHRoZSBydW50aW1lIEFQSVxuXHRcdFx0XHRcdFx0XHRjb25zdCBjb21tYW5kcyA9ICh0aGlzLmFwcCBhcyB7IGNvbW1hbmRzPzogeyBleGVjdXRlQ29tbWFuZEJ5SWQ/OiAoaWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPiB9IH0pLmNvbW1hbmRzO1xuXHRcdFx0XHRcdFx0XHRpZiAoY29tbWFuZHM/LmV4ZWN1dGVDb21tYW5kQnlJZCkge1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IGNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kQnlJZChjb21tYW5kSWQpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignQ29tbWFuZCBleGVjdXRpb24gbm90IGF2YWlsYWJsZScpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZShgRmFpbGVkIHRvIGV4ZWN1dGUgY29tbWFuZDogJHtjb21tYW5kSWR9YCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSkoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgdHJ1ZSk7IC8vIFVzZSBjYXB0dXJlIHBoYXNlIHRvIGVuc3VyZSB3ZSBoYW5kbGUgaXQgZmlyc3RcblxuXHRcdFx0Ly8gSW5zZXJ0IHRoZSBjdXN0b20gYnV0dG9uIHJpZ2h0IGFmdGVyIHRoZSBvcmlnaW5hbCAoaGlkZGVuKSBidXR0b25cblx0XHRcdGhlbHBCdXR0b24ucGFyZW50RWxlbWVudD8uaW5zZXJ0QmVmb3JlKGN1c3RvbUJ1dHRvbiwgaGVscEJ1dHRvbi5uZXh0U2libGluZyk7XG5cdFx0XHRcblx0XHRcdC8vIFN0b3JlIHJlZmVyZW5jZSB0byBjdXN0b20gYnV0dG9uXG5cdFx0XHR0aGlzLmN1c3RvbUhlbHBCdXR0b24gPSBjdXN0b21CdXR0b247XG5cdFx0fSBmaW5hbGx5IHtcblx0XHRcdC8vIEFsd2F5cyBzZXQgdXAgb2JzZXJ2ZXIgYWZ0ZXIgYXR0ZW1wdGluZyB0byBjcmVhdGUgYnV0dG9uIChldmVuIGlmIGVsZW1lbnRzIHdlcmVuJ3QgZm91bmQpXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkKSB7XG5cdFx0XHRcdFx0dGhpcy5zZXR1cEhlbHBCdXR0b25PYnNlcnZlcigpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCAxMDAwKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIHNldHVwSGVscEJ1dHRvbk9ic2VydmVyKCkge1xuXHRcdC8vIERpc2Nvbm5lY3QgZXhpc3Rpbmcgb2JzZXJ2ZXIgaWYgYW55XG5cdFx0aWYgKHRoaXMuaGVscEJ1dHRvbk9ic2VydmVyKSB7XG5cdFx0XHR0aGlzLmhlbHBCdXR0b25PYnNlcnZlci5kaXNjb25uZWN0KCk7XG5cdFx0fVxuXG5cdFx0Ly8gT25seSBzZXQgdXAgb2JzZXJ2ZXIgaWYgcmVwbGFjZW1lbnQgaXMgZW5hYmxlZFxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQ/LmVuYWJsZWQpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBOb3RlOiBNdXRhdGlvbk9ic2VydmVyIGlzIG1hbnVhbGx5IG1hbmFnZWQgYmVjYXVzZSBPYnNpZGlhbidzIHJlZ2lzdGVyRG9tRXZlbnRcblx0XHQvLyBkb2Vzbid0IHN1cHBvcnQgTXV0YXRpb25PYnNlcnZlciBkaXJlY3RseS4gQ2xlYW51cCBpcyBoYW5kbGVkIGluIG9udW5sb2FkKCkuXG5cdFx0Ly8gV2F0Y2ggZm9yIGNoYW5nZXMgdG8gdGhlIHZhdWx0IHByb2ZpbGUgYXJlYSBvbmx5IChtb3JlIHRhcmdldGVkKVxuXHRcdGxldCB1cGRhdGVUaW1lb3V0OiBudW1iZXIgfCBudWxsID0gbnVsbDtcblx0XHR0aGlzLmhlbHBCdXR0b25PYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcblx0XHRcdC8vIERlYm91bmNlIHVwZGF0ZXMgdG8gcHJldmVudCBpbmZpbml0ZSBsb29wc1xuXHRcdFx0aWYgKHVwZGF0ZVRpbWVvdXQpIHtcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KHVwZGF0ZVRpbWVvdXQpO1xuXHRcdFx0fVxuXHRcdFx0dXBkYXRlVGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgaGVscCBidXR0b24gd2FzIHJlY3JlYXRlZCAoQ1NTIHdpbGwgaGlkZSBpdCwgYnV0IHdlIG5lZWQgdG8gaW5qZWN0IG91ciBjdXN0b20gYnV0dG9uKVxuXHRcdFx0XHRjb25zdCB2YXVsdEFjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLWRyYXdlci12YXVsdC1hY3Rpb25zJyk7XG5cdFx0XHRcdGlmICghdmF1bHRBY3Rpb25zKSByZXR1cm47XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBDaGVjayBpZiB3ZSBoYXZlIGEgY3VzdG9tIGJ1dHRvbiBBTkQgaXQncyBzdGlsbCBpbiB0aGUgRE9NXG5cdFx0XHRcdGNvbnN0IGN1c3RvbUJ1dHRvbkV4aXN0cyA9IHRoaXMuY3VzdG9tSGVscEJ1dHRvbiAmJiBcblx0XHRcdFx0XHR0aGlzLmN1c3RvbUhlbHBCdXR0b24ucGFyZW50RWxlbWVudCAmJiBcblx0XHRcdFx0XHRkb2N1bWVudC5ib2R5LmNvbnRhaW5zKHRoaXMuY3VzdG9tSGVscEJ1dHRvbikgJiZcblx0XHRcdFx0XHR0aGlzLmN1c3RvbUhlbHBCdXR0b24uaGFzQXR0cmlidXRlKCdkYXRhLXVpLXR3ZWFrZXItaGVscC1yZXBsYWNlbWVudCcpO1xuXHRcdFx0XHRcblx0XHRcdFx0aWYgKCFjdXN0b21CdXR0b25FeGlzdHMpIHtcblx0XHRcdFx0XHQvLyBDbGVhciBzdGFsZSByZWZlcmVuY2UgaWYgYnV0dG9uIHdhcyByZW1vdmVkXG5cdFx0XHRcdFx0aWYgKHRoaXMuY3VzdG9tSGVscEJ1dHRvbiAmJiAhZG9jdW1lbnQuYm9keS5jb250YWlucyh0aGlzLmN1c3RvbUhlbHBCdXR0b24pKSB7XG5cdFx0XHRcdFx0XHR0aGlzLmN1c3RvbUhlbHBCdXR0b24gPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHZvaWQgdGhpcy51cGRhdGVIZWxwQnV0dG9uKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sIDEwMCk7XG5cdFx0fSk7XG5cblx0XHQvLyBPYnNlcnZlIHRoZSB2YXVsdCBhY3Rpb25zIGFyZWEgbW9yZSBzcGVjaWZpY2FsbHlcblx0XHRjb25zdCB2YXVsdEFjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLWRyYXdlci12YXVsdC1hY3Rpb25zJyk7XG5cdFx0aWYgKHZhdWx0QWN0aW9ucykge1xuXHRcdFx0dGhpcy5oZWxwQnV0dG9uT2JzZXJ2ZXIub2JzZXJ2ZSh2YXVsdEFjdGlvbnMsIHtcblx0XHRcdFx0Y2hpbGRMaXN0OiB0cnVlLFxuXHRcdFx0XHRzdWJ0cmVlOiB0cnVlLFxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdFxuXHRcdC8vIEFsc28gb2JzZXJ2ZSB0aGUgcGFyZW50IHZhdWx0IHByb2ZpbGUgYXJlYVxuXHRcdGNvbnN0IHZhdWx0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2Utc2lkZWRvY2stdmF1bHQtcHJvZmlsZScpO1xuXHRcdGlmICh2YXVsdFByb2ZpbGUpIHtcblx0XHRcdHRoaXMuaGVscEJ1dHRvbk9ic2VydmVyLm9ic2VydmUodmF1bHRQcm9maWxlLCB7XG5cdFx0XHRcdGNoaWxkTGlzdDogdHJ1ZSxcblx0XHRcdFx0c3VidHJlZTogZmFsc2UsXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gQWRkIGZhbGxiYWNrIG9ic2VydmVycyBpZiB0aGUgc3BlY2lmaWMgZWxlbWVudHMgZG9uJ3QgZXhpc3QgeWV0XG5cdFx0aWYgKCF2YXVsdEFjdGlvbnMgJiYgIXZhdWx0UHJvZmlsZSkge1xuXHRcdFx0Y29uc3Qgd29ya3NwYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS1zcGxpdCcpO1xuXHRcdFx0aWYgKHdvcmtzcGFjZSkge1xuXHRcdFx0XHR0aGlzLmhlbHBCdXR0b25PYnNlcnZlci5vYnNlcnZlKHdvcmtzcGFjZSwge1xuXHRcdFx0XHRcdGNoaWxkTGlzdDogdHJ1ZSxcblx0XHRcdFx0XHRzdWJ0cmVlOiB0cnVlLFxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIExhc3QgcmVzb3J0OiBvYnNlcnZlIGRvY3VtZW50IGJvZHlcblx0XHRcdFx0dGhpcy5oZWxwQnV0dG9uT2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7XG5cdFx0XHRcdFx0Y2hpbGRMaXN0OiB0cnVlLFxuXHRcdFx0XHRcdHN1YnRyZWU6IHRydWUsXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgcmVzdG9yZUhlbHBCdXR0b24oKSB7XG5cdFx0Ly8gT25seSByZW1vdmUgQ1NTIGNsYXNzIGlmIG5laXRoZXIgaGVscEJ1dHRvbiBpcyBzZXQgdG8gXCJoaWRlXCIgbm9yIHJlcGxhY2VtZW50IGlzIGVuYWJsZWRcblx0XHRjb25zdCBzaG91bGRIaWRlSGVscEJ1dHRvbiA9IHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvbiA9PT0gJ2hpZGUnIHx8IHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkO1xuXHRcdGlmICghc2hvdWxkSGlkZUhlbHBCdXR0b24pIHtcblx0XHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgndWktdHdlYWtlci1oaWRlLWhlbHAtYnV0dG9uJyk7XG5cdFx0fVxuXG5cdFx0Ly8gUmVtb3ZlIHRoZSBjdXN0b20gYnV0dG9uIChvbmx5IGlmIHJlcGxhY2VtZW50IGlzIGRpc2FibGVkKVxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQ/LmVuYWJsZWQgJiYgdGhpcy5jdXN0b21IZWxwQnV0dG9uKSB7XG5cdFx0XHRpZiAoZG9jdW1lbnQuYm9keS5jb250YWlucyh0aGlzLmN1c3RvbUhlbHBCdXR0b24pKSB7XG5cdFx0XHRcdHRoaXMuY3VzdG9tSGVscEJ1dHRvbi5yZW1vdmUoKTtcblx0XHRcdH1cblx0XHRcdHRoaXMuY3VzdG9tSGVscEJ1dHRvbiA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIHNldHVwU3luY0J1dHRvblJlcGxhY2VtZW50KCkge1xuXHRcdC8vIEFsd2F5cyB1cGRhdGUgQ1NTIGZpcnN0ICh3aWxsIHJlbW92ZSBjbGFzcyBpZiBkaXNhYmxlZClcblx0XHR0aGlzLnVwZGF0ZVN5bmNCdXR0b25DU1MoKTtcblx0XHRcblx0XHQvLyBPbmx5IHByb2NlZWQgaWYgcmVwbGFjZW1lbnQgaXMgZW5hYmxlZCBBTkQgd2UncmUgb24gbW9iaWxlXG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudD8uZW5hYmxlZCB8fCAhUGxhdGZvcm0uaXNNb2JpbGUpIHtcblx0XHRcdHRoaXMucmVzdG9yZVN5bmNCdXR0b24oKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gV2FpdCBmb3IgdGhlIERPTSB0byBiZSByZWFkeVxuXHRcdGNvbnN0IHRyeVNldHVwID0gKCkgPT4ge1xuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkKSB7XG5cdFx0XHRcdHZvaWQgdGhpcy51cGRhdGVTeW5jQnV0dG9uKCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8vIFRyeSBpbW1lZGlhdGVseVxuXHRcdHRyeVNldHVwKCk7XG5cblx0XHQvLyBBbHNvIHRyeSBhZnRlciBhIHNob3J0IGRlbGF5IHRvIGVuc3VyZSBET00gaXMgcmVhZHlcblx0XHRzZXRUaW1lb3V0KHRyeVNldHVwLCA1MDApO1xuXG5cdFx0Ly8gU2V0IHVwIG9ic2VydmVyIGFmdGVyIGluaXRpYWwgc2V0dXAgdG8gd2F0Y2ggZm9yIGJ1dHRvbiByZWNyZWF0aW9uXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHR0aGlzLnNldHVwU3luY0J1dHRvbk9ic2VydmVyKCk7XG5cdFx0fSwgMTAwMCk7XG5cdH1cblxuXHRwdWJsaWMgdXBkYXRlU3luY0J1dHRvbkNTUygpIHtcblx0XHQvLyBIaWRlIHN5bmMgYnV0dG9uIGlmIHJlcGxhY2VtZW50IGlzIGVuYWJsZWQgQU5EIHdlJ3JlIG9uIG1vYmlsZVxuXHRcdC8vIFVzZSBDU1MgY2xhc3MgaW5zdGVhZCBvZiBzdHlsZSBlbGVtZW50XG5cdFx0Y29uc3Qgc2hvdWxkSGlkZSA9ICh0aGlzLnNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudD8uZW5hYmxlZCA/PyBmYWxzZSkgJiYgUGxhdGZvcm0uaXNNb2JpbGU7XG5cdFx0ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKCd1aS10d2Vha2VyLWhpZGUtc3luYy1idXR0b24nLCBzaG91bGRIaWRlKTtcblx0fVxuXG5cdHB1YmxpYyBhc3luYyB1cGRhdGVTeW5jQnV0dG9uKCkge1xuXHRcdC8vIE9ubHkgcHJvY2VlZCBpZiByZXBsYWNlbWVudCBpcyBlbmFibGVkXG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudD8uZW5hYmxlZCkge1xuXHRcdFx0dGhpcy5yZXN0b3JlU3luY0J1dHRvbigpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRcblx0XHQvLyBUZW1wb3JhcmlseSBkaXNjb25uZWN0IG9ic2VydmVyIHRvIHByZXZlbnQgaW5maW5pdGUgbG9vcHNcblx0XHRpZiAodGhpcy5zeW5jQnV0dG9uT2JzZXJ2ZXIpIHtcblx0XHRcdHRoaXMuc3luY0J1dHRvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcblx0XHR9XG5cblx0XHQvLyBFbnN1cmUgd2UgaGF2ZSB0aGUgbGF0ZXN0IHNldHRpbmdzXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdC8vIFVwZGF0ZSBDU1MgZmlyc3QgKHRoaXMgd2lsbCBoaWRlIHRoZSBzeW5jIGJ1dHRvbiBnbG9iYWxseSlcblx0XHR0aGlzLnVwZGF0ZVN5bmNCdXR0b25DU1MoKTtcblxuXHRcdHRyeSB7XG5cdFx0XHQvLyBDaGVjayBpZiByZXBsYWNlbWVudCBpcyBzdGlsbCBlbmFibGVkXG5cdFx0XHRpZiAoIXRoaXMuc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkKSB7XG5cdFx0XHRcdHRoaXMucmVzdG9yZVN5bmNCdXR0b24oKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBGaW5kIHRoZSBzeW5jIGJ1dHRvbiBpbiBtb2JpbGUgcmlnaHQgZHJhd2VyIGhlYWRlclxuXHRcdFx0Ly8gQWN0dWFsIHBhdHRlcm46IGNsaWNrYWJsZS1pY29uIHdvcmtzcGFjZS1kcmF3ZXItaGVhZGVyLWljb24gbW9kLXJhaXNlZCBzeW5jLXN0YXR1cy1pY29uXG5cdFx0XHRsZXQgc3luY0J1dHRvbjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblx0XHRcdFxuXHRcdFx0Ly8gU2VhcmNoIGluIHJpZ2h0IGRyYXdlciBoZWFkZXJcblx0XHRcdGNvbnN0IHJpZ2h0RHJhd2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS1kcmF3ZXIubW9kLXJpZ2h0Jyk7XG5cdFx0XHRpZiAocmlnaHREcmF3ZXIpIHtcblx0XHRcdFx0Y29uc3QgZHJhd2VySGVhZGVyID0gcmlnaHREcmF3ZXIucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS1kcmF3ZXItaGVhZGVyJyk7XG5cdFx0XHRcdGlmIChkcmF3ZXJIZWFkZXIpIHtcblx0XHRcdFx0XHQvLyBMb29rIGZvciBzeW5jLXN0YXR1cy1pY29uIGNsYXNzICh0aGlzIGlzIHRoZSBhY3R1YWwgY2xhc3MhKVxuXHRcdFx0XHRcdHN5bmNCdXR0b24gPSBkcmF3ZXJIZWFkZXIucXVlcnlTZWxlY3RvcignLnN5bmMtc3RhdHVzLWljb24sIC53b3Jrc3BhY2UtZHJhd2VyLWhlYWRlci1pY29uLnN5bmMtc3RhdHVzLWljb24nKSBhcyBIVE1MRWxlbWVudDtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBGYWxsYmFjazogbG9vayBmb3IgcmVmcmVzaC1jdy1vZmYgU1ZHIChzeW5jIGljb24gaW4gZXJyb3IvcGF1c2VkIHN0YXRlKVxuXHRcdFx0XHRcdGlmICghc3luY0J1dHRvbikge1xuXHRcdFx0XHRcdFx0Y29uc3QgY2xpY2thYmxlSWNvbnMgPSBBcnJheS5mcm9tKGRyYXdlckhlYWRlci5xdWVyeVNlbGVjdG9yQWxsKCcuY2xpY2thYmxlLWljb24nKSk7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IGljb24gb2YgY2xpY2thYmxlSWNvbnMpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc3ZnID0gaWNvbi5xdWVyeVNlbGVjdG9yKCdzdmcucmVmcmVzaC1jdy1vZmYsIHN2Zy5yZWZyZXNoLWN3Jyk7XG5cdFx0XHRcdFx0XHRcdGlmIChzdmcpIHtcblx0XHRcdFx0XHRcdFx0XHRzeW5jQnV0dG9uID0gaWNvbiBhcyBIVE1MRWxlbWVudDtcblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRpZiAoIXN5bmNCdXR0b24pIHtcblx0XHRcdFx0Ly8gU2V0IHVwIG9ic2VydmVyIHRvIGNhdGNoIGl0IHdoZW4gaXQgYXBwZWFyc1xuXHRcdFx0XHR0aGlzLnNldHVwU3luY0J1dHRvbk9ic2VydmVyKCk7XG5cdFx0XHRcdC8vIEFsc28gcmV0cnkgYWZ0ZXIgYSBzaG9ydCBkZWxheVxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQ/LmVuYWJsZWQpIHtcblx0XHRcdFx0XHRcdHZvaWQgdGhpcy51cGRhdGVTeW5jQnV0dG9uKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LCA1MDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJlbW92ZSBleGlzdGluZyBjdXN0b20gYnV0dG9uIGlmIGl0IGV4aXN0cyAoYWx3YXlzIHJlY3JlYXRlIHRvIHVwZGF0ZSBpY29uL2NvbW1hbmQpXG5cdFx0XHRpZiAodGhpcy5jdXN0b21TeW5jQnV0dG9uICYmIHRoaXMuY3VzdG9tU3luY0J1dHRvbi5wYXJlbnRFbGVtZW50ICYmIGRvY3VtZW50LmJvZHkuY29udGFpbnModGhpcy5jdXN0b21TeW5jQnV0dG9uKSkge1xuXHRcdFx0XHR0aGlzLmN1c3RvbVN5bmNCdXR0b24ucmVtb3ZlKCk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLmN1c3RvbVN5bmNCdXR0b24gPSB1bmRlZmluZWQ7XG5cblx0XHRcdC8vIENyZWF0ZSBhIG5ldyBjdXN0b20gYnV0dG9uIChjbG9uZSBwcmVzZXJ2ZXMgYWxsIG9yaWdpbmFsIGNsYXNzZXMpXG5cdFx0XHRjb25zdCBjdXN0b21CdXR0b24gPSBzeW5jQnV0dG9uLmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRWxlbWVudDtcblx0XHRcdGN1c3RvbUJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKTtcblx0XHRcdC8vIEFkZCB1bmlxdWUgaWRlbnRpZmllciB0byBhdm9pZCBjb25mbGljdHMgd2l0aCBvdGhlciBwbHVnaW5zXG5cdFx0XHRjdXN0b21CdXR0b24uc2V0QXR0cmlidXRlKCdkYXRhLXVpLXR3ZWFrZXItc3luYy1yZXBsYWNlbWVudCcsICd0cnVlJyk7XG5cdFx0XHRjdXN0b21CdXR0b24uY2xhc3NMaXN0LmFkZCgndWktdHdlYWtlci1zeW5jLXJlcGxhY2VtZW50Jyk7XG5cdFx0XHRcblx0XHRcdC8vIEVuc3VyZSB0aGUgYnV0dG9uIGlzIHZpc2libGUgKHByZXNlcnZlIG9yaWdpbmFsIGNsYXNzZXMgYnV0IGVuc3VyZSB2aXNpYmlsaXR5KVxuXHRcdFx0Ly8gVGhlIG9yaWdpbmFsIGNsYXNzZXMgKHdvcmtzcGFjZS1kcmF3ZXItaGVhZGVyLWljb24sIGNsaWNrYWJsZS1pY29uLCBldGMuKSBzaG91bGQgYmUgcHJlc2VydmVkIGZyb20gY2xvbmVcblx0XHRcdFxuXHRcdFx0Ly8gQ2xlYXIgYW55IGV4aXN0aW5nIGNsaWNrIGhhbmRsZXJzIC0gcmVtb3ZlIGFsbCBldmVudCBsaXN0ZW5lcnNcblx0XHRcdGN1c3RvbUJ1dHRvbi5vbmNsaWNrID0gbnVsbDtcblx0XHRcdC8vIFJlbW92ZSBhbnkgZGF0YSBhdHRyaWJ1dGVzIHRoYXQgbWlnaHQgaGF2ZSBjbGljayBoYW5kbGVyc1xuXHRcdFx0Y3VzdG9tQnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1jb21tYW5kJyk7XG5cdFx0XHRcblx0XHRcdC8vIFJlcGxhY2UgdGhlIGljb24gdXNpbmcgT2JzaWRpYW4ncyBzZXRJY29uIGZ1bmN0aW9uXG5cdFx0XHQvLyBGaW5kIHRoZSBTVkcgY29udGFpbmVyIC0gaXQgc2hvdWxkIGJlIGRpcmVjdGx5IGluIHRoZSBidXR0b24gb3IgaW4gYSBjaGlsZFxuXHRcdFx0bGV0IGljb25Db250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdFx0XHRjb25zdCBleGlzdGluZ1N2ZyA9IGN1c3RvbUJ1dHRvbi5xdWVyeVNlbGVjdG9yKCdzdmcnKTtcblx0XHRcdGlmIChleGlzdGluZ1N2Zykge1xuXHRcdFx0XHRpY29uQ29udGFpbmVyID0gZXhpc3RpbmdTdmcucGFyZW50RWxlbWVudCBhcyBIVE1MRWxlbWVudDtcblx0XHRcdFx0Ly8gUmVtb3ZlIHRoZSBvbGQgU1ZHXG5cdFx0XHRcdGV4aXN0aW5nU3ZnLnJlbW92ZSgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWNvbkNvbnRhaW5lciA9IGN1c3RvbUJ1dHRvbjtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gRW5zdXJlIGljb24gY29udGFpbmVyIGhhcyBwcm9wZXIgZGlzcGxheSBmb3IgY2VudGVyaW5nXG5cdFx0XHRpZiAoaWNvbkNvbnRhaW5lcikge1xuXHRcdFx0XHRzZXRDc3NQcm9wcyhpY29uQ29udGFpbmVyLCB7XG5cdFx0XHRcdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdFx0XHRcdGFsaWduSXRlbXM6ICdjZW50ZXInLFxuXHRcdFx0XHRcdGp1c3RpZnlDb250ZW50OiAnY2VudGVyJ1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Y29uc3QgaWNvbklkID0gdGhpcy5zZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQ/Lmljb25JZDtcblx0XHRcdGlmIChpY29uSWQpIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRzZXRJY29uKGljb25Db250YWluZXIsIGljb25JZCk7XG5cdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdC8vIEVycm9yIHNldHRpbmcgaWNvblxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHNldEljb24oaWNvbkNvbnRhaW5lciwgJ3dyZW5jaCcpO1xuXHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHQvLyBFcnJvciBzZXR0aW5nIGRlZmF1bHQgaWNvblxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIEluc2VydCBjdXN0b20gYnV0dG9uIGluIHBsYWNlIG9mIHRoZSBvcmlnaW5hbCAobGlrZSBoZWxwIGJ1dHRvbiByZXBsYWNlbWVudClcblx0XHRcdC8vIEluc2VydCByaWdodCBiZWZvcmUgdGhlIG9yaWdpbmFsLCB0aGVuIGhpZGUgdGhlIG9yaWdpbmFsIGRpcmVjdGx5XG5cdFx0XHRjb25zdCBwYXJlbnQgPSBzeW5jQnV0dG9uLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRpZiAocGFyZW50KSB7XG5cdFx0XHRcdHBhcmVudC5pbnNlcnRCZWZvcmUoY3VzdG9tQnV0dG9uLCBzeW5jQnV0dG9uKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIEZhbGxiYWNrOiBqdXN0IGluc2VydCBhZnRlciBpZiBwYXJlbnQgaXMgbWlzc2luZ1xuXHRcdFx0XHRzeW5jQnV0dG9uLnBhcmVudEVsZW1lbnQ/Lmluc2VydEJlZm9yZShjdXN0b21CdXR0b24sIHN5bmNCdXR0b24ubmV4dFNpYmxpbmcpO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyBBZGQgb3VyIGN1c3RvbSBjbGljayBoYW5kbGVyIEFGVEVSIGluc2VydGlvblxuXHRcdFx0Ly8gRG9uJ3QgcHJldmVudCBkZWZhdWx0IC0gbGV0IHRoZSBjbGljayBoYXBwZW4gbmF0dXJhbGx5LCBqdXN0IGV4ZWN1dGUgb3VyIGNvbW1hbmRcblx0XHRcdGN1c3RvbUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQ6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnN0IGNvbW1hbmRJZCA9IHRoaXMuc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50Py5jb21tYW5kSWQ7XG5cdFx0XHRcdGlmIChjb21tYW5kSWQpIHtcblx0XHRcdFx0XHQvLyBGb3Igb3Blbi1zZXR0aW5ncywgZXhlY3V0ZSBkaXJlY3RseSAodGhpcyB3b3JrcyEpXG5cdFx0XHRcdFx0aWYgKGNvbW1hbmRJZCA9PT0gJ29wZW4tc2V0dGluZ3MnIHx8IGNvbW1hbmRJZCA9PT0gJ3VpLXR3ZWFrZXI6b3Blbi1zZXR0aW5ncycpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHNldHRpbmdBcGkgPSAodGhpcy5hcHAgYXMgeyBzZXR0aW5nPzogeyBvcGVuPzogKCkgPT4gdm9pZDsgb3BlblRhYkJ5SWQ/OiAoaWQ6IHN0cmluZykgPT4gdm9pZCB9IH0pLnNldHRpbmc7XG5cdFx0XHRcdFx0XHRpZiAoc2V0dGluZ0FwaSkge1xuXHRcdFx0XHRcdFx0XHRzZXR0aW5nQXBpLm9wZW4/LigpO1xuXHRcdFx0XHRcdFx0XHQvLyBVc2UgdHlwZSBhc3NlcnRpb24gZm9yIHNldHRpbmdUYWIgYXMgaXQncyBhIHByaXZhdGUgcHJvcGVydHlcblx0XHRcdFx0XHRcdFx0Y29uc3QgcGx1Z2luSW5zdGFuY2UgPSB0aGlzIGFzIHVua25vd24gYXMgeyBzZXR0aW5nVGFiPzogeyBpZD86IHN0cmluZyB9IH07XG5cdFx0XHRcdFx0XHRcdGlmIChwbHVnaW5JbnN0YW5jZS5zZXR0aW5nVGFiPy5pZCAmJiBzZXR0aW5nQXBpLm9wZW5UYWJCeUlkKSB7XG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ0FwaS5vcGVuVGFiQnlJZChwbHVnaW5JbnN0YW5jZS5zZXR0aW5nVGFiLmlkKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQvLyBGb3Igb3RoZXIgY29tbWFuZHMsIHRyeSBleGVjdXRlQ29tbWFuZEJ5SWRcblx0XHRcdFx0XHRcdCgodGhpcy5hcHAgYXMgeyBjb21tYW5kcz86IHsgZXhlY3V0ZUNvbW1hbmRCeUlkPzogKGlkOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD4gfSB9KS5jb21tYW5kcyBhcyB7IGV4ZWN1dGVDb21tYW5kQnlJZD86IChpZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+IH0pPy5leGVjdXRlQ29tbWFuZEJ5SWQ/Lihjb21tYW5kSWQpLmNhdGNoKChlcnJvcjogdW5rbm93bikgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oJ1tVSSBUd2Vha2VyXSBFcnJvciBleGVjdXRpbmcgY29tbWFuZDonLCBlcnJvcik7XG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYEZhaWxlZCB0byBleGVjdXRlIGNvbW1hbmQ6ICR7Y29tbWFuZElkfWApO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LCB0cnVlKTsgLy8gVXNlIGNhcHR1cmUgcGhhc2UgdG8gZW5zdXJlIHdlIGhhbmRsZSBpdCBmaXJzdFxuXHRcdFx0XG5cdFx0XHQvLyBBbHNvIGFkZCB0b3VjaHN0YXJ0IGZvciBtb2JpbGUgLSBzYW1lIGxvZ2ljIGFzIGNsaWNrXG5cdFx0XHRjdXN0b21CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIChldnQ6IFRvdWNoRXZlbnQpID0+IHtcblx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnN0IGNvbW1hbmRJZCA9IHRoaXMuc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50Py5jb21tYW5kSWQ7XG5cdFx0XHRcdGlmIChjb21tYW5kSWQpIHtcblx0XHRcdFx0XHQvLyBGb3Igb3Blbi1zZXR0aW5ncywgZXhlY3V0ZSBkaXJlY3RseSAodGhpcyB3b3JrcyEpXG5cdFx0XHRcdFx0aWYgKGNvbW1hbmRJZCA9PT0gJ29wZW4tc2V0dGluZ3MnIHx8IGNvbW1hbmRJZCA9PT0gJ3VpLXR3ZWFrZXI6b3Blbi1zZXR0aW5ncycpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHNldHRpbmdBcGkgPSAodGhpcy5hcHAgYXMgeyBzZXR0aW5nPzogeyBvcGVuPzogKCkgPT4gdm9pZDsgb3BlblRhYkJ5SWQ/OiAoaWQ6IHN0cmluZykgPT4gdm9pZCB9IH0pLnNldHRpbmc7XG5cdFx0XHRcdFx0XHRpZiAoc2V0dGluZ0FwaSkge1xuXHRcdFx0XHRcdFx0XHRzZXR0aW5nQXBpLm9wZW4/LigpO1xuXHRcdFx0XHRcdFx0XHQvLyBVc2UgdHlwZSBhc3NlcnRpb24gZm9yIHNldHRpbmdUYWIgYXMgaXQncyBhIHByaXZhdGUgcHJvcGVydHlcblx0XHRcdFx0XHRcdFx0Y29uc3QgcGx1Z2luSW5zdGFuY2UgPSB0aGlzIGFzIHVua25vd24gYXMgeyBzZXR0aW5nVGFiPzogeyBpZD86IHN0cmluZyB9IH07XG5cdFx0XHRcdFx0XHRcdGlmIChwbHVnaW5JbnN0YW5jZS5zZXR0aW5nVGFiPy5pZCAmJiBzZXR0aW5nQXBpLm9wZW5UYWJCeUlkKSB7XG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ0FwaS5vcGVuVGFiQnlJZChwbHVnaW5JbnN0YW5jZS5zZXR0aW5nVGFiLmlkKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQvLyBGb3Igb3RoZXIgY29tbWFuZHMsIHRyeSBleGVjdXRlQ29tbWFuZEJ5SWRcblx0XHRcdFx0XHRcdCgodGhpcy5hcHAgYXMgeyBjb21tYW5kcz86IHsgZXhlY3V0ZUNvbW1hbmRCeUlkPzogKGlkOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD4gfSB9KS5jb21tYW5kcyBhcyB7IGV4ZWN1dGVDb21tYW5kQnlJZD86IChpZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+IH0pPy5leGVjdXRlQ29tbWFuZEJ5SWQ/Lihjb21tYW5kSWQpLmNhdGNoKChlcnJvcjogdW5rbm93bikgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oJ1tVSSBUd2Vha2VyXSBFcnJvciBleGVjdXRpbmcgY29tbWFuZDonLCBlcnJvcik7XG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYEZhaWxlZCB0byBleGVjdXRlIGNvbW1hbmQ6ICR7Y29tbWFuZElkfWApO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LCB0cnVlKTtcblx0XHRcdFxuXHRcdFx0Ly8gSGlkZSB0aGUgb3JpZ2luYWwgYnV0dG9uIGRpcmVjdGx5IChtb3JlIHJlbGlhYmxlIHRoYW4gQ1NTIHNlbGVjdG9ycylcblx0XHRcdHNldENzc1Byb3BzKHN5bmNCdXR0b24sIHsgZGlzcGxheTogJ25vbmUnIH0pO1xuXHRcdFx0Ly8gQWRkIGRhdGEgYXR0cmlidXRlIHRvIHRyYWNrIGl0IChpbiBjYXNlIE9ic2lkaWFuIHJlY3JlYXRlcyBpdClcblx0XHRcdHN5bmNCdXR0b24uc2V0QXR0cmlidXRlKCdkYXRhLXVpLXR3ZWFrZXItb3JpZ2luYWwtc3luYy1oaWRkZW4nLCAndHJ1ZScpO1xuXHRcdFx0XG5cdFx0XHQvLyBTdG9yZSByZWZlcmVuY2UgdG8gb3JpZ2luYWwgYnV0dG9uIHNvIHdlIGNhbiByZXN0b3JlIGl0IGxhdGVyXG5cdFx0XHR0aGlzLm9yaWdpbmFsU3luY0J1dHRvbiA9IHN5bmNCdXR0b247XG5cdFx0XHRcblx0XHRcdC8vIFN0b3JlIHJlZmVyZW5jZSB0byBjdXN0b20gYnV0dG9uXG5cdFx0XHR0aGlzLmN1c3RvbVN5bmNCdXR0b24gPSBjdXN0b21CdXR0b247XG5cdFx0fSBmaW5hbGx5IHtcblx0XHRcdC8vIEFsd2F5cyBzZXQgdXAgb2JzZXJ2ZXIgYWZ0ZXIgYXR0ZW1wdGluZyB0byBjcmVhdGUgYnV0dG9uIChldmVuIGlmIGVsZW1lbnRzIHdlcmVuJ3QgZm91bmQpXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkKSB7XG5cdFx0XHRcdFx0dGhpcy5zZXR1cFN5bmNCdXR0b25PYnNlcnZlcigpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCAxMDAwKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIHNldHVwU3luY0J1dHRvbk9ic2VydmVyKCkge1xuXHRcdC8vIERpc2Nvbm5lY3QgZXhpc3Rpbmcgb2JzZXJ2ZXIgaWYgYW55XG5cdFx0aWYgKHRoaXMuc3luY0J1dHRvbk9ic2VydmVyKSB7XG5cdFx0XHR0aGlzLnN5bmNCdXR0b25PYnNlcnZlci5kaXNjb25uZWN0KCk7XG5cdFx0fVxuXG5cdFx0Ly8gT25seSBzZXQgdXAgb2JzZXJ2ZXIgaWYgcmVwbGFjZW1lbnQgaXMgZW5hYmxlZFxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQ/LmVuYWJsZWQpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBOb3RlOiBNdXRhdGlvbk9ic2VydmVyIGlzIG1hbnVhbGx5IG1hbmFnZWQgYmVjYXVzZSBPYnNpZGlhbidzIHJlZ2lzdGVyRG9tRXZlbnRcblx0XHQvLyBkb2Vzbid0IHN1cHBvcnQgTXV0YXRpb25PYnNlcnZlciBkaXJlY3RseS4gQ2xlYW51cCBpcyBoYW5kbGVkIGluIG9udW5sb2FkKCkuXG5cdFx0Ly8gV2F0Y2ggZm9yIGNoYW5nZXMgdG8gdGhlIHJpZ2h0IHNpZGViYXIgdmF1bHQgYWN0aW9ucyBhcmVhXG5cdFx0bGV0IHVwZGF0ZVRpbWVvdXQ6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXHRcdHRoaXMuc3luY0J1dHRvbk9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xuXHRcdFx0Ly8gRGVib3VuY2UgdXBkYXRlcyB0byBwcmV2ZW50IGluZmluaXRlIGxvb3BzXG5cdFx0XHRpZiAodXBkYXRlVGltZW91dCkge1xuXHRcdFx0XHRjbGVhclRpbWVvdXQodXBkYXRlVGltZW91dCk7XG5cdFx0XHR9XG5cdFx0XHR1cGRhdGVUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHQvLyBDaGVjayBpZiBzeW5jIGJ1dHRvbiB3YXMgcmVjcmVhdGVkICh3ZSBuZWVkIHRvIGhpZGUgaXQgYW5kIGVuc3VyZSBjdXN0b20gYnV0dG9uIGV4aXN0cylcblx0XHRcdFx0Y29uc3QgcmlnaHREcmF3ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLWRyYXdlci5tb2QtcmlnaHQnKTtcblx0XHRcdFx0aWYgKCFyaWdodERyYXdlcikgcmV0dXJuO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gSWYgd2UgaGF2ZSBhbiBvcmlnaW5hbCBidXR0b24gcmVmZXJlbmNlLCBtYWtlIHN1cmUgaXQncyBzdGlsbCBoaWRkZW5cblx0XHRcdFx0aWYgKHRoaXMub3JpZ2luYWxTeW5jQnV0dG9uICYmIGRvY3VtZW50LmJvZHkuY29udGFpbnModGhpcy5vcmlnaW5hbFN5bmNCdXR0b24pKSB7XG5cdFx0XHRcdFx0c2V0Q3NzUHJvcHModGhpcy5vcmlnaW5hbFN5bmNCdXR0b24sIHsgZGlzcGxheTogJ25vbmUnIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBBbHNvIGNoZWNrIGZvciBhbnkgbmV3bHkgY3JlYXRlZCBzeW5jIGJ1dHRvbnMgdGhhdCBhcmVuJ3Qgb3VyIGN1c3RvbSBvbmVcblx0XHRcdFx0Y29uc3QgZHJhd2VySGVhZGVyID0gcmlnaHREcmF3ZXIucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS1kcmF3ZXItaGVhZGVyJyk7XG5cdFx0XHRcdGlmIChkcmF3ZXJIZWFkZXIpIHtcblx0XHRcdFx0XHQvLyBUYXJnZXQgc3luYy1zdGF0dXMtaWNvbiBjbGFzcyAodGhlIGFjdHVhbCBjbGFzcyEpXG5cdFx0XHRcdFx0Y29uc3QgYWxsU3luY0J1dHRvbnMgPSBBcnJheS5mcm9tKGRyYXdlckhlYWRlci5xdWVyeVNlbGVjdG9yQWxsKCcuc3luYy1zdGF0dXMtaWNvbiwgLndvcmtzcGFjZS1kcmF3ZXItaGVhZGVyLWljb24uc3luYy1zdGF0dXMtaWNvbiwgLmNsaWNrYWJsZS1pY29uLnN5bmMtc3RhdHVzLWljb24nKSk7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBidG4gb2YgYWxsU3luY0J1dHRvbnMpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGJ1dHRvbiA9IGJ0biBhcyBIVE1MRWxlbWVudDtcblx0XHRcdFx0XHRcdC8vIERvbid0IGhpZGUgb3VyIGN1c3RvbSByZXBsYWNlbWVudCBidXR0b25cblx0XHRcdFx0XHRcdGlmICghYnV0dG9uLmhhc0F0dHJpYnV0ZSgnZGF0YS11aS10d2Vha2VyLXN5bmMtcmVwbGFjZW1lbnQnKSAmJlxuXHRcdFx0XHRcdFx0XHQhYnV0dG9uLmhhc0F0dHJpYnV0ZSgnZGF0YS11aS10d2Vha2VyLW9yaWdpbmFsLXN5bmMtaGlkZGVuJykpIHtcblx0XHRcdFx0XHRcdFx0Ly8gVGhpcyBpcyBhIG5ldyBzeW5jIGJ1dHRvbiwgaGlkZSBpdFxuXHRcdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhidXR0b24sIHsgZGlzcGxheTogJ25vbmUnIH0pO1xuXHRcdFx0XHRcdFx0XHRidXR0b24uc2V0QXR0cmlidXRlKCdkYXRhLXVpLXR3ZWFrZXItb3JpZ2luYWwtc3luYy1oaWRkZW4nLCAndHJ1ZScpO1xuXHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgb3VyIHJlZmVyZW5jZVxuXHRcdFx0XHRcdFx0XHR0aGlzLm9yaWdpbmFsU3luY0J1dHRvbiA9IGJ1dHRvbjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdC8vIENoZWNrIGlmIHdlIGhhdmUgYSBjdXN0b20gYnV0dG9uIEFORCBpdCdzIHN0aWxsIGluIHRoZSBET01cblx0XHRcdFx0Y29uc3QgY3VzdG9tQnV0dG9uRXhpc3RzID0gdGhpcy5jdXN0b21TeW5jQnV0dG9uICYmIFxuXHRcdFx0XHRcdHRoaXMuY3VzdG9tU3luY0J1dHRvbi5wYXJlbnRFbGVtZW50ICYmIFxuXHRcdFx0XHRcdGRvY3VtZW50LmJvZHkuY29udGFpbnModGhpcy5jdXN0b21TeW5jQnV0dG9uKSAmJlxuXHRcdFx0XHRcdHRoaXMuY3VzdG9tU3luY0J1dHRvbi5oYXNBdHRyaWJ1dGUoJ2RhdGEtdWktdHdlYWtlci1zeW5jLXJlcGxhY2VtZW50Jyk7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBPbmx5IHJlY3JlYXRlIGlmIGN1c3RvbSBidXR0b24gZG9lc24ndCBleGlzdCBBTkQgd2UncmUgbm90IGN1cnJlbnRseSB1cGRhdGluZ1xuXHRcdFx0XHRpZiAoIWN1c3RvbUJ1dHRvbkV4aXN0cyAmJiAhdGhpcy5pc1VwZGF0aW5nU3luY0J1dHRvbikge1xuXHRcdFx0XHRcdC8vIENsZWFyIHN0YWxlIHJlZmVyZW5jZSBpZiBidXR0b24gd2FzIHJlbW92ZWRcblx0XHRcdFx0XHRpZiAodGhpcy5jdXN0b21TeW5jQnV0dG9uICYmICFkb2N1bWVudC5ib2R5LmNvbnRhaW5zKHRoaXMuY3VzdG9tU3luY0J1dHRvbikpIHtcblx0XHRcdFx0XHRcdHRoaXMuY3VzdG9tU3luY0J1dHRvbiA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly8gU2V0IGZsYWcgdG8gcHJldmVudCBpbmZpbml0ZSBsb29wc1xuXHRcdFx0XHRcdHRoaXMuaXNVcGRhdGluZ1N5bmNCdXR0b24gPSB0cnVlO1xuXHRcdFx0XHRcdHZvaWQgdGhpcy51cGRhdGVTeW5jQnV0dG9uKCkuZmluYWxseSgoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmlzVXBkYXRpbmdTeW5jQnV0dG9uID0gZmFsc2U7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH0sIDEwMCk7XG5cdFx0fSk7XG5cblx0XHQvLyBPYnNlcnZlIHRoZSByaWdodCBkcmF3ZXIgaGVhZGVyICh3aGVyZSBzeW5jIGJ1dHRvbiBpcyBsb2NhdGVkKVxuXHRcdGNvbnN0IHJpZ2h0RHJhd2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS1kcmF3ZXIubW9kLXJpZ2h0Jyk7XG5cdFx0aWYgKHJpZ2h0RHJhd2VyKSB7XG5cdFx0XHR0aGlzLnN5bmNCdXR0b25PYnNlcnZlci5vYnNlcnZlKHJpZ2h0RHJhd2VyLCB7XG5cdFx0XHRcdGNoaWxkTGlzdDogdHJ1ZSxcblx0XHRcdFx0c3VidHJlZTogdHJ1ZSxcblx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHQvLyBTcGVjaWZpY2FsbHkgb2JzZXJ2ZSB0aGUgaGVhZGVyXG5cdFx0XHRjb25zdCBkcmF3ZXJIZWFkZXIgPSByaWdodERyYXdlci5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLWRyYXdlci1oZWFkZXInKTtcblx0XHRcdGlmIChkcmF3ZXJIZWFkZXIpIHtcblx0XHRcdFx0dGhpcy5zeW5jQnV0dG9uT2JzZXJ2ZXIub2JzZXJ2ZShkcmF3ZXJIZWFkZXIsIHtcblx0XHRcdFx0XHRjaGlsZExpc3Q6IHRydWUsXG5cdFx0XHRcdFx0c3VidHJlZTogdHJ1ZSxcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdC8vIEFkZCBmYWxsYmFjayBvYnNlcnZlcnMgaWYgdGhlIHNwZWNpZmljIGVsZW1lbnRzIGRvbid0IGV4aXN0IHlldFxuXHRcdGlmICghcmlnaHREcmF3ZXIpIHtcblx0XHRcdGNvbnN0IHdvcmtzcGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2Utc3BsaXQubW9kLXJpZ2h0LXNwbGl0Jyk7XG5cdFx0XHRpZiAod29ya3NwYWNlKSB7XG5cdFx0XHRcdHRoaXMuc3luY0J1dHRvbk9ic2VydmVyLm9ic2VydmUod29ya3NwYWNlLCB7XG5cdFx0XHRcdFx0Y2hpbGRMaXN0OiB0cnVlLFxuXHRcdFx0XHRcdHN1YnRyZWU6IHRydWUsXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gTGFzdCByZXNvcnQ6IG9ic2VydmUgZG9jdW1lbnQgYm9keVxuXHRcdFx0XHR0aGlzLnN5bmNCdXR0b25PYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcblx0XHRcdFx0XHRjaGlsZExpc3Q6IHRydWUsXG5cdFx0XHRcdFx0c3VidHJlZTogdHJ1ZSxcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFNldCB1cCBjb21tYW5kIGV4ZWN1dGlvbiBpbnRlcmNlcHRvciB0byB1cGRhdGUgYnV0dG9uIHRvZ2dsZSBzdGF0ZXNcblx0ICogVGhpcyBpbnRlcmNlcHRzIGNvbW1hbmQgZXhlY3V0aW9uIGdsb2JhbGx5IHRvIHVwZGF0ZSBidXR0b25zIHdoZW4gY29tbWFuZHMgYXJlIHJ1blxuXHQgKiBmcm9tIGFueXdoZXJlIChjb21tYW5kIHBhbGV0dGUsIGhvdGtleXMsIGV0Yy4pXG5cdCAqL1xuXHRwcml2YXRlIHNldHVwVG9nZ2xlU3RhdGVSZWZyZXNoKCk6IHZvaWQge1xuXHRcdGNvbnN0IGNvbW1hbmRzID0gKHRoaXMuYXBwIGFzIHsgY29tbWFuZHM/OiB7IGV4ZWN1dGVDb21tYW5kQnlJZD86IChpZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+IH0gfSkuY29tbWFuZHM7XG5cdFx0aWYgKCFjb21tYW5kcz8uZXhlY3V0ZUNvbW1hbmRCeUlkKSByZXR1cm47XG5cblx0XHQvLyBTdG9yZSBvcmlnaW5hbCBmdW5jdGlvblxuXHRcdGNvbnN0IG9yaWdpbmFsRXhlY3V0ZSA9IGNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kQnlJZC5iaW5kKGNvbW1hbmRzKSBhcyAoaWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcblxuXHRcdC8vIFdyYXAgZXhlY3V0ZUNvbW1hbmRCeUlkIHRvIGludGVyY2VwdCBjb21tYW5kIGV4ZWN1dGlvblxuXHRcdC8vIFR5cGUgYXNzZXJ0aW9uIG5lZWRlZCBiZWNhdXNlIHdlJ3JlIG1vZGlmeWluZyBPYnNpZGlhbidzIGludGVybmFsIEFQSVxuXHRcdChjb21tYW5kcyBhcyB7IGV4ZWN1dGVDb21tYW5kQnlJZDogKGlkOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD4gfSkuZXhlY3V0ZUNvbW1hbmRCeUlkID0gYXN5bmMgKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+ID0+IHtcblx0XHRcdC8vIENoZWNrIGlmIHRoaXMgaXMgYSBjb21tYW5kIHdlJ3JlIHRyYWNraW5nXG5cdFx0XHRjb25zdCBpc1RyYWNrZWQgPSB0aGlzLnNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHM/LnNvbWUocCA9PiBwLmlkID09PSBpZCAmJiBwLnRvZ2dsZUljb24pIHx8XG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MudGFiQmFyQ29tbWFuZHM/LnNvbWUocCA9PiBwLmlkID09PSBpZCAmJiBwLnRvZ2dsZUljb24pO1xuXG5cdFx0XHRpZiAoaXNUcmFja2VkKSB7XG5cdFx0XHRcdC8vIFJlY29yZCBleGVjdXRpb24gZm9yIHRvZ2dsZSB0cmFja2luZ1xuXHRcdFx0XHRyZWNvcmRDb21tYW5kRXhlY3V0aW9uKGlkKTtcblxuXHRcdFx0XHQvLyBFeGVjdXRlIHRoZSBjb21tYW5kXG5cdFx0XHRcdGF3YWl0IG9yaWdpbmFsRXhlY3V0ZShpZCk7XG5cblx0XHRcdFx0Ly8gVXBkYXRlIGJ1dHRvbiBzdGF0ZXMgYWZ0ZXIgYSBicmllZiBkZWxheSB0byBhbGxvdyBjb21tYW5kIHRvIGNvbXBsZXRlXG5cdFx0XHRcdC8vIFVzZSBtdWx0aXBsZSB0aW1lb3V0cyB0byBjYXRjaCBjb21tYW5kcyB0aGF0IHRha2UgbG9uZ2VyIHRvIGNvbXBsZXRlXG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdGlmICh0aGlzLmV4cGxvcmVyTWFuYWdlcikge1xuXHRcdFx0XHRcdFx0dGhpcy5leHBsb3Jlck1hbmFnZXIucmVmcmVzaFRvZ2dsZVN0YXRlcygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAodGhpcy50YWJCYXJNYW5hZ2VyKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnRhYkJhck1hbmFnZXIucmVmcmVzaFRvZ2dsZVN0YXRlcygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSwgNTApO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQWxzbyByZWZyZXNoIGFmdGVyIGEgbG9uZ2VyIGRlbGF5IHRvIGNhdGNoIGNvbW1hbmRzIHRoYXQgdGFrZSBtb3JlIHRpbWVcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0aWYgKHRoaXMuZXhwbG9yZXJNYW5hZ2VyKSB7XG5cdFx0XHRcdFx0XHR0aGlzLmV4cGxvcmVyTWFuYWdlci5yZWZyZXNoVG9nZ2xlU3RhdGVzKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICh0aGlzLnRhYkJhck1hbmFnZXIpIHtcblx0XHRcdFx0XHRcdHRoaXMudGFiQmFyTWFuYWdlci5yZWZyZXNoVG9nZ2xlU3RhdGVzKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LCAzMDApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gTm90IGEgdHJhY2tlZCBjb21tYW5kLCBqdXN0IGV4ZWN1dGUgbm9ybWFsbHlcblx0XHRcdFx0YXdhaXQgb3JpZ2luYWxFeGVjdXRlKGlkKTtcblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cblx0cHJpdmF0ZSByZXN0b3JlU3luY0J1dHRvbigpIHtcblx0XHQvLyBSZW1vdmUgQ1NTIGNsYXNzIGlmIHJlcGxhY2VtZW50IGlzIGRpc2FibGVkIG9yIG5vdCBvbiBtb2JpbGVcblx0XHRpZiAoIXRoaXMuc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50Py5lbmFibGVkIHx8ICFQbGF0Zm9ybS5pc01vYmlsZSkge1xuXHRcdFx0ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCd1aS10d2Vha2VyLWhpZGUtc3luYy1idXR0b24nKTtcblx0XHR9XG5cblx0XHQvLyBSZW1vdmUgdGhlIGN1c3RvbSBidXR0b24gKG9ubHkgaWYgcmVwbGFjZW1lbnQgaXMgZGlzYWJsZWQpXG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudD8uZW5hYmxlZCkge1xuXHRcdFx0aWYgKHRoaXMuY3VzdG9tU3luY0J1dHRvbiAmJiBkb2N1bWVudC5ib2R5LmNvbnRhaW5zKHRoaXMuY3VzdG9tU3luY0J1dHRvbikpIHtcblx0XHRcdFx0dGhpcy5jdXN0b21TeW5jQnV0dG9uLnJlbW92ZSgpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5jdXN0b21TeW5jQnV0dG9uID0gdW5kZWZpbmVkO1xuXHRcdFx0XG5cdFx0XHQvLyBSZXN0b3JlIHRoZSBvcmlnaW5hbCBidXR0b24ncyB2aXNpYmlsaXR5ICh3ZSBoaWQgaXQgd2l0aCBzdHlsZS5kaXNwbGF5ID0gJ25vbmUnKVxuXHRcdFx0aWYgKHRoaXMub3JpZ2luYWxTeW5jQnV0dG9uICYmIGRvY3VtZW50LmJvZHkuY29udGFpbnModGhpcy5vcmlnaW5hbFN5bmNCdXR0b24pKSB7XG5cdFx0XHRcdHRoaXMub3JpZ2luYWxTeW5jQnV0dG9uLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdkaXNwbGF5Jyk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLm9yaWdpbmFsU3luY0J1dHRvbiA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdH1cbn1cbiIsICIvKipcbiAqIFNldHRpbmdzIGludGVyZmFjZSBhbmQgZGVmYXVsdHNcbiAqL1xuXG5pbXBvcnQgeyBVSVZpc2liaWxpdHlTdGF0ZSwgTW9iaWxlTmF2UG9zaXRpb24sIENvbW1hbmRJY29uUGFpciwgU3RhdHVzQmFySXRlbSB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFVJU2V0dGluZ3Mge1xuXHQvLyBBdXRvLWhpZGUgZWxlbWVudHMgKFNob3cvSGlkZS9SZXZlYWwpXG5cdHRpdGxlQmFyOiBVSVZpc2liaWxpdHlTdGF0ZTtcblx0ZmlsZUV4cGxvcmVyTmF2SGVhZGVyOiBVSVZpc2liaWxpdHlTdGF0ZTtcblx0b3RoZXJOYXZIZWFkZXJzOiBVSVZpc2liaWxpdHlTdGF0ZTtcblx0bGVmdFRhYkhlYWRlcnM6IFVJVmlzaWJpbGl0eVN0YXRlO1xuXHRyaWdodFRhYkhlYWRlcnM6IFVJVmlzaWJpbGl0eVN0YXRlO1xuXHRyaWJib25SZXZlYWxPbkhvdmVyOiBib29sZWFuOyAvLyBCb29sZWFuIHRvZ2dsZSBmb3IgYXV0by1jb2xsYXBzZSByaWJib25cblx0dmF1bHRTd2l0Y2hlcjogVUlWaXNpYmlsaXR5U3RhdGU7XG5cdGhlbHBCdXR0b246IFVJVmlzaWJpbGl0eVN0YXRlOyAvLyBDaGFuZ2VkIHRvIHN1cHBvcnQgU2hvdy9IaWRlL1JldmVhbFxuXHRzZXR0aW5nc0J1dHRvbjogVUlWaXNpYmlsaXR5U3RhdGU7XG5cblx0Ly8gU2ltcGxlIHRvZ2dsZXMgKFNob3cvSGlkZSBvbmx5KVxuXHR0YWJCYXI6IGJvb2xlYW47XG5cdGVuYWJsZVdpbmRvd0RyYWdnaW5nOiBib29sZWFuO1xuXHRuZXdOb3RlQnV0dG9uOiBib29sZWFuO1xuXHRuZXdGb2xkZXJCdXR0b246IGJvb2xlYW47XG5cdHNvcnRPcmRlckJ1dHRvbjogYm9vbGVhbjtcblx0YXV0b1JldmVhbEJ1dHRvbjogYm9vbGVhbjtcblx0Y29sbGFwc2VBbGxCdXR0b246IGJvb2xlYW47XG5cdHJlYWRpbmdNb2RlQnV0dG9uOiBib29sZWFuO1xuXHRzZWFyY2hTZXR0aW5nc0J1dHRvbjogYm9vbGVhbjtcblx0dGFiTGlzdEljb246IFVJVmlzaWJpbGl0eVN0YXRlOyAvLyBDaGFuZ2VkIHRvIHN1cHBvcnQgUmV2ZWFsXG5cdG5ld1RhYkljb246IFVJVmlzaWJpbGl0eVN0YXRlOyAvLyBDaGFuZ2VkIHRvIHN1cHBvcnQgUmV2ZWFsXG5cdHRhYkNsb3NlQnV0dG9uOiBVSVZpc2liaWxpdHlTdGF0ZTsgLy8gQ2hhbmdlZCB0byBzdXBwb3J0IFJldmVhbFxuXHRzdGF0dXNCYXI6IGJvb2xlYW47XG5cdHNjcm9sbEJhcnM6IFVJVmlzaWJpbGl0eVN0YXRlOyAvLyBDaGFuZ2VkIHRvIHN1cHBvcnQgUmV2ZWFsXG5cdGxlZnRTaWRlYmFyVG9nZ2xlQnV0dG9uOiBVSVZpc2liaWxpdHlTdGF0ZTsgLy8gQ2hhbmdlZCB0byBzdXBwb3J0IFJldmVhbFxuXHRyaWdodFNpZGViYXJUb2dnbGVCdXR0b246IFVJVmlzaWJpbGl0eVN0YXRlOyAvLyBDaGFuZ2VkIHRvIHN1cHBvcnQgUmV2ZWFsXG5cdHRvb2x0aXBzOiBib29sZWFuO1xuXHRzZWFyY2hTdWdnZXN0aW9uczogYm9vbGVhbjtcblx0c2VhcmNoVGVybUNvdW50czogYm9vbGVhbjtcblx0cHJvcGVydGllc0luUmVhZGluZ1ZpZXc6IGJvb2xlYW47XG5cdHByb3BlcnRpZXNJbkhlYWRpbmc6IGJvb2xlYW47XG5cdGFkZFByb3BlcnR5QnV0dG9uOiBib29sZWFuO1xuXHRpbnN0cnVjdGlvbnM6IGJvb2xlYW47XG5cblx0Ly8gTW9iaWxlLXNwZWNpZmljIHNldHRpbmdzIChTaG93L0hpZGUgb25seSlcblx0bW9iaWxlQ2hldnJvbnNJY29uOiBib29sZWFuO1xuXHRuYXZpZ2F0ZUJhY2tCdXR0b246IGJvb2xlYW47XG5cdG5hdmlnYXRlRm9yd2FyZEJ1dHRvbjogYm9vbGVhbjtcblx0cXVpY2tTd2l0Y2hlckJ1dHRvbjogYm9vbGVhbjtcblx0bW9iaWxlTmV3VGFiQnV0dG9uOiBib29sZWFuO1xuXHRvcGVuVGFiQnV0dG9uOiBib29sZWFuO1xuXHRyaWJib25NZW51QnV0dG9uOiBib29sZWFuO1xuXHRzd2FwTW9iaWxlTmV3VGFiSWNvbjogYm9vbGVhbjtcblx0aGlkZU1vYmlsZVRpdGxlOiBib29sZWFuO1xuXHRoaWRlTW9iaWxlU3luY0ljb246IGJvb2xlYW47XG5cblx0Ly8gTW9iaWxlIG5hdmlnYXRpb24gbWVudSBwb3NpdGlvbnNcblx0bmF2aWdhdGVCdXR0b25Qb3NpdGlvbjogTW9iaWxlTmF2UG9zaXRpb247XG5cdG5hdmlnYXRpb25CdXR0b25Qb3NpdGlvbjogTW9iaWxlTmF2UG9zaXRpb247XG5cdHF1aWNrU3dpdGNoZXJQb3NpdGlvbjogTW9iaWxlTmF2UG9zaXRpb247XG5cdG5ld1RhYlBvc2l0aW9uOiBNb2JpbGVOYXZQb3NpdGlvbjtcblx0b3BlblRhYnNQb3NpdGlvbjogTW9iaWxlTmF2UG9zaXRpb247XG5cdHJpYmJvbk1lbnVQb3NpdGlvbjogTW9iaWxlTmF2UG9zaXRpb247XG5cblx0Ly8gQWR2YW5jZWQgc2V0dGluZ3Ncblx0dmF1bHRTd2l0Y2hlckJhY2tncm91bmRUcmFuc3BhcmVuY3k6IG51bWJlcjsgLy8gMC0xXG5cdGhlbHBCdXR0b25SZXBsYWNlbWVudDoge1xuXHRcdGVuYWJsZWQ6IGJvb2xlYW47XG5cdFx0Y29tbWFuZElkOiBzdHJpbmc7XG5cdFx0aWNvbklkOiBzdHJpbmc7XG5cdH07XG5cdHN5bmNCdXR0b25SZXBsYWNlbWVudDoge1xuXHRcdGVuYWJsZWQ6IGJvb2xlYW47XG5cdFx0Y29tbWFuZElkOiBzdHJpbmc7XG5cdFx0aWNvbklkOiBzdHJpbmc7XG5cdH07XG5cblx0Ly8gVGFiIEJhciBjdXN0b20gY29tbWFuZHNcblx0dGFiQmFyQ29tbWFuZHM6IENvbW1hbmRJY29uUGFpcltdO1xuXG5cdC8vIFN0YXR1cyBCYXIgaXRlbXMgKHVuaWZpZWQgbGlzdCBvZiBleGlzdGluZyArIGN1c3RvbSlcblx0c3RhdHVzQmFySXRlbXM6IFN0YXR1c0Jhckl0ZW1bXTtcblxuXHQvLyBFeHBsb3JlciBjdXN0b20gY29tbWFuZHNcblx0ZXhwbG9yZXJDb21tYW5kczogQ29tbWFuZEljb25QYWlyW107XG5cblx0Ly8gTmF0aXZlIGV4cGxvcmVyIGJ1dHRvbiBjb2xvcnMgKG9wdGlvbmFsKVxuXHRuYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9ycz86IHtcblx0XHRuZXdOb3RlPzogc3RyaW5nO1xuXHRcdG5ld0ZvbGRlcj86IHN0cmluZztcblx0XHRzb3J0T3JkZXI/OiBzdHJpbmc7XG5cdFx0YXV0b1JldmVhbD86IHN0cmluZztcblx0XHRjb2xsYXBzZUFsbD86IHN0cmluZztcblx0fTtcblxuXHQvLyBOYXRpdmUgZXhwbG9yZXIgYnV0dG9uIGljb24gb3ZlcnJpZGVzIChvcHRpb25hbClcblx0bmF0aXZlRXhwbG9yZXJCdXR0b25JY29ucz86IHtcblx0XHRuZXdOb3RlPzogc3RyaW5nO1xuXHRcdG5ld0ZvbGRlcj86IHN0cmluZztcblx0XHRzb3J0T3JkZXI/OiBzdHJpbmc7XG5cdFx0YXV0b1JldmVhbD86IHN0cmluZztcblx0XHRjb2xsYXBzZUFsbD86IHN0cmluZztcblx0fTtcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFVJU2V0dGluZ3MgPSB7XG5cdC8vIEF1dG8taGlkZSBlbGVtZW50c1xuXHR0aXRsZUJhcjogJ3Nob3cnLFxuXHRmaWxlRXhwbG9yZXJOYXZIZWFkZXI6ICdzaG93Jyxcblx0b3RoZXJOYXZIZWFkZXJzOiAnc2hvdycsXG5cdGxlZnRUYWJIZWFkZXJzOiAnc2hvdycsXG5cdHJpZ2h0VGFiSGVhZGVyczogJ3Nob3cnLFxuXHRyaWJib25SZXZlYWxPbkhvdmVyOiBmYWxzZSxcblx0dmF1bHRTd2l0Y2hlcjogJ3Nob3cnLFxuXHRoZWxwQnV0dG9uOiAnc2hvdycsXG5cdHNldHRpbmdzQnV0dG9uOiAnc2hvdycsXG5cblx0Ly8gU2ltcGxlIHRvZ2dsZXNcblx0dGFiQmFyOiBmYWxzZSxcblx0ZW5hYmxlV2luZG93RHJhZ2dpbmc6IGZhbHNlLFxuXHRuZXdOb3RlQnV0dG9uOiBmYWxzZSxcblx0bmV3Rm9sZGVyQnV0dG9uOiBmYWxzZSxcblx0c29ydE9yZGVyQnV0dG9uOiBmYWxzZSxcblx0YXV0b1JldmVhbEJ1dHRvbjogZmFsc2UsXG5cdGNvbGxhcHNlQWxsQnV0dG9uOiBmYWxzZSxcblx0cmVhZGluZ01vZGVCdXR0b246IGZhbHNlLFxuXHRzZWFyY2hTZXR0aW5nc0J1dHRvbjogZmFsc2UsXG5cdHRhYkxpc3RJY29uOiAnc2hvdycsXG5cdG5ld1RhYkljb246ICdzaG93Jyxcblx0dGFiQ2xvc2VCdXR0b246ICdzaG93Jyxcblx0c3RhdHVzQmFyOiBmYWxzZSxcblx0c2Nyb2xsQmFyczogJ3Nob3cnLFxuXHRsZWZ0U2lkZWJhclRvZ2dsZUJ1dHRvbjogJ3Nob3cnLFxuXHRyaWdodFNpZGViYXJUb2dnbGVCdXR0b246ICdzaG93Jyxcblx0dG9vbHRpcHM6IGZhbHNlLFxuXHRzZWFyY2hTdWdnZXN0aW9uczogZmFsc2UsXG5cdHNlYXJjaFRlcm1Db3VudHM6IGZhbHNlLFxuXHRwcm9wZXJ0aWVzSW5SZWFkaW5nVmlldzogZmFsc2UsXG5cdHByb3BlcnRpZXNJbkhlYWRpbmc6IGZhbHNlLFxuXHRhZGRQcm9wZXJ0eUJ1dHRvbjogZmFsc2UsXG5cdGluc3RydWN0aW9uczogZmFsc2UsXG5cblx0Ly8gTW9iaWxlLXNwZWNpZmljXG5cdG1vYmlsZUNoZXZyb25zSWNvbjogZmFsc2UsXG5cdG5hdmlnYXRlQmFja0J1dHRvbjogZmFsc2UsXG5cdG5hdmlnYXRlRm9yd2FyZEJ1dHRvbjogZmFsc2UsXG5cdHF1aWNrU3dpdGNoZXJCdXR0b246IGZhbHNlLFxuXHRtb2JpbGVOZXdUYWJCdXR0b246IGZhbHNlLFxuXHRvcGVuVGFiQnV0dG9uOiBmYWxzZSxcblx0cmliYm9uTWVudUJ1dHRvbjogZmFsc2UsXG5cdHN3YXBNb2JpbGVOZXdUYWJJY29uOiBmYWxzZSxcblx0aGlkZU1vYmlsZVRpdGxlOiBmYWxzZSxcblx0aGlkZU1vYmlsZVN5bmNJY29uOiBmYWxzZSxcblxuXHQvLyBNb2JpbGUgbmF2aWdhdGlvbiBtZW51IHBvc2l0aW9uc1xuXHRuYXZpZ2F0ZUJ1dHRvblBvc2l0aW9uOiAnMScsXG5cdG5hdmlnYXRpb25CdXR0b25Qb3NpdGlvbjogJzInLFxuXHRxdWlja1N3aXRjaGVyUG9zaXRpb246ICczJyxcblx0bmV3VGFiUG9zaXRpb246ICc0Jyxcblx0b3BlblRhYnNQb3NpdGlvbjogJzUnLFxuXHRyaWJib25NZW51UG9zaXRpb246ICc2JyxcblxuXHQvLyBBZHZhbmNlZFxuXHR2YXVsdFN3aXRjaGVyQmFja2dyb3VuZFRyYW5zcGFyZW5jeTogMC45OCxcblx0aGVscEJ1dHRvblJlcGxhY2VtZW50OiB7XG5cdFx0ZW5hYmxlZDogZmFsc2UsXG5cdFx0Y29tbWFuZElkOiAnJyxcblx0XHRpY29uSWQ6ICd3cmVuY2gnLFxuXHR9LFxuXHRzeW5jQnV0dG9uUmVwbGFjZW1lbnQ6IHtcblx0XHRlbmFibGVkOiBmYWxzZSxcblx0XHRjb21tYW5kSWQ6ICcnLFxuXHRcdGljb25JZDogJ3dyZW5jaCcsXG5cdH0sXG5cblx0Ly8gVGFiIEJhclxuXHR0YWJCYXJDb21tYW5kczogW10sXG5cblx0Ly8gU3RhdHVzIEJhclxuXHRzdGF0dXNCYXJJdGVtczogW10sXG5cblx0Ly8gRXhwbG9yZXJcblx0ZXhwbG9yZXJDb21tYW5kczogW10sXG5cblx0Ly8gTmF0aXZlIGV4cGxvcmVyIGJ1dHRvbiBjb2xvcnNcblx0bmF0aXZlRXhwbG9yZXJCdXR0b25Db2xvcnM6IHtcblx0XHRuZXdOb3RlOiB1bmRlZmluZWQsXG5cdFx0bmV3Rm9sZGVyOiB1bmRlZmluZWQsXG5cdFx0c29ydE9yZGVyOiB1bmRlZmluZWQsXG5cdFx0YXV0b1JldmVhbDogdW5kZWZpbmVkLFxuXHRcdGNvbGxhcHNlQWxsOiB1bmRlZmluZWQsXG5cdH0sXG5cblx0Ly8gTmF0aXZlIGV4cGxvcmVyIGJ1dHRvbiBpY29uIG92ZXJyaWRlc1xuXHRuYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zOiB7XG5cdFx0bmV3Tm90ZTogdW5kZWZpbmVkLFxuXHRcdG5ld0ZvbGRlcjogdW5kZWZpbmVkLFxuXHRcdHNvcnRPcmRlcjogdW5kZWZpbmVkLFxuXHRcdGF1dG9SZXZlYWw6IHVuZGVmaW5lZCxcblx0XHRjb2xsYXBzZUFsbDogdW5kZWZpbmVkLFxuXHR9LFxufTtcbiIsICIvKipcbiAqIFVJIE1hbmFnZXIgLSBoYW5kbGVzIENTUyBjbGFzcyBpbmplY3Rpb24gYW5kIHJldmVhbC1vbi1ob3ZlciBmdW5jdGlvbmFsaXR5XG4gKi9cblxuaW1wb3J0IHsgUGxhdGZvcm0gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBVSVNldHRpbmdzIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyBVSVZpc2liaWxpdHlTdGF0ZSB9IGZyb20gJy4vdHlwZXMnO1xuXG4vLyBMaWdodHdlaWdodCBoZWxwZXIgdGhhdCBtaXJyb3JzIE9ic2lkaWFuJ3Mgc2V0Q3NzUHJvcHMgQVBJIHdoZXJlIHVuYXZhaWxhYmxlXG5leHBvcnQgZnVuY3Rpb24gc2V0Q3NzUHJvcHMoZWw6IEhUTUxFbGVtZW50LCBwcm9wczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVtYmVyPikge1xuXHRPYmplY3QuZW50cmllcyhwcm9wcykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG5cdFx0ZWwuc3R5bGUuc2V0UHJvcGVydHkoa2V5LCBTdHJpbmcodmFsdWUpKTtcblx0fSk7XG59XG5cbmV4cG9ydCBjbGFzcyBVSU1hbmFnZXIge1xuXHRwcml2YXRlIHNldHRpbmdzOiBVSVNldHRpbmdzO1xuXHRwcml2YXRlIHJldmVhbExpc3RlbmVyczogTWFwPHN0cmluZywgKCkgPT4gdm9pZD4gPSBuZXcgTWFwKCk7XG5cblx0Y29uc3RydWN0b3Ioc2V0dGluZ3M6IFVJU2V0dGluZ3MpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG5cdH1cblxuXHR1cGRhdGVTZXR0aW5ncyhzZXR0aW5nczogVUlTZXR0aW5ncykge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcblx0XHR0aGlzLmFwcGx5U3R5bGVzKCk7XG5cdFx0Ly8gQXBwbHkgbmF0aXZlIGljb24gb3ZlcnJpZGVzIGFmdGVyIHN0eWxlcyBhcmUgYXBwbGllZFxuXHRcdC8vIE5vdGU6IGV4cGxvcmVyTWFuYWdlciBpcyBhY2Nlc3NlZCB2aWEgcGx1Z2luIGluc3RhbmNlLCBub3Qgc3RvcmVkIGhlcmVcblx0fVxuXG5cdHByaXZhdGUgZGV0ZWN0T1MoKTogJ3dpbmRvd3MnIHwgJ21hY29zJyB8ICduZXV0cmFsJyB7XG5cdFx0Ly8gVXNlIE9ic2lkaWFuJ3MgUGxhdGZvcm0gQVBJXG5cdFx0aWYgKFBsYXRmb3JtLmlzTWFjT1MpIHtcblx0XHRcdHJldHVybiAnbWFjb3MnO1xuXHRcdH1cblx0XHRpZiAoUGxhdGZvcm0uaXNXaW4pIHtcblx0XHRcdHJldHVybiAnd2luZG93cyc7XG5cdFx0fVxuXHRcdFxuXHRcdC8vIERlZmF1bHQgdG8gbmV1dHJhbC9MaW51eFxuXHRcdHJldHVybiAnbmV1dHJhbCc7XG5cdH1cblxuXHRhcHBseVN0eWxlcygpIHtcblx0XHRjb25zdCBib2R5ID0gZG9jdW1lbnQuYm9keTtcblxuXHRcdC8vIEF1dG8taGlkZSBlbGVtZW50cyB3aXRoIFNob3cvSGlkZS9SZXZlYWxcblx0XHR0aGlzLmFwcGx5VmlzaWJpbGl0eVN0YXRlKGJvZHksICdhdXRvLWhpZGUtdGl0bGUtYmFyJywgdGhpcy5zZXR0aW5ncy50aXRsZUJhciwgdHJ1ZSk7XG5cdFx0dGhpcy5hcHBseVZpc2liaWxpdHlTdGF0ZShib2R5LCAnYXV0by1oaWRlLWZpbGUtZXhwbG9yZXItbmF2LWhlYWRlcicsIHRoaXMuc2V0dGluZ3MuZmlsZUV4cGxvcmVyTmF2SGVhZGVyKTtcblx0XHR0aGlzLmFwcGx5VmlzaWJpbGl0eVN0YXRlKGJvZHksICdhdXRvLWhpZGUtb3RoZXItbmF2LWhlYWRlcnMnLCB0aGlzLnNldHRpbmdzLm90aGVyTmF2SGVhZGVycyk7XG5cdFx0dGhpcy5hcHBseVZpc2liaWxpdHlTdGF0ZShib2R5LCAnYXV0by1oaWRlLWxlZnQtdGFiLWhlYWRlcnMnLCB0aGlzLnNldHRpbmdzLmxlZnRUYWJIZWFkZXJzKTtcblx0XHR0aGlzLmFwcGx5VmlzaWJpbGl0eVN0YXRlKGJvZHksICdhdXRvLWhpZGUtcmlnaHQtdGFiLWhlYWRlcnMnLCB0aGlzLnNldHRpbmdzLnJpZ2h0VGFiSGVhZGVycyk7XG5cdFx0dGhpcy5hcHBseVZpc2liaWxpdHlTdGF0ZShib2R5LCAnYXV0by1oaWRlLXZhdWx0LXN3aXRjaGVyJywgdGhpcy5zZXR0aW5ncy52YXVsdFN3aXRjaGVyKTtcblx0XHR0aGlzLmFwcGx5VmlzaWJpbGl0eVN0YXRlKGJvZHksICdoaWRlci1oZWxwLWJ1dHRvbicsIHRoaXMuc2V0dGluZ3MuaGVscEJ1dHRvbik7XG5cdFx0dGhpcy5hcHBseVZpc2liaWxpdHlTdGF0ZShib2R5LCAnYXV0by1oaWRlLXNldHRpbmdzLWJ1dHRvbicsIHRoaXMuc2V0dGluZ3Muc2V0dGluZ3NCdXR0b24pO1xuXG5cdFx0Ly8gUmliYm9uIC0gYm9vbGVhbiB0b2dnbGUgKGF1dG8tY29sbGFwc2UtcmliYm9uKVxuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnYXV0by1jb2xsYXBzZS1yaWJib24nLCB0aGlzLnNldHRpbmdzLnJpYmJvblJldmVhbE9uSG92ZXIpO1xuXG5cdFx0Ly8gU2ltcGxlIHRvZ2dsZXNcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGVyLXRhYnMnLCB0aGlzLnNldHRpbmdzLnRhYkJhcik7XG5cdFx0XG5cdFx0Ly8gV2luZG93IGRyYWdnaW5nIC0gb25seSBhcHBseSB3aGVuIHRhYiBiYXIgaXMgaGlkZGVuXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MudGFiQmFyICYmIHRoaXMuc2V0dGluZ3MuZW5hYmxlV2luZG93RHJhZ2dpbmcpIHtcblx0XHRcdGNvbnN0IG9zID0gdGhpcy5kZXRlY3RPUygpO1xuXHRcdFx0Ly8gUmVtb3ZlIGFsbCB3aW5kb3cgZHJhZ2dpbmcgY2xhc3NlcyBmaXJzdFxuXHRcdFx0Ym9keS5jbGFzc0xpc3QucmVtb3ZlKCdlbmFibGUtd2luZG93LWRyYWdnaW5nLXdpbmRvd3MnLCAnZW5hYmxlLXdpbmRvdy1kcmFnZ2luZy1tYWNvcycsICdlbmFibGUtd2luZG93LWRyYWdnaW5nLW5ldXRyYWwnKTtcblx0XHRcdC8vIEFwcGx5IE9TLXNwZWNpZmljIGNsYXNzXG5cdFx0XHRib2R5LmNsYXNzTGlzdC5hZGQoYGVuYWJsZS13aW5kb3ctZHJhZ2dpbmctJHtvc31gKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gUmVtb3ZlIGFsbCB3aW5kb3cgZHJhZ2dpbmcgY2xhc3NlcyBpZiBub3QgZW5hYmxlZFxuXHRcdFx0Ym9keS5jbGFzc0xpc3QucmVtb3ZlKCdlbmFibGUtd2luZG93LWRyYWdnaW5nLXdpbmRvd3MnLCAnZW5hYmxlLXdpbmRvdy1kcmFnZ2luZy1tYWNvcycsICdlbmFibGUtd2luZG93LWRyYWdnaW5nLW5ldXRyYWwnKTtcblx0XHR9XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlLWJ1dHRvbi1uZXctbm90ZScsIHRoaXMuc2V0dGluZ3MubmV3Tm90ZUJ1dHRvbik7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlLWJ1dHRvbi1uZXctZm9sZGVyJywgdGhpcy5zZXR0aW5ncy5uZXdGb2xkZXJCdXR0b24pO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZS1idXR0b24tc29ydC1vcmRlcicsIHRoaXMuc2V0dGluZ3Muc29ydE9yZGVyQnV0dG9uKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUtYnV0dG9uLWF1dG8tcmV2ZWFsJywgdGhpcy5zZXR0aW5ncy5hdXRvUmV2ZWFsQnV0dG9uKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUtYnV0dG9uLWNvbGxhcHNlLWFsbCcsIHRoaXMuc2V0dGluZ3MuY29sbGFwc2VBbGxCdXR0b24pO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZS1idXR0b24tcmVhZGluZy1tb2RlJywgdGhpcy5zZXR0aW5ncy5yZWFkaW5nTW9kZUJ1dHRvbik7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlLWJ1dHRvbi1zZWFyY2gtc2V0dGluZ3MnLCB0aGlzLnNldHRpbmdzLnNlYXJjaFNldHRpbmdzQnV0dG9uKTtcblx0XHRcblx0XHQvLyBUYWIgaWNvbnMgLSBub3cgc3VwcG9ydCBSZXZlYWxcblx0XHR0aGlzLmFwcGx5VmlzaWJpbGl0eVN0YXRlKGJvZHksICdoaWRlLXRhYi1saXN0LWljb24nLCB0aGlzLnNldHRpbmdzLnRhYkxpc3RJY29uKTtcblx0XHR0aGlzLmFwcGx5VmlzaWJpbGl0eVN0YXRlKGJvZHksICdoaWRlLW5ldy10YWItaWNvbicsIHRoaXMuc2V0dGluZ3MubmV3VGFiSWNvbik7XG5cdFx0dGhpcy5hcHBseVZpc2liaWxpdHlTdGF0ZShib2R5LCAnaGlkZS10YWItY2xvc2UtYnV0dG9uJywgdGhpcy5zZXR0aW5ncy50YWJDbG9zZUJ1dHRvbik7XG5cdFx0XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlci1zdGF0dXMnLCB0aGlzLnNldHRpbmdzLnN0YXR1c0Jhcik7XG5cdFx0XG5cdFx0Ly8gU2Nyb2xsYmFycyAtIG5vdyBzdXBwb3J0IFNob3cvSGlkZS9SZXZlYWxcblx0XHR0aGlzLmFwcGx5VmlzaWJpbGl0eVN0YXRlKGJvZHksICdoaWRlci1zY3JvbGwnLCB0aGlzLnNldHRpbmdzLnNjcm9sbEJhcnMpO1xuXHRcdFxuXHRcdC8vIFNldCB1cCBzY3JvbGxiYXIgcmV2ZWFsIGhvdmVyIGxpc3RlbmVycyBpZiBuZWVkZWRcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5zY3JvbGxCYXJzID09PSAncmV2ZWFsJykge1xuXHRcdFx0dGhpcy5zZXR1cFNjcm9sbGJhclJldmVhbExpc3RlbmVycygpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnJlbW92ZVNjcm9sbGJhclJldmVhbExpc3RlbmVycygpO1xuXHRcdH1cblx0XHRcblx0XHQvLyBTaWRlYmFyIHRvZ2dsZSBidXR0b25zIC0gbm93IHN1cHBvcnQgUmV2ZWFsXG5cdFx0dGhpcy5hcHBseVZpc2liaWxpdHlTdGF0ZShib2R5LCAnaGlkZXItbGVmdC1zaWRlYmFyLWJ1dHRvbicsIHRoaXMuc2V0dGluZ3MubGVmdFNpZGViYXJUb2dnbGVCdXR0b24pO1xuXHRcdHRoaXMuYXBwbHlWaXNpYmlsaXR5U3RhdGUoYm9keSwgJ2hpZGVyLXJpZ2h0LXNpZGViYXItYnV0dG9uJywgdGhpcy5zZXR0aW5ncy5yaWdodFNpZGViYXJUb2dnbGVCdXR0b24pO1xuXHRcdFxuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZXItdG9vbHRpcHMnLCB0aGlzLnNldHRpbmdzLnRvb2x0aXBzKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGVyLXNlYXJjaC1zdWdnZXN0aW9ucycsIHRoaXMuc2V0dGluZ3Muc2VhcmNoU3VnZ2VzdGlvbnMpO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZXItc2VhcmNoLWNvdW50cycsIHRoaXMuc2V0dGluZ3Muc2VhcmNoVGVybUNvdW50cyk7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlci1tZXRhJywgdGhpcy5zZXR0aW5ncy5wcm9wZXJ0aWVzSW5SZWFkaW5nVmlldyk7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdtZXRhZGF0YS1oZWFkaW5nLW9mZicsIHRoaXMuc2V0dGluZ3MucHJvcGVydGllc0luSGVhZGluZyk7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdtZXRhZGF0YS1hZGQtcHJvcGVydHktb2ZmJywgdGhpcy5zZXR0aW5ncy5hZGRQcm9wZXJ0eUJ1dHRvbik7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlci1pbnN0cnVjdGlvbnMnLCB0aGlzLnNldHRpbmdzLmluc3RydWN0aW9ucyk7XG5cblx0XHQvLyBNb2JpbGUtc3BlY2lmaWNcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUtaWNvbi1tb2JpbGUtY2hldnJvbnMnLCB0aGlzLnNldHRpbmdzLm1vYmlsZUNoZXZyb25zSWNvbik7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlLWJ1dHRvbi1tb2JpbGUtbmF2YmFyLWFjdGlvbi1iYWNrJywgdGhpcy5zZXR0aW5ncy5uYXZpZ2F0ZUJhY2tCdXR0b24pO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZS1idXR0b24tbW9iaWxlLW5hdmJhci1hY3Rpb24tZm9yd2FyZCcsIHRoaXMuc2V0dGluZ3MubmF2aWdhdGVGb3J3YXJkQnV0dG9uKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUtYnV0dG9uLW1vYmlsZS1uYXZiYXItYWN0aW9uLXF1aWNrLXN3aXRjaGVyJywgdGhpcy5zZXR0aW5ncy5xdWlja1N3aXRjaGVyQnV0dG9uKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUtYnV0dG9uLW1vYmlsZS1uYXZiYXItYWN0aW9uLW5ldy10YWInLCB0aGlzLnNldHRpbmdzLm1vYmlsZU5ld1RhYkJ1dHRvbik7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlLWJ1dHRvbi1tb2JpbGUtbmF2YmFyLWFjdGlvbi10YWJzJywgdGhpcy5zZXR0aW5ncy5vcGVuVGFiQnV0dG9uKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUtYnV0dG9uLW1vYmlsZS1uYXZiYXItYWN0aW9uLW1lbnUnLCB0aGlzLnNldHRpbmdzLnJpYmJvbk1lbnVCdXR0b24pO1xuXHRcdGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnc3dhcC1tb2JpbGUtbmV3LXRhYi1pY29uJywgdGhpcy5zZXR0aW5ncy5zd2FwTW9iaWxlTmV3VGFiSWNvbik7XG5cdFx0Ym9keS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlLW1vYmlsZS10aXRsZScsIHRoaXMuc2V0dGluZ3MuaGlkZU1vYmlsZVRpdGxlKTtcblx0XHRib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUtbW9iaWxlLXN5bmMtaWNvbicsIHRoaXMuc2V0dGluZ3MuaGlkZU1vYmlsZVN5bmNJY29uKTtcblxuXHRcdC8vIE1vYmlsZSBuYXZpZ2F0aW9uIG1lbnUgcG9zaXRpb25zXG5cdFx0Ly8gUmVtb3ZlIGFsbCBleGlzdGluZyBvcmRlciBjbGFzc2VzIGZpcnN0XG5cdFx0Y29uc3Qgb3JkZXJDbGFzc2VzID0gQXJyYXkuZnJvbShib2R5LmNsYXNzTGlzdCkuZmlsdGVyKChjbHMpID0+XG5cdFx0XHRjbHMuc3RhcnRzV2l0aCgnb3JkZXItbmF2YmFyLWJ1dHRvbi1udGgtY2hpbGQtJylcblx0XHQpO1xuXHRcdG9yZGVyQ2xhc3Nlcy5mb3JFYWNoKChjbHMpID0+IGJvZHkuY2xhc3NMaXN0LnJlbW92ZShjbHMpKTtcblxuXHRcdC8vIEFkZCB0aGUgc2VsZWN0ZWQgb3JkZXIgY2xhc3Nlc1xuXHRcdGJvZHkuY2xhc3NMaXN0LmFkZChgb3JkZXItbmF2YmFyLWJ1dHRvbi1udGgtY2hpbGQtMS0ke3RoaXMuc2V0dGluZ3MubmF2aWdhdGVCdXR0b25Qb3NpdGlvbn1gKTtcblx0XHRib2R5LmNsYXNzTGlzdC5hZGQoYG9yZGVyLW5hdmJhci1idXR0b24tbnRoLWNoaWxkLTItJHt0aGlzLnNldHRpbmdzLm5hdmlnYXRpb25CdXR0b25Qb3NpdGlvbn1gKTtcblx0XHRib2R5LmNsYXNzTGlzdC5hZGQoYG9yZGVyLW5hdmJhci1idXR0b24tbnRoLWNoaWxkLTMtJHt0aGlzLnNldHRpbmdzLnF1aWNrU3dpdGNoZXJQb3NpdGlvbn1gKTtcblx0XHRib2R5LmNsYXNzTGlzdC5hZGQoYG9yZGVyLW5hdmJhci1idXR0b24tbnRoLWNoaWxkLTQtJHt0aGlzLnNldHRpbmdzLm5ld1RhYlBvc2l0aW9ufWApO1xuXHRcdGJvZHkuY2xhc3NMaXN0LmFkZChgb3JkZXItbmF2YmFyLWJ1dHRvbi1udGgtY2hpbGQtNS0ke3RoaXMuc2V0dGluZ3Mub3BlblRhYnNQb3NpdGlvbn1gKTtcblx0XHRib2R5LmNsYXNzTGlzdC5hZGQoYG9yZGVyLW5hdmJhci1idXR0b24tbnRoLWNoaWxkLTYtJHt0aGlzLnNldHRpbmdzLnJpYmJvbk1lbnVQb3NpdGlvbn1gKTtcblxuXHRcdC8vIFZhdWx0IHN3aXRjaGVyIGJhY2tncm91bmQgdHJhbnNwYXJlbmN5XG5cdFx0Ly8gVXNlIHNldENzc1Byb3BzIGZvciBDU1MgY3VzdG9tIHByb3BlcnRpZXMgKHZhcmlhYmxlcylcblx0XHRjb25zdCBtYXNrVmFsdWUgPSB0aGlzLnNldHRpbmdzLnZhdWx0U3dpdGNoZXJCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID49IDFcblx0XHRcdD8gJ25vbmUnXG5cdFx0XHQ6ICdsaW5lYXItZ3JhZGllbnQodG8gdG9wLCBoc2woMCwgMCUsIDAlKSAwJSwgaHNsYSgwLCAwJSwgMCUsIDAuOTkpIDE4LjQlLCBoc2xhKDAsIDAlLCAwJSwgMC45NjMpIDMzLjclLCBoc2xhKDAsIDAlLCAwJSwgMC45MikgNDYuNCUsIGhzbGEoMCwgMCUsIDAlLCAwLjg2NCkgNTYuNyUsIGhzbGEoMCwgMCUsIDAlLCAwLjc5NikgNjQuOCUsIGhzbGEoMCwgMCUsIDAlLCAwLjcyKSA3MS4yJSwgaHNsYSgwLCAwJSwgMCUsIDAuNjM3KSA3Ni4xJSwgaHNsYSgwLCAwJSwgMCUsIDAuNTUpIDc5LjklLCBoc2xhKDAsIDAlLCAwJSwgMC40NikgODIuOCUsIGhzbGEoMCwgMCUsIDAlLCAwLjM3KSA4NS4yJSwgaHNsYSgwLCAwJSwgMCUsIDAuMjgzKSA4Ny4zJSwgaHNsYSgwLCAwJSwgMCUsIDAuMikgODkuNiUsIGhzbGEoMCwgMCUsIDAlLCAwLjEyNCkgOTIuMyUsIGhzbGEoMCwgMCUsIDAlLCAwLjA1NikgOTUuNiUsIGhzbGEoMCwgMCUsIDAlLCAwKSAxMDAlKSc7XG5cdFx0XG5cdFx0c2V0Q3NzUHJvcHMoYm9keSwge1xuXHRcdFx0Jy0tYXV0by1oaWRlLXZhdWx0LXN3aXRjaGVyLWJnLXRyYW5zcGFyZW5jeSc6IFN0cmluZyh0aGlzLnNldHRpbmdzLnZhdWx0U3dpdGNoZXJCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5KSxcblx0XHRcdCctLWF1dG8taGlkZS12YXVsdC1zd2l0Y2hlci1tYXNrJzogbWFza1ZhbHVlLFxuXHRcdH0pO1xuXG5cdFx0Ly8gTmF0aXZlIGV4cGxvcmVyIGJ1dHRvbiBjb2xvcnNcblx0XHRjb25zdCBjb2xvcnMgPSB0aGlzLnNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzO1xuXHRcdGlmIChjb2xvcnMpIHtcblx0XHRcdGlmIChjb2xvcnMubmV3Tm90ZSkge1xuXHRcdFx0XHRzZXRDc3NQcm9wcyhib2R5LCB7ICctLW5hdGl2ZS1idXR0b24tY29sb3ItbmV3LW5vdGUnOiBjb2xvcnMubmV3Tm90ZSB9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGJvZHkuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy0tbmF0aXZlLWJ1dHRvbi1jb2xvci1uZXctbm90ZScpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGNvbG9ycy5uZXdGb2xkZXIpIHtcblx0XHRcdFx0c2V0Q3NzUHJvcHMoYm9keSwgeyAnLS1uYXRpdmUtYnV0dG9uLWNvbG9yLW5ldy1mb2xkZXInOiBjb2xvcnMubmV3Rm9sZGVyIH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ym9keS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnLS1uYXRpdmUtYnV0dG9uLWNvbG9yLW5ldy1mb2xkZXInKTtcblx0XHRcdH1cblx0XHRcdGlmIChjb2xvcnMuc29ydE9yZGVyKSB7XG5cdFx0XHRcdHNldENzc1Byb3BzKGJvZHksIHsgJy0tbmF0aXZlLWJ1dHRvbi1jb2xvci1zb3J0LW9yZGVyJzogY29sb3JzLnNvcnRPcmRlciB9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGJvZHkuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy0tbmF0aXZlLWJ1dHRvbi1jb2xvci1zb3J0LW9yZGVyJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoY29sb3JzLmF1dG9SZXZlYWwpIHtcblx0XHRcdFx0c2V0Q3NzUHJvcHMoYm9keSwgeyAnLS1uYXRpdmUtYnV0dG9uLWNvbG9yLWF1dG8tcmV2ZWFsJzogY29sb3JzLmF1dG9SZXZlYWwgfSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRib2R5LnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLW5hdGl2ZS1idXR0b24tY29sb3ItYXV0by1yZXZlYWwnKTtcblx0XHRcdH1cblx0XHRcdGlmIChjb2xvcnMuY29sbGFwc2VBbGwpIHtcblx0XHRcdFx0c2V0Q3NzUHJvcHMoYm9keSwgeyAnLS1uYXRpdmUtYnV0dG9uLWNvbG9yLWNvbGxhcHNlLWFsbCc6IGNvbG9ycy5jb2xsYXBzZUFsbCB9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGJvZHkuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy0tbmF0aXZlLWJ1dHRvbi1jb2xvci1jb2xsYXBzZS1hbGwnKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gUmVtb3ZlIGFsbCBjb2xvciB2YXJpYWJsZXMgaWYgY29sb3JzIG9iamVjdCBkb2Vzbid0IGV4aXN0XG5cdFx0XHRib2R5LnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLW5hdGl2ZS1idXR0b24tY29sb3ItbmV3LW5vdGUnKTtcblx0XHRcdGJvZHkuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy0tbmF0aXZlLWJ1dHRvbi1jb2xvci1uZXctZm9sZGVyJyk7XG5cdFx0XHRib2R5LnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLW5hdGl2ZS1idXR0b24tY29sb3Itc29ydC1vcmRlcicpO1xuXHRcdFx0Ym9keS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnLS1uYXRpdmUtYnV0dG9uLWNvbG9yLWF1dG8tcmV2ZWFsJyk7XG5cdFx0XHRib2R5LnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLW5hdGl2ZS1idXR0b24tY29sb3ItY29sbGFwc2UtYWxsJyk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhcHBseVZpc2liaWxpdHlTdGF0ZShib2R5OiBIVE1MRWxlbWVudCwgY2xhc3NOYW1lOiBzdHJpbmcsIHN0YXRlOiBVSVZpc2liaWxpdHlTdGF0ZSwgdXNlQWx3YXlzU2hvdzogYm9vbGVhbiA9IGZhbHNlKSB7XG5cdFx0Ly8gUmVtb3ZlIGFsbCBzdGF0ZXMgZmlyc3Rcblx0XHRpZiAodXNlQWx3YXlzU2hvdykge1xuXHRcdFx0Ym9keS5jbGFzc0xpc3QucmVtb3ZlKCdhbHdheXMtc2hvdy10aXRsZS1iYXInLCBgJHtjbGFzc05hbWV9LWhpZGVgLCBgJHtjbGFzc05hbWV9LXJldmVhbGApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRib2R5LmNsYXNzTGlzdC5yZW1vdmUoYCR7Y2xhc3NOYW1lfS1zaG93YCwgYCR7Y2xhc3NOYW1lfS1oaWRlYCwgYCR7Y2xhc3NOYW1lfS1yZXZlYWxgKTtcblx0XHR9XG5cblx0XHQvLyBBcHBseSB0aGUgY3VycmVudCBzdGF0ZVxuXHRcdGlmIChzdGF0ZSA9PT0gJ3Nob3cnKSB7XG5cdFx0XHRpZiAodXNlQWx3YXlzU2hvdykge1xuXHRcdFx0XHRib2R5LmNsYXNzTGlzdC5hZGQoJ2Fsd2F5cy1zaG93LXRpdGxlLWJhcicpO1xuXHRcdFx0fVxuXHRcdFx0Ly8gTm8gY2xhc3MgbmVlZGVkIGZvciBzaG93IHN0YXRlIChvciB1c2UgYWx3YXlzLXNob3cgZm9yIHRpdGxlIGJhcilcblx0XHR9IGVsc2UgaWYgKHN0YXRlID09PSAnaGlkZScpIHtcblx0XHRcdGJvZHkuY2xhc3NMaXN0LmFkZChgJHtjbGFzc05hbWV9LWhpZGVgKTtcblx0XHR9IGVsc2UgaWYgKHN0YXRlID09PSAncmV2ZWFsJykge1xuXHRcdFx0Ym9keS5jbGFzc0xpc3QuYWRkKGAke2NsYXNzTmFtZX0tcmV2ZWFsYCk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBzZXR1cFNjcm9sbGJhclJldmVhbExpc3RlbmVycygpIHtcblx0XHQvLyBSZW1vdmUgZXhpc3RpbmcgbGlzdGVuZXJzIGZpcnN0XG5cdFx0dGhpcy5yZW1vdmVTY3JvbGxiYXJSZXZlYWxMaXN0ZW5lcnMoKTtcblxuXHRcdC8vIEhlbHBlciB0byBjaGVjayBpZiBhbiBlbGVtZW50IGlzIHNjcm9sbGFibGVcblx0XHRjb25zdCBpc1Njcm9sbGFibGUgPSAoZWxlbWVudDogSFRNTEVsZW1lbnQpOiBib29sZWFuID0+IHtcblx0XHRcdGNvbnN0IHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG5cdFx0XHRjb25zdCBvdmVyZmxvdyA9IHN0eWxlLm92ZXJmbG93ICsgc3R5bGUub3ZlcmZsb3dZICsgc3R5bGUub3ZlcmZsb3dYO1xuXHRcdFx0aWYgKCFvdmVyZmxvdy5pbmNsdWRlcygnc2Nyb2xsJykgJiYgIW92ZXJmbG93LmluY2x1ZGVzKCdhdXRvJykpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0Ly8gQ2hlY2sgaWYgZWxlbWVudCBhY3R1YWxseSBoYXMgc2Nyb2xsYWJsZSBjb250ZW50XG5cdFx0XHRyZXR1cm4gZWxlbWVudC5zY3JvbGxIZWlnaHQgPiBlbGVtZW50LmNsaWVudEhlaWdodCB8fCBlbGVtZW50LnNjcm9sbFdpZHRoID4gZWxlbWVudC5jbGllbnRXaWR0aDtcblx0XHR9O1xuXG5cdFx0Ly8gVHJhY2sgd2hpY2ggc2Nyb2xsYWJsZSBlbGVtZW50cyBzaG91bGQgaGF2ZSBob3ZlciBjbGFzc1xuXHRcdGNvbnN0IGhvdmVyZWRFbGVtZW50cyA9IG5ldyBTZXQ8SFRNTEVsZW1lbnQ+KCk7XG5cblx0XHQvLyBVc2UgbW91c2Vtb3ZlIHRvIHRyYWNrIG1vdXNlIHBvc2l0aW9uIGFuZCBvbmx5IGFkZCBob3ZlciBjbGFzcyB3aGVuIG5lYXIgc2Nyb2xsYmFyXG5cdFx0Y29uc3QgaGFuZGxlTW91c2VNb3ZlID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0aWYgKCF0YXJnZXQpIHJldHVybjtcblx0XHRcdFxuXHRcdFx0Ly8gQ2xlYXIgYWxsIGhvdmVyIGNsYXNzZXMgZmlyc3Rcblx0XHRcdGhvdmVyZWRFbGVtZW50cy5mb3JFYWNoKChlbCkgPT4ge1xuXHRcdFx0XHRlbC5jbGFzc0xpc3QucmVtb3ZlKCd1aS10d2Vha2VyLXNjcm9sbGJhci1ob3ZlcicpO1xuXHRcdFx0fSk7XG5cdFx0XHRob3ZlcmVkRWxlbWVudHMuY2xlYXIoKTtcblx0XHRcdFxuXHRcdFx0Ly8gRmluZCBzY3JvbGxhYmxlIGNvbnRhaW5lcnMgYW5kIGNoZWNrIGlmIG1vdXNlIGlzIG5lYXIgdGhlIHNjcm9sbGJhciBhcmVhXG5cdFx0XHRsZXQgZWxlbWVudDogSFRNTEVsZW1lbnQgfCBudWxsID0gdGFyZ2V0O1xuXHRcdFx0d2hpbGUgKGVsZW1lbnQgJiYgZWxlbWVudCAhPT0gZG9jdW1lbnQuYm9keSAmJiBlbGVtZW50ICE9PSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpIHtcblx0XHRcdFx0aWYgKGlzU2Nyb2xsYWJsZShlbGVtZW50KSkge1xuXHRcdFx0XHRcdGNvbnN0IHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdFx0XHRcdGNvbnN0IHNjcm9sbGJhckFyZWEgPSAyNTsgLy8gV2lkdGggb2YgYXJlYSBuZWFyIGVkZ2VzIHdoZXJlIHNjcm9sbGJhciB3b3VsZCBiZVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIENoZWNrIGlmIG1vdXNlIGlzIGluIHRoZSBzY3JvbGxiYXIgYXJlYSAocmlnaHQgZWRnZSBmb3IgdmVydGljYWwsIGJvdHRvbSBlZGdlIGZvciBob3Jpem9udGFsKVxuXHRcdFx0XHRcdGNvbnN0IGlzSW5WZXJ0aWNhbFNjcm9sbGJhckFyZWEgPSBlLmNsaWVudFggPj0gcmVjdC5yaWdodCAtIHNjcm9sbGJhckFyZWEgJiYgZS5jbGllbnRYIDw9IHJlY3QucmlnaHQ7XG5cdFx0XHRcdFx0Y29uc3QgaXNJbkhvcml6b250YWxTY3JvbGxiYXJBcmVhID0gZS5jbGllbnRZID49IHJlY3QuYm90dG9tIC0gc2Nyb2xsYmFyQXJlYSAmJiBlLmNsaWVudFkgPD0gcmVjdC5ib3R0b207XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gT25seSBhZGQgaG92ZXIgY2xhc3MgaWYgbW91c2UgaXMgaW4gdGhlIHNjcm9sbGJhciBhcmVhXG5cdFx0XHRcdFx0aWYgKGlzSW5WZXJ0aWNhbFNjcm9sbGJhckFyZWEgfHwgaXNJbkhvcml6b250YWxTY3JvbGxiYXJBcmVhKSB7XG5cdFx0XHRcdFx0XHRlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3VpLXR3ZWFrZXItc2Nyb2xsYmFyLWhvdmVyJyk7XG5cdFx0XHRcdFx0XHRob3ZlcmVkRWxlbWVudHMuYWRkKGVsZW1lbnQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRlbGVtZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQvLyBDbGVhciBob3ZlciB3aGVuIG1vdXNlIGxlYXZlcyBkb2N1bWVudFxuXHRcdGNvbnN0IGhhbmRsZU1vdXNlTGVhdmUgPSAoKSA9PiB7XG5cdFx0XHRob3ZlcmVkRWxlbWVudHMuZm9yRWFjaCgoZWwpID0+IHtcblx0XHRcdFx0ZWwuY2xhc3NMaXN0LnJlbW92ZSgndWktdHdlYWtlci1zY3JvbGxiYXItaG92ZXInKTtcblx0XHRcdH0pO1xuXHRcdFx0aG92ZXJlZEVsZW1lbnRzLmNsZWFyKCk7XG5cdFx0fTtcblxuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZU1vdXNlTW92ZSwgdHJ1ZSk7XG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIGhhbmRsZU1vdXNlTGVhdmUsIHRydWUpO1xuXG5cdFx0Ly8gU3RvcmUgY2xlYW51cCBmdW5jdGlvblxuXHRcdHRoaXMucmV2ZWFsTGlzdGVuZXJzLnNldCgnc2Nyb2xsYmFyLXJldmVhbCcsICgpID0+IHtcblx0XHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZU1vdXNlTW92ZSwgdHJ1ZSk7XG5cdFx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgaGFuZGxlTW91c2VMZWF2ZSwgdHJ1ZSk7XG5cdFx0XHQvLyBSZW1vdmUgYWxsIGhvdmVyIGNsYXNzZXNcblx0XHRcdGhvdmVyZWRFbGVtZW50cy5mb3JFYWNoKChlbCkgPT4ge1xuXHRcdFx0XHRlbC5jbGFzc0xpc3QucmVtb3ZlKCd1aS10d2Vha2VyLXNjcm9sbGJhci1ob3ZlcicpO1xuXHRcdFx0fSk7XG5cdFx0XHRob3ZlcmVkRWxlbWVudHMuY2xlYXIoKTtcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgcmVtb3ZlU2Nyb2xsYmFyUmV2ZWFsTGlzdGVuZXJzKCkge1xuXHRcdGNvbnN0IGNsZWFudXAgPSB0aGlzLnJldmVhbExpc3RlbmVycy5nZXQoJ3Njcm9sbGJhci1yZXZlYWwnKTtcblx0XHRpZiAoY2xlYW51cCkge1xuXHRcdFx0Y2xlYW51cCgpO1xuXHRcdFx0dGhpcy5yZXZlYWxMaXN0ZW5lcnMuZGVsZXRlKCdzY3JvbGxiYXItcmV2ZWFsJyk7XG5cdFx0fVxuXHR9XG5cblx0Y2xlYW51cCgpIHtcblx0XHQvLyBSZW1vdmUgYWxsIGV2ZW50IGxpc3RlbmVyc1xuXHRcdHRoaXMucmV2ZWFsTGlzdGVuZXJzLmZvckVhY2goKGNsZWFudXApID0+IGNsZWFudXAoKSk7XG5cdFx0dGhpcy5yZXZlYWxMaXN0ZW5lcnMuY2xlYXIoKTtcblxuXHRcdC8vIFJlbW92ZSBhbGwgY2xhc3Nlc1xuXHRcdGNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuXHRcdGNvbnN0IGNsYXNzZXNUb1JlbW92ZTogc3RyaW5nW10gPSBbXTtcblx0XHRib2R5LmNsYXNzTGlzdC5mb3JFYWNoKChjbGFzc05hbWUpID0+IHtcblx0XHRcdGlmIChjbGFzc05hbWUuc3RhcnRzV2l0aCgndWktdHdlYWtlci0nKSB8fFxuXHRcdFx0XHRjbGFzc05hbWUuc3RhcnRzV2l0aCgnYXV0by1oaWRlLScpIHx8XG5cdFx0XHRcdGNsYXNzTmFtZS5zdGFydHNXaXRoKCdoaWRlci0nKSB8fFxuXHRcdFx0XHRjbGFzc05hbWUuc3RhcnRzV2l0aCgnaGlkZS0nKSB8fFxuXHRcdFx0XHRjbGFzc05hbWUuc3RhcnRzV2l0aCgnbWV0YWRhdGEtJykgfHxcblx0XHRcdFx0Y2xhc3NOYW1lLnN0YXJ0c1dpdGgoJ29yZGVyLW5hdmJhci1idXR0b24tJykgfHxcblx0XHRcdFx0Y2xhc3NOYW1lLnN0YXJ0c1dpdGgoJ2VuYWJsZS13aW5kb3ctZHJhZ2dpbmctJykgfHxcblx0XHRcdFx0Y2xhc3NOYW1lID09PSAnYXV0by1jb2xsYXBzZS1yaWJib24nIHx8XG5cdFx0XHRcdGNsYXNzTmFtZSA9PT0gJ3N3YXAtbW9iaWxlLW5ldy10YWItaWNvbicgfHxcblx0XHRcdFx0Y2xhc3NOYW1lID09PSAnYWx3YXlzLXNob3ctdGl0bGUtYmFyJykge1xuXHRcdFx0XHRjbGFzc2VzVG9SZW1vdmUucHVzaChjbGFzc05hbWUpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGNsYXNzZXNUb1JlbW92ZS5mb3JFYWNoKChjbGFzc05hbWUpID0+IGJvZHkuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpKTtcblxuXHRcdC8vIFJlbW92ZSBDU1MgdmFyaWFibGVzXG5cdFx0Ym9keS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnLS1hdXRvLWhpZGUtdmF1bHQtc3dpdGNoZXItYmctdHJhbnNwYXJlbmN5Jyk7XG5cdFx0Ym9keS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnLS1hdXRvLWhpZGUtdmF1bHQtc3dpdGNoZXItbWFzaycpO1xuXHRcdGJvZHkuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy0tbmF0aXZlLWJ1dHRvbi1jb2xvci1uZXctbm90ZScpO1xuXHRcdGJvZHkuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy0tbmF0aXZlLWJ1dHRvbi1jb2xvci1uZXctZm9sZGVyJyk7XG5cdFx0Ym9keS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnLS1uYXRpdmUtYnV0dG9uLWNvbG9yLXNvcnQtb3JkZXInKTtcblx0XHRib2R5LnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLW5hdGl2ZS1idXR0b24tY29sb3ItYXV0by1yZXZlYWwnKTtcblx0XHRib2R5LnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLW5hdGl2ZS1idXR0b24tY29sb3ItY29sbGFwc2UtYWxsJyk7XG5cdH1cbn1cbiIsICIvKipcbiAqIENvbW1hbmQgcmVnaXN0cmF0aW9uXG4gKi9cblxuaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVUlTZXR0aW5ncyB9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgVUlWaXNpYmlsaXR5U3RhdGUgfSBmcm9tICcuL3R5cGVzJztcblxuaW50ZXJmYWNlIENvbW1hbmRDb250ZXh0IHtcblx0cGx1Z2luOiBQbHVnaW47XG5cdHNldHRpbmdzOiBVSVNldHRpbmdzO1xuXHRzYXZlU2V0dGluZ3M6ICgpID0+IFByb21pc2U8dm9pZD47XG5cdHJlZnJlc2g6ICgpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckNvbW1hbmRzKGNvbnRleHQ6IENvbW1hbmRDb250ZXh0KSB7XG5cdGNvbnN0IHsgcGx1Z2luLCBzZXR0aW5ncywgc2F2ZVNldHRpbmdzLCByZWZyZXNoIH0gPSBjb250ZXh0O1xuXG5cdC8vIFRvZ2dsZSBjb21tYW5kcyBmb3IgYXV0by1oaWRlIGVsZW1lbnRzIChTaG93L0hpZGUvUmV2ZWFsKVxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLXRpdGxlLWJhcicsICdUb2dnbGUgdGl0bGUgYmFyJywgYXN5bmMgKCkgPT4ge1xuXHRcdHNldHRpbmdzLnRpdGxlQmFyID0gdG9nZ2xlVmlzaWJpbGl0eVN0YXRlKHNldHRpbmdzLnRpdGxlQmFyKTtcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcblx0XHRyZWZyZXNoKCk7XG5cdH0pO1xuXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtZmlsZS1leHBsb3Jlci1uYXYtaGVhZGVyJywgJ1RvZ2dsZSBmaWxlIGV4cGxvcmVyIG5hdmlnYXRpb24gaGVhZGVyJywgYXN5bmMgKCkgPT4ge1xuXHRcdHNldHRpbmdzLmZpbGVFeHBsb3Jlck5hdkhlYWRlciA9IHRvZ2dsZVZpc2liaWxpdHlTdGF0ZShzZXR0aW5ncy5maWxlRXhwbG9yZXJOYXZIZWFkZXIpO1xuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xuXHRcdHJlZnJlc2goKTtcblx0fSk7XG5cblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1vdGhlci1uYXYtaGVhZGVycycsICdUb2dnbGUgb3RoZXIgbmF2aWdhdGlvbiBoZWFkZXJzJywgYXN5bmMgKCkgPT4ge1xuXHRcdHNldHRpbmdzLm90aGVyTmF2SGVhZGVycyA9IHRvZ2dsZVZpc2liaWxpdHlTdGF0ZShzZXR0aW5ncy5vdGhlck5hdkhlYWRlcnMpO1xuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xuXHRcdHJlZnJlc2goKTtcblx0fSk7XG5cblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1sZWZ0LXRhYi1oZWFkZXJzJywgJ1RvZ2dsZSBsZWZ0IHRhYiBoZWFkZXJzJywgYXN5bmMgKCkgPT4ge1xuXHRcdHNldHRpbmdzLmxlZnRUYWJIZWFkZXJzID0gdG9nZ2xlVmlzaWJpbGl0eVN0YXRlKHNldHRpbmdzLmxlZnRUYWJIZWFkZXJzKTtcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcblx0XHRyZWZyZXNoKCk7XG5cdH0pO1xuXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtcmlnaHQtdGFiLWhlYWRlcnMnLCAnVG9nZ2xlIHJpZ2h0IHRhYiBoZWFkZXJzJywgYXN5bmMgKCkgPT4ge1xuXHRcdHNldHRpbmdzLnJpZ2h0VGFiSGVhZGVycyA9IHRvZ2dsZVZpc2liaWxpdHlTdGF0ZShzZXR0aW5ncy5yaWdodFRhYkhlYWRlcnMpO1xuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xuXHRcdHJlZnJlc2goKTtcblx0fSk7XG5cblx0Ly8gTm90ZTogUmliYm9uIHRvZ2dsZSBleGNsdWRlZCAtIHVzZXMgYmFzZSBPYnNpZGlhbiBjb21tYW5kXG5cblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS12YXVsdC1zd2l0Y2hlcicsICdUb2dnbGUgdmF1bHQgc3dpdGNoZXInLCBhc3luYyAoKSA9PiB7XG5cdFx0c2V0dGluZ3MudmF1bHRTd2l0Y2hlciA9IHRvZ2dsZVZpc2liaWxpdHlTdGF0ZShzZXR0aW5ncy52YXVsdFN3aXRjaGVyKTtcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcblx0XHRyZWZyZXNoKCk7XG5cdH0pO1xuXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtaGVscC1idXR0b24nLCAnVG9nZ2xlIGhlbHAgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xuXHRcdHNldHRpbmdzLmhlbHBCdXR0b24gPSB0b2dnbGVWaXNpYmlsaXR5U3RhdGUoc2V0dGluZ3MuaGVscEJ1dHRvbik7XG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XG5cdFx0cmVmcmVzaCgpO1xuXHR9KTtcblxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLXNldHRpbmdzLWJ1dHRvbicsICdUb2dnbGUgc2V0dGluZ3MgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xuXHRcdHNldHRpbmdzLnNldHRpbmdzQnV0dG9uID0gdG9nZ2xlVmlzaWJpbGl0eVN0YXRlKHNldHRpbmdzLnNldHRpbmdzQnV0dG9uKTtcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcblx0XHRyZWZyZXNoKCk7XG5cdH0pO1xuXG5cdC8vIE9wZW4gc2V0dGluZ3MgY29tbWFuZFxuXHRwbHVnaW4uYWRkQ29tbWFuZCh7XG5cdFx0aWQ6ICdvcGVuLXNldHRpbmdzJyxcblx0XHRuYW1lOiAnT3BlbiBzZXR0aW5ncycsXG5cdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdC8vIEFjY2VzcyBhcHAgdGhyb3VnaCBwbHVnaW4gaW5zdGFuY2UgKFBsdWdpbiBjbGFzcyBoYXMgYXBwIHByb3BlcnR5KVxuXHRcdFx0Y29uc3QgYXBwID0gcGx1Z2luLmFwcDtcblx0XHRcdC8vIFVzZSB0eXBlIGFzc2VydGlvbiBmb3Igc2V0dGluZyBBUEkgYXMgaXQncyBub3QgaW4gdGhlIHB1YmxpYyB0eXBlIGRlZmluaXRpb25zXG5cdFx0XHQvLyBidXQgaXMgYXZhaWxhYmxlIGluIHRoZSBydW50aW1lIEFQSVxuXHRcdFx0Y29uc3Qgc2V0dGluZ0FwaSA9IChhcHAgYXMgeyBzZXR0aW5nPzogeyBvcGVuPzogKCkgPT4gdm9pZDsgb3BlblRhYkJ5SWQ/OiAoaWQ6IHN0cmluZykgPT4gdm9pZCB9IH0pLnNldHRpbmc7XG5cdFx0XHRpZiAoc2V0dGluZ0FwaSkge1xuXHRcdFx0XHRzZXR0aW5nQXBpLm9wZW4/LigpO1xuXHRcdFx0XHQvLyBPcGVuIHRoZSBwbHVnaW4ncyBzZXR0aW5ncyB0YWJcblx0XHRcdFx0Ly8gVXNlIHR5cGUgYXNzZXJ0aW9uIGZvciBzZXR0aW5nVGFiIGFzIGl0J3MgYSBwcml2YXRlIHByb3BlcnR5XG5cdFx0XHRcdGNvbnN0IHBsdWdpbkluc3RhbmNlID0gcGx1Z2luIGFzIHsgc2V0dGluZ1RhYj86IHsgaWQ/OiBzdHJpbmcgfSB9O1xuXHRcdFx0XHRpZiAocGx1Z2luSW5zdGFuY2Uuc2V0dGluZ1RhYj8uaWQgJiYgc2V0dGluZ0FwaS5vcGVuVGFiQnlJZCkge1xuXHRcdFx0XHRcdHNldHRpbmdBcGkub3BlblRhYkJ5SWQocGx1Z2luSW5zdGFuY2Uuc2V0dGluZ1RhYi5pZCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHR9KTtcblxuXHQvLyBUb2dnbGUgY29tbWFuZHMgZm9yIHNpbXBsZSB0b2dnbGVzXG5cblxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLXRhYi1iYXInLCAnVG9nZ2xlIHRhYiBiYXInLCBhc3luYyAoKSA9PiB7XG5cdFx0c2V0dGluZ3MudGFiQmFyID0gIXNldHRpbmdzLnRhYkJhcjtcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcblx0XHRyZWZyZXNoKCk7XG5cdH0pO1xuXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtbmV3LW5vdGUtYnV0dG9uJywgJ1RvZ2dsZSBuZXcgbm90ZSBidXR0b24nLCBhc3luYyAoKSA9PiB7XG5cdFx0c2V0dGluZ3MubmV3Tm90ZUJ1dHRvbiA9ICFzZXR0aW5ncy5uZXdOb3RlQnV0dG9uO1xuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xuXHRcdHJlZnJlc2goKTtcblx0fSk7XG5cblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1uZXctZm9sZGVyLWJ1dHRvbicsICdUb2dnbGUgbmV3IGZvbGRlciBidXR0b24nLCBhc3luYyAoKSA9PiB7XG5cdFx0c2V0dGluZ3MubmV3Rm9sZGVyQnV0dG9uID0gIXNldHRpbmdzLm5ld0ZvbGRlckJ1dHRvbjtcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcblx0XHRyZWZyZXNoKCk7XG5cdH0pO1xuXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtc29ydC1vcmRlci1idXR0b24nLCAnVG9nZ2xlIHNvcnQgb3JkZXIgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xuXHRcdHNldHRpbmdzLnNvcnRPcmRlckJ1dHRvbiA9ICFzZXR0aW5ncy5zb3J0T3JkZXJCdXR0b247XG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XG5cdFx0cmVmcmVzaCgpO1xuXHR9KTtcblxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLWF1dG8tcmV2ZWFsLWJ1dHRvbicsICdUb2dnbGUgYXV0byByZXZlYWwgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xuXHRcdHNldHRpbmdzLmF1dG9SZXZlYWxCdXR0b24gPSAhc2V0dGluZ3MuYXV0b1JldmVhbEJ1dHRvbjtcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcblx0XHRyZWZyZXNoKCk7XG5cdH0pO1xuXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtY29sbGFwc2UtYWxsLWJ1dHRvbicsICdUb2dnbGUgY29sbGFwc2UgYWxsIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcblx0XHRzZXR0aW5ncy5jb2xsYXBzZUFsbEJ1dHRvbiA9ICFzZXR0aW5ncy5jb2xsYXBzZUFsbEJ1dHRvbjtcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcblx0XHRyZWZyZXNoKCk7XG5cdH0pO1xuXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtcmVhZGluZy1tb2RlLWJ1dHRvbicsICdUb2dnbGUgcmVhZGluZyBtb2RlIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcblx0XHRzZXR0aW5ncy5yZWFkaW5nTW9kZUJ1dHRvbiA9ICFzZXR0aW5ncy5yZWFkaW5nTW9kZUJ1dHRvbjtcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcblx0XHRyZWZyZXNoKCk7XG5cdH0pO1xuXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtc2VhcmNoLXNldHRpbmdzLWJ1dHRvbicsICdUb2dnbGUgc2VhcmNoIHNldHRpbmdzIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcblx0XHRzZXR0aW5ncy5zZWFyY2hTZXR0aW5nc0J1dHRvbiA9ICFzZXR0aW5ncy5zZWFyY2hTZXR0aW5nc0J1dHRvbjtcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcblx0XHRyZWZyZXNoKCk7XG5cdH0pO1xuXG5cdC8vIFRhYiBpY29ucyAtIG5vdyBzdXBwb3J0IFNob3cvSGlkZS9SZXZlYWxcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS10YWItbGlzdC1pY29uJywgJ1RvZ2dsZSB0YWIgbGlzdCBpY29uJywgYXN5bmMgKCkgPT4ge1xuXHRcdHNldHRpbmdzLnRhYkxpc3RJY29uID0gdG9nZ2xlVmlzaWJpbGl0eVN0YXRlKHNldHRpbmdzLnRhYkxpc3RJY29uKTtcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcblx0XHRyZWZyZXNoKCk7XG5cdH0pO1xuXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtbmV3LXRhYi1pY29uJywgJ1RvZ2dsZSBuZXcgdGFiIGljb24nLCBhc3luYyAoKSA9PiB7XG5cdFx0c2V0dGluZ3MubmV3VGFiSWNvbiA9IHRvZ2dsZVZpc2liaWxpdHlTdGF0ZShzZXR0aW5ncy5uZXdUYWJJY29uKTtcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcblx0XHRyZWZyZXNoKCk7XG5cdH0pO1xuXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtdGFiLWNsb3NlLWJ1dHRvbicsICdUb2dnbGUgdGFiIGNsb3NlIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcblx0XHRzZXR0aW5ncy50YWJDbG9zZUJ1dHRvbiA9IHRvZ2dsZVZpc2liaWxpdHlTdGF0ZShzZXR0aW5ncy50YWJDbG9zZUJ1dHRvbik7XG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XG5cdFx0cmVmcmVzaCgpO1xuXHR9KTtcblxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLXN0YXR1cy1iYXInLCAnVG9nZ2xlIHN0YXR1cyBiYXInLCBhc3luYyAoKSA9PiB7XG5cdFx0c2V0dGluZ3Muc3RhdHVzQmFyID0gIXNldHRpbmdzLnN0YXR1c0Jhcjtcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcblx0XHRyZWZyZXNoKCk7XG5cdH0pO1xuXG5cdC8vIFNjcm9sbCBiYXJzIC0gbm93IHN1cHBvcnQgU2hvdy9IaWRlL1JldmVhbFxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLXNjcm9sbC1iYXJzJywgJ1RvZ2dsZSBzY3JvbGwgYmFycycsIGFzeW5jICgpID0+IHtcblx0XHRzZXR0aW5ncy5zY3JvbGxCYXJzID0gdG9nZ2xlVmlzaWJpbGl0eVN0YXRlKHNldHRpbmdzLnNjcm9sbEJhcnMpO1xuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xuXHRcdHJlZnJlc2goKTtcblx0fSk7XG5cblx0Ly8gU2lkZWJhciB0b2dnbGUgYnV0dG9ucyAtIG5vdyBzdXBwb3J0IFNob3cvSGlkZS9SZXZlYWxcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1sZWZ0LXNpZGViYXItdG9nZ2xlLWJ1dHRvbicsICdUb2dnbGUgbGVmdCBzaWRlYmFyIHRvZ2dsZSBidXR0b24nLCBhc3luYyAoKSA9PiB7XG5cdFx0c2V0dGluZ3MubGVmdFNpZGViYXJUb2dnbGVCdXR0b24gPSB0b2dnbGVWaXNpYmlsaXR5U3RhdGUoc2V0dGluZ3MubGVmdFNpZGViYXJUb2dnbGVCdXR0b24pO1xuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xuXHRcdHJlZnJlc2goKTtcblx0fSk7XG5cblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1yaWdodC1zaWRlYmFyLXRvZ2dsZS1idXR0b24nLCAnVG9nZ2xlIHJpZ2h0IHNpZGViYXIgdG9nZ2xlIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcblx0XHRzZXR0aW5ncy5yaWdodFNpZGViYXJUb2dnbGVCdXR0b24gPSB0b2dnbGVWaXNpYmlsaXR5U3RhdGUoc2V0dGluZ3MucmlnaHRTaWRlYmFyVG9nZ2xlQnV0dG9uKTtcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcblx0XHRyZWZyZXNoKCk7XG5cdH0pO1xuXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtdG9vbHRpcHMnLCAnVG9nZ2xlIHRvb2x0aXBzJywgYXN5bmMgKCkgPT4ge1xuXHRcdHNldHRpbmdzLnRvb2x0aXBzID0gIXNldHRpbmdzLnRvb2x0aXBzO1xuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xuXHRcdHJlZnJlc2goKTtcblx0fSk7XG5cblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1zZWFyY2gtc3VnZ2VzdGlvbnMnLCAnVG9nZ2xlIHNlYXJjaCBzdWdnZXN0aW9ucycsIGFzeW5jICgpID0+IHtcblx0XHRzZXR0aW5ncy5zZWFyY2hTdWdnZXN0aW9ucyA9ICFzZXR0aW5ncy5zZWFyY2hTdWdnZXN0aW9ucztcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcblx0XHRyZWZyZXNoKCk7XG5cdH0pO1xuXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtc2VhcmNoLXRlcm0tY291bnRzJywgJ1RvZ2dsZSBzZWFyY2ggdGVybSBjb3VudHMnLCBhc3luYyAoKSA9PiB7XG5cdFx0c2V0dGluZ3Muc2VhcmNoVGVybUNvdW50cyA9ICFzZXR0aW5ncy5zZWFyY2hUZXJtQ291bnRzO1xuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xuXHRcdHJlZnJlc2goKTtcblx0fSk7XG5cblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1wcm9wZXJ0aWVzLXJlYWRpbmctdmlldycsICdUb2dnbGUgcHJvcGVydGllcyBpbiBSZWFkaW5nIHZpZXcnLCBhc3luYyAoKSA9PiB7XG5cdFx0c2V0dGluZ3MucHJvcGVydGllc0luUmVhZGluZ1ZpZXcgPSAhc2V0dGluZ3MucHJvcGVydGllc0luUmVhZGluZ1ZpZXc7XG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XG5cdFx0cmVmcmVzaCgpO1xuXHR9KTtcblxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLXByb3BlcnRpZXMtaGVhZGluZycsICdUb2dnbGUgcHJvcGVydGllcyBoZWFkaW5nJywgYXN5bmMgKCkgPT4ge1xuXHRcdHNldHRpbmdzLnByb3BlcnRpZXNJbkhlYWRpbmcgPSAhc2V0dGluZ3MucHJvcGVydGllc0luSGVhZGluZztcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcblx0XHRyZWZyZXNoKCk7XG5cdH0pO1xuXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtYWRkLXByb3BlcnR5LWJ1dHRvbicsICdUb2dnbGUgYWRkIHByb3BlcnR5IGJ1dHRvbicsIGFzeW5jICgpID0+IHtcblx0XHRzZXR0aW5ncy5hZGRQcm9wZXJ0eUJ1dHRvbiA9ICFzZXR0aW5ncy5hZGRQcm9wZXJ0eUJ1dHRvbjtcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcblx0XHRyZWZyZXNoKCk7XG5cdH0pO1xuXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtaW5zdHJ1Y3Rpb25zJywgJ1RvZ2dsZSBpbnN0cnVjdGlvbnMnLCBhc3luYyAoKSA9PiB7XG5cdFx0c2V0dGluZ3MuaW5zdHJ1Y3Rpb25zID0gIXNldHRpbmdzLmluc3RydWN0aW9ucztcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcblx0XHRyZWZyZXNoKCk7XG5cdH0pO1xuXG5cdC8vIE1vYmlsZSB0b2dnbGUgY29tbWFuZHNcblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1tb2JpbGUtY2hldnJvbnMtaWNvbicsICdUb2dnbGUgbW9iaWxlIGNoZXZyb25zIGljb24nLCBhc3luYyAoKSA9PiB7XG5cdFx0c2V0dGluZ3MubW9iaWxlQ2hldnJvbnNJY29uID0gIXNldHRpbmdzLm1vYmlsZUNoZXZyb25zSWNvbjtcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcblx0XHRyZWZyZXNoKCk7XG5cdH0pO1xuXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtbmF2aWdhdGUtYmFjay1idXR0b24nLCAnVG9nZ2xlIG5hdmlnYXRlIGJhY2sgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xuXHRcdHNldHRpbmdzLm5hdmlnYXRlQmFja0J1dHRvbiA9ICFzZXR0aW5ncy5uYXZpZ2F0ZUJhY2tCdXR0b247XG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XG5cdFx0cmVmcmVzaCgpO1xuXHR9KTtcblxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLW5hdmlnYXRlLWZvcndhcmQtYnV0dG9uJywgJ1RvZ2dsZSBuYXZpZ2F0ZSBmb3J3YXJkIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcblx0XHRzZXR0aW5ncy5uYXZpZ2F0ZUZvcndhcmRCdXR0b24gPSAhc2V0dGluZ3MubmF2aWdhdGVGb3J3YXJkQnV0dG9uO1xuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xuXHRcdHJlZnJlc2goKTtcblx0fSk7XG5cblx0cmVnaXN0ZXJUb2dnbGVDb21tYW5kKHBsdWdpbiwgJ3RvZ2dsZS1xdWljay1zd2l0Y2hlci1idXR0b24nLCAnVG9nZ2xlIHF1aWNrIHN3aXRjaGVyIGJ1dHRvbicsIGFzeW5jICgpID0+IHtcblx0XHRzZXR0aW5ncy5xdWlja1N3aXRjaGVyQnV0dG9uID0gIXNldHRpbmdzLnF1aWNrU3dpdGNoZXJCdXR0b247XG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XG5cdFx0cmVmcmVzaCgpO1xuXHR9KTtcblxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLW1vYmlsZS1uZXctdGFiLWJ1dHRvbicsICdUb2dnbGUgbW9iaWxlIG5ldyB0YWIgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xuXHRcdHNldHRpbmdzLm1vYmlsZU5ld1RhYkJ1dHRvbiA9ICFzZXR0aW5ncy5tb2JpbGVOZXdUYWJCdXR0b247XG5cdFx0YXdhaXQgc2F2ZVNldHRpbmdzKCk7XG5cdFx0cmVmcmVzaCgpO1xuXHR9KTtcblxuXHRyZWdpc3RlclRvZ2dsZUNvbW1hbmQocGx1Z2luLCAndG9nZ2xlLW9wZW4tdGFiLWJ1dHRvbicsICdUb2dnbGUgb3BlbiB0YWIgYnV0dG9uJywgYXN5bmMgKCkgPT4ge1xuXHRcdHNldHRpbmdzLm9wZW5UYWJCdXR0b24gPSAhc2V0dGluZ3Mub3BlblRhYkJ1dHRvbjtcblx0XHRhd2FpdCBzYXZlU2V0dGluZ3MoKTtcblx0XHRyZWZyZXNoKCk7XG5cdH0pO1xuXG5cdHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW4sICd0b2dnbGUtcmliYm9uLW1lbnUtYnV0dG9uJywgJ1RvZ2dsZSByaWJib24gbWVudSBidXR0b24nLCBhc3luYyAoKSA9PiB7XG5cdFx0c2V0dGluZ3MucmliYm9uTWVudUJ1dHRvbiA9ICFzZXR0aW5ncy5yaWJib25NZW51QnV0dG9uO1xuXHRcdGF3YWl0IHNhdmVTZXR0aW5ncygpO1xuXHRcdHJlZnJlc2goKTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyVG9nZ2xlQ29tbWFuZChwbHVnaW46IFBsdWdpbiwgaWQ6IHN0cmluZywgbmFtZTogc3RyaW5nLCBjYWxsYmFjazogKCkgPT4gdm9pZCB8IFByb21pc2U8dm9pZD4pIHtcblx0cGx1Z2luLmFkZENvbW1hbmQoe1xuXHRcdGlkOiBpZCxcblx0XHRuYW1lOiBuYW1lLFxuXHRcdGNhbGxiYWNrOiBjYWxsYmFjayxcblx0fSk7XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZVZpc2liaWxpdHlTdGF0ZShjdXJyZW50U3RhdGU6IFVJVmlzaWJpbGl0eVN0YXRlKTogVUlWaXNpYmlsaXR5U3RhdGUge1xuXHQvLyBJZiBjdXJyZW50IHN0YXRlIGlzIFwicmV2ZWFsXCIsIHJlc2V0IHRvIFwic2hvd1wiIGZpcnN0XG5cdGlmIChjdXJyZW50U3RhdGUgPT09ICdyZXZlYWwnKSB7XG5cdFx0cmV0dXJuICdoaWRlJztcblx0fVxuXHQvLyBUb2dnbGUgYmV0d2VlbiBcInNob3dcIiBhbmQgXCJoaWRlXCJcblx0cmV0dXJuIGN1cnJlbnRTdGF0ZSA9PT0gJ3Nob3cnID8gJ2hpZGUnIDogJ3Nob3cnO1xufVxuIiwgIi8qKlxuICogTWFpbiBTZXR0aW5ncyBUYWIgd2l0aCB0YWIgbmF2aWdhdGlvblxuICovXG5cbmltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBVSVR3ZWFrZXJQbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBUYWJSZW5kZXJlciB9IGZyb20gJy4vY29tbW9uL1RhYlJlbmRlcmVyJztcbmltcG9ydCB7IEhpZGVyVGFiIH0gZnJvbSAnLi90YWJzL0hpZGVyVGFiJztcbmltcG9ydCB7IFRhYkJhclRhYiB9IGZyb20gJy4vdGFicy9UYWJCYXJUYWInO1xuaW1wb3J0IHsgU3RhdHVzQmFyVGFiIH0gZnJvbSAnLi90YWJzL1N0YXR1c0JhclRhYic7XG5pbXBvcnQgeyBFeHBsb3JlclRhYiB9IGZyb20gJy4vdGFicy9FeHBsb3JlclRhYic7XG5pbXBvcnQgeyBNb2JpbGVUYWIgfSBmcm9tICcuL3RhYnMvTW9iaWxlVGFiJztcblxuZXhwb3J0IGNsYXNzIFVJVHdlYWtlclNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBVSVR3ZWFrZXJQbHVnaW47XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luKSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0ZGlzcGxheSgpOiB2b2lkIHtcblx0XHR0aGlzLnJlbmRlcigpO1xuXHR9XG5cblx0cmVuZGVyKCk6IHZvaWQge1xuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblx0XHRjb250YWluZXJFbC5hZGRDbGFzcygndWktdHdlYWtlci1zZXR0aW5ncycpO1xuXG5cdFx0Ly8gQ3JlYXRlIGVuaGFuY2VkIHRhYiBuYXZpZ2F0aW9uXG5cdFx0Y29uc3QgdGFiQ29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCd0YWItY29udGFpbmVyJyk7XG5cdFx0Y29uc3QgdGFiTmF2ID0gdGFiQ29udGFpbmVyLmNyZWF0ZURpdigndGFiLW5hdicpO1xuXHRcdGNvbnN0IHRhYkNvbnRlbnQgPSB0YWJDb250YWluZXIuY3JlYXRlRGl2KCd0YWItY29udGVudCcpO1xuXG5cdFx0Ly8gVGFiIGRlZmluaXRpb25zXG5cdFx0Y29uc3QgdGFiczogQXJyYXk8eyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmc7IHJlbmRlcmVyOiBUYWJSZW5kZXJlciB9PiA9IFtcblx0XHRcdHtcblx0XHRcdFx0aWQ6ICdoaWRlcicsXG5cdFx0XHRcdG5hbWU6ICdIaWRlcicsXG5cdFx0XHRcdHJlbmRlcmVyOiBuZXcgSGlkZXJUYWIodGhpcy5hcHAsIHRoaXMucGx1Z2luKVxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0aWQ6ICdzdGF0dXMtYmFyJyxcblx0XHRcdFx0bmFtZTogJ1N0YXR1cyBiYXInLFxuXHRcdFx0XHRyZW5kZXJlcjogbmV3IFN0YXR1c0JhclRhYih0aGlzLmFwcCwgdGhpcy5wbHVnaW4pXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRpZDogJ3RhYi1iYXInLFxuXHRcdFx0XHRuYW1lOiAnVGFiIGJhcicsXG5cdFx0XHRcdHJlbmRlcmVyOiBuZXcgVGFiQmFyVGFiKHRoaXMuYXBwLCB0aGlzLnBsdWdpbilcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdGlkOiAnZXhwbG9yZXInLFxuXHRcdFx0XHRuYW1lOiAnRXhwbG9yZXInLFxuXHRcdFx0XHRyZW5kZXJlcjogbmV3IEV4cGxvcmVyVGFiKHRoaXMuYXBwLCB0aGlzLnBsdWdpbilcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdGlkOiAnbW9iaWxlJyxcblx0XHRcdFx0bmFtZTogJ01vYmlsZScsXG5cdFx0XHRcdHJlbmRlcmVyOiBuZXcgTW9iaWxlVGFiKHRoaXMuYXBwLCB0aGlzLnBsdWdpbilcblx0XHRcdH1cblx0XHRdO1xuXG5cdFx0Ly8gQ3JlYXRlIHRhYiBidXR0b25zIHdpdGggY2xlYW4gc3R5bGluZ1xuXHRcdHRhYnMuZm9yRWFjaCgodGFiLCBpbmRleCkgPT4ge1xuXHRcdFx0Y29uc3QgYnV0dG9uID0gdGFiTmF2LmNyZWF0ZUVsKCdidXR0b24nLCB7XG5cdFx0XHRcdHRleHQ6IHRhYi5uYW1lLFxuXHRcdFx0XHRjbHM6IGB0YWItYnV0dG9uICR7aW5kZXggPT09IDAgPyAnYWN0aXZlJyA6ICcnfWBcblx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHRcblx0XHRcdGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdFx0Ly8gUmVtb3ZlIGFjdGl2ZSBjbGFzcyBmcm9tIGFsbCBidXR0b25zXG5cdFx0XHRcdHRhYk5hdi5xdWVyeVNlbGVjdG9yQWxsKCcudGFiLWJ1dHRvbicpLmZvckVhY2goYnRuID0+IGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7XG5cdFx0XHRcdC8vIEFkZCBhY3RpdmUgY2xhc3MgdG8gY2xpY2tlZCBidXR0b25cblx0XHRcdFx0YnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuXHRcdFx0XHQvLyBSZW5kZXIgdGFiIGNvbnRlbnQgaW1tZWRpYXRlbHlcblx0XHRcdFx0dGFiQ29udGVudC5lbXB0eSgpO1xuXHRcdFx0XHR2b2lkIHRhYi5yZW5kZXJlci5yZW5kZXIodGFiQ29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdC8vIFJlbmRlciB0aGUgZmlyc3QgdGFiIGJ5IGRlZmF1bHRcblx0XHR2b2lkIHRhYnNbMF0ucmVuZGVyZXIucmVuZGVyKHRhYkNvbnRlbnQpO1xuXHR9XG59XG4iLCAiLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhbGwgc2V0dGluZ3MgdGFic1xuICovXG5cbmltcG9ydCB7IEFwcCwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBVSVR3ZWFrZXJQbHVnaW4gZnJvbSAnLi4vLi4vbWFpbic7XG5pbXBvcnQgeyBVSVNldHRpbmdzIH0gZnJvbSAnLi4vLi4vc2V0dGluZ3MnO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVGFiUmVuZGVyZXIge1xuXHRwcm90ZWN0ZWQgYXBwOiBBcHA7XG5cdHByb3RlY3RlZCBwbHVnaW46IFVJVHdlYWtlclBsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBVSVR3ZWFrZXJQbHVnaW4pIHtcblx0XHR0aGlzLmFwcCA9IGFwcDtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGFic3RyYWN0IHJlbmRlcihjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB8IFByb21pc2U8dm9pZD47XG5cblx0cHJvdGVjdGVkIGdldFNldHRpbmdzKCk6IFVJU2V0dGluZ3Mge1xuXHRcdHJldHVybiB0aGlzLnBsdWdpbi5zZXR0aW5ncztcblx0fVxuXG5cdHByb3RlY3RlZCBhc3luYyBzYXZlU2V0dGluZ3MoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0dGhpcy5wbHVnaW4ucmVmcmVzaCgpO1xuXHR9XG5cblx0cHJvdGVjdGVkIGNyZWF0ZURyb3Bkb3duU2V0dGluZyhcblx0XHRjb250YWluZXI6IEhUTUxFbGVtZW50LFxuXHRcdG5hbWU6IHN0cmluZyxcblx0XHRkZXNjcmlwdGlvbjogc3RyaW5nLFxuXHRcdHZhbHVlOiBzdHJpbmcsXG5cdFx0b3B0aW9uczogUmVjb3JkPHN0cmluZywgc3RyaW5nPixcblx0XHRvbkNoYW5nZTogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWRcblx0KTogU2V0dGluZyB7XG5cdFx0cmV0dXJuIG5ldyBTZXR0aW5nKGNvbnRhaW5lcilcblx0XHRcdC5zZXROYW1lKG5hbWUpXG5cdFx0XHQuc2V0RGVzYyhkZXNjcmlwdGlvbilcblx0XHRcdC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG5cdFx0XHRcdE9iamVjdC5lbnRyaWVzKG9wdGlvbnMpLmZvckVhY2goKFtrZXksIGxhYmVsXSkgPT4ge1xuXHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbihrZXksIGxhYmVsKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGRyb3Bkb3duLnNldFZhbHVlKHZhbHVlKTtcblx0XHRcdFx0ZHJvcGRvd24ub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0b25DaGFuZ2UodmFsdWUpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRyZXR1cm4gZHJvcGRvd247XG5cdFx0XHR9KTtcblx0fVxuXG5cdHByb3RlY3RlZCBjcmVhdGVUb2dnbGVTZXR0aW5nKFxuXHRcdGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG5cdFx0bmFtZTogc3RyaW5nLFxuXHRcdGRlc2NyaXB0aW9uOiBzdHJpbmcsXG5cdFx0dmFsdWU6IGJvb2xlYW4sXG5cdFx0b25DaGFuZ2U6ICh2YWx1ZTogYm9vbGVhbikgPT4gdm9pZFxuXHQpOiBTZXR0aW5nIHtcblx0XHRyZXR1cm4gbmV3IFNldHRpbmcoY29udGFpbmVyKVxuXHRcdFx0LnNldE5hbWUobmFtZSlcblx0XHRcdC5zZXREZXNjKGRlc2NyaXB0aW9uKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuXHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodmFsdWUpO1xuXHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0b25DaGFuZ2UodmFsdWUpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRyZXR1cm4gdG9nZ2xlO1xuXHRcdFx0fSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgY3JlYXRlU2xpZGVyU2V0dGluZyhcblx0XHRjb250YWluZXI6IEhUTUxFbGVtZW50LFxuXHRcdG5hbWU6IHN0cmluZyxcblx0XHRkZXNjcmlwdGlvbjogc3RyaW5nLFxuXHRcdHZhbHVlOiBudW1iZXIsXG5cdFx0bWluOiBudW1iZXIsXG5cdFx0bWF4OiBudW1iZXIsXG5cdFx0c3RlcDogbnVtYmVyLFxuXHRcdG9uQ2hhbmdlOiAodmFsdWU6IG51bWJlcikgPT4gdm9pZFxuXHQpOiBTZXR0aW5nIHtcblx0XHRyZXR1cm4gbmV3IFNldHRpbmcoY29udGFpbmVyKVxuXHRcdFx0LnNldE5hbWUobmFtZSlcblx0XHRcdC5zZXREZXNjKGRlc2NyaXB0aW9uKVxuXHRcdFx0LmFkZFNsaWRlcihzbGlkZXIgPT4ge1xuXHRcdFx0XHRzbGlkZXJcblx0XHRcdFx0XHQuc2V0TGltaXRzKG1pbiwgbWF4LCBzdGVwKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh2YWx1ZSlcblx0XHRcdFx0XHQuc2V0RHluYW1pY1Rvb2x0aXAoKVxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdG9uQ2hhbmdlKHZhbHVlKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdHJldHVybiBzbGlkZXI7XG5cdFx0XHR9KTtcblx0fVxuXG59XG4iLCAiLyoqXG4gKiBDb21wYXRpYmlsaXR5IHV0aWxpdGllcyBmb3Igc2V0dGluZ3NcbiAqIFByb3ZpZGVzIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgZm9yIFNldHRpbmdHcm91cCAocmVxdWlyZXMgQVBJIDEuMTEuMCspXG4gKi9cblxuaW1wb3J0IHsgU2V0dGluZywgcmVxdWlyZUFwaVZlcnNpb24gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgKiBhcyBPYnNpZGlhbk1vZHVsZSBmcm9tICdvYnNpZGlhbic7XG5cbi8qKlxuICogSW50ZXJmYWNlIHRoYXQgd29ya3Mgd2l0aCBib3RoIFNldHRpbmdHcm91cCBhbmQgZmFsbGJhY2sgY29udGFpbmVyXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2V0dGluZ3NDb250YWluZXIge1xuXHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCk6IHZvaWQ7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHNldHRpbmdzIGNvbnRhaW5lciB0aGF0IHVzZXMgU2V0dGluZ0dyb3VwIGlmIGF2YWlsYWJsZSAoQVBJIDEuMTEuMCspLFxuICogb3RoZXJ3aXNlIGZhbGxzIGJhY2sgdG8gY3JlYXRpbmcgYSBoZWFkaW5nIGFuZCB1c2luZyB0aGUgY29udGFpbmVyIGRpcmVjdGx5LlxuICogXG4gKiBVc2VzIHJlcXVpcmVBcGlWZXJzaW9uKCcxLjExLjAnKSB0byBjaGVjayBpZiBTZXR0aW5nR3JvdXAgaXMgYXZhaWxhYmxlLlxuICogVGhpcyBpcyB0aGUgb2ZmaWNpYWwgT2JzaWRpYW4gQVBJIG1ldGhvZCBmb3IgdmVyc2lvbiBjaGVja2luZy5cbiAqIFxuICogQHBhcmFtIGNvbnRhaW5lckVsIC0gVGhlIGNvbnRhaW5lciBlbGVtZW50IGZvciBzZXR0aW5nc1xuICogQHBhcmFtIGhlYWRpbmcgLSBUaGUgaGVhZGluZyB0ZXh0IGZvciB0aGUgc2V0dGluZ3MgZ3JvdXAgKG9wdGlvbmFsKVxuICogQHBhcmFtIG1hbmlmZXN0SWQgLSBUaGUgcGx1Z2luJ3MgbWFuaWZlc3QgSUQgZm9yIENTUyBzY29waW5nIChyZXF1aXJlZCBmb3IgZmFsbGJhY2sgbW9kZSlcbiAqIEByZXR1cm5zIEEgY29udGFpbmVyIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRkIHNldHRpbmdzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZXR0aW5nc0dyb3VwKFxuXHRjb250YWluZXJFbDogSFRNTEVsZW1lbnQsXG5cdGhlYWRpbmc/OiBzdHJpbmcsXG5cdG1hbmlmZXN0SWQ/OiBzdHJpbmdcbik6IFNldHRpbmdzQ29udGFpbmVyIHtcblx0Ly8gQ2hlY2sgaWYgU2V0dGluZ0dyb3VwIGlzIGF2YWlsYWJsZSAoQVBJIDEuMTEuMCspXG5cdC8vIHJlcXVpcmVBcGlWZXJzaW9uIGlzIHRoZSBvZmZpY2lhbCBPYnNpZGlhbiBBUEkgbWV0aG9kIGZvciB2ZXJzaW9uIGNoZWNraW5nXG5cdGlmIChyZXF1aXJlQXBpVmVyc2lvbignMS4xMS4wJykpIHtcblx0XHQvLyBVc2UgU2V0dGluZ0dyb3VwIC0gaXQncyBndWFyYW50ZWVkIHRvIGV4aXN0IGlmIHJlcXVpcmVBcGlWZXJzaW9uIHJldHVybnMgdHJ1ZVxuXHRcdC8vIEFjY2VzcyBTZXR0aW5nR3JvdXAgdmlhIHR5cGUgYXNzZXJ0aW9uIHNpbmNlIGl0IG1heSBub3QgYmUgaW4gdHlwZSBkZWZpbml0aW9uc1xuXHRcdC8vIGZvciBvbGRlciBUeXBlU2NyaXB0IHZlcnNpb25zLCBidXQgZXhpc3RzIGF0IHJ1bnRpbWUgaW4gT2JzaWRpYW4gMS4xMS4wK1xuXHRcdC8vIFVzaW5nIHVua25vd24gaW5zdGVhZCBvZiBhbnkgdG8gc2F0aXNmeSBlc2xpbnQgd2hpbGUgbWFpbnRhaW5pbmcgdHlwZSBzYWZldHlcblx0XHRjb25zdCBTZXR0aW5nR3JvdXBDbGFzcyA9IChPYnNpZGlhbk1vZHVsZSBhcyB1bmtub3duIGFzIHsgU2V0dGluZ0dyb3VwPzogbmV3IChjb250YWluZXJFbDogSFRNTEVsZW1lbnQpID0+IHtcblx0XHRcdHNldEhlYWRpbmcoaGVhZGluZzogc3RyaW5nKToge1xuXHRcdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCk6IHZvaWQ7XG5cdFx0XHR9O1xuXHRcdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpOiB2b2lkO1xuXHRcdH0gfSkuU2V0dGluZ0dyb3VwO1xuXHRcdFxuXHRcdGlmIChTZXR0aW5nR3JvdXBDbGFzcykge1xuXHRcdFx0Y29uc3QgZ3JvdXAgPSBoZWFkaW5nIFxuXHRcdFx0XHQ/IG5ldyBTZXR0aW5nR3JvdXBDbGFzcyhjb250YWluZXJFbCkuc2V0SGVhZGluZyhoZWFkaW5nKVxuXHRcdFx0XHQ6IG5ldyBTZXR0aW5nR3JvdXBDbGFzcyhjb250YWluZXJFbCk7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCkge1xuXHRcdFx0XHRcdGdyb3VwLmFkZFNldHRpbmcoY2IpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXHRcblx0Ly8gRmFsbGJhY2sgcGF0aCAoZWl0aGVyIEFQSSA8IDEuMTEuMCBvciBTZXR0aW5nR3JvdXAgbm90IGZvdW5kKVxuXHQvLyBBZGQgc2NvcGluZyBjbGFzcyB0byBjb250YWluZXJFbCB0byBzY29wZSBDU1MgdG8gb25seSB0aGlzIHBsdWdpbidzIHNldHRpbmdzXG5cdGlmIChtYW5pZmVzdElkKSB7XG5cdFx0Y29udGFpbmVyRWwuYWRkQ2xhc3MoYCR7bWFuaWZlc3RJZH0tc2V0dGluZ3MtY29tcGF0YCk7XG5cdH1cblx0XG5cdHtcblx0XHQvLyBGYWxsYmFjazogQ3JlYXRlIGEgaGVhZGluZyBtYW51YWxseSBmb3Igb2xkZXIgQVBJIHZlcnNpb25zXG5cdFx0Ly8gTm90ZTogV2hpbGUgYmVzdCBwcmFjdGljZSBwcmVmZXJzIFNldHRpbmcuc2V0SGVhZGluZygpLCB0aGUgZmFsbGJhY2sgcGF0aFxuXHRcdC8vIGlzIGZvciB2ZXJzaW9ucyB0aGF0IG1heSBub3Qgc3VwcG9ydCBpdCwgc28gbWFudWFsIGhlYWRpbmcgaXMgYXBwcm9wcmlhdGUgaGVyZVxuXHRcdGlmIChoZWFkaW5nKSB7XG5cdFx0XHRjb25zdCBoZWFkaW5nRWwgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ3NldHRpbmctZ3JvdXAtaGVhZGluZycpO1xuXHRcdFx0aGVhZGluZ0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogaGVhZGluZyB9KTtcblx0XHR9XG5cdFx0XG5cdFx0cmV0dXJuIHtcblx0XHRcdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKSB7XG5cdFx0XHRcdGNvbnN0IHNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbCk7XG5cdFx0XHRcdGNiKHNldHRpbmcpO1xuXHRcdFx0fVxuXHRcdH07XG5cdH1cbn1cblxuIiwgIi8qKlxuICogQ29tbWFuZCBQaWNrZXIgTW9kYWxcbiAqIFNlYXJjaGFibGUgbW9kYWwgZm9yIHNlbGVjdGluZyBhbiBPYnNpZGlhbiBjb21tYW5kXG4gKi9cblxuaW1wb3J0IHsgQXBwLCBGdXp6eVN1Z2dlc3RNb2RhbCB9IGZyb20gJ29ic2lkaWFuJztcblxuaW50ZXJmYWNlIENvbW1hbmRPcHRpb24ge1xuXHRpZDogc3RyaW5nO1xuXHRuYW1lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBDb21tYW5kUGlja2VyTW9kYWwgZXh0ZW5kcyBGdXp6eVN1Z2dlc3RNb2RhbDxDb21tYW5kT3B0aW9uPiB7XG5cdHByaXZhdGUgb25TZWxlY3Q6IChjb21tYW5kSWQ6IHN0cmluZykgPT4gdm9pZDtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgb25TZWxlY3Q6IChjb21tYW5kSWQ6IHN0cmluZykgPT4gdm9pZCkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5vblNlbGVjdCA9IG9uU2VsZWN0O1xuXHR9XG5cblx0Z2V0SXRlbXMoKTogQ29tbWFuZE9wdGlvbltdIHtcblx0XHRjb25zdCBjb21tYW5kUmVnaXN0cnkgPSAodGhpcy5hcHAgYXMgeyBjb21tYW5kcz86IHsgbGlzdENvbW1hbmRzPzogKCkgPT4gQ29tbWFuZE9wdGlvbltdIH0gfSkuY29tbWFuZHM7XG5cdFx0Y29uc3QgY29tbWFuZE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBDb21tYW5kT3B0aW9uPigpO1xuXG5cdFx0aWYgKGNvbW1hbmRSZWdpc3RyeSAmJiB0eXBlb2YgY29tbWFuZFJlZ2lzdHJ5Lmxpc3RDb21tYW5kcyA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3QgY29tbWFuZHMgPSBjb21tYW5kUmVnaXN0cnkubGlzdENvbW1hbmRzKCk7XG5cdFx0XHRcdGZvciAoY29uc3QgY29tbWFuZCBvZiBjb21tYW5kcykge1xuXHRcdFx0XHRcdGlmIChjb21tYW5kICYmIGNvbW1hbmQuaWQgJiYgY29tbWFuZC5uYW1lICYmICFjb21tYW5kTWFwLmhhcyhjb21tYW5kLmlkKSkge1xuXHRcdFx0XHRcdFx0Y29tbWFuZE1hcC5zZXQoY29tbWFuZC5pZCwge1xuXHRcdFx0XHRcdFx0XHRpZDogY29tbWFuZC5pZCxcblx0XHRcdFx0XHRcdFx0bmFtZTogY29tbWFuZC5uYW1lLFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0Ly8gRXJyb3IgZ2V0dGluZyBjb21tYW5kcyAtIGZhbGwgYmFjayB0byBlbXB0eSBsaXN0XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIEFycmF5LmZyb20oY29tbWFuZE1hcC52YWx1ZXMoKSkuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSk7XG5cdH1cblxuXHRnZXRJdGVtVGV4dChpdGVtOiBDb21tYW5kT3B0aW9uKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gaXRlbS5uYW1lO1xuXHR9XG5cblx0b25DaG9vc2VJdGVtKGl0ZW06IENvbW1hbmRPcHRpb24sIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcblx0XHR0aGlzLm9uU2VsZWN0KGl0ZW0uaWQpO1xuXHRcdC8vIERvbid0IGNsb3NlIGhlcmUgLSBsZXQgdGhlIGNhbGxiYWNrIGhhbmRsZSBpdFxuXHR9XG59XG5cbiIsICIvKipcbiAqIEljb24gUGlja2VyIE1vZGFsXG4gKiBTZWFyY2hhYmxlIG1vZGFsIGZvciBzZWxlY3RpbmcgYSBMdWNpZGUgaWNvblxuICovXG5cbmltcG9ydCB7IEFwcCwgRnV6enlTdWdnZXN0TW9kYWwsIHNldEljb24sIGdldEljb25JZHMsIHJlcXVpcmVBcGlWZXJzaW9uIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5pbnRlcmZhY2UgSWNvbk9wdGlvbiB7XG5cdGlkOiBzdHJpbmc7XG5cdG5hbWU6IHN0cmluZztcbn1cblxuLy8gR2V0IGljb24gbGlzdCBmcm9tIE9ic2lkaWFuIEFQSSBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSB1c2UgZmFsbGJhY2sgbGlzdFxuY29uc3QgZ2V0SWNvbkxpc3QgPSAoKTogc3RyaW5nW10gPT4ge1xuXHRpZiAocmVxdWlyZUFwaVZlcnNpb24gJiYgcmVxdWlyZUFwaVZlcnNpb24oJzEuNy4zJykgJiYgZ2V0SWNvbklkcykge1xuXHRcdHRyeSB7XG5cdFx0XHRyZXR1cm4gZ2V0SWNvbklkcygpO1xuXHRcdH0gY2F0Y2gge1xuXHRcdFx0Ly8gRXJyb3IgZ2V0dGluZyBpY29uIElEcyAtIGZhbGwgYmFjayB0byBiYXNpYyBsaXN0XG5cdFx0fVxuXHR9XG5cdC8vIEZhbGxiYWNrIHRvIGEgYmFzaWMgbGlzdCBpZiBBUEkgaXMgbm90IGF2YWlsYWJsZVxuXHRyZXR1cm4gW1xuXHRcdCdzZXR0aW5ncy0yJywgJ3NldHRpbmdzJywgJ2hlbHAtY2lyY2xlJywgJ2luZm8nLCAnc3RhcicsICdoZWFydCcsICdib29rbWFyaycsXG5cdFx0J2hvbWUnLCAnc2VhcmNoJywgJ2JlbGwnLCAnbWFpbCcsICd1c2VyJywgJ3VzZXJzJywgJ2ZvbGRlcicsICdmaWxlJywgJ2ZpbGUtdGV4dCcsXG5cdFx0J2ltYWdlJywgJ3ZpZGVvJywgJ211c2ljJywgJ2NhbGVuZGFyJywgJ2Nsb2NrJywgJ2VkaXQnLCAncGVuY2lsJywgJ3RyYXNoJyxcblx0XHQnY29weScsICdjdXQnLCAncGFzdGUnLCAnZG93bmxvYWQnLCAndXBsb2FkJywgJ3NhdmUnLCAnc2hhcmUnLCAnbGluaycsXG5cdFx0J2V4dGVybmFsLWxpbmsnLCAnbG9jaycsICd1bmxvY2snLCAnZXllJywgJ2V5ZS1vZmYnLCAna2V5JywgJ3NoaWVsZCcsXG5cdFx0J2NoZWNrJywgJ3gnLCAncGx1cycsICdtaW51cycsICdhcnJvdy1sZWZ0JywgJ2Fycm93LXJpZ2h0JywgJ2Fycm93LXVwJyxcblx0XHQnYXJyb3ctZG93bicsICdjaGV2cm9uLWxlZnQnLCAnY2hldnJvbi1yaWdodCcsICdjaGV2cm9uLXVwJywgJ2NoZXZyb24tZG93bicsXG5cdFx0J21lbnUnLCAnbW9yZS1ob3Jpem9udGFsJywgJ21vcmUtdmVydGljYWwnLCAnZ3JpZCcsICdsaXN0JywgJ2xheW91dCcsXG5cdFx0J2NvbHVtbnMnLCAncm93cycsICdtYXhpbWl6ZScsICdtaW5pbWl6ZScsICd6b29tLWluJywgJ3pvb20tb3V0Jyxcblx0XHQncmVmcmVzaC1jdycsICdwbGF5JywgJ3BhdXNlJywgJ3N0b3AnLCAnc3VuJywgJ21vb24nLCAnY2xvdWQnLCAnemFwJyxcblx0XHQnd2FuZC0yJywgJ3dhbmQnLCAnd2FuZC1zcGFya2xlcycsICdwYWxldHRlJywgJ2JydXNoJywgJ3NsaWRlcnMnLFxuXHRcdCdwb3dlcicsICd3aWZpJywgJ2JsdWV0b290aCcsICdtb25pdG9yJywgJ2xhcHRvcCcsICdzbWFydHBob25lJyxcblx0XHQnY2FtZXJhJywgJ21pYycsICdoZWFkcGhvbmVzJywgJ2NvZGUnLCAndGVybWluYWwnLCAndGVybWluYWwtc3F1YXJlJyxcblx0XHQnZ2l0aHViJywgJ2dpdGxhYicsICdnaXQtYnJhbmNoJywgJ2dpdC1jb21taXQnLCAnZGF0YWJhc2UnLCAnc2VydmVyJyxcblx0XHQnY2xvdWQtZG93bmxvYWQnLCAnY2xvdWQtdXBsb2FkJywgJ3RhZycsICd0YWdzJywgJ2ZsYWcnLCAncGluJyxcblx0XHQnbWFwLXBpbicsICdjb21wYXNzJywgJ2dsb2JlJywgJ3JvY2tldCcsICdjYXInLCAnYmlrZScsICdyb2JvdCcsXG5cdFx0J2FwcGxlJywgJ3dpbmRvd3MnLCAnbGludXgnLCAnY2hyb21lJywgJ2ZpcmVmb3gnLCAnc2FmYXJpJyxcblx0XHQnY3JlZGl0LWNhcmQnLCAnd2FsbGV0JywgJ2NvaW5zJywgJ2Jvb2snLCAnYm9vay1vcGVuJywgJ2F3YXJkJyxcblx0XHQndHJvcGh5JywgJ2JhZGdlJywgJ3dyZW5jaCcsICd0b29sJywgJ3BhY2thZ2UnLCAnYm94JywgJ2FyY2hpdmUnLFxuXHRcdCdzZW5kJywgJ3JlcGx5JywgJ2ZvcndhcmQnLCAnbWFpbC1vcGVuJywgJ3RhZy1wbHVzJywgJ3RhZy1taW51cycsXG5cdFx0J2ZsYWctb2ZmJywgJ3Bpbi1vZmYnLCAnbWFwLXBpbi1vZmYnLCAnbmF2aWdhdGlvbicsICdtYXAnLCAnZWFydGgnLFxuXHRcdCdwbGFuZScsICdzaGlwJywgJ2FuY2hvcicsICdoZWxpY29wdGVyJywgJ2Ryb25lJywgJ2FuZHJvaWQnLFxuXHRcdCdrZXlob2xlJywgJ2tleXMnLCAnZmluZ2VycHJpbnQnLCAnc2NhbicsICdxci1jb2RlJywgJ2JhcmNvZGUnLFxuXHRcdCdyZWNlaXB0JywgJ3BpZ2d5LWJhbmsnLCAnYmFua25vdGUnXG5cdF07XG59O1xuXG4vLyBDb252ZXJ0IGljb24gSURzIHRvIEljb25PcHRpb24gZm9ybWF0XG5jb25zdCBMVUNJREVfSUNPTlM6IEljb25PcHRpb25bXSA9IGdldEljb25MaXN0KCkubWFwKGlkID0+ICh7XG5cdGlkOiBpZCxcblx0bmFtZTogaWRcblx0XHQucmVwbGFjZSgvXmx1Y2lkZS0vLCAnJykgLy8gUmVtb3ZlIGx1Y2lkZS0gcHJlZml4IGZvciBkaXNwbGF5XG5cdFx0LnJlcGxhY2UoLy0vZywgJyAnKVxuXHRcdC5yZXBsYWNlKC8oXlxcd3sxfSl8KFxccytcXHd7MX0pL2csIChsZXR0ZXIpID0+IGxldHRlci50b1VwcGVyQ2FzZSgpKVxufSkpLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpO1xuXG5leHBvcnQgY2xhc3MgSWNvblBpY2tlck1vZGFsIGV4dGVuZHMgRnV6enlTdWdnZXN0TW9kYWw8SWNvbk9wdGlvbj4ge1xuXHRwcml2YXRlIG9uU2VsZWN0OiAoaWNvbklkOiBzdHJpbmcpID0+IHZvaWQ7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIG9uU2VsZWN0OiAoaWNvbklkOiBzdHJpbmcpID0+IHZvaWQpIHtcblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMub25TZWxlY3QgPSBvblNlbGVjdDtcblx0fVxuXG5cdGdldEl0ZW1zKCk6IEljb25PcHRpb25bXSB7XG5cdFx0cmV0dXJuIExVQ0lERV9JQ09OUztcblx0fVxuXG5cdGdldEl0ZW1UZXh0KGl0ZW06IEljb25PcHRpb24pOiBzdHJpbmcge1xuXHRcdHJldHVybiBpdGVtLm5hbWU7XG5cdH1cblxuXHRvbkNob29zZUl0ZW0oaXRlbTogSWNvbk9wdGlvbiwgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuXHRcdHRoaXMub25TZWxlY3QoaXRlbS5pZCk7XG5cdFx0dGhpcy5jbG9zZSgpO1xuXHR9XG5cblx0Ly8gT3ZlcnJpZGUgdG8gc2hvdyBpY29uIHByZXZpZXdcblx0cmVuZGVyU3VnZ2VzdGlvbihtYXRjaDogeyBpdGVtOiBJY29uT3B0aW9uIH0sIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuXHRcdGNvbnN0IGl0ZW0gPSBtYXRjaC5pdGVtO1xuXHRcdGVsLmFkZENsYXNzKCdtb2QtY29tcGxleCcpO1xuXHRcdGNvbnN0IGNvbnRlbnQgPSBlbC5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9uLWNvbnRlbnQnIH0pO1xuXHRcdGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnc3VnZ2VzdGlvbi10aXRsZScsIHRleHQ6IGl0ZW0ubmFtZSB9KTtcblx0XHRcblx0XHQvLyBDcmVhdGUgaWNvbiBwcmV2aWV3IHVzaW5nIE9ic2lkaWFuJ3Mgc2V0SWNvbiAtIG5vIGJhY2tncm91bmQgYm94XG5cdFx0Y29uc3QgYXV4ID0gZWwuY3JlYXRlRGl2KHsgY2xzOiAnc3VnZ2VzdGlvbi1hdXgnIH0pO1xuXHRcdGNvbnN0IGljb25TcGFuID0gYXV4LmNyZWF0ZVNwYW4oeyBjbHM6ICdzdWdnZXN0aW9uLWZsYWlyIHVpLXR3ZWFrZXItaWNvbi1uby1iZycgfSk7XG5cdFx0c2V0SWNvbihpY29uU3BhbiwgaXRlbS5pZCk7XG5cdH1cbn1cblxuIiwgIi8qKlxuICogSGlkZXIgVGFiIC0gQXV0by1oaWRlIGFuZCB2aXNpYmlsaXR5IHNldHRpbmdzIChleGNsdWRpbmcgbW9iaWxlIGFuZCBleHBsb3JlciBidXR0b25zKVxuICovXG5cbmltcG9ydCB7IFRhYlJlbmRlcmVyIH0gZnJvbSAnLi4vY29tbW9uL1RhYlJlbmRlcmVyJztcbmltcG9ydCB7IGNyZWF0ZVNldHRpbmdzR3JvdXAsIFNldHRpbmdzQ29udGFpbmVyIH0gZnJvbSAnLi4vLi4vdXRpbHMvc2V0dGluZ3MtY29tcGF0JztcbmltcG9ydCB7IENvbW1hbmRQaWNrZXJNb2RhbCB9IGZyb20gJy4uLy4uL21vZGFscy9Db21tYW5kUGlja2VyTW9kYWwnO1xuaW1wb3J0IHsgSWNvblBpY2tlck1vZGFsIH0gZnJvbSAnLi4vLi4vbW9kYWxzL0ljb25QaWNrZXJNb2RhbCc7XG5pbXBvcnQgeyBVSVNldHRpbmdzIH0gZnJvbSAnLi4vLi4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgVUlWaXNpYmlsaXR5U3RhdGUgfSBmcm9tICcuLi8uLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBIaWRlclRhYiBleHRlbmRzIFRhYlJlbmRlcmVyIHtcblx0cmVuZGVyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gQXV0by1oaWRlIGVsZW1lbnRzXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdGNvbnN0IGdlbmVyYWxHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyLCB1bmRlZmluZWQsICd1aS10d2Vha2VyJyk7XG5cblx0XHR0aGlzLmFkZFZpc2liaWxpdHlTZXR0aW5nKFxuXHRcdFx0Z2VuZXJhbEdyb3VwLFxuXHRcdFx0J1RpdGxlIGJhcicsXG5cdFx0XHQnSGlkZSB0aXRsZSBiYXIgdW50aWwgaG92ZXIuIFR1cm4gb2ZmIHRvIGFsd2F5cyBzaG93LicsXG5cdFx0XHQndGl0bGVCYXInXG5cdFx0KTtcblxuXHRcdHRoaXMuYWRkVmlzaWJpbGl0eVNldHRpbmcoXG5cdFx0XHRnZW5lcmFsR3JvdXAsXG5cdFx0XHQnRmlsZSBleHBsb3JlciBuYXYgaGVhZGVyJyxcblx0XHRcdCdIaWRlIGZpbGUgZXhwbG9yZXIgbmF2aWdhdGlvbiBoZWFkZXIgdW50aWwgaG92ZXIuIEVsZWdhbnRseSByZXZlYWxzIG9uIGhvdmVyLicsXG5cdFx0XHQnZmlsZUV4cGxvcmVyTmF2SGVhZGVyJ1xuXHRcdCk7XG5cblx0XHR0aGlzLmFkZFZpc2liaWxpdHlTZXR0aW5nKFxuXHRcdFx0Z2VuZXJhbEdyb3VwLFxuXHRcdFx0J090aGVyIG5hdiBoZWFkZXJzJyxcblx0XHRcdCdIaWRlIG5hdmlnYXRpb24gaGVhZGVycyBmb3IgdGFnLCBiYWNrbGlua3MsIG91dGdvaW5nIGxpbmtzLCBvdXRsaW5lLCBhbmQgYm9va21hcmtzIHBhbmVzIHVudGlsIGhvdmVyLicsXG5cdFx0XHQnb3RoZXJOYXZIZWFkZXJzJ1xuXHRcdCk7XG5cblx0XHR0aGlzLmFkZFZpc2liaWxpdHlTZXR0aW5nKFxuXHRcdFx0Z2VuZXJhbEdyb3VwLFxuXHRcdFx0J0xlZnQgdGFiIGhlYWRlcnMnLFxuXHRcdFx0J0hpZGUgbGVmdCBwYW5lbCB0YWIgaGVhZGVycyB1bnRpbCBob3Zlci4gRWxlZ2FudGx5IHJldmVhbHMgb24gaG92ZXIuJyxcblx0XHRcdCdsZWZ0VGFiSGVhZGVycydcblx0XHQpO1xuXG5cdFx0dGhpcy5hZGRWaXNpYmlsaXR5U2V0dGluZyhcblx0XHRcdGdlbmVyYWxHcm91cCxcblx0XHRcdCdSaWdodCB0YWIgaGVhZGVycycsXG5cdFx0XHQnSGlkZSByaWdodCBwYW5lbCB0YWIgaGVhZGVycyB1bnRpbCBob3Zlci4gRWxlZ2FudGx5IHJldmVhbHMgb24gaG92ZXIuJyxcblx0XHRcdCdyaWdodFRhYkhlYWRlcnMnXG5cdFx0KTtcblxuXHRcdC8vIFJpYmJvbiAtIGJvb2xlYW4gdG9nZ2xlXG5cdFx0Z2VuZXJhbEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoJ0NvbGxhcHNlIHJpYmJvbicpXG5cdFx0XHRcdC5zZXREZXNjKCdDb2xsYXBzZSB0aGUgbGVmdCByaWJib24gdG8gYSB0aGluIHN0cmlwIHVudGlsIGhvdmVyLiBFbGVnYW50bHkgZXhwYW5kcyBvbiBob3Zlci4nKVxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG5cdFx0XHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMuZ2V0U2V0dGluZ3MoKS5yaWJib25SZXZlYWxPbkhvdmVyKS5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuZ2V0U2V0dGluZ3MoKS5yaWJib25SZXZlYWxPbkhvdmVyID0gdmFsdWU7XG5cdFx0XHRcdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0KTtcblx0XHR9KTtcblxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHQvLyBOYXZpZ2F0aW9uXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdGNvbnN0IG5hdmlnYXRpb25Hcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyLCAnTmF2aWdhdGlvbicsICd1aS10d2Vha2VyJyk7XG5cblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcobmF2aWdhdGlvbkdyb3VwLCAnSGlkZSB0YWIgYmFyJywgJ0hpZGVzIHRoZSB0YWIgY29udGFpbmVyIGF0IHRoZSB0b3Agb2YgdGhlIHdpbmRvdy4nLCAndGFiQmFyJyk7XG5cblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcobmF2aWdhdGlvbkdyb3VwLCAnTWFrZSB0b3Agb2Ygd2luZG93IGRyYWdnYWJsZSB3aXRob3V0IHRhYiBiYXInLCAnRW5hYmxlcyB3aW5kb3cgZHJhZ2dpbmcgZnJvbSB0aGUgdG9wIG9mIHRoZSB3aW5kb3cgd2hlbiB0aGUgdGFiIGJhciBpcyBoaWRkZW4uIE9ubHkgd29ya3Mgd2hlbiBcIkhpZGUgdGFiIGJhclwiIGlzIGVuYWJsZWQuJywgJ2VuYWJsZVdpbmRvd0RyYWdnaW5nJyk7XG5cblx0XHQvLyBWaWV3IGhlYWRlciBidXR0b25zXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKG5hdmlnYXRpb25Hcm91cCwgJ0hpZGUgXCJSZWFkaW5nIG1vZGVcIiBidXR0b24nLCAnSGlkZSBcIlJlYWRpbmcgbW9kZVwiIGJ1dHRvbiBpbiB2aWV3IGhlYWRlcnMuJywgJ3JlYWRpbmdNb2RlQnV0dG9uJyk7XG5cblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcobmF2aWdhdGlvbkdyb3VwLCAnSGlkZSBcIlNlYXJjaCBzZXR0aW5nc1wiIGJ1dHRvbicsICdIaWRlIFwiU2VhcmNoIHNldHRpbmdzXCIgYnV0dG9uIGluIHNlYXJjaCBwYW5lLicsICdzZWFyY2hTZXR0aW5nc0J1dHRvbicpO1xuXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdC8vIFZhdWx0IHByb2ZpbGUgYXJlYVxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHRjb25zdCB2YXVsdFByb2ZpbGVHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyLCAnVmF1bHQgcHJvZmlsZSBhcmVhJywgJ3VpLXR3ZWFrZXInKTtcblxuXHRcdHRoaXMuYWRkVmlzaWJpbGl0eVNldHRpbmcoXG5cdFx0XHR2YXVsdFByb2ZpbGVHcm91cCxcblx0XHRcdCdWYXVsdCBzd2l0Y2hlcicsXG5cdFx0XHQnSGlkZSB2YXVsdCBzd2l0Y2hlciB1bnRpbCBob3Zlci4gRG9lcyBub3Qgd29yayB3aGVuIHZhdWx0IG5hbWUgaXMgaGlkZGVuLicsXG5cdFx0XHQndmF1bHRTd2l0Y2hlcidcblx0XHQpO1xuXG5cdFx0dGhpcy5hZGRWaXNpYmlsaXR5U2V0dGluZyhcblx0XHRcdHZhdWx0UHJvZmlsZUdyb3VwLFxuXHRcdFx0J0hlbHAgYnV0dG9uJyxcblx0XHRcdCdIaWRlIGhlbHAgYnV0dG9uIHVudGlsIGhvdmVyLiBFbGVnYW50bHkgcmV2ZWFscyBvbiBob3Zlci4nLFxuXHRcdFx0J2hlbHBCdXR0b24nXG5cdFx0KTtcblxuXHRcdC8vIFJlcGxhY2UgaGVscCBidXR0b24gd2l0aCBjdXN0b20gYWN0aW9uXG5cdFx0dGhpcy5yZW5kZXJIZWxwQnV0dG9uUmVwbGFjZW1lbnQodmF1bHRQcm9maWxlR3JvdXApO1xuXG5cdFx0dGhpcy5hZGRWaXNpYmlsaXR5U2V0dGluZyhcblx0XHRcdHZhdWx0UHJvZmlsZUdyb3VwLFxuXHRcdFx0J1NldHRpbmdzIGJ1dHRvbicsXG5cdFx0XHQnSGlkZSBzZXR0aW5ncyBidXR0b24gdW50aWwgaG92ZXIuIEVsZWdhbnRseSByZXZlYWxzIG9uIGhvdmVyLicsXG5cdFx0XHQnc2V0dGluZ3NCdXR0b24nXG5cdFx0KTtcblxuXHRcdHZhdWx0UHJvZmlsZUdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoJ1ZhdWx0IHN3aXRjaGVyIGJhY2tncm91bmQgdHJhbnNwYXJlbmN5Jylcblx0XHRcdFx0LnNldERlc2MoJ0FkanVzdCB0aGUgdHJhbnNwYXJlbmN5IG9mIHRoZSB2YXVsdCBzd2l0Y2hlciBiYWNrZ3JvdW5kIHdoZW4gaGlkZGVuLiBSYW5nZTogMCAoZnVsbHkgdHJhbnNwYXJlbnQpIHRvIDEgKGZ1bGx5IG9wYXF1ZSkuJylcblx0XHRcdFx0LmFkZFNsaWRlcigoc2xpZGVyKSA9PlxuXHRcdFx0XHRcdHNsaWRlclxuXHRcdFx0XHRcdFx0LnNldExpbWl0cygwLCAxLCAwLjAxKVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuZ2V0U2V0dGluZ3MoKS52YXVsdFN3aXRjaGVyQmFja2dyb3VuZFRyYW5zcGFyZW5jeSlcblx0XHRcdFx0XHRcdC5zZXREeW5hbWljVG9vbHRpcCgpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuZ2V0U2V0dGluZ3MoKS52YXVsdFN3aXRjaGVyQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdC8vIFRhYiBpY29uc1xuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHRjb25zdCB0YWJJY29uc0dyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXIsICdUYWIgaWNvbnMnLCAndWktdHdlYWtlcicpO1xuXG5cdFx0dGhpcy5hZGRWaXNpYmlsaXR5U2V0dGluZyhcblx0XHRcdHRhYkljb25zR3JvdXAsXG5cdFx0XHQnSGlkZSB0YWIgbGlzdCBpY29uJyxcblx0XHRcdCdIaWRlcyB0aGUgdGFiIGxpc3QgaWNvbi4gWW91IGNhbiBzdGlsbCBhY2Nlc3MgdGFicyB2aWEgb3RoZXIgbWV0aG9kcy4nLFxuXHRcdFx0J3RhYkxpc3RJY29uJ1xuXHRcdCk7XG5cblx0XHR0aGlzLmFkZFZpc2liaWxpdHlTZXR0aW5nKFxuXHRcdFx0dGFiSWNvbnNHcm91cCxcblx0XHRcdCdIaWRlIG5ldyB0YWIgaWNvbicsXG5cdFx0XHQnSGlkZXMgdGhlIG5ldyB0YWIgaWNvbi4gWW91IGNhbiBzdGlsbCBjcmVhdGUgbmV3IHRhYnMgd2l0aCBDdHJsK1QgKENtZCtUIG9uIE1hYykuJyxcblx0XHRcdCduZXdUYWJJY29uJ1xuXHRcdCk7XG5cblx0XHR0aGlzLmFkZFZpc2liaWxpdHlTZXR0aW5nKFxuXHRcdFx0dGFiSWNvbnNHcm91cCxcblx0XHRcdCdIaWRlIHRhYiBjbG9zZSBidXR0b24nLFxuXHRcdFx0J0hpZGVzIHRoZSBjbG9zZSBidXR0b24gb24gdGFicy4gWW91IGNhbiBzdGlsbCBjbG9zZSB0YWJzIHdpdGggbWlkZGxlIGNsaWNrIG9yIG90aGVyIG1ldGhvZHMuJyxcblx0XHRcdCd0YWJDbG9zZUJ1dHRvbidcblx0XHQpO1xuXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdC8vIFN0YXR1cyAmIFVJIGVsZW1lbnRzXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdGNvbnN0IHN0YXR1c1VJR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lciwgJ1N0YXR1cyAmIFVJIGVsZW1lbnRzJywgJ3VpLXR3ZWFrZXInKTtcblxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhzdGF0dXNVSUdyb3VwLCAnSGlkZSBzdGF0dXMgYmFyJywgJ0hpZGVzIHdvcmQgY291bnQsIGNoYXJhY3RlciBjb3VudCBhbmQgYmFja2xpbmsgY291bnQuJywgJ3N0YXR1c0JhcicpO1xuXG5cdFx0dGhpcy5hZGRWaXNpYmlsaXR5U2V0dGluZyhcblx0XHRcdHN0YXR1c1VJR3JvdXAsXG5cdFx0XHQnU2Nyb2xsIGJhcnMnLFxuXHRcdFx0J0NvbnRyb2wgc2Nyb2xsYmFyIHZpc2liaWxpdHkuIFJldmVhbCBvcHRpb24gaGlkZXMgc2Nyb2xsYmFycyB1bnRpbCBob3Zlci4nLFxuXHRcdFx0J3Njcm9sbEJhcnMnXG5cdFx0KTtcblxuXHRcdHRoaXMuYWRkVmlzaWJpbGl0eVNldHRpbmcoXG5cdFx0XHRzdGF0dXNVSUdyb3VwLFxuXHRcdFx0J0hpZGUgbGVmdCBzaWRlYmFyIHRvZ2dsZSBidXR0b24nLFxuXHRcdFx0J0hpZGVzIHRoZSBsZWZ0IHNpZGViYXIgdG9nZ2xlIGJ1dHRvbi4nLFxuXHRcdFx0J2xlZnRTaWRlYmFyVG9nZ2xlQnV0dG9uJ1xuXHRcdCk7XG5cblx0XHR0aGlzLmFkZFZpc2liaWxpdHlTZXR0aW5nKFxuXHRcdFx0c3RhdHVzVUlHcm91cCxcblx0XHRcdCdIaWRlIHJpZ2h0IHNpZGViYXIgdG9nZ2xlIGJ1dHRvbicsXG5cdFx0XHQnSGlkZXMgdGhlIHJpZ2h0IHNpZGViYXIgdG9nZ2xlIGJ1dHRvbi4nLFxuXHRcdFx0J3JpZ2h0U2lkZWJhclRvZ2dsZUJ1dHRvbidcblx0XHQpO1xuXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKHN0YXR1c1VJR3JvdXAsICdIaWRlIHRvb2x0aXBzJywgJ0hpZGVzIGFsbCB0b29sdGlwcy4nLCAndG9vbHRpcHMnKTtcblxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhzdGF0dXNVSUdyb3VwLCAnSGlkZSBpbnN0cnVjdGlvbnMnLCAnSGlkZXMgaW5zdHJ1Y3Rpb25hbCB0aXBzIGluIG1vZGFscy4nLCAnaW5zdHJ1Y3Rpb25zJyk7XG5cblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gU2VhcmNoXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdGNvbnN0IHNlYXJjaEdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXIsICdTZWFyY2gnLCAndWktdHdlYWtlcicpO1xuXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKHNlYXJjaEdyb3VwLCAnSGlkZSBzZWFyY2ggc3VnZ2VzdGlvbnMnLCAnSGlkZXMgc3VnZ2VzdGlvbnMgaW4gc2VhcmNoIHBhbmUuJywgJ3NlYXJjaFN1Z2dlc3Rpb25zJyk7XG5cblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcoc2VhcmNoR3JvdXAsICdIaWRlIGNvdW50IG9mIHNlYXJjaCB0ZXJtIG1hdGNoZXMnLCAnSGlkZXMgdGhlIG51bWJlciBvZiBtYXRjaGVzIHdpdGhpbiBlYWNoIHNlYXJjaCByZXN1bHQuJywgJ3NlYXJjaFRlcm1Db3VudHMnKTtcblxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHQvLyBQcm9wZXJ0aWVzXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdGNvbnN0IHByb3BlcnRpZXNHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyLCAnUHJvcGVydGllcycsICd1aS10d2Vha2VyJyk7XG5cblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcocHJvcGVydGllc0dyb3VwLCAnSGlkZSBwcm9wZXJ0aWVzIGluIFJlYWRpbmcgdmlldycsICdIaWRlcyB0aGUgcHJvcGVydGllcyBzZWN0aW9uIGluIFJlYWRpbmcgdmlldy4nLCAncHJvcGVydGllc0luUmVhZGluZ1ZpZXcnKTtcblxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhwcm9wZXJ0aWVzR3JvdXAsICdIaWRlIHByb3BlcnRpZXMgaGVhZGluZycsICdIaWRlIFwiUHJvcGVydGllc1wiIGhlYWRpbmcgYWJvdmUgcHJvcGVydGllcy4nLCAncHJvcGVydGllc0luSGVhZGluZycpO1xuXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKHByb3BlcnRpZXNHcm91cCwgJ0hpZGUgXCJBZGQgcHJvcGVydHlcIiBidXR0b24nLCAnSGlkZSBcIkFkZCBwcm9wZXJ0eVwiIGJ1dHRvbiBiZWxvdyBwcm9wZXJ0aWVzLicsICdhZGRQcm9wZXJ0eUJ1dHRvbicpO1xuXHR9XG5cblx0cHJpdmF0ZSBhZGRWaXNpYmlsaXR5U2V0dGluZyhncm91cDogU2V0dGluZ3NDb250YWluZXIsIG5hbWU6IHN0cmluZywgZGVzYzogc3RyaW5nLCBrZXk6IGtleW9mIFVJU2V0dGluZ3MpIHtcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKG5hbWUpXG5cdFx0XHRcdC5zZXREZXNjKGRlc2MpXG5cdFx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50VmFsdWUgPSB0aGlzLmdldFNldHRpbmdzKClba2V5XTtcblx0XHRcdFx0XHRjb25zdCBzdHJpbmdWYWx1ZSA9IHR5cGVvZiBjdXJyZW50VmFsdWUgPT09ICdzdHJpbmcnID8gY3VycmVudFZhbHVlIDogJ3Nob3cnO1xuXHRcdFx0XHRcdGRyb3Bkb3duXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKCdzaG93JywgJ1Nob3cnKVxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbignaGlkZScsICdIaWRlJylcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oJ3JldmVhbCcsICdSZXZlYWwnKVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHN0cmluZ1ZhbHVlKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHQodGhpcy5nZXRTZXR0aW5ncygpW2tleV0gYXMgVUlWaXNpYmlsaXR5U3RhdGUpID0gdmFsdWUgYXMgVUlWaXNpYmlsaXR5U3RhdGU7XG5cdFx0XHRcdFx0XHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgYWRkVG9nZ2xlU2V0dGluZyhncm91cDogU2V0dGluZ3NDb250YWluZXIsIG5hbWU6IHN0cmluZywgZGVzYzogc3RyaW5nLCBrZXk6IGtleW9mIFVJU2V0dGluZ3MpIHtcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKG5hbWUpXG5cdFx0XHRcdC5zZXREZXNjKGRlc2MpXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUoQm9vbGVhbih0aGlzLmdldFNldHRpbmdzKClba2V5XSkpLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0KHRoaXMuZ2V0U2V0dGluZ3MoKVtrZXldIGFzIGJvb2xlYW4pID0gdmFsdWU7XG5cdFx0XHRcdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0KTtcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVySGVscEJ1dHRvblJlcGxhY2VtZW50KGdyb3VwOiBTZXR0aW5nc0NvbnRhaW5lcik6IHZvaWQge1xuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5nZXRTZXR0aW5ncygpO1xuXHRcdGlmICghc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50KSB7XG5cdFx0XHRzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQgPSB7XG5cdFx0XHRcdGVuYWJsZWQ6IGZhbHNlLFxuXHRcdFx0XHRjb21tYW5kSWQ6ICcnLFxuXHRcdFx0XHRpY29uSWQ6ICd3cmVuY2gnLFxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKCdSZXBsYWNlIGhlbHAgYnV0dG9uIHdpdGggY3VzdG9tIGFjdGlvbicpXG5cdFx0XHRcdC5zZXREZXNjKCdSZXBsYWNlIHRoZSBoZWxwIGJ1dHRvbiB3aXRoIGEgY3VzdG9tIGljb24gYW5kIGNvbW1hbmQuIFRoaXMgd2lsbCBoaWRlIHRoZSBvcmlnaW5hbCBoZWxwIGJ1dHRvbiBhbmQgc2hvdyB5b3VyIGN1c3RvbSBidXR0b24gaW5zdGVhZC4nKVxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG5cdFx0XHRcdFx0dG9nZ2xlLnNldFZhbHVlKHNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudC5lbmFibGVkKS5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdGlmICghc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50KSB7XG5cdFx0XHRcdFx0XHRcdHNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudCA9IHtcblx0XHRcdFx0XHRcdFx0XHRlbmFibGVkOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdGNvbW1hbmRJZDogJycsXG5cdFx0XHRcdFx0XHRcdFx0aWNvbklkOiAnd3JlbmNoJyxcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudC5lbmFibGVkID0gdmFsdWU7XG5cdFx0XHRcdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0KTtcblx0XHR9KTtcblxuXHRcdC8vIFNob3cgY29tbWFuZCBhbmQgaWNvbiBwaWNrZXJzIG9ubHkgaWYgcmVwbGFjZW1lbnQgaXMgZW5hYmxlZFxuXHRcdGlmIChzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQuZW5hYmxlZCkge1xuXHRcdFx0Y29uc3QgZ2V0Q29tbWFuZE5hbWUgPSAoY29tbWFuZElkOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuXHRcdFx0XHRpZiAoIWNvbW1hbmRJZCkgcmV0dXJuICdTZWxlY3QgY29tbWFuZC4uLic7XG5cdFx0XHRcdFxuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGNvbnN0IGNvbW1hbmRSZWdpc3RyeSA9ICh0aGlzLmFwcCBhcyB7IGNvbW1hbmRzPzogeyBsaXN0Q29tbWFuZHM/OiAoKSA9PiBBcnJheTx7IGlkOiBzdHJpbmc7IG5hbWU6IHN0cmluZyB9PiB9IH0pLmNvbW1hbmRzO1xuXHRcdFx0XHRcdGlmIChjb21tYW5kUmVnaXN0cnkgJiYgdHlwZW9mIGNvbW1hbmRSZWdpc3RyeS5saXN0Q29tbWFuZHMgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGNvbW1hbmRzID0gY29tbWFuZFJlZ2lzdHJ5Lmxpc3RDb21tYW5kcygpO1xuXHRcdFx0XHRcdFx0Y29uc3QgY29tbWFuZCA9IGNvbW1hbmRzLmZpbmQoKGNtZCkgPT4gXG5cdFx0XHRcdFx0XHRcdGNtZCAmJiBjbWQubmFtZSAmJiAoXG5cdFx0XHRcdFx0XHRcdFx0Y21kLmlkID09PSBjb21tYW5kSWQgfHwgXG5cdFx0XHRcdFx0XHRcdFx0Y21kLmlkID09PSBjb21tYW5kSWQucmVwbGFjZSgvXnVpLXR3ZWFrZXI6Ky9nLCAnJykgfHxcblx0XHRcdFx0XHRcdFx0XHRjbWQuaWQgPT09IGB1aS10d2Vha2VyOiR7Y29tbWFuZElkLnJlcGxhY2UoL151aS10d2Vha2VyOisvZywgJycpfWBcblx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdGlmIChjb21tYW5kPy5uYW1lKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBjb21tYW5kLm5hbWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHQvLyBFcnJvciBnZXR0aW5nIGNvbW1hbmQgbmFtZVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiAnU2VsZWN0IGNvbW1hbmQuLi4nO1xuXHRcdFx0fTtcblxuXHRcdFx0Y29uc3QgY29tbWFuZE5hbWUgPSBnZXRDb21tYW5kTmFtZShzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQuY29tbWFuZElkKTtcblx0XHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcblx0XHRcdFx0c2V0dGluZ1xuXHRcdFx0XHRcdC5zZXROYW1lKCdDb21tYW5kJylcblx0XHRcdFx0XHQuc2V0RGVzYygnU2VsZWN0IHRoZSBjb21tYW5kIHRvIGV4ZWN1dGUgd2hlbiB0aGUgYnV0dG9uIGlzIGNsaWNrZWQnKVxuXHRcdFx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT5cblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KGNvbW1hbmROYW1lIHx8ICdTZWxlY3QgY29tbWFuZC4uLicpLm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBDb21tYW5kUGlja2VyTW9kYWwodGhpcy5hcHAsIChjb21tYW5kSWQpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLmhlbHBCdXR0b25SZXBsYWNlbWVudCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50ID0ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRlbmFibGVkOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb21tYW5kSWQ6ICcnLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpY29uSWQ6ICd3cmVuY2gnLFxuXHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50LmNvbW1hbmRJZCA9IGNvbW1hbmRJZDtcblx0XHRcdFx0XHRcdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdCk7XG5cdFx0XHR9KTtcblxuXHRcdFx0Y29uc3QgZ2V0SWNvbk5hbWUgPSAoaWNvbklkOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuXHRcdFx0XHRpZiAoIWljb25JZCkgcmV0dXJuICcnO1xuXHRcdFx0XHRyZXR1cm4gaWNvbklkXG5cdFx0XHRcdFx0LnJlcGxhY2UoL15sdWNpZGUtLywgJycpXG5cdFx0XHRcdFx0LnNwbGl0KCctJylcblx0XHRcdFx0XHQubWFwKCh3b3JkKSA9PiB3b3JkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgd29yZC5zbGljZSgxKSlcblx0XHRcdFx0XHQuam9pbignICcpO1xuXHRcdFx0fTtcblxuXHRcdFx0Y29uc3QgaWNvbk5hbWUgPSBnZXRJY29uTmFtZShzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQuaWNvbklkKTtcblx0XHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcblx0XHRcdFx0c2V0dGluZ1xuXHRcdFx0XHRcdC5zZXROYW1lKCdJY29uJylcblx0XHRcdFx0XHQuc2V0RGVzYygnU2VsZWN0IHRoZSBpY29uIHRvIGRpc3BsYXkgb24gdGhlIGJ1dHRvbicpXG5cdFx0XHRcdFx0LmFkZEJ1dHRvbigoYnV0dG9uKSA9PlxuXHRcdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoaWNvbk5hbWUgfHwgJ1NlbGVjdCBpY29uLi4uJykub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IEljb25QaWNrZXJNb2RhbCh0aGlzLmFwcCwgKGljb25JZCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmICghc2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5oZWxwQnV0dG9uUmVwbGFjZW1lbnQgPSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGVuYWJsZWQ6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbW1hbmRJZDogJ29wZW4tc2V0dGluZ3MnLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpY29uSWQ6ICd3cmVuY2gnLFxuXHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuaGVscEJ1dHRvblJlcGxhY2VtZW50Lmljb25JZCA9IGljb25JZDtcblx0XHRcdFx0XHRcdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cbn1cbiIsICIvKipcbiAqIFRhYiBCYXIgVGFiIC0gQ3VzdG9tIGNvbW1hbmQgYnV0dG9ucyBmb3IgcGFnZSBoZWFkZXJzXG4gKi9cblxuaW1wb3J0IHsgc2V0SWNvbiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFRhYlJlbmRlcmVyIH0gZnJvbSAnLi4vY29tbW9uL1RhYlJlbmRlcmVyJztcbmltcG9ydCB7IGNyZWF0ZVNldHRpbmdzR3JvdXAgfSBmcm9tICcuLi8uLi91dGlscy9zZXR0aW5ncy1jb21wYXQnO1xuaW1wb3J0IHsgQ29tbWFuZEljb25QYWlyIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xuaW1wb3J0IHsgY2hvb3NlTmV3Q29tbWFuZCB9IGZyb20gJy4uLy4uL3V0aWxzL2Nob29zZUNvbW1hbmQnO1xuaW1wb3J0IHsgSWNvblBpY2tlck1vZGFsIH0gZnJvbSAnLi4vLi4vbW9kYWxzL0ljb25QaWNrZXJNb2RhbCc7XG5pbXBvcnQgeyBzZXRDc3NQcm9wcyB9IGZyb20gJy4uLy4uL3VpTWFuYWdlcic7XG5cbi8vIFNpbXBsZSBhcnJheSBtb3ZlIHV0aWxpdHlcbmZ1bmN0aW9uIGFycmF5TW92ZU11dGFibGU8VD4oYXJyYXk6IFRbXSwgZnJvbTogbnVtYmVyLCB0bzogbnVtYmVyKTogdm9pZCB7XG5cdGNvbnN0IGl0ZW0gPSBhcnJheVtmcm9tXTtcblx0YXJyYXkuc3BsaWNlKGZyb20sIDEpO1xuXHRhcnJheS5zcGxpY2UodG8sIDAsIGl0ZW0pO1xufVxuXG5leHBvcnQgY2xhc3MgVGFiQmFyVGFiIGV4dGVuZHMgVGFiUmVuZGVyZXIge1xuXHRwcml2YXRlIGV4cGFuZGVkU3RhdGVzID0gbmV3IE1hcDxzdHJpbmcsIGJvb2xlYW4+KCk7XG5cblx0cmVuZGVyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcblx0XHRjb250YWluZXIuZW1wdHkoKTtcblx0XHRjb25zdCBzZXR0aW5ncyA9IHRoaXMuZ2V0U2V0dGluZ3MoKTtcblx0XHRcblx0XHQvLyBFbnN1cmUgdGFiQmFyQ29tbWFuZHMgZXhpc3RzXG5cdFx0aWYgKCFzZXR0aW5ncy50YWJCYXJDb21tYW5kcykge1xuXHRcdFx0c2V0dGluZ3MudGFiQmFyQ29tbWFuZHMgPSBbXTtcblx0XHR9XG5cblx0XHQvLyBMaXN0IG9mIGNvbW1hbmRzIHVzaW5nIFNldHRpbmcgY29tcG9uZW50cyAobGlrZSBIaWRlclRhYilcblx0XHRzZXR0aW5ncy50YWJCYXJDb21tYW5kcy5mb3JFYWNoKChwYWlyLCBpbmRleCkgPT4ge1xuXHRcdFx0dGhpcy5yZW5kZXJDb21tYW5kSXRlbShjb250YWluZXIsIHBhaXIsIGluZGV4KTtcblx0XHR9KTtcblxuXHRcdC8vIEFkZCBjb21tYW5kIGJ1dHRvbiAoYXQgdGhlIGVuZClcblx0XHRpZiAoc2V0dGluZ3MudGFiQmFyQ29tbWFuZHMubGVuZ3RoID4gMCkge1xuXHRcdFx0Ly8gQWRkIHNlcGFyYXRvclxuXHRcdFx0Y29udGFpbmVyLmNyZWF0ZUVsKCdocicpO1xuXHRcdH1cblx0XHRcblx0XHRjb25zdCBhZGRHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyLCB1bmRlZmluZWQsICd1aS10d2Vha2VyJyk7XG5cdFx0YWRkR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZSgnQWRkIGNvbW1hbmQnKVxuXHRcdFx0XHQuc2V0RGVzYygnQWRkIGEgbmV3IGNvbW1hbmQgYnV0dG9uIHRvIHRoZSB0YWIgYmFyJylcblx0XHRcdFx0LmFkZEJ1dHRvbigoYnV0dG9uKSA9PiB7XG5cdFx0XHRcdFx0Ly8gQWRkIGljb24gdG8gdGhlIGJ1dHRvblxuXHRcdFx0XHRcdGNvbnN0IGJ1dHRvbkVsID0gYnV0dG9uLmJ1dHRvbkVsO1xuXHRcdFx0XHRcdGNvbnN0IGljb25Db250YWluZXIgPSBidXR0b25FbC5jcmVhdGVTcGFuKHsgY2xzOiAndWktdHdlYWtlci1hZGQtaWNvbicgfSk7XG5cdFx0XHRcdFx0c2V0SWNvbihpY29uQ29udGFpbmVyLCAnbHVjaWRlLWltYWdlLXBsdXMnKTtcblx0XHRcdFx0XHRidXR0b25FbC5pbnNlcnRCZWZvcmUoaWNvbkNvbnRhaW5lciwgYnV0dG9uRWwuZmlyc3RDaGlsZCk7XG5cdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoJ0FkZCBjb21tYW5kJykuc2V0Q3RhKCkub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgcGFpciA9IGF3YWl0IGNob29zZU5ld0NvbW1hbmQodGhpcy5wbHVnaW4pO1xuXHRcdFx0XHRcdFx0XHRcdC8vIGFkZENvbW1hbmQgd2lsbCBwdXNoIHRvIHNldHRpbmdzLnRhYkJhckNvbW1hbmRzIGFuZCBzYXZlXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4udGFiQmFyTWFuYWdlcj8uYWRkQ29tbWFuZChwYWlyKTtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xuXHRcdFx0XHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBVc2VyIGNhbmNlbGxlZFxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KSgpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyQ29tbWFuZEl0ZW0oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgcGFpcjogQ29tbWFuZEljb25QYWlyLCBpbmRleDogbnVtYmVyKTogdm9pZCB7XG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aGlzLmdldFNldHRpbmdzKCk7XG5cdFx0Y29uc3QgZ3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lciwgdW5kZWZpbmVkLCAndWktdHdlYWtlcicpO1xuXHRcdFxuXHRcdC8vIFN0b3JlIHJlZmVyZW5jZSB0byBvdGhlciBzZXR0aW5ncyBmb3IgY29sbGFwc2libGUgZnVuY3Rpb25hbGl0eVxuXHRcdGNvbnN0IG90aGVyU2V0dGluZ3M6IEhUTUxFbGVtZW50W10gPSBbXTtcblx0XHRcblx0XHQvLyBDb21tYW5kIG5hbWUgd2l0aCBlZGl0YWJsZSBuYW1lIChsaWtlIFZhdWx0IENNUykgYW5kIGljb24gcHJldmlldyB3aXRoIGNvbG9yXG5cdFx0Y29uc3QgZGlzcGxheU5hbWUgPSBwYWlyLmRpc3BsYXlOYW1lIHx8IHBhaXIubmFtZTtcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XG5cdFx0XHQvLyBDb21wbGV0ZWx5IHByZXZlbnQgY29sbGFwc2Ugb24gc2V0dGluZyBlbGVtZW50IC0gT05MWSBjaGV2cm9uIGNhbiB0b2dnbGVcblx0XHRcdC8vIFVzZSBjYXB0dXJlIHBoYXNlIHRvIGludGVyY2VwdCBBTEwgY2xpY2tzIGJlZm9yZSB0aGV5IHJlYWNoIE9ic2lkaWFuJ3MgaGFuZGxlcnNcblx0XHRcdHNldHRpbmcuc2V0dGluZ0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdFx0Y29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRcdC8vIEFsbG93IGNvbGxhcHNlIGlmIGNsaWNraW5nIG9uIGNoZXZyb24gaWNvbiBPUiBvbiBleHRyYSBidXR0b25zIChkZWxldGUsIG1vdmUgdXAvZG93biwgZXRjLilcblx0XHRcdFx0Ly8gT1Igb24gbmFtZSBkaXNwbGF5L3BlbmNpbCBpY29uIGZvciByZW5hbWluZ1xuXHRcdFx0XHRjb25zdCBpc0NoZXZyb25DbGljayA9IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1jb2xsYXBzZS1pY29uJykgIT09IG51bGw7XG5cdFx0XHRcdGNvbnN0IGlzRXh0cmFCdXR0b24gPSB0YXJnZXQuY2xvc2VzdCgnLmV4dHJhLXNldHRpbmctYnV0dG9uJykgIT09IG51bGwgfHwgdGFyZ2V0LmNsb3Nlc3QoJy5jbGlja2FibGUtaWNvbi5leHRyYS1zZXR0aW5nLWJ1dHRvbicpICE9PSBudWxsO1xuXHRcdFx0XHRjb25zdCBpc05hbWVFZGl0ID0gdGFyZ2V0LmNsb3Nlc3QoJy51aS10d2Vha2VyLW5hbWUtZGlzcGxheScpICE9PSBudWxsIHx8IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1lZGl0LWljb24nKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItZWRpdGFibGUtbmFtZScpICE9PSBudWxsO1xuXHRcdFx0XHRpZiAoIWlzQ2hldnJvbkNsaWNrICYmICFpc0V4dHJhQnV0dG9uICYmICFpc05hbWVFZGl0KSB7XG5cdFx0XHRcdFx0Ly8gQmxvY2sgQUxMIG90aGVyIGNsaWNrcyBmcm9tIGFmZmVjdGluZyBjb2xsYXBzZVxuXHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCB0cnVlKTsgLy8gQ2FwdHVyZSBwaGFzZSAtIHJ1bnMgYmVmb3JlIG90aGVyIGhhbmRsZXJzXG5cdFx0XHRcblx0XHRcdC8vIEFsc28gcHJldmVudCBvbiBidWJibGUgcGhhc2UgYXMgYmFja3VwXG5cdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0XHRjb25zdCBpc0NoZXZyb25DbGljayA9IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1jb2xsYXBzZS1pY29uJykgIT09IG51bGw7XG5cdFx0XHRcdGNvbnN0IGlzRXh0cmFCdXR0b24gPSB0YXJnZXQuY2xvc2VzdCgnLmV4dHJhLXNldHRpbmctYnV0dG9uJykgIT09IG51bGwgfHwgdGFyZ2V0LmNsb3Nlc3QoJy5jbGlja2FibGUtaWNvbi5leHRyYS1zZXR0aW5nLWJ1dHRvbicpICE9PSBudWxsO1xuXHRcdFx0XHRjb25zdCBpc05hbWVFZGl0ID0gdGFyZ2V0LmNsb3Nlc3QoJy51aS10d2Vha2VyLW5hbWUtZGlzcGxheScpICE9PSBudWxsIHx8IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1lZGl0LWljb24nKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItZWRpdGFibGUtbmFtZScpICE9PSBudWxsO1xuXHRcdFx0XHRpZiAoIWlzQ2hldnJvbkNsaWNrICYmICFpc0V4dHJhQnV0dG9uICYmICFpc05hbWVFZGl0KSB7XG5cdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0sIGZhbHNlKTsgLy8gQnViYmxlIHBoYXNlIC0gYmFja3VwXG5cdFx0XHRcblx0XHRcdC8vIE1ha2UgbmFtZUVsIGEgZmxleCBjb250YWluZXIgc28gY2hldnJvbiBjYW4gYmUgcG9zaXRpb25lZCB0byB0aGUgbGVmdFxuXHRcdFx0Y29uc3QgbmFtZUVsID0gc2V0dGluZy5uYW1lRWw7XG5cdFx0XHRzZXRDc3NQcm9wcyhuYW1lRWwsIHsgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnMC41cmVtJywgd2lkdGg6ICcxMDAlJyB9KTtcblx0XHRcdFxuXHRcdFx0Ly8gQWRkIGNoZXZyb25zLXVwLWRvd24gaWNvbiB0byB0aGUgTEVGVCBvZiB0aGUgbmFtZSAoYmVmb3JlIG5hbWUgY29udGFpbmVyKVxuXHRcdFx0Y29uc3QgY2hldnJvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0Y2hldnJvbkNvbnRhaW5lci5jbGFzc05hbWUgPSAndWktdHdlYWtlci1jb2xsYXBzZS1pY29uJztcblx0XHRcdHNldENzc1Byb3BzKGNoZXZyb25Db250YWluZXIsIHsgXG5cdFx0XHRcdGN1cnNvcjogJ2RlZmF1bHQnLFxuXHRcdFx0XHRiYWNrZ3JvdW5kOiAndHJhbnNwYXJlbnQnLFxuXHRcdFx0XHRwYWRkaW5nOiAnMCcsXG5cdFx0XHRcdG1hcmdpbjogJzAnLFxuXHRcdFx0XHRkaXNwbGF5OiAnaW5saW5lLWZsZXgnLFxuXHRcdFx0XHRhbGlnbkl0ZW1zOiAnY2VudGVyJyxcblx0XHRcdFx0anVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInXG5cdFx0XHR9KTtcblx0XHRcdC8vIEluc2VydCBhcyBmaXJzdCBjaGlsZCB0byBlbnN1cmUgaXQncyBvbiB0aGUgbGVmdFxuXHRcdFx0bmFtZUVsLmluc2VydEJlZm9yZShjaGV2cm9uQ29udGFpbmVyLCBuYW1lRWwuZmlyc3RDaGlsZCk7XG5cdFx0XHQvLyBSZXN0b3JlIGNvbGxhcHNlIHN0YXRlIGZyb20gTWFwLCBkZWZhdWx0IHRvIGZhbHNlIGlmIG5vdCBzZXRcblx0XHRcdGxldCBpc0V4cGFuZGVkID0gdGhpcy5leHBhbmRlZFN0YXRlcy5nZXQocGFpci5pZCkgPz8gZmFsc2U7XG5cdFx0XHRzZXRJY29uKGNoZXZyb25Db250YWluZXIsIGlzRXhwYW5kZWQgPyAnY2hldnJvbnMtZG93bi11cCcgOiAnY2hldnJvbnMtdXAtZG93bicpO1xuXHRcdFx0XG5cdFx0XHQvLyBUb2dnbGUgb24gY2hldnJvbiBjbGljayAtIE9OTFkgd2F5IHRvIGNoYW5nZSBjb2xsYXBzZSBzdGF0ZVxuXHRcdFx0Y2hldnJvbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0aXNFeHBhbmRlZCA9ICFpc0V4cGFuZGVkO1xuXHRcdFx0XHQvLyBTdG9yZSBzdGF0ZSBpbiBNYXAgZm9yIHBlcnNpc3RlbmNlIGFjcm9zcyByZS1yZW5kZXJzXG5cdFx0XHRcdHRoaXMuZXhwYW5kZWRTdGF0ZXMuc2V0KHBhaXIuaWQsIGlzRXhwYW5kZWQpO1xuXHRcdFx0XHQvLyBTd2FwIGljb246IGNoZXZyb25zLXVwLWRvd24gKGNvbGxhcHNlZCkgPC0+IGNoZXZyb25zLWRvd24tdXAgKGV4cGFuZGVkKVxuXHRcdFx0XHRzZXRJY29uKGNoZXZyb25Db250YWluZXIsIGlzRXhwYW5kZWQgPyAnY2hldnJvbnMtZG93bi11cCcgOiAnY2hldnJvbnMtdXAtZG93bicpO1xuXHRcdFx0XHRvdGhlclNldHRpbmdzLmZvckVhY2goc2V0dGluZ0VsID0+IHtcblx0XHRcdFx0XHRzZXRDc3NQcm9wcyhzZXR0aW5nRWwsIHsgZGlzcGxheTogaXNFeHBhbmRlZCA/ICcnIDogJ25vbmUnIH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHQvLyBDcmVhdGUgZWRpdGFibGUgbmFtZSBjb250YWluZXIgd2l0aCBwZW5jaWwgaWNvblxuXHRcdFx0Y29uc3QgbmFtZUNvbnRhaW5lciA9IG5hbWVFbC5jcmVhdGVEaXYoeyBjbHM6ICd1aS10d2Vha2VyLWVkaXRhYmxlLW5hbWUnIH0pO1xuXHRcdFx0c2V0Q3NzUHJvcHMobmFtZUNvbnRhaW5lciwgeyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICcwLjVyZW0nIH0pO1xuXHRcdFx0XG5cdFx0XHQvLyBGdW5jdGlvbiB0byBjcmVhdGUgdGhlIGRpc3BsYXkgZWxlbWVudCB3aXRoIGNsaWNrIGhhbmRsZXJcblx0XHRcdGNvbnN0IGNyZWF0ZU5hbWVEaXNwbGF5ID0gKG5hbWU6IHN0cmluZykgPT4ge1xuXHRcdFx0XHRuYW1lQ29udGFpbmVyLmVtcHR5KCk7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zdCBkaXNwbGF5ID0gbmFtZUNvbnRhaW5lci5jcmVhdGVTcGFuKHsgXG5cdFx0XHRcdFx0dGV4dDogbmFtZSA9PT0gZGlzcGxheU5hbWUgPyBuYW1lIDogYCR7bmFtZX0gKCR7ZGlzcGxheU5hbWV9KWAsXG5cdFx0XHRcdFx0Y2xzOiAndWktdHdlYWtlci1uYW1lLWRpc3BsYXknXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQWRkIHBlbmNpbCBpY29uXG5cdFx0XHRcdGNvbnN0IGljb25Db250YWluZXIgPSBuYW1lQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3VpLXR3ZWFrZXItZWRpdC1pY29uJyB9KTtcblx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbkNvbnRhaW5lciwgeyBvcGFjaXR5OiAnMC42JyB9KTtcblx0XHRcdFx0c2V0SWNvbihpY29uQ29udGFpbmVyLCAnbHVjaWRlLXBlbmNpbC1saW5lJyk7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBNYWtlIG5hbWUgYW5kIGljb24gZWRpdGFibGUgb24gY2xpY2tcblx0XHRcdFx0Y29uc3Qgc3RhcnRFZGl0ID0gKCkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGN1cnJlbnROYW1lID0gcGFpci5uYW1lO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIENsZWFyIGNvbnRhaW5lclxuXHRcdFx0XHRcdG5hbWVDb250YWluZXIuZW1wdHkoKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBDcmVhdGUgaW5wdXQgdXNpbmcgbmF0aXZlIE9ic2lkaWFuIHN0eWxpbmdcblx0XHRcdFx0XHRjb25zdCBuYW1lSW5wdXQgPSBuYW1lQ29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcsIHtcblx0XHRcdFx0XHRcdHR5cGU6ICd0ZXh0Jyxcblx0XHRcdFx0XHRcdHZhbHVlOiBjdXJyZW50TmFtZVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdG5hbWVJbnB1dC5hZGRDbGFzcygnbW9kLXRleHQtaW5wdXQnKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBGb2N1cyBhbmQgc2VsZWN0IHRleHRcblx0XHRcdFx0XHRuYW1lSW5wdXQuZm9jdXMoKTtcblx0XHRcdFx0XHRuYW1lSW5wdXQuc2VsZWN0KCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gU2F2ZSBvbiBibHVyXG5cdFx0XHRcdFx0Y29uc3Qgc2F2ZU5hbWUgPSAoKSA9PiB7XG5cdFx0XHRcdFx0XHRuYW1lSW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmx1cicsIHNhdmVOYW1lKTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0bGV0IG5ld05hbWUgPSBuYW1lSW5wdXQudmFsdWUudHJpbSgpO1xuXHRcdFx0XHRcdFx0aWYgKCFuZXdOYW1lKSB7XG5cdFx0XHRcdFx0XHRcdG5ld05hbWUgPSBjdXJyZW50TmFtZTsgLy8gUmV2ZXJ0IHRvIG9yaWdpbmFsIGlmIGVtcHR5XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRwYWlyLm5hbWUgPSBuZXdOYW1lO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQvLyBVcGRhdGUgZXhpc3RpbmcgYnV0dG9ucyBpbW1lZGlhdGVseSAoZG9uJ3Qgd2FpdCBmb3IgcmUtcmVuZGVyKVxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4udGFiQmFyTWFuYWdlcj8udXBkYXRlQnV0dG9uTmFtZXMoKTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Ly8gUmUtcmVuZGVyIHRvIHVwZGF0ZSBkaXNwbGF5IGFuZCBzYXZlXG5cdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XG5cdFx0XHRcdFx0XHR9KSgpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gU2F2ZSBvbiBFbnRlclxuXHRcdFx0XHRcdG5hbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcblx0XHRcdFx0XHRcdGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuXHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHRcdHNhdmVOYW1lKCk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xuXHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHRcdC8vIENhbmNlbDogcmV2ZXJ0IHRvIG9yaWdpbmFsXG5cdFx0XHRcdFx0XHRcdGNyZWF0ZU5hbWVEaXNwbGF5KGN1cnJlbnROYW1lKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBTYXZlIG9uIGJsdXJcblx0XHRcdFx0XHRuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIHNhdmVOYW1lKTtcblx0XHRcdFx0fTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIEFkZCBjbGljayBoYW5kbGVycyB0byBib3RoIG5hbWUgYW5kIGljb25cblx0XHRcdFx0ZGlzcGxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN0YXJ0RWRpdCk7XG5cdFx0XHRcdGljb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzdGFydEVkaXQpO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQWRkIGhvdmVyIGVmZmVjdCB0byBpY29uXG5cdFx0XHRcdGljb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcblx0XHRcdFx0XHRzZXRDc3NQcm9wcyhpY29uQ29udGFpbmVyLCB7IG9wYWNpdHk6ICcxJyB9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGljb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcblx0XHRcdFx0XHRzZXRDc3NQcm9wcyhpY29uQ29udGFpbmVyLCB7IG9wYWNpdHk6ICcwLjYnIH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH07XG5cdFx0XHRcblx0XHRcdC8vIENyZWF0ZSBpbml0aWFsIGRpc3BsYXlcblx0XHRcdGNyZWF0ZU5hbWVEaXNwbGF5KHBhaXIubmFtZSk7XG5cdFx0XHRcblx0XHRcdHNldHRpbmcuc2V0RGVzYygnJylcblx0XHRcdFx0LmFkZEV4dHJhQnV0dG9uKChidXR0b24pID0+IHtcblx0XHRcdFx0XHQvLyBDaGFuZ2UgaWNvbiAtIHByZXZpZXcgd2l0aCBjb2xvciAocmVhbC10aW1lIHVwZGF0ZXMpXG5cdFx0XHRcdFx0Y29uc3QgaWNvbkVsID0gYnV0dG9uLmV4dHJhU2V0dGluZ3NFbDtcblx0XHRcdFx0XHRzZXRJY29uKGljb25FbCwgcGFpci5pY29uKTtcblx0XHRcdFx0XHQvLyBTdG9yZSByZWZlcmVuY2UgZm9yIGNvbG9yIHVwZGF0ZXNcblx0XHRcdFx0XHRpY29uRWwuc2V0QXR0cmlidXRlKCdkYXRhLWNvbW1hbmQtaWQnLCBwYWlyLmlkKTtcblx0XHRcdFx0XHRpZiAocGFpci5jb2xvciAmJiBwYWlyLmNvbG9yICE9PSAnIzAwMDAwMCcpIHtcblx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGljb25FbCwgeyBjb2xvcjogcGFpci5jb2xvciB9KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0aWNvbkVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjb2xvcicpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcCgnQ2hhbmdlIGljb24nKTtcblx0XHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBJY29uUGlja2VyTW9kYWwodGhpcy5hcHAsIChpY29uSWQpID0+IHtcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChpY29uSWQgJiYgaWNvbklkICE9PSBwYWlyLmljb24pIHtcblx0XHRcdFx0XHRcdFx0XHRcdHBhaXIuaWNvbiA9IGljb25JZDtcblx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi50YWJCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSkoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdC8vIFByZXZlbnQgY29sbGFwc2Ugb24gY2xpY2tcblx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuYWRkRXh0cmFCdXR0b24oKGJ1dHRvbikgPT4ge1xuXHRcdFx0XHRcdC8vIE1vdmUgdXAgLSBhbHdheXMgc2hvdywgYnV0IGRpc2FibGUgd2hlbiBhdCB0b3Bcblx0XHRcdFx0XHRidXR0b24uc2V0SWNvbignY2hldnJvbi11cCcpO1xuXHRcdFx0XHRcdGlmIChpbmRleCA+IDApIHtcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKCdNb3ZlIHVwJyk7XG5cdFx0XHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdC8vIFByZXNlcnZlIHNjcm9sbCBwb3NpdGlvbiB0byBwcmV2ZW50IGZsaWNrZXJpbmdcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8IFxuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8IFxuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQtY29udGFpbmVyJykgfHxcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXI7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFBvcyA9IHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3A7XG5cdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRhcnJheU1vdmVNdXRhYmxlKHNldHRpbmdzLnRhYkJhckNvbW1hbmRzLCBpbmRleCwgaW5kZXggLSAxKTtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnRhYkJhck1hbmFnZXI/LnJlb3JkZXIoKTtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xuXHRcdFx0XHRcdFx0XHRcdC8vIFJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9uIGFmdGVyIHJlbmRlciB3aXRoIG11bHRpcGxlIGF0dGVtcHRzXG5cdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBBbHNvIHRyeSBhZnRlciBhIHNob3J0IGRlbGF5IGluIGNhc2UgRE9NIGlzbid0IHJlYWR5XG5cdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcblx0XHRcdFx0XHRcdFx0XHRcdH0sIDApO1xuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9KSgpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKCdBbHJlYWR5IGF0IHRvcCcpO1xuXHRcdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcygndWktdHdlYWtlci1kaXNhYmxlZC1idXR0b24nKTtcblx0XHRcdFx0XHRcdC8vIFByZXZlbnQgaG92ZXIgZWZmZWN0cyBvbiBkaXNhYmxlZCBidXR0b25zXG5cdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhidXR0b24uZXh0cmFTZXR0aW5nc0VsLCB7IHBvaW50ZXJFdmVudHM6ICdub25lJyB9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBvbiBjbGlja1xuXHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5hZGRFeHRyYUJ1dHRvbigoYnV0dG9uKSA9PiB7XG5cdFx0XHRcdFx0Ly8gTW92ZSBkb3duIC0gYWx3YXlzIHNob3csIGJ1dCBkaXNhYmxlIHdoZW4gYXQgYm90dG9tXG5cdFx0XHRcdFx0YnV0dG9uLnNldEljb24oJ2NoZXZyb24tZG93bicpO1xuXHRcdFx0XHRcdGlmIChpbmRleCA8IHNldHRpbmdzLnRhYkJhckNvbW1hbmRzLmxlbmd0aCAtIDEpIHtcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKCdNb3ZlIGRvd24nKTtcblx0XHRcdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0Ly8gUHJlc2VydmUgc2Nyb2xsIHBvc2l0aW9uIHRvIHByZXZlbnQgZmxpY2tlcmluZ1xuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXIuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHwgXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyLmNsb3Nlc3QoJy5zZXR0aW5ncy1jb250ZW50JykgfHwgXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudC1jb250YWluZXInKSB8fFxuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lcjtcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsUG9zID0gc2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcDtcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGFycmF5TW92ZU11dGFibGUoc2V0dGluZ3MudGFiQmFyQ29tbWFuZHMsIGluZGV4LCBpbmRleCArIDEpO1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4udGFiQmFyTWFuYWdlcj8ucmVvcmRlcigpO1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyIHdpdGggbXVsdGlwbGUgYXR0ZW1wdHNcblx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEFsc28gdHJ5IGFmdGVyIGEgc2hvcnQgZGVsYXkgaW4gY2FzZSBET00gaXNuJ3QgcmVhZHlcblx0XHRcdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSwgMCk7XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH0pKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoJ0FscmVhZHkgYXQgYm90dG9tJyk7XG5cdFx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKCd1aS10d2Vha2VyLWRpc2FibGVkLWJ1dHRvbicpO1xuXHRcdFx0XHRcdFx0Ly8gUHJldmVudCBob3ZlciBlZmZlY3RzIG9uIGRpc2FibGVkIGJ1dHRvbnNcblx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGJ1dHRvbi5leHRyYVNldHRpbmdzRWwsIHsgcG9pbnRlckV2ZW50czogJ25vbmUnIH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNsaWNrXG5cdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcblx0XHRcdFx0fSlcblx0XHRcdFx0LmFkZEV4dHJhQnV0dG9uKChidXR0b24pID0+IHtcblx0XHRcdFx0XHQvLyBEZWxldGUgLSByZWQvd2FybmluZyBzdHlsZVxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRJY29uKCd0cmFzaCcpO1xuXHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKCdEZWxldGUnKTtcblx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKCdtb2Qtd2FybmluZycpO1xuXHRcdFx0XHRcdC8vIE1ha2UgaWNvbiByZWRcblx0XHRcdFx0XHRzZXRDc3NQcm9wcyhidXR0b24uZXh0cmFTZXR0aW5nc0VsLCB7IGNvbG9yOiAndmFyKC0tdGV4dC1lcnJvciknIH0pO1xuXHRcdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0c2V0dGluZ3MudGFiQmFyQ29tbWFuZHMuc3BsaWNlKGluZGV4LCAxKTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4udGFiQmFyTWFuYWdlcj8ucmVtb3ZlQ29tbWFuZChwYWlyKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcblx0XHRcdFx0XHRcdH0pKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBvbiBjbGlja1xuXHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XG5cdFx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0Ly8gTW9kZSBzZWxlY3Rpb24gZHJvcGRvd25cblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XG5cdFx0XHRvdGhlclNldHRpbmdzLnB1c2goc2V0dGluZy5zZXR0aW5nRWwpO1xuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZSgnRGV2aWNlIG1vZGUnKVxuXHRcdFx0XHQuc2V0RGVzYygnQ2hvb3NlIHdoaWNoIGRldmljZXMgdGhpcyBjb21tYW5kIGFwcGVhcnMgb24nKVxuXHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgYXBwSWQgPSAodGhpcy5hcHAgYXMgeyBhcHBJZD86IHN0cmluZyB9KS5hcHBJZCB8fCAndGhpcy1kZXZpY2UnO1xuXHRcdFx0XHRcdGRyb3Bkb3duXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKCdhbnknLCAnQWxsIGRldmljZXMnKVxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbignZGVza3RvcCcsICdEZXNrdG9wIG9ubHknKVxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbignbW9iaWxlJywgJ01vYmlsZSBvbmx5Jylcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oYXBwSWQsICdUaGlzIGRldmljZScpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIFNldCBjdXJyZW50IHZhbHVlIC0gaWYgbW9kZSBpcyBub3Qgb25lIG9mIHRoZSBzdGFuZGFyZCBvbmVzLCBpdCdzIFwidGhpcyBkZXZpY2VcIlxuXHRcdFx0XHRcdGNvbnN0IGN1cnJlbnRWYWx1ZSA9IChwYWlyLm1vZGUgPT09ICdhbnknIHx8IHBhaXIubW9kZSA9PT0gJ2Rlc2t0b3AnIHx8IHBhaXIubW9kZSA9PT0gJ21vYmlsZScpIFxuXHRcdFx0XHRcdFx0PyBwYWlyLm1vZGUgXG5cdFx0XHRcdFx0XHQ6IGFwcElkO1xuXHRcdFx0XHRcdGRyb3Bkb3duLnNldFZhbHVlKGN1cnJlbnRWYWx1ZSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0ZHJvcGRvd24ub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHBhaXIubW9kZSA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi50YWJCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XG5cdFx0XHRcdFx0XHR9KSgpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdC8vIFByZXZlbnQgY29sbGFwc2Ugb24gY2xpY2tcblx0XHRcdFx0XHRkcm9wZG93bi5zZWxlY3RFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcblx0XHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHQvLyBDdXN0b20gY29sb3IgcGlja2VyIHdpdGggcmVzZXQgYnV0dG9uIChsaWtlIENvbW1hbmRlciAtIGFsd2F5cyBzaG93IGNvbG9yIHBpY2tlcilcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XG5cdFx0XHRvdGhlclNldHRpbmdzLnB1c2goc2V0dGluZy5zZXR0aW5nRWwpO1xuXHRcdFx0Y29uc3QgaGFzQ29sb3IgPSBwYWlyLmNvbG9yICE9PSB1bmRlZmluZWQ7XG5cdFx0XHRcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoJ0N1c3RvbSBjb2xvcicpXG5cdFx0XHRcdC5zZXREZXNjKCdTZXQgYSBjdXN0b20gY29sb3IgZm9yIHRoaXMgaWNvbicpXG5cdFx0XHRcdC5hZGRDb2xvclBpY2tlcigoY29sb3JQaWNrZXIpID0+IHtcblx0XHRcdFx0XHQvLyBVc2UgQ29tbWFuZGVyJ3MgYXBwcm9hY2g6IGFsd2F5cyBzaG93IGNvbG9yIHBpY2tlciwgZGVmYXVsdCB0byAjMDAwIGlmIG5vdCBzZXRcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50Q29sb3IgPSBwYWlyLmNvbG9yID8/ICcjMDAwMDAwJztcblx0XHRcdFx0XHRjb2xvclBpY2tlci5zZXRWYWx1ZShjdXJyZW50Q29sb3IpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIEdldCB0aGUgY29udHJvbCBlbGVtZW50IC0gY29sb3IgcGlja2VyIGlzIGFkZGVkIHRvIGl0XG5cdFx0XHRcdFx0Y29uc3QgY29udHJvbEVsID0gc2V0dGluZy5jb250cm9sRWw7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBvbiBjb2xvciBwaWNrZXIgY2xpY2tzXG5cdFx0XHRcdFx0Y29udHJvbEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIEFkZCBldmVudCBoYW5kbGVyIHRvIHRoZSBhY3R1YWwgY29sb3IgaW5wdXQgZWxlbWVudFxuXHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgY29sb3JJbnB1dCA9IGNvbnRyb2xFbC5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwiY29sb3JcIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXHRcdFx0XHRcdFx0aWYgKGNvbG9ySW5wdXQpIHtcblx0XHRcdFx0XHRcdFx0Y29sb3JJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LCAwKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBBZGQgcmVzZXQgYnV0dG9uIHRvIHRoZSBsZWZ0IG9mIGNvbG9yIHBpY2tlciBpZiBjb2xvciBoYXMgYmVlbiBzZXRcblx0XHRcdFx0XHQvLyBVc2Ugc2V0VGltZW91dCB0byBlbnN1cmUgY29sb3IgcGlja2VyIGlzIGFkZGVkIGZpcnN0LCB0aGVuIGluc2VydCByZXNldCBidXR0b24gYmVmb3JlIGl0XG5cdFx0XHRcdFx0aWYgKGhhc0NvbG9yKSB7XG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0Ly8gRmluZCB0aGUgY29sb3IgcGlja2VyIGVsZW1lbnQgKGl0J3MgdHlwaWNhbGx5IHRoZSBsYXN0IGNoaWxkIG9yIGhhcyBhIHNwZWNpZmljIGNsYXNzKVxuXHRcdFx0XHRcdFx0XHRjb25zdCBjb2xvclBpY2tlckVsID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJy5jb2xvci1waWNrZXInKSB8fCBjb250cm9sRWwubGFzdEVsZW1lbnRDaGlsZDtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHJlc2V0QnV0dG9uID0gY29udHJvbEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XG5cdFx0XHRcdFx0XHRcdFx0Y2xzOiAnY2xpY2thYmxlLWljb24gdWktdHdlYWtlci1jb2xvci1yZXNldCcsXG5cdFx0XHRcdFx0XHRcdFx0YXR0cjogeyAnYXJpYS1sYWJlbCc6ICdSZXNldCB0byBkZWZhdWx0IGNvbG9yJyB9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRzZXRJY29uKHJlc2V0QnV0dG9uLCAnbHVjaWRlLXJvdGF0ZS1jdycpO1xuXHRcdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhyZXNldEJ1dHRvbiwgeyBtYXJnaW5SaWdodDogJzAuNXJlbScgfSk7XG5cdFx0XHRcdFx0XHRcdHJlc2V0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlbW92ZSBjb2xvciBlbnRpcmVseVxuXHRcdFx0XHRcdFx0XHRcdFx0cGFpci5jb2xvciA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gVXBkYXRlIGljb24gcHJldmlldyB0byByZW1vdmUgY29sb3Jcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGljb25CdXR0b24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihgW2RhdGEtY29tbWFuZC1pZD1cIiR7cGFpci5pZH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChpY29uQnV0dG9uKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGljb25CdXR0b24uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2NvbG9yJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi50YWJCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xuXHRcdFx0XHRcdFx0XHRcdH0pKCk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Ly8gSW5zZXJ0IHJlc2V0IGJ1dHRvbiBiZWZvcmUgY29sb3IgcGlja2VyXG5cdFx0XHRcdFx0XHRcdGlmIChjb2xvclBpY2tlckVsKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgY29sb3JQaWNrZXJFbCk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gRmFsbGJhY2s6IGluc2VydCBhdCBzdGFydFxuXHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xFbC5pbnNlcnRCZWZvcmUocmVzZXRCdXR0b24sIGNvbnRyb2xFbC5maXJzdENoaWxkKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSwgMCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGNvbG9yUGlja2VyLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0Ly8gSWYgc2V0IHRvIGJsYWNrICgjMDAwMDAwKSwgdHJlYXQgYXMgXCJubyBjdXN0b20gY29sb3JcIiBhbmQgcmVtb3ZlIGl0XG5cdFx0XHRcdFx0XHRpZiAodmFsdWUgPT09ICcjMDAwMDAwJykge1xuXHRcdFx0XHRcdFx0XHRwYWlyLmNvbG9yID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0cGFpci5jb2xvciA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQvLyBVcGRhdGUgaWNvbiBwcmV2aWV3IGNvbG9yIGluIHJlYWwtdGltZVxuXHRcdFx0XHRcdFx0Y29uc3QgaWNvbkJ1dHRvbiA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGBbZGF0YS1jb21tYW5kLWlkPVwiJHtwYWlyLmlkfVwiXWApIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0XHRcdFx0aWYgKGljb25CdXR0b24pIHtcblx0XHRcdFx0XHRcdFx0aWYgKHBhaXIuY29sb3IgJiYgcGFpci5jb2xvciAhPT0gJyMwMDAwMDAnKSB7XG5cdFx0XHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbkJ1dHRvbiwgeyBjb2xvcjogcGFpci5jb2xvciB9KTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRpY29uQnV0dG9uLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjb2xvcicpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdC8vIFNhdmUgYW5kIHJlb3JkZXIsIHRoZW4gcmUtcmVuZGVyIHRvIHNob3cvaGlkZSByZXNldCBidXR0b25cblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4udGFiQmFyTWFuYWdlcj8ucmVvcmRlcigpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xuXHRcdFx0XHRcdFx0fSkoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHQvLyBUb2dnbGUgaWNvbiBjb25maWd1cmF0aW9uXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xuXHRcdFx0b3RoZXJTZXR0aW5ncy5wdXNoKHNldHRpbmcuc2V0dGluZ0VsKTtcblx0XHRcdGNvbnN0IGhhc1RvZ2dsZUljb24gPSBwYWlyLnRvZ2dsZUljb24gIT09IHVuZGVmaW5lZDtcblx0XHRcdFxuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZSgnVG9nZ2xlIGljb24nKVxuXHRcdFx0XHQuc2V0RGVzYygnSWNvbiB0byBzaG93IHdoZW4gY29tbWFuZCBpcyB0b2dnbGVkIG9uIChsZWF2ZSBlbXB0eSB0byBkaXNhYmxlIHRvZ2dsZSkuIENvbW1hbmRzIHdpdGggY2hlY2sgY2FsbGJhY2sgd29yayBhdXRvbWF0aWNhbGx5LiBTZWUgcmVhZG1lIGZvciBwbHVnaW4gZGV2ZWxvcGVyIGNvbXBhdGliaWxpdHkgbm90ZXMuJylcblx0XHRcdFx0LnNldFRvb2x0aXAoJ0ZvciBwbHVnaW4gZGV2ZWxvcGVyczogQ29tbWFuZHMgd2l0aCBjaGVja0NhbGxiYWNrIHdvcmsgYXV0b21hdGljYWxseS4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9kYXZpZHZraW1iYWxsL29ic2lkaWFuLXVpLXR3ZWFrZXIjdG9nZ2xlLWljb24tZmVhdHVyZS1jb21wYXRpYmlsaXR5IGZvciBkZXRhaWxzLicpXG5cdFx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGN1cnJlbnRUb2dnbGVJY29uID0gcGFpci50b2dnbGVJY29uIHx8ICdOb25lJztcblx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChjdXJyZW50VG9nZ2xlSWNvbiA9PT0gJ05vbmUnID8gJ1NldCB0b2dnbGUgaWNvbi4uLicgOiBjdXJyZW50VG9nZ2xlSWNvbikub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBJY29uUGlja2VyTW9kYWwodGhpcy5hcHAsIChpY29uSWQpID0+IHtcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChpY29uSWQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHBhaXIudG9nZ2xlSWNvbiA9IGljb25JZDtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0cGFpci50b2dnbGVJY29uID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnRhYkJhck1hbmFnZXI/LnJlb3JkZXIoKTtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xuXHRcdFx0XHRcdFx0XHR9KSgpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBvbiBjbGlja1xuXHRcdFx0XHRcdGJ1dHRvbi5idXR0b25FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBBZGQgcmVzZXQgYnV0dG9uIGlmIHRvZ2dsZSBpY29uIGlzIHNldFxuXHRcdFx0XHRcdGlmIChoYXNUb2dnbGVJY29uKSB7XG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgY29udHJvbEVsID0gc2V0dGluZy5jb250cm9sRWw7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGJ1dHRvbkVsID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpIHx8IGNvbnRyb2xFbC5sYXN0RWxlbWVudENoaWxkO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Y29uc3QgcmVzZXRCdXR0b24gPSBjb250cm9sRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHRcdFx0XHRcdFx0XHRjbHM6ICdjbGlja2FibGUtaWNvbiB1aS10d2Vha2VyLXRvZ2dsZS1pY29uLXJlc2V0Jyxcblx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1Jlc2V0IHRvZ2dsZSBpY29uJyB9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRzZXRJY29uKHJlc2V0QnV0dG9uLCAnbHVjaWRlLXJvdGF0ZS1jdycpO1xuXHRcdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhyZXNldEJ1dHRvbiwgeyBtYXJnaW5SaWdodDogJzAuNXJlbScgfSk7XG5cdFx0XHRcdFx0XHRcdHJlc2V0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0XHRcdC8vIFByZXNlcnZlIHNjcm9sbCBwb3NpdGlvbiB0byBwcmV2ZW50IGp1bXBpbmdcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXIuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHwgXG5cdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fCBcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQtY29udGFpbmVyJykgfHxcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lcjtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxQb3MgPSBzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wO1xuXHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlbW92ZSB0b2dnbGUgaWNvblxuXHRcdFx0XHRcdFx0XHRcdFx0cGFpci50b2dnbGVJY29uID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4udGFiQmFyTWFuYWdlcj8ucmVvcmRlcigpO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9uIGFmdGVyIHJlbmRlciB3aXRoIG11bHRpcGxlIGF0dGVtcHRzXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBBbHNvIHRyeSBhZnRlciBhIHNob3J0IGRlbGF5IGluIGNhc2UgRE9NIGlzbid0IHJlYWR5XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0sIDApO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0fSkoKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHQvLyBJbnNlcnQgcmVzZXQgYnV0dG9uIGJlZm9yZSB0aGUgbWFpbiBidXR0b25cblx0XHRcdFx0XHRcdFx0aWYgKGJ1dHRvbkVsKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgYnV0dG9uRWwpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xFbC5pbnNlcnRCZWZvcmUocmVzZXRCdXR0b24sIGNvbnRyb2xFbC5maXJzdENoaWxkKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSwgMCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdC8vIFNob3cgb25seSBvbiB0aGVzZSBmaWxlIHR5cGVzXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xuXHRcdFx0b3RoZXJTZXR0aW5ncy5wdXNoKHNldHRpbmcuc2V0dGluZ0VsKTtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoJ1Nob3cgb25seSBvbiB0aGVzZSBmaWxlIHR5cGVzJylcblx0XHRcdFx0LnNldERlc2MoJ1Nob3cgYnV0dG9uIG9ubHkgb24gc3BlY2lmaWVkIGZpbGUgdHlwZXMuIEVudGVyIGNvbW1hLXNlcGFyYXRlZCBmaWxlIGV4dGVuc2lvbnMuIExlYXZlIGVtcHR5IHRvIHNob3cgb24gYWxsIGZpbGUgdHlwZXMuJylcblx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcblx0XHRcdFx0XHR0ZXh0LnNldFBsYWNlaG9sZGVyKCdtZCcpO1xuXHRcdFx0XHRcdHRleHQuc2V0VmFsdWUocGFpci5zaG93T25GaWxlVHlwZXMgPz8gJycpO1xuXHRcdFx0XHRcdHRleHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHBhaXIuc2hvd09uRmlsZVR5cGVzID0gdmFsdWUudHJpbSgpIHx8IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4udGFiQmFyTWFuYWdlcj8ucmVvcmRlcigpO1xuXHRcdFx0XHRcdFx0fSkoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNsaWNrL2ZvY3VzXG5cdFx0XHRcdFx0dGV4dC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xuXHRcdFx0XHRcdHRleHQuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcblx0XHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHQvLyBOZXZlciBzaG93IG9uIHRoZXNlIGZpbGUgdHlwZXNcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XG5cdFx0XHRvdGhlclNldHRpbmdzLnB1c2goc2V0dGluZy5zZXR0aW5nRWwpO1xuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZSgnTmV2ZXIgc2hvdyBvbiB0aGVzZSBmaWxlIHR5cGVzJylcblx0XHRcdFx0LnNldERlc2MoJ0hpZGUgYnV0dG9uIG9uIHNwZWNpZmllZCBmaWxlIHR5cGVzLiBFbnRlciBjb21tYS1zZXBhcmF0ZWQgZmlsZSBleHRlbnNpb25zLiBMZWF2ZSBlbXB0eSB0byBhbGxvdyBhbGwgZmlsZSB0eXBlcy4nKVxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xuXHRcdFx0XHRcdHRleHQuc2V0UGxhY2Vob2xkZXIoJ2pwZycpO1xuXHRcdFx0XHRcdHRleHQuc2V0VmFsdWUocGFpci5oaWRlT25GaWxlVHlwZXMgPz8gJycpO1xuXHRcdFx0XHRcdHRleHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHBhaXIuaGlkZU9uRmlsZVR5cGVzID0gdmFsdWUudHJpbSgpIHx8IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4udGFiQmFyTWFuYWdlcj8ucmVvcmRlcigpO1xuXHRcdFx0XHRcdFx0fSkoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNsaWNrL2ZvY3VzXG5cdFx0XHRcdFx0dGV4dC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xuXHRcdFx0XHRcdHRleHQuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcblx0XHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHRcdC8vIEFmdGVyIGFsbCBzZXR0aW5ncyBhcmUgYWRkZWQsIGFwcGx5IGNvbGxhcHNlIHN0YXRlIGZyb20gTWFwXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRjb25zdCBzYXZlZEV4cGFuZGVkID0gdGhpcy5leHBhbmRlZFN0YXRlcy5nZXQocGFpci5pZCkgPz8gZmFsc2U7XG5cdFx0XHRvdGhlclNldHRpbmdzLmZvckVhY2goc2V0dGluZ0VsID0+IHtcblx0XHRcdFx0c2V0Q3NzUHJvcHMoc2V0dGluZ0VsLCB7IGRpc3BsYXk6IHNhdmVkRXhwYW5kZWQgPyAnJyA6ICdub25lJyB9KTtcblx0XHRcdH0pO1xuXHRcdH0sIDApO1xuXHR9XG59XG4iLCAiLyoqXG4gKiBOYW1lIFBpY2tlciBNb2RhbFxuICogU2ltcGxlIG1vZGFsIGZvciBlbnRlcmluZyBhIGN1c3RvbSBuYW1lXG4gKi9cblxuaW1wb3J0IHsgQXBwLCBNb2RhbCwgVGV4dENvbXBvbmVudCB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIE5hbWVQaWNrZXJNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0cHJpdmF0ZSBvblN1Ym1pdDogKG5hbWU6IHN0cmluZykgPT4gdm9pZDtcblx0cHJpdmF0ZSBkZWZhdWx0TmFtZTogc3RyaW5nO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBkZWZhdWx0TmFtZTogc3RyaW5nLCBvblN1Ym1pdDogKG5hbWU6IHN0cmluZykgPT4gdm9pZCkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5kZWZhdWx0TmFtZSA9IGRlZmF1bHROYW1lO1xuXHRcdHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcblx0fVxuXG5cdG9uT3BlbigpOiB2b2lkIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdFbnRlciBuYW1lJyB9KTtcblxuXHRcdGNvbnN0IGlucHV0Q29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xuXHRcdGNvbnN0IGlucHV0ID0gbmV3IFRleHRDb21wb25lbnQoaW5wdXRDb250YWluZXIpO1xuXHRcdGlucHV0LnNldFZhbHVlKHRoaXMuZGVmYXVsdE5hbWUpO1xuXHRcdGlucHV0LnNldFBsYWNlaG9sZGVyKCdFbnRlciBjdXN0b20gbmFtZS4uLicpO1xuXHRcdGlucHV0LmlucHV0RWwuYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItbmFtZS1pbnB1dCcpO1xuXHRcdGlucHV0LmlucHV0RWwuc2VsZWN0KCk7XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XG5cdFx0Y29uc3Qgc3VibWl0QnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdPSycsIGNsczogJ21vZC1jdGEnIH0pO1xuXHRcdGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2FuY2VsJyB9KTtcblxuXHRcdGNvbnN0IGhhbmRsZVN1Ym1pdCA9ICgpOiB2b2lkID0+IHtcblx0XHRcdGNvbnN0IHZhbHVlID0gaW5wdXQuZ2V0VmFsdWUoKS50cmltKCk7XG5cdFx0XHRpZiAodmFsdWUpIHtcblx0XHRcdFx0dGhpcy5vblN1Ym1pdCh2YWx1ZSk7XG5cdFx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0c3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlU3VibWl0KTtcblx0XHRjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuXHRcdGlucHV0LmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldnQpID0+IHtcblx0XHRcdGlmIChldnQua2V5ID09PSAnRW50ZXInKSB7XG5cdFx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRoYW5kbGVTdWJtaXQoKTtcblx0XHRcdH1cblx0XHRcdGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuXHRcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0b25DbG9zZSgpOiB2b2lkIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuIiwgIi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGNob29zZSBhIG5ldyBjb21tYW5kIChzaW1pbGFyIHRvIENvbW1hbmRlcidzIGNob29zZU5ld0NvbW1hbmQpXG4gKi9cblxuaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBVSVR3ZWFrZXJQbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBDb21tYW5kSWNvblBhaXIgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBDb21tYW5kUGlja2VyTW9kYWwgfSBmcm9tICcuLi9tb2RhbHMvQ29tbWFuZFBpY2tlck1vZGFsJztcbmltcG9ydCB7IEljb25QaWNrZXJNb2RhbCB9IGZyb20gJy4uL21vZGFscy9JY29uUGlja2VyTW9kYWwnO1xuaW1wb3J0IHsgTmFtZVBpY2tlck1vZGFsIH0gZnJvbSAnLi4vbW9kYWxzL05hbWVQaWNrZXJNb2RhbCc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaG9vc2VOZXdDb21tYW5kKHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luKTogUHJvbWlzZTxDb21tYW5kSWNvblBhaXI+IHtcblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRsZXQgY29tbWFuZFNlbGVjdGVkID0gZmFsc2U7XG5cdFx0bGV0IGljb25TZWxlY3RlZCA9IGZhbHNlO1xuXHRcdFxuXHRcdC8vIFN0ZXAgMTogQ2hvb3NlIGNvbW1hbmRcblx0XHRjb25zdCBjb21tYW5kTW9kYWwgPSBuZXcgQ29tbWFuZFBpY2tlck1vZGFsKHBsdWdpbi5hcHAsIChjb21tYW5kSWQpID0+IHtcblx0XHRcdGNvbW1hbmRTZWxlY3RlZCA9IHRydWU7XG5cdFx0XHRcblx0XHRcdC8vIEdldCBjb21tYW5kIHRvIGNoZWNrIGlmIGl0IGhhcyBhbiBpY29uXG5cdFx0XHRjb25zdCBjb21tYW5kcyA9IChwbHVnaW4uYXBwIGFzIHsgY29tbWFuZHM/OiB7IGNvbW1hbmRzPzogeyBbaWQ6IHN0cmluZ106IENvbW1hbmQgfSB9IH0pLmNvbW1hbmRzO1xuXHRcdFx0Y29uc3QgY29tbWFuZCA9IGNvbW1hbmRzPy5jb21tYW5kcz8uW2NvbW1hbmRJZF07XG5cdFx0XHRcblx0XHRcdC8vIENsb3NlIGNvbW1hbmQgbW9kYWwgZmlyc3Rcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRjb21tYW5kTW9kYWwuY2xvc2UoKTtcblx0XHRcdH0sIDApO1xuXHRcdFx0XG5cdFx0XHQvLyBBbHdheXMgc2hvdyBpY29uIHBpY2tlciAoZXZlbiBpZiBjb21tYW5kIGhhcyBhbiBpY29uLCBsZXQgdXNlciBjaG9vc2UpXG5cdFx0XHRjb25zdCBkaXNwbGF5TmFtZSA9IGNvbW1hbmQ/Lm5hbWUgfHwgJ0N1c3RvbSBDb21tYW5kJztcblx0XHRcdGNvbnN0IGljb25Nb2RhbCA9IG5ldyBJY29uUGlja2VyTW9kYWwocGx1Z2luLmFwcCwgKGljb25JZCkgPT4ge1xuXHRcdFx0XHRpY29uU2VsZWN0ZWQgPSB0cnVlO1xuXHRcdFx0XHRpY29uTW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIFN0ZXAgMzogQ2hvb3NlIGN1c3RvbSBuYW1lXG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdGxldCBuYW1lU2VsZWN0ZWQgPSBmYWxzZTtcblx0XHRcdFx0XHRjb25zdCBuYW1lTW9kYWwgPSBuZXcgTmFtZVBpY2tlck1vZGFsKHBsdWdpbi5hcHAsIGRpc3BsYXlOYW1lLCAoY3VzdG9tTmFtZSkgPT4ge1xuXHRcdFx0XHRcdFx0bmFtZVNlbGVjdGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdG5hbWVNb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRyZXNvbHZlKHtcblx0XHRcdFx0XHRcdFx0aWQ6IGNvbW1hbmRJZCxcblx0XHRcdFx0XHRcdFx0aWNvbjogaWNvbklkLFxuXHRcdFx0XHRcdFx0XHRuYW1lOiBjdXN0b21OYW1lLFxuXHRcdFx0XHRcdFx0XHRkaXNwbGF5TmFtZTogZGlzcGxheU5hbWUsXG5cdFx0XHRcdFx0XHRcdG1vZGU6ICdhbnknLFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0bmFtZU1vZGFsLm9uQ2xvc2UgPSAoKSA9PiB7XG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKCFuYW1lU2VsZWN0ZWQgJiYgaWNvblNlbGVjdGVkICYmIGNvbW1hbmRTZWxlY3RlZCkge1xuXHRcdFx0XHRcdFx0XHRcdHJlamVjdChuZXcgRXJyb3IoJ05vIG5hbWUgc2VsZWN0ZWQnKSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0sIDApO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0bmFtZU1vZGFsLm9wZW4oKTtcblx0XHRcdFx0fSwgMTAwKTtcblx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHRpY29uTW9kYWwub25DbG9zZSA9ICgpID0+IHtcblx0XHRcdFx0Ly8gVXNlIHNldFRpbWVvdXQgdG8gYWxsb3cgb25TZWxlY3QgdG8gc2V0IGljb25TZWxlY3RlZCBmaXJzdFxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRpZiAoIWljb25TZWxlY3RlZCAmJiBjb21tYW5kU2VsZWN0ZWQpIHtcblx0XHRcdFx0XHRcdHJlamVjdChuZXcgRXJyb3IoJ05vIGljb24gc2VsZWN0ZWQnKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LCAwKTtcblx0XHRcdH07XG5cdFx0XHRcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRpY29uTW9kYWwub3BlbigpO1xuXHRcdFx0fSwgMTAwKTtcblx0XHR9KTtcblx0XHRcblx0XHRjb21tYW5kTW9kYWwub25DbG9zZSA9ICgpID0+IHtcblx0XHRcdC8vIFVzZSBzZXRUaW1lb3V0IHRvIGFsbG93IG9uQ2hvb3NlSXRlbSB0byBzZXQgY29tbWFuZFNlbGVjdGVkIGZpcnN0XG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0aWYgKCFjb21tYW5kU2VsZWN0ZWQpIHtcblx0XHRcdFx0XHRyZWplY3QobmV3IEVycm9yKCdObyBjb21tYW5kIHNlbGVjdGVkJykpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCAwKTtcblx0XHR9O1xuXHRcdFxuXHRcdGNvbW1hbmRNb2RhbC5vcGVuKCk7XG5cdH0pO1xufVxuIiwgIi8qKlxuICogU3RhdHVzIEJhciBUYWIgLSBVbmlmaWVkIGxpc3Qgb2YgZXhpc3RpbmcgKyBjdXN0b20gc3RhdHVzIGJhciBpdGVtc1xuICogRVhBQ1RMWSBtYXRjaGVzIFN0YXR1cyBCYXIgT3JnYW5pemVyJ3MgZGVzaWduIDE6MVxuICovXG5cbmltcG9ydCB7IHNldEljb24sIENvbG9yQ29tcG9uZW50IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVGFiUmVuZGVyZXIgfSBmcm9tICcuLi9jb21tb24vVGFiUmVuZGVyZXInO1xuaW1wb3J0IHsgU3RhdHVzQmFySXRlbSB9IGZyb20gJy4uLy4uL3R5cGVzJztcbmltcG9ydCB7IFVJU2V0dGluZ3MgfSBmcm9tICcuLi8uLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyBjaG9vc2VOZXdDb21tYW5kIH0gZnJvbSAnLi4vLi4vdXRpbHMvY2hvb3NlQ29tbWFuZCc7XG5pbXBvcnQgeyBzZXRDc3NQcm9wcyB9IGZyb20gJy4uLy4uL3VpTWFuYWdlcic7XG5pbXBvcnQgeyBjcmVhdGVTZXR0aW5nc0dyb3VwIH0gZnJvbSAnLi4vLi4vdXRpbHMvc2V0dGluZ3MtY29tcGF0JztcblxuLy8gU2ltcGxlIGFycmF5IG1vdmUgdXRpbGl0eVxuZnVuY3Rpb24gYXJyYXlNb3ZlTXV0YWJsZTxUPihhcnJheTogVFtdLCBmcm9tOiBudW1iZXIsIHRvOiBudW1iZXIpOiB2b2lkIHtcblx0Y29uc3QgaXRlbSA9IGFycmF5W2Zyb21dO1xuXHRhcnJheS5zcGxpY2UoZnJvbSwgMSk7XG5cdGFycmF5LnNwbGljZSh0bywgMCwgaXRlbSk7XG59XG5cbmxldCBkcmFnZ2luZyA9IGZhbHNlO1xuXG5leHBvcnQgY2xhc3MgU3RhdHVzQmFyVGFiIGV4dGVuZHMgVGFiUmVuZGVyZXIge1xuXHRwcml2YXRlIGNvbnRhaW5lcj86IEhUTUxFbGVtZW50O1xuXHRyZW5kZXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuXHRcdGNvbnRhaW5lci5lbXB0eSgpO1xuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5nZXRTZXR0aW5ncygpO1xuXHRcdC8vIFN0b3JlIGNvbnRhaW5lciByZWZlcmVuY2UgZm9yIHJlLXJlbmRlcnNcblx0XHR0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcblx0XHRcblx0XHQvLyBFbnN1cmUgc3RhdHVzQmFySXRlbXMgZXhpc3RzXG5cdFx0aWYgKCFzZXR0aW5ncy5zdGF0dXNCYXJJdGVtcykge1xuXHRcdFx0c2V0dGluZ3Muc3RhdHVzQmFySXRlbXMgPSBbXTtcblx0XHR9XG5cblx0XHQvLyBDcmVhdGUgd3JhcHBlclxuXHRcdGNvbnN0IHdyYXBwZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93cy13cmFwcGVyJyk7XG5cdFx0XG5cdFx0Ly8gQ3JlYXRlIHJvd3MgY29udGFpbmVyXG5cdFx0Y29uc3Qgcm93c0NvbnRhaW5lciA9IHdyYXBwZXIuY3JlYXRlRGl2KCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93cy1jb250YWluZXInKTtcblxuXHRcdC8vIFJlbmRlciBhbGwgaXRlbXMgYXMgc2ltcGxlIHJvd3MgKGV4YWN0bHkgbGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplcilcblx0XHRzZXR0aW5ncy5zdGF0dXNCYXJJdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuXHRcdFx0aWYgKGl0ZW0udHlwZSA9PT0gJ2V4aXN0aW5nJykge1xuXHRcdFx0XHR0aGlzLnJlbmRlckV4aXN0aW5nUm93KHJvd3NDb250YWluZXIsIGl0ZW0sIHNldHRpbmdzLCBpbmRleCwgc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMubGVuZ3RoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMucmVuZGVyQ3VzdG9tUm93KHJvd3NDb250YWluZXIsIGl0ZW0sIHNldHRpbmdzLCBpbmRleCwgc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMubGVuZ3RoKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIEFkZCBjb21tYW5kIGJ1dHRvbiAoYXQgdGhlIGVuZClcblx0XHRpZiAoc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMubGVuZ3RoID4gMCkge1xuXHRcdFx0Y29udGFpbmVyLmNyZWF0ZUVsKCdocicpO1xuXHRcdH1cblx0XHRcblx0XHRjb25zdCBhZGRHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyLCB1bmRlZmluZWQsICd1aS10d2Vha2VyJyk7XG5cdFx0YWRkR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZSgnQWRkIGNvbW1hbmQnKVxuXHRcdFx0XHQuc2V0RGVzYygnQWRkIGEgbmV3IGNvbW1hbmQgYnV0dG9uIHRvIHRoZSBzdGF0dXMgYmFyJylcblx0XHRcdFx0LmFkZEJ1dHRvbigoYnV0dG9uKSA9PiB7XG5cdFx0XHRcdFx0Ly8gQWRkIGljb24gdG8gdGhlIGJ1dHRvblxuXHRcdFx0XHRcdGNvbnN0IGJ1dHRvbkVsID0gYnV0dG9uLmJ1dHRvbkVsO1xuXHRcdFx0XHRcdGNvbnN0IGljb25Db250YWluZXIgPSBidXR0b25FbC5jcmVhdGVTcGFuKHsgY2xzOiAndWktdHdlYWtlci1hZGQtaWNvbicgfSk7XG5cdFx0XHRcdFx0c2V0SWNvbihpY29uQ29udGFpbmVyLCAnbHVjaWRlLWltYWdlLXBsdXMnKTtcblx0XHRcdFx0XHRidXR0b25FbC5pbnNlcnRCZWZvcmUoaWNvbkNvbnRhaW5lciwgYnV0dG9uRWwuZmlyc3RDaGlsZCk7XG5cdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoJ0FkZCBjb21tYW5kJykuc2V0Q3RhKCkub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgcGFpciA9IGF3YWl0IGNob29zZU5ld0NvbW1hbmQodGhpcy5wbHVnaW4pO1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnN0YXR1c0Jhck1hbmFnZXI/LmFkZEN1c3RvbUNvbW1hbmQocGFpcik7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gU2F2ZSBzY3JvbGwgcG9zaXRpb24gYmVmb3JlIHJlLXJlbmRlclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IGNvbnRhaW5lci5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fCBcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8IFxuXHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsVG9wID0gc2Nyb2xsQ29udGFpbmVyPy5zY3JvbGxUb3AgfHwgMDtcblx0XHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHQvLyBSZS1yZW5kZXIgYW5kIHJlc3RvcmUgc2Nyb2xsXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcblx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNjcm9sbENvbnRhaW5lcikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBVc2VyIGNhbmNlbGxlZFxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KSgpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZW5kZXIgYW4gZXhpc3Rpbmcgc3RhdHVzIGJhciBpdGVtIHJvdyAoRVhBQ1RMWSBsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxuXHQgKi9cblx0cHJpdmF0ZSByZW5kZXJFeGlzdGluZ1Jvdyhyb3dzQ29udGFpbmVyOiBIVE1MRWxlbWVudCwgaXRlbTogU3RhdHVzQmFySXRlbSwgc2V0dGluZ3M6IFVJU2V0dGluZ3MsIGluZGV4OiBudW1iZXIsIHRvdGFsSXRlbXM6IG51bWJlcik6IHZvaWQge1xuXHRcdC8vIEdldCB0aGUgYWN0dWFsIHN0YXR1cyBiYXIgZWxlbWVudCBmb3IgcHJldmlld1xuXHRcdGNvbnN0IHN0YXR1c0JhckNvbnRhaW5lciA9ICh0aGlzLnBsdWdpbi5hcHAgYXMgeyBzdGF0dXNCYXI/OiB7IGNvbnRhaW5lckVsPzogSFRNTEVsZW1lbnQgfSB9KS5zdGF0dXNCYXI/LmNvbnRhaW5lckVsO1xuXHRcdGNvbnN0IGFjdHVhbEVsZW1lbnQgPSBzdGF0dXNCYXJDb250YWluZXI/LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXVpLXR3ZWFrZXItc3RhdHVzLWJhci1pZD1cIiR7aXRlbS5pZH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcblx0XHRjb25zdCBleGlzdHMgPSAhIWFjdHVhbEVsZW1lbnQ7XG5cblx0XHQvLyBDcmVhdGUgcm93XG5cdFx0Y29uc3QgZW50cnkgPSByb3dzQ29udGFpbmVyLmNyZWF0ZURpdigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdycpO1xuXHRcdGVudHJ5LmFkZENsYXNzKCd1aS10d2Vha2VyLXJvdycpO1xuXHRcdGlmICghZXhpc3RzKSBlbnRyeS5hZGRDbGFzcygndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1kaXNhYmxlZCcpO1xuXHRcdGlmIChpdGVtLmhpZGRlbikgZW50cnkuYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctaGlkZGVuJyk7XG5cdFx0ZW50cnkuc2V0QXR0cmlidXRlKCdkYXRhLXVpLXR3ZWFrZXItaWQnLCBpdGVtLmlkKTtcblxuXHRcdC8vIERyYWcgaGFuZGxlXG5cdFx0Y29uc3QgaGFuZGxlID0gZW50cnkuY3JlYXRlU3BhbigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1oYW5kbGUnKTtcblx0XHRoYW5kbGUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2ZW50KSA9PiBcblx0XHRcdHRoaXMuaGFuZGxlTW91c2VEb3duKGV2ZW50LCByb3dzQ29udGFpbmVyLCBpdGVtLCBzZXR0aW5ncylcblx0XHQpO1xuXG5cdFx0Ly8gVGl0bGVcblx0XHRjb25zdCB0aXRsZVNwYW4gPSBlbnRyeS5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LXRpdGxlJyk7XG5cdFx0dGl0bGVTcGFuLnRleHRDb250ZW50ID0gaXRlbS5uYW1lO1xuXG5cdFx0Ly8gUHJldmlld1xuXHRcdGNvbnN0IHByZXZpZXdTcGFuID0gZW50cnkuY3JlYXRlU3BhbigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1wcmV2aWV3Jyk7XG5cdFx0aWYgKGV4aXN0cyAmJiBhY3R1YWxFbGVtZW50KSB7XG5cdFx0XHQvLyBDbG9uZSB0aGUgZWxlbWVudCBpbnN0ZWFkIG9mIHVzaW5nIGlubmVySFRNTFxuXHRcdFx0Y29uc3QgY2xvbmVkID0gYWN0dWFsRWxlbWVudC5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRwcmV2aWV3U3Bhbi5hcHBlbmRDaGlsZChjbG9uZWQpO1xuXHRcdH1cblxuXHRcdC8vIEVtcHR5IHNwYW5zIGZvciBjdXN0b20gaXRlbSBvcHRpb25zIChleGlzdGluZyBpdGVtcyBkb24ndCBoYXZlIHRoZXNlKVxuXHRcdGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctcmVzZXQtY29sb3InKTsgLy8gRW1wdHlcblx0XHRlbnRyeS5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LWNvbG9yLXBpY2tlcicpOyAvLyBFbXB0eVxuXHRcdGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctZGV2aWNlLW1vZGUnKTsgLy8gRW1wdHlcblx0XHRlbnRyeS5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LW1kLW9ubHknKTsgLy8gRW1wdHlcblxuXHRcdC8vIExvY2sgaWNvbiAobmV3IGZlYXR1cmUpXG5cdFx0Y29uc3QgbG9ja1NwYW4gPSBlbnRyeS5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LWxvY2snKTtcblx0XHRsb2NrU3Bhbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBpdGVtLnN0aWNreSA/IGBMb2NrZWQgdG8gJHtpdGVtLnN0aWNreX1gIDogJ1VubG9ja2VkIC0gY2xpY2sgdG8gbG9jayBwb3NpdGlvbicpO1xuXHRcdGxvY2tTcGFuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHR0aGlzLnRvZ2dsZUxvY2soaXRlbSwgbG9ja1NwYW4sIGluZGV4LCB0b3RhbEl0ZW1zLCByb3dzQ29udGFpbmVyLCBzZXR0aW5ncyk7XG5cdFx0fSk7XG5cdFx0c2V0SWNvbihsb2NrU3BhbiwgaXRlbS5zdGlja3kgPyAnbG9jaycgOiAndW5sb2NrJyk7XG5cdFx0aWYgKGl0ZW0uc3RpY2t5KSB7XG5cdFx0XHRsb2NrU3Bhbi5hZGRDbGFzcygndWktdHdlYWtlci1sb2NrZWQnKTtcblx0XHR9XG5cblx0XHQvLyBEZWxldGUgaWNvbiBmb3IgY3VzdG9tIGl0ZW1zLCB2aXNpYmlsaXR5IGljb24gZm9yIGV4aXN0aW5nIGl0ZW1zXG5cdFx0Y29uc3QgdmlzaWJpbGl0eVNwYW4gPSBlbnRyeS5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LXZpc2liaWxpdHknKTtcblx0XHRpZiAoaXRlbS50eXBlID09PSAnY3VzdG9tJykge1xuXHRcdFx0Ly8gQ3VzdG9tIGl0ZW1zOiBzaG93IHRyYXNoIGljb24gKHJlZC93YXJuaW5nKVxuXHRcdFx0dmlzaWJpbGl0eVNwYW4uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ0RlbGV0ZSBpdGVtJyk7XG5cdFx0XHR2aXNpYmlsaXR5U3Bhbi5hZGRDbGFzcygnbW9kLXdhcm5pbmcnKTtcblx0XHRcdHNldENzc1Byb3BzKHZpc2liaWxpdHlTcGFuLCB7IGNvbG9yOiAndmFyKC0tdGV4dC1lcnJvciknIH0pO1xuXHRcdFx0dmlzaWJpbGl0eVNwYW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHRcdHZvaWQgdGhpcy5yZW1vdmVJdGVtKHJvd3NDb250YWluZXIsIGl0ZW0sIHNldHRpbmdzKTtcblx0XHRcdH0pO1xuXHRcdFx0c2V0SWNvbih2aXNpYmlsaXR5U3BhbiwgJ3RyYXNoLTInKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gRXhpc3RpbmcgaXRlbXM6IHNob3cgdmlzaWJpbGl0eSB0b2dnbGVcblx0XHRcdHZpc2liaWxpdHlTcGFuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGl0ZW0uaGlkZGVuID8gJ0hpZGRlbiAtIGNsaWNrIHRvIHNob3cnIDogJ1Zpc2libGUgLSBjbGljayB0byBoaWRlJyk7XG5cdFx0XHR2aXNpYmlsaXR5U3Bhbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdFx0dGhpcy50b2dnbGVWaXNpYmlsaXR5KGl0ZW0sIHZpc2liaWxpdHlTcGFuLCBlbnRyeSk7XG5cdFx0XHRcdC8vIHRvZ2dsZVZpc2liaWxpdHkgYWxyZWFkeSBjYWxscyBzYXZlU2V0dGluZ3MoKVxuXHRcdFx0fSk7XG5cdFx0XHRzZXRJY29uKHZpc2liaWxpdHlTcGFuLCBpdGVtLmhpZGRlbiA/ICdleWUtb2ZmJyA6ICdleWUnKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogUmVuZGVyIGEgY3VzdG9tIHN0YXR1cyBiYXIgaXRlbSByb3cgKEVYQUNUTFkgbGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplciwgYnV0IHdpdGggZWRpdGFibGUgbmFtZSlcblx0ICovXG5cdHByaXZhdGUgcmVuZGVyQ3VzdG9tUm93KHJvd3NDb250YWluZXI6IEhUTUxFbGVtZW50LCBpdGVtOiBTdGF0dXNCYXJJdGVtLCBzZXR0aW5nczogVUlTZXR0aW5ncywgaW5kZXg6IG51bWJlciwgdG90YWxJdGVtczogbnVtYmVyKTogdm9pZCB7XG5cdFx0Ly8gQ3JlYXRlIHJvd1xuXHRcdGNvbnN0IGVudHJ5ID0gcm93c0NvbnRhaW5lci5jcmVhdGVEaXYoJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3cnKTtcblx0XHRlbnRyeS5hZGRDbGFzcygndWktdHdlYWtlci1yb3cnKTtcblx0XHRpZiAoaXRlbS5oaWRkZW4pIGVudHJ5LmFkZENsYXNzKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LWhpZGRlbicpO1xuXHRcdGVudHJ5LnNldEF0dHJpYnV0ZSgnZGF0YS11aS10d2Vha2VyLWlkJywgaXRlbS5pZCk7XG5cblx0XHQvLyBEcmFnIGhhbmRsZVxuXHRcdGNvbnN0IGhhbmRsZSA9IGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctaGFuZGxlJyk7XG5cdFx0aGFuZGxlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldmVudCkgPT4gXG5cdFx0XHR0aGlzLmhhbmRsZU1vdXNlRG93bihldmVudCwgcm93c0NvbnRhaW5lciwgaXRlbSwgc2V0dGluZ3MpXG5cdFx0KTtcblxuXHRcdC8vIFRpdGxlIHdpdGggZWRpdGFibGUgbmFtZVxuXHRcdGNvbnN0IHRpdGxlU3BhbiA9IGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctdGl0bGUnKTtcblx0XHRjb25zdCBkaXNwbGF5TmFtZSA9IGl0ZW0uZGlzcGxheU5hbWUgfHwgaXRlbS5uYW1lO1xuXHRcdGNvbnN0IG5hbWVUZXh0ID0gaXRlbS5uYW1lID09PSBkaXNwbGF5TmFtZSA/IGl0ZW0ubmFtZSA6IGAke2l0ZW0ubmFtZX0gKCR7ZGlzcGxheU5hbWV9KWA7XG5cdFx0dGl0bGVTcGFuLnRleHRDb250ZW50ID0gbmFtZVRleHQ7XG5cdFx0XG5cdFx0Ly8gTWFrZSB0aXRsZSBlZGl0YWJsZSBvbiBjbGlja1xuXHRcdHRpdGxlU3Bhbi5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsICgpID0+IHtcblx0XHRcdGNvbnN0IGN1cnJlbnROYW1lID0gaXRlbS5uYW1lO1xuXHRcdFx0Y29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuXHRcdFx0aW5wdXQudHlwZSA9ICd0ZXh0Jztcblx0XHRcdGlucHV0LnZhbHVlID0gY3VycmVudE5hbWU7XG5cdFx0XHRpbnB1dC5hZGRDbGFzcygnbW9kLXRleHQtaW5wdXQnKTtcblx0XHRcdHNldENzc1Byb3BzKGlucHV0LCB7IHdpZHRoOiAnMTAwJScgfSk7XG5cdFx0XHR0aXRsZVNwYW4uZW1wdHkoKTtcblx0XHRcdHRpdGxlU3Bhbi5hcHBlbmRDaGlsZChpbnB1dCk7XG5cdFx0XHRpbnB1dC5mb2N1cygpO1xuXHRcdFx0aW5wdXQuc2VsZWN0KCk7XG5cdFx0XHRcblx0XHRcdGNvbnN0IHNhdmVOYW1lID0gKCkgPT4ge1xuXHRcdFx0XHRsZXQgbmV3TmFtZSA9IGlucHV0LnZhbHVlLnRyaW0oKTtcblx0XHRcdFx0aWYgKCFuZXdOYW1lKSBuZXdOYW1lID0gY3VycmVudE5hbWU7XG5cdFx0XHRcdGl0ZW0ubmFtZSA9IG5ld05hbWU7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnN0YXR1c0Jhck1hbmFnZXI/LnVwZGF0ZUJ1dHRvbk5hbWVzKCk7XG5cdFx0XHRcdHRpdGxlU3Bhbi50ZXh0Q29udGVudCA9IG5ld05hbWUgPT09IGRpc3BsYXlOYW1lID8gbmV3TmFtZSA6IGAke25ld05hbWV9ICgke2Rpc3BsYXlOYW1lfSlgO1xuXHRcdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHR9O1xuXHRcdFx0XG5cdFx0XHRpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcblx0XHRcdFx0aWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdHNhdmVOYW1lKCk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdHRpdGxlU3Bhbi50ZXh0Q29udGVudCA9IG5hbWVUZXh0O1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBzYXZlTmFtZSk7XG5cdFx0fSk7XG5cblx0XHQvLyBQcmV2aWV3XG5cdFx0Y29uc3QgcHJldmlld1NwYW4gPSBlbnRyeS5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LXByZXZpZXcnKTtcblx0XHRpZiAoaXRlbS5pY29uKSB7XG5cdFx0XHRjb25zdCBwcmV2aWV3SWNvbiA9IHByZXZpZXdTcGFuLmNyZWF0ZVNwYW4oJ3N0YXR1cy1iYXItaXRlbSBjbGlja2FibGUtaWNvbicpO1xuXHRcdFx0c2V0SWNvbihwcmV2aWV3SWNvbiwgaXRlbS5pY29uKTtcblx0XHRcdGlmIChpdGVtLmNvbG9yICYmIGl0ZW0uY29sb3IgIT09ICcjMDAwMDAwJykge1xuXHRcdFx0XHRzZXRDc3NQcm9wcyhwcmV2aWV3SWNvbiwgeyBjb2xvcjogaXRlbS5jb2xvciB9KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBSZXNldCBjb2xvciBidXR0b24gKG9ubHkgc2hvdyBpZiBjb2xvciBpcyBzZXQpXG5cdFx0Y29uc3QgcmVzZXRDb2xvckNvbnRhaW5lciA9IGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctcmVzZXQtY29sb3InKTtcblx0XHRpZiAoaXRlbS5jb2xvcikge1xuXHRcdFx0Y29uc3QgcmVzZXRCdXR0b24gPSByZXNldENvbG9yQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG5cdFx0XHRcdGNsczogJ2NsaWNrYWJsZS1pY29uIHVpLXR3ZWFrZXItY29sb3ItcmVzZXQnLFxuXHRcdFx0XHRhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1Jlc2V0IHRvIGRlZmF1bHQgY29sb3InIH1cblx0XHRcdH0pO1xuXHRcdFx0c2V0SWNvbihyZXNldEJ1dHRvbiwgJ3JvdGF0ZS1jdycpO1xuXHRcdFx0cmVzZXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRpdGVtLmNvbG9yID0gdW5kZWZpbmVkO1xuXHRcdFx0XHQvLyBVcGRhdGUgcHJldmlldyBpY29uXG5cdFx0XHRcdGNvbnN0IHByZXZpZXdJY29uID0gcHJldmlld1NwYW4ucXVlcnlTZWxlY3RvcignLmNsaWNrYWJsZS1pY29uJykgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRcdGlmIChwcmV2aWV3SWNvbikge1xuXHRcdFx0XHRcdHByZXZpZXdJY29uLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjb2xvcicpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMucGx1Z2luLnN0YXR1c0Jhck1hbmFnZXI/LnJlb3JkZXIoKTtcblx0XHRcdFx0dm9pZCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHQvLyBSZS1yZW5kZXIgdG8gdXBkYXRlIFVJXG5cdFx0XHRcdGlmICh0aGlzLmNvbnRhaW5lcikge1xuXHRcdFx0XHRcdHRoaXMucmVuZGVyKHRoaXMuY29udGFpbmVyKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdFxuXHRcdC8vIENvbG9yIHBpY2tlciAoT2JzaWRpYW4ncyBuYXRpdmUgY29tcG9uZW50KVxuXHRcdGNvbnN0IGNvbG9yUGlja2VyQ29udGFpbmVyID0gZW50cnkuY3JlYXRlU3BhbigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1jb2xvci1waWNrZXInKTtcblx0XHRjb25zdCBjb2xvclBpY2tlckVsID0gY29sb3JQaWNrZXJDb250YWluZXIuY3JlYXRlRGl2KCk7XG5cdFx0Y29uc3QgY29sb3JQaWNrZXIgPSBuZXcgQ29sb3JDb21wb25lbnQoY29sb3JQaWNrZXJFbCk7XG5cdFx0Y29sb3JQaWNrZXIuc2V0VmFsdWUoaXRlbS5jb2xvciB8fCAnIzAwMDAwMCcpO1xuXHRcdGNvbG9yUGlja2VyLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0aWYgKHZhbHVlID09PSAnIzAwMDAwMCcpIHtcblx0XHRcdFx0aXRlbS5jb2xvciA9IHVuZGVmaW5lZDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGl0ZW0uY29sb3IgPSB2YWx1ZTtcblx0XHRcdH1cblx0XHRcdC8vIFVwZGF0ZSBwcmV2aWV3IGljb24gY29sb3IgaW4gcmVhbC10aW1lXG5cdFx0XHRjb25zdCBwcmV2aWV3SWNvbiA9IHByZXZpZXdTcGFuLnF1ZXJ5U2VsZWN0b3IoJy5jbGlja2FibGUtaWNvbicpIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0aWYgKHByZXZpZXdJY29uKSB7XG5cdFx0XHRcdGlmIChpdGVtLmNvbG9yICYmIGl0ZW0uY29sb3IgIT09ICcjMDAwMDAwJykge1xuXHRcdFx0XHRcdHNldENzc1Byb3BzKHByZXZpZXdJY29uLCB7IGNvbG9yOiBpdGVtLmNvbG9yIH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHByZXZpZXdJY29uLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjb2xvcicpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHR0aGlzLnBsdWdpbi5zdGF0dXNCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XG5cdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHQvLyBSZS1yZW5kZXIgdG8gc2hvdy9oaWRlIHJlc2V0IGJ1dHRvblxuXHRcdFx0aWYgKHRoaXMuY29udGFpbmVyKSB7XG5cdFx0XHRcdHRoaXMucmVuZGVyKHRoaXMuY29udGFpbmVyKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRcblx0XHQvLyBEZXZpY2UgbW9kZSBpY29uXG5cdFx0Y29uc3QgZGV2aWNlTW9kZVNwYW4gPSBlbnRyeS5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LWRldmljZS1tb2RlJyk7XG5cdFx0ZGV2aWNlTW9kZVNwYW4uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgdGhpcy5nZXREZXZpY2VNb2RlVG9vbHRpcChpdGVtLm1vZGUgfHwgJ2FueScpKTtcblx0XHRkZXZpY2VNb2RlU3Bhbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0dGhpcy50b2dnbGVEZXZpY2VNb2RlKGl0ZW0pO1xuXHRcdH0pO1xuXHRcdHNldEljb24oZGV2aWNlTW9kZVNwYW4sIHRoaXMuZ2V0RGV2aWNlTW9kZUljb24oaXRlbS5tb2RlIHx8ICdhbnknKSk7XG5cdFx0aWYgKGl0ZW0ubW9kZSAmJiBpdGVtLm1vZGUgIT09ICdhbnknKSB7XG5cdFx0XHRkZXZpY2VNb2RlU3Bhbi5hZGRDbGFzcygndWktdHdlYWtlci1hY3RpdmUnKTtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gTUQtb25seSBpY29uXG5cdFx0Y29uc3QgbWRPbmx5U3BhbiA9IGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctbWQtb25seScpO1xuXHRcdG1kT25seVNwYW4uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgaXRlbS5tZE9ubHkgPyAnT25seSBzaG93IG9uIE1hcmtkb3duIGZpbGVzIChlbmFibGVkKScgOiAnT25seSBzaG93IG9uIE1hcmtkb3duIGZpbGVzIChkaXNhYmxlZCknKTtcblx0XHRtZE9ubHlTcGFuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRpdGVtLm1kT25seSA9ICFpdGVtLm1kT25seTtcblx0XHRcdHNldEljb24obWRPbmx5U3BhbiwgaXRlbS5tZE9ubHkgPyAnZmlsZS1jaGVjaycgOiAnZmlsZS14Jyk7XG5cdFx0XHRtZE9ubHlTcGFuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGl0ZW0ubWRPbmx5ID8gJ09ubHkgc2hvdyBvbiBNYXJrZG93biBmaWxlcyAoZW5hYmxlZCknIDogJ09ubHkgc2hvdyBvbiBNYXJrZG93biBmaWxlcyAoZGlzYWJsZWQpJyk7XG5cdFx0XHRpZiAoaXRlbS5tZE9ubHkpIHtcblx0XHRcdFx0bWRPbmx5U3Bhbi5hZGRDbGFzcygndWktdHdlYWtlci1hY3RpdmUnKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG1kT25seVNwYW4ucmVtb3ZlQ2xhc3MoJ3VpLXR3ZWFrZXItYWN0aXZlJyk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLnBsdWdpbi5zdGF0dXNCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XG5cdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0fSk7XG5cdFx0c2V0SWNvbihtZE9ubHlTcGFuLCBpdGVtLm1kT25seSA/ICdmaWxlLWNoZWNrJyA6ICdmaWxlLXgnKTtcblx0XHRpZiAoaXRlbS5tZE9ubHkpIHtcblx0XHRcdG1kT25seVNwYW4uYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItYWN0aXZlJyk7XG5cdFx0fVxuXG5cdFx0Ly8gTG9jayBpY29uIChuZXcgZmVhdHVyZSlcblx0XHRjb25zdCBsb2NrU3BhbiA9IGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctbG9jaycpO1xuXHRcdGxvY2tTcGFuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGl0ZW0uc3RpY2t5ID8gYExvY2tlZCB0byAke2l0ZW0uc3RpY2t5fWAgOiAnVW5sb2NrZWQgLSBjbGljayB0byBsb2NrIHBvc2l0aW9uJyk7XG5cdFx0bG9ja1NwYW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdHRoaXMudG9nZ2xlTG9jayhpdGVtLCBsb2NrU3BhbiwgaW5kZXgsIHRvdGFsSXRlbXMsIHJvd3NDb250YWluZXIsIHNldHRpbmdzKTtcblx0XHR9KTtcblx0XHRzZXRJY29uKGxvY2tTcGFuLCBpdGVtLnN0aWNreSA/ICdsb2NrJyA6ICd1bmxvY2snKTtcblx0XHRpZiAoaXRlbS5zdGlja3kpIHtcblx0XHRcdGxvY2tTcGFuLmFkZENsYXNzKCd1aS10d2Vha2VyLWxvY2tlZCcpO1xuXHRcdH1cblxuXHRcdC8vIERlbGV0ZSBpY29uIGZvciBjdXN0b20gaXRlbXMsIHZpc2liaWxpdHkgaWNvbiBmb3IgZXhpc3RpbmcgaXRlbXNcblx0XHRjb25zdCB2aXNpYmlsaXR5U3BhbiA9IGVudHJ5LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctdmlzaWJpbGl0eScpO1xuXHRcdGlmIChpdGVtLnR5cGUgPT09ICdjdXN0b20nKSB7XG5cdFx0XHQvLyBDdXN0b20gaXRlbXM6IHNob3cgdHJhc2ggaWNvbiAocmVkL3dhcm5pbmcpXG5cdFx0XHR2aXNpYmlsaXR5U3Bhbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnRGVsZXRlIGl0ZW0nKTtcblx0XHRcdHZpc2liaWxpdHlTcGFuLmFkZENsYXNzKCdtb2Qtd2FybmluZycpO1xuXHRcdFx0c2V0Q3NzUHJvcHModmlzaWJpbGl0eVNwYW4sIHsgY29sb3I6ICd2YXIoLS10ZXh0LWVycm9yKScgfSk7XG5cdFx0XHR2aXNpYmlsaXR5U3Bhbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdFx0dm9pZCB0aGlzLnJlbW92ZUl0ZW0ocm93c0NvbnRhaW5lciwgaXRlbSwgc2V0dGluZ3MpO1xuXHRcdFx0fSk7XG5cdFx0XHRzZXRJY29uKHZpc2liaWxpdHlTcGFuLCAndHJhc2gtMicpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBFeGlzdGluZyBpdGVtczogc2hvdyB2aXNpYmlsaXR5IHRvZ2dsZVxuXHRcdFx0dmlzaWJpbGl0eVNwYW4uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgaXRlbS5oaWRkZW4gPyAnSGlkZGVuIC0gY2xpY2sgdG8gc2hvdycgOiAnVmlzaWJsZSAtIGNsaWNrIHRvIGhpZGUnKTtcblx0XHRcdHZpc2liaWxpdHlTcGFuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0XHR0aGlzLnRvZ2dsZVZpc2liaWxpdHkoaXRlbSwgdmlzaWJpbGl0eVNwYW4sIGVudHJ5KTtcblx0XHRcdFx0Ly8gdG9nZ2xlVmlzaWJpbGl0eSBhbHJlYWR5IGNhbGxzIHNhdmVTZXR0aW5ncygpXG5cdFx0XHR9KTtcblx0XHRcdHNldEljb24odmlzaWJpbGl0eVNwYW4sIGl0ZW0uaGlkZGVuID8gJ2V5ZS1vZmYnIDogJ2V5ZScpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBUb2dnbGUgbG9jayBwb3NpdGlvbiBiYXNlZCBvbiBjdXJyZW50IHBvc2l0aW9uXG5cdCAqL1xuXHRwcml2YXRlIHRvZ2dsZUxvY2soXG5cdFx0aXRlbTogU3RhdHVzQmFySXRlbSwgXG5cdFx0bG9ja1NwYW46IEhUTUxFbGVtZW50LCBcblx0XHRjdXJyZW50SW5kZXg6IG51bWJlciwgXG5cdFx0dG90YWxJdGVtczogbnVtYmVyLFxuXHRcdHJvd3NDb250YWluZXI6IEhUTUxFbGVtZW50LFxuXHRcdHNldHRpbmdzOiBVSVNldHRpbmdzXG5cdCk6IHZvaWQge1xuXHRcdC8vIElmIGFscmVhZHkgbG9ja2VkLCB1bmxvY2sgaXRcblx0XHRpZiAoaXRlbS5zdGlja3kpIHtcblx0XHRcdGl0ZW0uc3RpY2t5ID0gZmFsc2U7XG5cdFx0XHRzZXRJY29uKGxvY2tTcGFuLCAndW5sb2NrJyk7XG5cdFx0XHRsb2NrU3Bhbi5yZW1vdmVDbGFzcygndWktdHdlYWtlci1sb2NrZWQnKTtcblx0XHRcdGxvY2tTcGFuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdVbmxvY2tlZCAtIGNsaWNrIHRvIGxvY2sgcG9zaXRpb24nKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gRGV0ZXJtaW5lIGxvY2sgcG9zaXRpb24gYmFzZWQgb24gY3VycmVudCBpbmRleFxuXHRcdFx0Ly8gUG9zaXRpb24gMCBvciAxIC0+IGxvY2sgbGVmdFxuXHRcdFx0Ly8gTGFzdCBwb3NpdGlvbiBvciBzZWNvbmQtdG8tbGFzdCAtPiBsb2NrIHJpZ2h0XG5cdFx0XHRpZiAoY3VycmVudEluZGV4ID09PSAwIHx8IGN1cnJlbnRJbmRleCA9PT0gMSkge1xuXHRcdFx0XHRpdGVtLnN0aWNreSA9ICdsZWZ0Jztcblx0XHRcdH0gZWxzZSBpZiAoY3VycmVudEluZGV4ID09PSB0b3RhbEl0ZW1zIC0gMSB8fCBjdXJyZW50SW5kZXggPT09IHRvdGFsSXRlbXMgLSAyKSB7XG5cdFx0XHRcdGl0ZW0uc3RpY2t5ID0gJ3JpZ2h0Jztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIEZvciBpdGVtcyBpbiB0aGUgbWlkZGxlLCBsb2NrIHRvIHRoZSBuZWFyZXN0IGVuZFxuXHRcdFx0XHRjb25zdCBkaXN0YW5jZVRvU3RhcnQgPSBjdXJyZW50SW5kZXg7XG5cdFx0XHRcdGNvbnN0IGRpc3RhbmNlVG9FbmQgPSB0b3RhbEl0ZW1zIC0gMSAtIGN1cnJlbnRJbmRleDtcblx0XHRcdFx0aXRlbS5zdGlja3kgPSBkaXN0YW5jZVRvU3RhcnQgPD0gZGlzdGFuY2VUb0VuZCA/ICdsZWZ0JyA6ICdyaWdodCc7XG5cdFx0XHR9XG5cdFx0XHRzZXRJY29uKGxvY2tTcGFuLCAnbG9jaycpO1xuXHRcdFx0bG9ja1NwYW4uYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItbG9ja2VkJyk7XG5cdFx0XHRsb2NrU3Bhbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBgTG9ja2VkIHRvICR7aXRlbS5zdGlja3l9YCk7XG5cdFx0fVxuXHRcdFxuXHRcdC8vIFVwZGF0ZSBzdGF0dXMgYmFyIG9yZGVyXG5cdFx0dGhpcy5wbHVnaW4uc3RhdHVzQmFyTWFuYWdlcj8ucmVvcmRlcigpO1xuXHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBUb2dnbGUgdmlzaWJpbGl0eSAoZXhhY3RseSBsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxuXHQgKi9cblx0cHJpdmF0ZSB0b2dnbGVWaXNpYmlsaXR5KGl0ZW06IFN0YXR1c0Jhckl0ZW0sIHZpc2liaWxpdHlTcGFuOiBIVE1MRWxlbWVudCwgZW50cnk6IEhUTUxFbGVtZW50KTogdm9pZCB7XG5cdFx0aXRlbS5oaWRkZW4gPSAhaXRlbS5oaWRkZW47XG5cdFx0XG5cdFx0aWYgKGl0ZW0uaGlkZGVuKSB7XG5cdFx0XHRlbnRyeS5hZGRDbGFzcygndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1oaWRkZW4nKTtcblx0XHRcdHNldEljb24odmlzaWJpbGl0eVNwYW4sICdleWUtb2ZmJyk7XG5cdFx0XHR2aXNpYmlsaXR5U3Bhbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnSGlkZGVuIC0gY2xpY2sgdG8gc2hvdycpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbnRyeS5yZW1vdmVDbGFzcygndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1oaWRkZW4nKTtcblx0XHRcdHNldEljb24odmlzaWJpbGl0eVNwYW4sICdleWUnKTtcblx0XHRcdHZpc2liaWxpdHlTcGFuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdWaXNpYmxlIC0gY2xpY2sgdG8gaGlkZScpO1xuXHRcdH1cblx0XHRcblx0XHR0aGlzLnBsdWdpbi5zdGF0dXNCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XG5cdFx0dm9pZCB0aGlzLnNhdmVTZXR0aW5ncygpOyAvLyBTYXZlIHRoZSBoaWRkZW4gc3RhdGVcblx0fVxuXG5cdC8qKlxuXHQgKiBUb2dnbGUgZGV2aWNlIG1vZGUgKGN5Y2xlcyB0aHJvdWdoOiBhbnkgLT4gZGVza3RvcCAtPiBtb2JpbGUgLT4gdGhpcyBkZXZpY2UgLT4gYW55KVxuXHQgKi9cblx0cHJpdmF0ZSB0b2dnbGVEZXZpY2VNb2RlKGl0ZW06IFN0YXR1c0Jhckl0ZW0pOiB2b2lkIHtcblx0XHRjb25zdCBhcHBJZCA9ICh0aGlzLmFwcCBhcyB7IGFwcElkPzogc3RyaW5nIH0pLmFwcElkIHx8ICd0aGlzLWRldmljZSc7XG5cdFx0Y29uc3QgY3VycmVudE1vZGUgPSBpdGVtLm1vZGUgfHwgJ2FueSc7XG5cdFx0XG5cdFx0Ly8gQ3ljbGUgdGhyb3VnaCBtb2Rlc1xuXHRcdGlmIChjdXJyZW50TW9kZSA9PT0gJ2FueScpIHtcblx0XHRcdGl0ZW0ubW9kZSA9ICdkZXNrdG9wJztcblx0XHR9IGVsc2UgaWYgKGN1cnJlbnRNb2RlID09PSAnZGVza3RvcCcpIHtcblx0XHRcdGl0ZW0ubW9kZSA9ICdtb2JpbGUnO1xuXHRcdH0gZWxzZSBpZiAoY3VycmVudE1vZGUgPT09ICdtb2JpbGUnKSB7XG5cdFx0XHRpdGVtLm1vZGUgPSBhcHBJZDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aXRlbS5tb2RlID0gJ2FueSc7XG5cdFx0fVxuXHRcdFxuXHRcdC8vIFVwZGF0ZSBpY29uIGFuZCB0b29sdGlwXG5cdFx0Y29uc3QgZGV2aWNlTW9kZVNwYW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS11aS10d2Vha2VyLWlkPVwiJHtpdGVtLmlkfVwiXSAudWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1kZXZpY2UtbW9kZWApIGFzIEhUTUxFbGVtZW50O1xuXHRcdGlmIChkZXZpY2VNb2RlU3Bhbikge1xuXHRcdFx0c2V0SWNvbihkZXZpY2VNb2RlU3BhbiwgdGhpcy5nZXREZXZpY2VNb2RlSWNvbihpdGVtLm1vZGUpKTtcblx0XHRcdGNvbnN0IHRvb2x0aXAgPSB0aGlzLmdldERldmljZU1vZGVUb29sdGlwKGl0ZW0ubW9kZSk7XG5cdFx0XHRkZXZpY2VNb2RlU3Bhbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCB0b29sdGlwKTtcblx0XHRcdGlmIChpdGVtLm1vZGUgJiYgaXRlbS5tb2RlICE9PSAnYW55Jykge1xuXHRcdFx0XHRkZXZpY2VNb2RlU3Bhbi5hZGRDbGFzcygndWktdHdlYWtlci1hY3RpdmUnKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRldmljZU1vZGVTcGFuLnJlbW92ZUNsYXNzKCd1aS10d2Vha2VyLWFjdGl2ZScpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHR0aGlzLnBsdWdpbi5zdGF0dXNCYXJNYW5hZ2VyPy5yZW9yZGVyKCk7XG5cdFx0dm9pZCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0IGRldmljZSBtb2RlIGljb25cblx0ICovXG5cdHByaXZhdGUgZ2V0RGV2aWNlTW9kZUljb24obW9kZTogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRpZiAobW9kZSA9PT0gJ2Rlc2t0b3AnKSByZXR1cm4gJ21vbml0b3InO1xuXHRcdGlmIChtb2RlID09PSAnbW9iaWxlJykgcmV0dXJuICdzbWFydHBob25lJztcblx0XHRpZiAobW9kZSA9PT0gJ2FueScgfHwgIW1vZGUpIHJldHVybiAnbW9uaXRvci1zbWFydHBob25lJztcblx0XHRyZXR1cm4gJ21vbml0b3ItY2hlY2snOyAvLyBcInRoaXMgZGV2aWNlXCJcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCBkZXZpY2UgbW9kZSB0b29sdGlwXG5cdCAqL1xuXHRwcml2YXRlIGdldERldmljZU1vZGVUb29sdGlwKG1vZGU6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0aWYgKG1vZGUgPT09ICdkZXNrdG9wJykgcmV0dXJuICdEZXZpY2UgbW9kZTogRGVza3RvcCBvbmx5Jztcblx0XHRpZiAobW9kZSA9PT0gJ21vYmlsZScpIHJldHVybiAnRGV2aWNlIG1vZGU6IE1vYmlsZSBvbmx5Jztcblx0XHRpZiAobW9kZSA9PT0gJ2FueScgfHwgIW1vZGUpIHJldHVybiAnRGV2aWNlIG1vZGU6IEFsbCBkZXZpY2VzJztcblx0XHRyZXR1cm4gJ0RldmljZSBtb2RlOiBUaGlzIGRldmljZSc7XG5cdH1cblxuXHQvKipcblx0ICogUmVtb3ZlIGl0ZW0gKGV4YWN0bHkgbGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplcilcblx0ICovXG5cdHByaXZhdGUgYXN5bmMgcmVtb3ZlSXRlbShyb3dzQ29udGFpbmVyOiBIVE1MRWxlbWVudCwgaXRlbTogU3RhdHVzQmFySXRlbSwgc2V0dGluZ3M6IFVJU2V0dGluZ3MpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBlbnRyeSA9IHJvd3NDb250YWluZXIucXVlcnlTZWxlY3RvcihgW2RhdGEtdWktdHdlYWtlci1pZD1cIiR7aXRlbS5pZH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcblx0XHRpZiAoZW50cnkpIHtcblx0XHRcdHJvd3NDb250YWluZXIucmVtb3ZlQ2hpbGQoZW50cnkpO1xuXHRcdH1cblx0XHRcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zdGF0dXNCYXJNYW5hZ2VyPy5yZW1vdmVJdGVtKGl0ZW0pO1xuXHRcdFxuXHRcdC8vIFBvc2l0aW9uIGlzIGltcGxpY2l0IGluIGFycmF5IG9yZGVyIChsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxuXHRcdFxuXHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBIYW5kbGUgbW91c2UgZG93biBmb3IgZHJhZ2dpbmcgKGV4YWN0bHkgbGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplcilcblx0ICovXG5cdHByaXZhdGUgaGFuZGxlTW91c2VEb3duKFxuXHRcdGV2ZW50OiBNb3VzZUV2ZW50LFxuXHRcdHJvd3NDb250YWluZXI6IEhUTUxFbGVtZW50LFxuXHRcdGl0ZW06IFN0YXR1c0Jhckl0ZW0sXG5cdFx0c2V0dGluZ3M6IFVJU2V0dGluZ3Ncblx0KTogdm9pZCB7XG5cdFx0aWYgKGRyYWdnaW5nKSByZXR1cm47XG5cdFx0ZHJhZ2dpbmcgPSB0cnVlO1xuXG5cdFx0Y29uc3QgZW50cnkgPSByb3dzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXVpLXR3ZWFrZXItaWQ9XCIke2l0ZW0uaWR9XCJdYCkgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0aWYgKCFlbnRyeSkgcmV0dXJuO1xuXG5cdFx0Ly8gQ3JlYXRlIGNsb25lXG5cdFx0Y29uc3Qgc3RhdGlvbmFyeVJvdyA9IGVudHJ5O1xuXHRcdHN0YXRpb25hcnlSb3cuYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctY2xvbmUnKTtcblxuXHRcdGNvbnN0IG1vdmFibGVSb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRtb3ZhYmxlUm93LmFkZENsYXNzKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93Jyk7XG5cdFx0bW92YWJsZVJvdy5hZGRDbGFzcygndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1kcmFnJyk7XG5cdFx0Ly8gRW5zdXJlIGdyaWQgc3RydWN0dXJlIGlzIG1haW50YWluZWRcblx0XHRzZXRDc3NQcm9wcyhtb3ZhYmxlUm93LCB7XG5cdFx0XHRkaXNwbGF5OiAnZ3JpZCcsXG5cdFx0XHRncmlkVGVtcGxhdGVDb2x1bW5zOiAnMS4yNWVtIDAuNWZyIDAuOGZyIDJlbSAyZW0gMmVtIDJlbSAyZW0gMmVtJ1xuXHRcdH0pO1xuXHRcdGlmIChpdGVtLmhpZGRlbikgbW92YWJsZVJvdy5hZGRDbGFzcygndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1oaWRkZW4nKTtcblx0XHRpZiAoaXRlbS50eXBlID09PSAnZXhpc3RpbmcnKSB7XG5cdFx0XHRjb25zdCBzdGF0dXNCYXJDb250YWluZXIgPSAodGhpcy5wbHVnaW4uYXBwIGFzIHsgc3RhdHVzQmFyPzogeyBjb250YWluZXJFbD86IEhUTUxFbGVtZW50IH0gfSkuc3RhdHVzQmFyPy5jb250YWluZXJFbDtcblx0XHRcdGNvbnN0IGFjdHVhbEVsZW1lbnQgPSBzdGF0dXNCYXJDb250YWluZXI/LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXVpLXR3ZWFrZXItaWQ9XCIke2l0ZW0uaWR9XCJdYCkgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRpZiAoIWFjdHVhbEVsZW1lbnQpIG1vdmFibGVSb3cuYWRkQ2xhc3MoJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctZGlzYWJsZWQnKTtcblx0XHR9XG5cblx0XHQvLyBHZXQgdGhlIHdyYXBwZXIgY29udGFpbmVyXG5cdFx0Y29uc3Qgd3JhcHBlciA9IHJvd3NDb250YWluZXIuY2xvc2VzdCgnLnVpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3dzLXdyYXBwZXInKSB8fCBcblx0XHRcdHJvd3NDb250YWluZXIucGFyZW50RWxlbWVudCB8fCBcblx0XHRcdHJvd3NDb250YWluZXI7XG5cdFx0d3JhcHBlci5hcHBlbmRDaGlsZChtb3ZhYmxlUm93KTtcblxuXHRcdC8vIEdldCBwb3NpdGlvbiByZWxhdGl2ZSB0byB3cmFwcGVyIChleGFjdGx5IGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXG5cdFx0Y29uc3QgY29udGFpbmVyWCA9IHdyYXBwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcblx0XHRjb25zdCBjb250YWluZXJZID0gd3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG5cblx0XHQvLyBQb3NpdGlvbiBtb3ZhYmxlIHJvdyAoZXhhY3RseSBsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxuXHRcdGNvbnN0IHN0YXRpb25hcnlSZWN0ID0gc3RhdGlvbmFyeVJvdy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHRzZXRDc3NQcm9wcyhtb3ZhYmxlUm93LCB7IFxuXHRcdFx0cG9zaXRpb246ICdhYnNvbHV0ZScsXG5cdFx0XHRsZWZ0OiAoc3RhdGlvbmFyeVJlY3QubGVmdCAtIGNvbnRhaW5lclgpICsgJ3B4Jyxcblx0XHRcdHRvcDogKHN0YXRpb25hcnlSZWN0LnRvcCAtIGNvbnRhaW5lclkpICsgJ3B4Jyxcblx0XHRcdHdpZHRoOiBzdGF0aW9uYXJ5Um93Lm9mZnNldFdpZHRoICsgJ3B4J1xuXHRcdH0pO1xuXG5cdFx0Ly8gQ3JlYXRlIHNpbXBsaWZpZWQgZHJhZyBwcmV2aWV3IChkb24ndCBjbG9uZSBjb21wbGV4IGVsZW1lbnRzIHRvIGF2b2lkIGJyZWFraW5nKVxuXHRcdC8vIEp1c3Qgc2hvdyB0aXRsZSBhbmQgcHJldmlldywgc2tpcCBpbnRlcmFjdGl2ZSBlbGVtZW50c1xuXHRcdG1vdmFibGVSb3cuY3JlYXRlU3BhbigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1oYW5kbGUnKTtcblx0XHRjb25zdCBkcmFnVGl0bGUgPSBtb3ZhYmxlUm93LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctdGl0bGUnKTtcblx0XHRkcmFnVGl0bGUudGV4dENvbnRlbnQgPSBpdGVtLm5hbWU7XG5cdFx0Y29uc3QgZHJhZ1ByZXZpZXcgPSBtb3ZhYmxlUm93LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctcHJldmlldycpO1xuXHRcdC8vIEZvciBleGlzdGluZyBpdGVtcywgdHJ5IHRvIGNsb25lIHByZXZpZXcgaWYgYXZhaWxhYmxlXG5cdFx0aWYgKGl0ZW0udHlwZSA9PT0gJ2V4aXN0aW5nJykge1xuXHRcdFx0Y29uc3Qgc3RhdHVzQmFyQ29udGFpbmVyID0gKHRoaXMucGx1Z2luLmFwcCBhcyB7IHN0YXR1c0Jhcj86IHsgY29udGFpbmVyRWw/OiBIVE1MRWxlbWVudCB9IH0pLnN0YXR1c0Jhcj8uY29udGFpbmVyRWw7XG5cdFx0XHRjb25zdCBhY3R1YWxFbGVtZW50ID0gc3RhdHVzQmFyQ29udGFpbmVyPy5xdWVyeVNlbGVjdG9yKGBbZGF0YS11aS10d2Vha2VyLXN0YXR1cy1iYXItaWQ9XCIke2l0ZW0uaWR9XCJdYCkgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRpZiAoYWN0dWFsRWxlbWVudCkge1xuXHRcdFx0XHRjb25zdCBjbG9uZWQgPSBhY3R1YWxFbGVtZW50LmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRWxlbWVudDtcblx0XHRcdFx0Ly8gUmVtb3ZlIHRvb2x0aXAgYXR0cmlidXRlcyBmcm9tIGNsb25lZCBlbGVtZW50XG5cdFx0XHRcdGNsb25lZC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKTtcblx0XHRcdFx0Y2xvbmVkLnJlbW92ZUF0dHJpYnV0ZSgndGl0bGUnKTtcblx0XHRcdFx0Ly8gQWxzbyByZW1vdmUgZnJvbSBhbnkgY2hpbGRyZW5cblx0XHRcdFx0Y2xvbmVkLnF1ZXJ5U2VsZWN0b3JBbGwoJ1thcmlhLWxhYmVsXSwgW3RpdGxlXScpLmZvckVhY2goZWwgPT4ge1xuXHRcdFx0XHRcdGVsLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcpO1xuXHRcdFx0XHRcdGVsLnJlbW92ZUF0dHJpYnV0ZSgndGl0bGUnKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGRyYWdQcmV2aWV3LmFwcGVuZENoaWxkKGNsb25lZCk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChpdGVtLmljb24pIHtcblx0XHRcdGNvbnN0IHByZXZpZXdJY29uID0gZHJhZ1ByZXZpZXcuY3JlYXRlU3Bhbignc3RhdHVzLWJhci1pdGVtIGNsaWNrYWJsZS1pY29uJyk7XG5cdFx0XHRzZXRJY29uKHByZXZpZXdJY29uLCBpdGVtLmljb24pO1xuXHRcdFx0Ly8gUmVtb3ZlIGFueSB0b29sdGlwIGF0dHJpYnV0ZXMgZnJvbSBkcmFnIHByZXZpZXdcblx0XHRcdHByZXZpZXdJY29uLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcpO1xuXHRcdFx0cHJldmlld0ljb24ucmVtb3ZlQXR0cmlidXRlKCd0aXRsZScpO1xuXHRcdFx0aWYgKGl0ZW0uY29sb3IgJiYgaXRlbS5jb2xvciAhPT0gJyMwMDAwMDAnKSB7XG5cdFx0XHRcdHNldENzc1Byb3BzKHByZXZpZXdJY29uLCB7IGNvbG9yOiBpdGVtLmNvbG9yIH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0XHQvLyBBZGQgZW1wdHkgc3BhbnMgZm9yIHRoZSBpY29uIGNvbHVtbnMgdG8gbWFpbnRhaW4gZ3JpZCBzdHJ1Y3R1cmVcblx0XHRtb3ZhYmxlUm93LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctcmVzZXQtY29sb3InKTtcblx0XHRtb3ZhYmxlUm93LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctY29sb3ItcGlja2VyJyk7XG5cdFx0bW92YWJsZVJvdy5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LWRldmljZS1tb2RlJyk7XG5cdFx0bW92YWJsZVJvdy5jcmVhdGVTcGFuKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItcm93LW1kLW9ubHknKTtcblx0XHRjb25zdCBkcmFnTG9jayA9IG1vdmFibGVSb3cuY3JlYXRlU3BhbigndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1sb2NrJyk7XG5cdFx0c2V0SWNvbihkcmFnTG9jaywgaXRlbS5zdGlja3kgPyAnbG9jaycgOiAndW5sb2NrJyk7XG5cdFx0Y29uc3QgZHJhZ1Zpc2liaWxpdHkgPSBtb3ZhYmxlUm93LmNyZWF0ZVNwYW4oJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1yb3ctdmlzaWJpbGl0eScpO1xuXHRcdHNldEljb24oZHJhZ1Zpc2liaWxpdHksIGl0ZW0uaGlkZGVuID8gJ2V5ZS1vZmYnIDogJ2V5ZScpO1xuXG5cdFx0Ly8gQ2FsY3VsYXRlIG9mZnNldHMgKGV4YWN0bHkgbGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplcilcblx0XHQvLyBGaXJzdCBnZXQgdGhlIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSBtb3ZhYmxlUm93XG5cdFx0bGV0IG9mZnNldFggPSBldmVudC5jbGllbnRYIC0gbW92YWJsZVJvdy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xuXHRcdGxldCBvZmZzZXRZID0gZXZlbnQuY2xpZW50WSAtIG1vdmFibGVSb3cuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuXHRcdC8vIFRoZW4gYWRkIGNvbnRhaW5lciBvZmZzZXQgKGV4YWN0bHkgbGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplcilcblx0XHRvZmZzZXRYID0gb2Zmc2V0WCArIGNvbnRhaW5lclg7XG5cdFx0b2Zmc2V0WSA9IG9mZnNldFkgKyBjb250YWluZXJZO1xuXHRcdGxldCBpbmRleCA9IEFycmF5LmZyb20ocm93c0NvbnRhaW5lci5jaGlsZHJlbikuaW5kZXhPZihzdGF0aW9uYXJ5Um93KTtcblxuXHRcdC8vIEhhbmRsZSBtb3VzZSBtb3ZlIChleGFjdGx5IGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXG5cdFx0Y29uc3QgaGFuZGxlTW91c2VNb3ZlID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdC8vIFVwZGF0ZSBwb3NpdGlvbiAoZXhhY3RseSBsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxuXHRcdFx0Ly8gb2Zmc2V0WC9vZmZzZXRZIGFscmVhZHkgaW5jbHVkZSBjb250YWluZXJYL2NvbnRhaW5lcllcblx0XHRcdHNldENzc1Byb3BzKG1vdmFibGVSb3csIHtcblx0XHRcdFx0bGVmdDogKGUuY2xpZW50WCAtIG9mZnNldFgpICsgJ3B4Jyxcblx0XHRcdFx0dG9wOiAoZS5jbGllbnRZIC0gb2Zmc2V0WSkgKyAncHgnXG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gQ2FsY3VsYXRlIGRpc3RhbmNlIChsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxuXHRcdFx0Y29uc3QgZGlzdCA9IG1vdmFibGVSb3cuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gc3RhdGlvbmFyeVJvdy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG5cdFx0XHRcblx0XHRcdC8vIElmIG1vdmVkIGZhciBlbm91Z2gsIGNoYW5nZSBwb3NpdGlvbiAobGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplcilcblx0XHRcdGlmIChNYXRoLmFicyhkaXN0KSA+IHN0YXRpb25hcnlSb3cub2Zmc2V0SGVpZ2h0ICogMC43NSkge1xuXHRcdFx0XHRjb25zdCBkaXIgPSBkaXN0IC8gTWF0aC5hYnMoZGlzdCk7XG5cdFx0XHRcdGNvbnN0IG5ld0luZGV4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oaW5kZXggKyBkaXIsIHJvd3NDb250YWluZXIuY2hpbGRyZW4ubGVuZ3RoIC0gMSkpO1xuXHRcdFx0XHRpZiAobmV3SW5kZXggIT09IGluZGV4KSB7XG5cdFx0XHRcdFx0Ly8gTW92ZSBpbiBET00gKGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXG5cdFx0XHRcdFx0cm93c0NvbnRhaW5lci5yZW1vdmVDaGlsZChzdGF0aW9uYXJ5Um93KTtcblx0XHRcdFx0XHRpZiAobmV3SW5kZXggPCByb3dzQ29udGFpbmVyLmNoaWxkcmVuLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0cm93c0NvbnRhaW5lci5pbnNlcnRCZWZvcmUoc3RhdGlvbmFyeVJvdywgcm93c0NvbnRhaW5lci5jaGlsZHJlbltuZXdJbmRleF0pO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyb3dzQ29udGFpbmVyLmFwcGVuZENoaWxkKHN0YXRpb25hcnlSb3cpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBVcGRhdGUgYXJyYXkgb3JkZXIgKGRvbid0IHNhdmUgZHVyaW5nIGRyYWcgLSB3YWl0IGZvciBtb3VzZSB1cClcblx0XHRcdFx0XHRpZiAoc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMpIHtcblx0XHRcdFx0XHRcdGNvbnN0IG9sZEluZGV4ID0gc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMuZmluZEluZGV4KChpOiBTdGF0dXNCYXJJdGVtKSA9PiBpLmlkID09PSBpdGVtLmlkKTtcblx0XHRcdFx0XHRcdGlmIChvbGRJbmRleCAhPT0gLTEgJiYgb2xkSW5kZXggIT09IG5ld0luZGV4KSB7XG5cdFx0XHRcdFx0XHRcdGFycmF5TW92ZU11dGFibGUoc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMsIG9sZEluZGV4LCBuZXdJbmRleCk7XG5cdFx0XHRcdFx0XHRcdC8vIFVwZGF0ZSB0aGUgYWN0dWFsIHN0YXR1cyBiYXIgb3JkZXIgaW1tZWRpYXRlbHkgKHZpc3VhbCBmZWVkYmFjaylcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc3RhdHVzQmFyTWFuYWdlcj8ucmVvcmRlcigpO1xuXHRcdFx0XHRcdFx0XHQvLyBEb24ndCBzYXZlU2V0dGluZ3MgZHVyaW5nIGRyYWcgLSB3YWl0IGZvciBtb3VzZSB1cCB0byBzYXZlIHBvc2l0aW9uXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGluZGV4ID0gbmV3SW5kZXg7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly8gSGFuZGxlIG1vdXNlIHVwXG5cdFx0Y29uc3QgaGFuZGxlTW91c2VVcCA9ICgpID0+IHtcblx0XHRcdC8vIENsZWFuIHVwIGRyYWcgdmlzdWFsc1xuXHRcdFx0c3RhdGlvbmFyeVJvdy5yZW1vdmVDbGFzcygndWktdHdlYWtlci1zdGF0dXMtYmFyLXJvdy1jbG9uZScpO1xuXHRcdFx0aWYgKG1vdmFibGVSb3cucGFyZW50RWxlbWVudCA9PT0gd3JhcHBlcikge1xuXHRcdFx0XHR3cmFwcGVyLnJlbW92ZUNoaWxkKG1vdmFibGVSb3cpO1xuXHRcdFx0fVxuXHRcdFx0ZHJhZ2dpbmcgPSBmYWxzZTtcblx0XHRcdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBoYW5kbGVNb3VzZU1vdmUpO1xuXHRcdFx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBoYW5kbGVNb3VzZVVwKTtcblx0XHRcdFxuXHRcdFx0Ly8gVXBkYXRlIHN0YXR1cyBiYXIgb3JkZXIgYW5kIHNhdmUgcG9zaXRpb24gYWZ0ZXIgZHJhZyBjb21wbGV0ZXNcblx0XHRcdHRoaXMucGx1Z2luLnN0YXR1c0Jhck1hbmFnZXI/LnJlb3JkZXIoKTtcblx0XHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblx0XHR9O1xuXG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZU1vdXNlTW92ZSk7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBoYW5kbGVNb3VzZVVwKTtcblx0fVxufVxuIiwgIi8qKlxuICogRXhwbG9yZXIgVGFiIC0gQ3VzdG9tIGNvbW1hbmQgYnV0dG9ucyBmb3IgZmlsZSBleHBsb3JlciBuYXZpZ2F0aW9uIGFyZWFcbiAqIEJhc2VkIG9uIFRhYkJhclRhYiwgYnV0IGZvciBleHBsb3JlciBidXR0b25zIHdpdGggbmF0aXZlIENTUyBjbGFzc2VzXG4gKi9cblxuaW1wb3J0IHsgc2V0SWNvbiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFRhYlJlbmRlcmVyIH0gZnJvbSAnLi4vY29tbW9uL1RhYlJlbmRlcmVyJztcbmltcG9ydCB7IGNyZWF0ZVNldHRpbmdzR3JvdXAgfSBmcm9tICcuLi8uLi91dGlscy9zZXR0aW5ncy1jb21wYXQnO1xuaW1wb3J0IHsgQ29tbWFuZEljb25QYWlyIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xuaW1wb3J0IHsgY2hvb3NlTmV3Q29tbWFuZCB9IGZyb20gJy4uLy4uL3V0aWxzL2Nob29zZUNvbW1hbmQnO1xuaW1wb3J0IHsgSWNvblBpY2tlck1vZGFsIH0gZnJvbSAnLi4vLi4vbW9kYWxzL0ljb25QaWNrZXJNb2RhbCc7XG5pbXBvcnQgeyBzZXRDc3NQcm9wcyB9IGZyb20gJy4uLy4uL3VpTWFuYWdlcic7XG5cbi8vIFNpbXBsZSBhcnJheSBtb3ZlIHV0aWxpdHlcbmZ1bmN0aW9uIGFycmF5TW92ZU11dGFibGU8VD4oYXJyYXk6IFRbXSwgZnJvbTogbnVtYmVyLCB0bzogbnVtYmVyKTogdm9pZCB7XG5cdGNvbnN0IGl0ZW0gPSBhcnJheVtmcm9tXTtcblx0YXJyYXkuc3BsaWNlKGZyb20sIDEpO1xuXHRhcnJheS5zcGxpY2UodG8sIDAsIGl0ZW0pO1xufVxuXG5leHBvcnQgY2xhc3MgRXhwbG9yZXJUYWIgZXh0ZW5kcyBUYWJSZW5kZXJlciB7XG5cdHByaXZhdGUgZXhwYW5kZWRTdGF0ZXMgPSBuZXcgTWFwPHN0cmluZywgYm9vbGVhbj4oKTtcblxuXHRyZW5kZXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuXHRcdGNvbnRhaW5lci5lbXB0eSgpO1xuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5nZXRTZXR0aW5ncygpO1xuXHRcdFxuXHRcdC8vIEVuc3VyZSBleHBsb3JlckNvbW1hbmRzIGV4aXN0c1xuXHRcdGlmICghc2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcykge1xuXHRcdFx0c2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcyA9IFtdO1xuXHRcdH1cblxuXHRcdC8vIEVuc3VyZSBuYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9ycyBleGlzdHNcblx0XHRpZiAoIXNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzKSB7XG5cdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9ycyA9IHtcblx0XHRcdFx0bmV3Tm90ZTogdW5kZWZpbmVkLFxuXHRcdFx0XHRuZXdGb2xkZXI6IHVuZGVmaW5lZCxcblx0XHRcdFx0c29ydE9yZGVyOiB1bmRlZmluZWQsXG5cdFx0XHRcdGF1dG9SZXZlYWw6IHVuZGVmaW5lZCxcblx0XHRcdFx0Y29sbGFwc2VBbGw6IHVuZGVmaW5lZCxcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0Ly8gRW5zdXJlIG5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnMgZXhpc3RzXG5cdFx0aWYgKCFzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zKSB7XG5cdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zID0ge1xuXHRcdFx0XHRuZXdOb3RlOiB1bmRlZmluZWQsXG5cdFx0XHRcdG5ld0ZvbGRlcjogdW5kZWZpbmVkLFxuXHRcdFx0XHRzb3J0T3JkZXI6IHVuZGVmaW5lZCxcblx0XHRcdFx0YXV0b1JldmVhbDogdW5kZWZpbmVkLFxuXHRcdFx0XHRjb2xsYXBzZUFsbDogdW5kZWZpbmVkLFxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHQvLyBOYXRpdmUgZXhwbG9yZXIgYnV0dG9uIGNvbnRyb2xzIChhdCB0aGUgdG9wKVxuXHRcdC8vIFN0b3JlIHJlZmVyZW5jZSB0byBuYXRpdmUgYnV0dG9ucyBjb250YWluZXIgZm9yIHRhcmdldGVkIHJlLXJlbmRlcnNcblx0XHRjb25zdCBuYXRpdmVCdXR0b25zQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ25hdGl2ZS1leHBsb3Jlci1idXR0b25zLWNvbnRhaW5lcicgfSk7XG5cdFx0dGhpcy5yZW5kZXJOYXRpdmVCdXR0b25Db250cm9scyhuYXRpdmVCdXR0b25zQ29udGFpbmVyLCBjb250YWluZXIpO1xuXG5cdFx0Ly8gU2VwYXJhdG9yIGJldHdlZW4gbmF0aXZlIGJ1dHRvbnMgYW5kIGN1c3RvbSBjb21tYW5kcyAoYWx3YXlzIHNob3cpXG5cdFx0Y29udGFpbmVyLmNyZWF0ZUVsKCdocicpO1xuXG5cdFx0Ly8gTGlzdCBvZiBjb21tYW5kcyB1c2luZyBTZXR0aW5nIGNvbXBvbmVudHMgKGxpa2UgVGFiQmFyVGFiKVxuXHRcdHNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMuZm9yRWFjaCgocGFpciwgaW5kZXgpID0+IHtcblx0XHRcdHRoaXMucmVuZGVyQ29tbWFuZEl0ZW0oY29udGFpbmVyLCBwYWlyLCBpbmRleCk7XG5cdFx0fSk7XG5cblx0XHQvLyBBZGQgY29tbWFuZCBidXR0b24gKGF0IHRoZSBlbmQpXG5cdFx0aWYgKHNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMubGVuZ3RoID4gMCkge1xuXHRcdFx0Ly8gQWRkIHNlcGFyYXRvclxuXHRcdFx0Y29udGFpbmVyLmNyZWF0ZUVsKCdocicpO1xuXHRcdH1cblx0XHRcblx0XHRjb25zdCBhZGRHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyLCB1bmRlZmluZWQsICd1aS10d2Vha2VyJyk7XG5cdFx0YWRkR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZSgnQWRkIGNvbW1hbmQnKVxuXHRcdFx0XHQuc2V0RGVzYygnQWRkIGEgbmV3IGNvbW1hbmQgYnV0dG9uIHRvIHRoZSBmaWxlIGV4cGxvcmVyIG5hdmlnYXRpb24gYXJlYScpXG5cdFx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xuXHRcdFx0XHRcdC8vIEFkZCBpY29uIHRvIHRoZSBidXR0b25cblx0XHRcdFx0XHRjb25zdCBidXR0b25FbCA9IGJ1dHRvbi5idXR0b25FbDtcblx0XHRcdFx0XHRjb25zdCBpY29uQ29udGFpbmVyID0gYnV0dG9uRWwuY3JlYXRlU3Bhbih7IGNsczogJ3VpLXR3ZWFrZXItYWRkLWljb24nIH0pO1xuXHRcdFx0XHRcdHNldEljb24oaWNvbkNvbnRhaW5lciwgJ2x1Y2lkZS1pbWFnZS1wbHVzJyk7XG5cdFx0XHRcdFx0YnV0dG9uRWwuaW5zZXJ0QmVmb3JlKGljb25Db250YWluZXIsIGJ1dHRvbkVsLmZpcnN0Q2hpbGQpO1xuXHRcdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdBZGQgY29tbWFuZCcpLnNldEN0YSgpLm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHBhaXIgPSBhd2FpdCBjaG9vc2VOZXdDb21tYW5kKHRoaXMucGx1Z2luKTtcblx0XHRcdFx0XHRcdFx0XHQvLyBQdXNoIGRpcmVjdGx5IHRvIHNldHRpbmdzIGFuZCBzYXZlXG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcy5wdXNoKHBhaXIpO1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5yZW9yZGVyKCk7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcblx0XHRcdFx0XHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gVXNlciBjYW5jZWxsZWRcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSkoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHQvLyBBZGQgd2FybmluZyBtZXNzYWdlIChsaWtlIENvbW1hbmRlciBwbHVnaW4pXG5cdFx0Y29uc3Qgd2FybmluZ0RpdiA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdFx0Y2xzOiAnY2FsbG91dCcsXG5cdFx0XHRhdHRyOiB7ICdkYXRhLWNhbGxvdXQnOiAnd2FybmluZycgfVxuXHRcdH0pO1xuXHRcdHdhcm5pbmdEaXYuY3JlYXRlRWwoJ3AnLCB7XG5cdFx0XHR0ZXh0OiAnV2hlbiBjbGlja2luZyBvbiBhIGNvbW1hbmQgaW4gdGhlIGV4cGxvcmVyLCB0aGUgZXhwbG9yZXIgdmlldyB3aWxsIGJlY29tZSBmb2N1c2VkLiBUaGlzIG1pZ2h0IGludGVyZmVyZSB3aXRoIGNvbW1hbmRzIHRoYXQgYXJlIHN1cHBvc2VkIHRvIGJlIGV4ZWN1dGVkIG9uIGFuIGFjdGl2ZSBmaWxlIG9yIGV4cGxvcmVyLidcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyTmF0aXZlQnV0dG9uQ29udHJvbHMoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgbWFpbkNvbnRhaW5lcj86IEhUTUxFbGVtZW50KTogdm9pZCB7XG5cdFx0Ly8gQ2xlYXIgY29udGFpbmVyIGlmIHJlLXJlbmRlcmluZ1xuXHRcdGNvbnRhaW5lci5lbXB0eSgpO1xuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5nZXRTZXR0aW5ncygpO1xuXHRcdGNvbnN0IGdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXIsICdOYXRpdmUgZXhwbG9yZXIgYnV0dG9ucycsICd1aS10d2Vha2VyJyk7XG5cdFx0XG5cdFx0Ly8gVXNlIG1haW5Db250YWluZXIgZm9yIHNjcm9sbCBwb3NpdGlvbiBpZiBwcm92aWRlZCwgb3RoZXJ3aXNlIHVzZSBjb250YWluZXJcblx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBtYWluQ29udGFpbmVyIHx8IGNvbnRhaW5lcjtcblxuXHRcdC8vIEhlbHBlciB0byByZW5kZXIgYSBuYXRpdmUgYnV0dG9uIGNvbnRyb2xcblx0XHRjb25zdCByZW5kZXJOYXRpdmVCdXR0b24gPSAoXG5cdFx0XHRuYW1lOiBzdHJpbmcsXG5cdFx0XHRzZXR0aW5nS2V5OiAnbmV3Tm90ZUJ1dHRvbicgfCAnbmV3Rm9sZGVyQnV0dG9uJyB8ICdzb3J0T3JkZXJCdXR0b24nIHwgJ2F1dG9SZXZlYWxCdXR0b24nIHwgJ2NvbGxhcHNlQWxsQnV0dG9uJyxcblx0XHRcdGNvbG9yS2V5OiAnbmV3Tm90ZScgfCAnbmV3Rm9sZGVyJyB8ICdzb3J0T3JkZXInIHwgJ2F1dG9SZXZlYWwnIHwgJ2NvbGxhcHNlQWxsJ1xuXHRcdCkgPT4ge1xuXHRcdFx0Y29uc3QgaXNIaWRkZW4gPSBzZXR0aW5nc1tzZXR0aW5nS2V5XTtcblx0XHRcdGNvbnN0IGNvbG9yID0gc2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25Db2xvcnM/Lltjb2xvcktleV07XG5cdFx0XHRjb25zdCBpY29uT3ZlcnJpZGUgPSBzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zPy5bY29sb3JLZXldO1xuXG5cdFx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XG5cdFx0XHRcdHNldHRpbmdcblx0XHRcdFx0XHQuc2V0TmFtZShuYW1lKVxuXHRcdFx0XHRcdC5zZXREZXNjKCcnKVxuXHRcdFx0XHRcdC5hZGRFeHRyYUJ1dHRvbigoYnV0dG9uKSA9PiB7XG5cdFx0XHRcdFx0XHQvLyBFeWViYWxsIHRvZ2dsZSAtIGV5ZSB3aGVuIHZpc2libGUsIGV5ZS1vZmYgd2hlbiBoaWRkZW5cblx0XHRcdFx0XHRcdGNvbnN0IGljb25FbCA9IGJ1dHRvbi5leHRyYVNldHRpbmdzRWw7XG5cdFx0XHRcdFx0XHRzZXRJY29uKGljb25FbCwgaXNIaWRkZW4gPyAnZXllLW9mZicgOiAnZXllJyk7XG5cdFx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcChpc0hpZGRlbiA/ICdTaG93IGJ1dHRvbicgOiAnSGlkZSBidXR0b24nKTtcblx0XHRcdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdC8vIFJlYWQgY3VycmVudCB2YWx1ZSBmcm9tIHNldHRpbmdzIGluc3RlYWQgb2YgdXNpbmcgY2FwdHVyZWQgaXNIaWRkZW5cblx0XHRcdFx0XHRcdFx0XHRjb25zdCBjdXJyZW50VmFsdWUgPSBzZXR0aW5nc1tzZXR0aW5nS2V5XTtcblx0XHRcdFx0XHRcdFx0XHRzZXR0aW5nc1tzZXR0aW5nS2V5XSA9ICFjdXJyZW50VmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgaWNvbiBhbmQgdG9vbHRpcCBpbiBwbGFjZSBpbnN0ZWFkIG9mIGZ1bGwgcmUtcmVuZGVyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgbmV3SXNIaWRkZW4gPSBzZXR0aW5nc1tzZXR0aW5nS2V5XTtcblx0XHRcdFx0XHRcdFx0XHRzZXRJY29uKGljb25FbCwgbmV3SXNIaWRkZW4gPyAnZXllLW9mZicgOiAnZXllJyk7XG5cdFx0XHRcdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAobmV3SXNIaWRkZW4gPyAnU2hvdyBidXR0b24nIDogJ0hpZGUgYnV0dG9uJyk7XG5cdFx0XHRcdFx0XHRcdH0pKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdC8vIFByZXZlbnQgY29sbGFwc2Ugb24gY2xpY2tcblx0XHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Ly8gQ29sb3IgcGlja2VyIChvbmx5IHNob3cgaWYgY29sb3IgaXMgc2V0LCB3aXRoIHJlc2V0IGJ1dHRvbilcblx0XHRcdFx0aWYgKGNvbG9yKSB7XG5cdFx0XHRcdFx0c2V0dGluZy5hZGRDb2xvclBpY2tlcigoY29sb3JQaWNrZXIpID0+IHtcblx0XHRcdFx0XHRcdGNvbG9yUGlja2VyLnNldFZhbHVlKGNvbG9yKTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Y29uc3QgY29udHJvbEVsID0gc2V0dGluZy5jb250cm9sRWw7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdC8vIFByZXZlbnQgY29sbGFwc2UgYW5kIHNjcm9sbCBqdW1waW5nIG9uIGNvbG9yIHBpY2tlciBjbGlja3Ncblx0XHRcdFx0XHRcdGNvbnRyb2xFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Ly8gQWRkIGV2ZW50IGhhbmRsZXIgdG8gdGhlIGFjdHVhbCBjb2xvciBpbnB1dCBlbGVtZW50XG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgY29sb3JJbnB1dCA9IGNvbnRyb2xFbC5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwiY29sb3JcIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXHRcdFx0XHRcdFx0XHRpZiAoY29sb3JJbnB1dCkge1xuXHRcdFx0XHRcdFx0XHRcdGNvbG9ySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0sIDApO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQvLyBBZGQgcmVzZXQgYnV0dG9uXG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgY29sb3JQaWNrZXJFbCA9IGNvbnRyb2xFbC5xdWVyeVNlbGVjdG9yKCcuY29sb3ItcGlja2VyJykgfHwgY29udHJvbEVsLmxhc3RFbGVtZW50Q2hpbGQ7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRjb25zdCByZXNldEJ1dHRvbiA9IGNvbnRyb2xFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0XHRcdFx0XHRcdGNsczogJ2NsaWNrYWJsZS1pY29uIHVpLXR3ZWFrZXItY29sb3ItcmVzZXQnLFxuXHRcdFx0XHRcdFx0XHRcdGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnUmVzZXQgdG8gZGVmYXVsdCBjb2xvcicgfVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0c2V0SWNvbihyZXNldEJ1dHRvbiwgJ2x1Y2lkZS1yb3RhdGUtY3cnKTtcblx0XHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMocmVzZXRCdXR0b24sIHsgbWFyZ2luUmlnaHQ6ICcwLjVyZW0nIH0pO1xuXHRcdFx0XHRcdFx0XHRyZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdFx0XHQvLyBQcmV2ZW50IHNjcm9sbCBqdW1waW5nXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsUG9zID0gc2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcDtcblx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzID0ge307XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9yc1tjb2xvcktleV0gPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmUtcmVuZGVyIGp1c3QgdGhlIG5hdGl2ZSBidXR0b25zIHNlY3Rpb25cblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyTmF0aXZlQnV0dG9uQ29udHJvbHMoY29udGFpbmVyLCBtYWluQ29udGFpbmVyKTtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9uIGFmdGVyIHJlbmRlclxuXHRcdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdH0pKCk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0aWYgKGNvbG9yUGlja2VyRWwpIHtcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sRWwuaW5zZXJ0QmVmb3JlKHJlc2V0QnV0dG9uLCBjb2xvclBpY2tlckVsKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sRWwuaW5zZXJ0QmVmb3JlKHJlc2V0QnV0dG9uLCBjb250cm9sRWwuZmlyc3RDaGlsZCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0sIDApO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRjb2xvclBpY2tlci5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmICghc2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25Db2xvcnMpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzID0ge307XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzW2NvbG9yS2V5XSA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gTm8gcmUtcmVuZGVyIG5lZWRlZCAtIGNvbG9yIHBpY2tlciBhbHJlYWR5IHVwZGF0ZXMgdmlzdWFsbHlcblx0XHRcdFx0XHRcdFx0fSkoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIFNob3cgYnV0dG9uIHRvIGFkZCBjb2xvciBwaWNrZXJcblx0XHRcdFx0XHRzZXR0aW5nLmFkZEJ1dHRvbigoYnV0dG9uKSA9PiB7XG5cdFx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dCgnU2V0IGNvbG9yLi4uJykub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdC8vIFByZXZlbnQgc2Nyb2xsIGp1bXBpbmdcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsUG9zID0gc2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcDtcblx0XHRcdFx0XHRcdFx0Ly8gSW5pdGlhbGl6ZSBjb2xvciB0byBibGFjayB0byBzaG93IHBpY2tlclxuXHRcdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uQ29sb3JzKSB7XG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25Db2xvcnMgPSB7fTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9yc1tjb2xvcktleV0gPSAnIzAwMDAwMCc7XG5cdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcdC8vIFJlLXJlbmRlciBqdXN0IHRoZSBuYXRpdmUgYnV0dG9ucyBzZWN0aW9uXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJOYXRpdmVCdXR0b25Db250cm9scyhjb250YWluZXIsIG1haW5Db250YWluZXIpO1xuXHRcdFx0XHRcdFx0XHRcdC8vIFJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9uIGFmdGVyIHJlbmRlclxuXHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9KSgpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGJ1dHRvbiBjbGlja1xuXHRcdFx0XHRcdFx0YnV0dG9uLmJ1dHRvbkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gSWNvbiBvdmVycmlkZSAoYWx3YXlzIHNob3cgaWNvbiBwaWNrZXIgYnV0dG9uKVxuXHRcdFx0XHRzZXR0aW5nLmFkZEJ1dHRvbigoYnV0dG9uKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudEljb24gPSBpY29uT3ZlcnJpZGUgfHwgJ0RlZmF1bHQnO1xuXHRcdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KGN1cnJlbnRJY29uID09PSAnRGVmYXVsdCcgPyAnU2V0IGljb24uLi4nIDogY3VycmVudEljb24pLm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgSWNvblBpY2tlck1vZGFsKHRoaXMuYXBwLCAoaWNvbklkKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHQvLyBQcmV2ZW50IHNjcm9sbCBqdW1waW5nXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsUG9zID0gc2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcDtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIXNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnMpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnMgPSB7fTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGljb25JZCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0c2V0dGluZ3MubmF0aXZlRXhwbG9yZXJCdXR0b25JY29uc1tjb2xvcktleV0gPSBpY29uSWQ7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnNbY29sb3JLZXldID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcdC8vIEFwcGx5IGljb24gb3ZlcnJpZGUgdG8gbmF0aXZlIGJ1dHRvbnNcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LmFwcGx5TmF0aXZlSWNvbk92ZXJyaWRlcygpO1xuXHRcdFx0XHRcdFx0XHRcdC8vIFJlLXJlbmRlciBqdXN0IHRoZSBuYXRpdmUgYnV0dG9ucyBzZWN0aW9uXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJOYXRpdmVCdXR0b25Db250cm9scyhjb250YWluZXIsIG1haW5Db250YWluZXIpO1xuXHRcdFx0XHRcdFx0XHRcdC8vIFJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9uIGFmdGVyIHJlbmRlclxuXHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9KSgpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBvbiBidXR0b24gY2xpY2tcblx0XHRcdFx0XHRidXR0b24uYnV0dG9uRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gQWRkIHJlc2V0IGJ1dHRvbiBpZiBpY29uIGlzIHNldFxuXHRcdFx0XHRcdGlmIChpY29uT3ZlcnJpZGUpIHtcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBjb250cm9sRWwgPSBzZXR0aW5nLmNvbnRyb2xFbDtcblx0XHRcdFx0XHRcdFx0Y29uc3QgYnV0dG9uRWwgPSBjb250cm9sRWwucXVlcnlTZWxlY3RvcignYnV0dG9uJykgfHwgY29udHJvbEVsLmxhc3RFbGVtZW50Q2hpbGQ7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRjb25zdCByZXNldEJ1dHRvbiA9IGNvbnRyb2xFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0XHRcdFx0XHRcdGNsczogJ2NsaWNrYWJsZS1pY29uIHVpLXR3ZWFrZXItaWNvbi1yZXNldCcsXG5cdFx0XHRcdFx0XHRcdFx0YXR0cjogeyAnYXJpYS1sYWJlbCc6ICdSZXNldCB0byBkZWZhdWx0IGljb24nIH1cblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdHNldEljb24ocmVzZXRCdXR0b24sICdsdWNpZGUtcm90YXRlLWN3Jyk7XG5cdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKHJlc2V0QnV0dG9uLCB7IG1hcmdpblJpZ2h0OiAnMC41cmVtJyB9KTtcblx0XHRcdFx0XHRcdFx0cmVzZXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gUHJldmVudCBzY3JvbGwganVtcGluZ1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFBvcyA9IHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3A7XG5cdFx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFzZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkljb25zKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnMgPSB7fTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnNbY29sb3JLZXldID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEFwcGx5IGljb24gb3ZlcnJpZGUgdG8gbmF0aXZlIGJ1dHRvbnMgKHJlbW92ZSBvdmVycmlkZSlcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8uYXBwbHlOYXRpdmVJY29uT3ZlcnJpZGVzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBSZS1yZW5kZXIganVzdCB0aGUgbmF0aXZlIGJ1dHRvbnMgc2VjdGlvblxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJOYXRpdmVCdXR0b25Db250cm9scyhjb250YWluZXIsIG1haW5Db250YWluZXIpO1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsUG9zO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0fSkoKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHQvLyBJbnNlcnQgcmVzZXQgYnV0dG9uIGJlZm9yZSB0aGUgbWFpbiBidXR0b25cblx0XHRcdFx0XHRcdFx0aWYgKGJ1dHRvbkVsKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgYnV0dG9uRWwpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xFbC5pbnNlcnRCZWZvcmUocmVzZXRCdXR0b24sIGNvbnRyb2xFbC5maXJzdENoaWxkKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSwgMCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHQvLyBSZW5kZXIgYWxsIDUgbmF0aXZlIGJ1dHRvbnNcblx0XHRyZW5kZXJOYXRpdmVCdXR0b24oJ05ldyBub3RlJywgJ25ld05vdGVCdXR0b24nLCAnbmV3Tm90ZScpO1xuXHRcdHJlbmRlck5hdGl2ZUJ1dHRvbignTmV3IGZvbGRlcicsICduZXdGb2xkZXJCdXR0b24nLCAnbmV3Rm9sZGVyJyk7XG5cdFx0cmVuZGVyTmF0aXZlQnV0dG9uKCdTb3J0IG9yZGVyJywgJ3NvcnRPcmRlckJ1dHRvbicsICdzb3J0T3JkZXInKTtcblx0XHRyZW5kZXJOYXRpdmVCdXR0b24oJ0F1dG8tcmV2ZWFsJywgJ2F1dG9SZXZlYWxCdXR0b24nLCAnYXV0b1JldmVhbCcpO1xuXHRcdHJlbmRlck5hdGl2ZUJ1dHRvbignQ29sbGFwc2UgYWxsJywgJ2NvbGxhcHNlQWxsQnV0dG9uJywgJ2NvbGxhcHNlQWxsJyk7XG5cdH1cblxuXHRwcml2YXRlIHJlbmRlckNvbW1hbmRJdGVtKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHBhaXI6IENvbW1hbmRJY29uUGFpciwgaW5kZXg6IG51bWJlcik6IHZvaWQge1xuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5nZXRTZXR0aW5ncygpO1xuXHRcdGNvbnN0IGdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXIsIHVuZGVmaW5lZCwgJ3VpLXR3ZWFrZXInKTtcblx0XHRcblx0XHQvLyBTdG9yZSByZWZlcmVuY2UgdG8gb3RoZXIgc2V0dGluZ3MgZm9yIGNvbGxhcHNpYmxlIGZ1bmN0aW9uYWxpdHlcblx0XHRjb25zdCBvdGhlclNldHRpbmdzOiBIVE1MRWxlbWVudFtdID0gW107XG5cdFx0XG5cdFx0Ly8gQ29tbWFuZCBuYW1lIHdpdGggZWRpdGFibGUgbmFtZSAobGlrZSBWYXVsdCBDTVMpIGFuZCBpY29uIHByZXZpZXcgd2l0aCBjb2xvclxuXHRcdGNvbnN0IGRpc3BsYXlOYW1lID0gcGFpci5kaXNwbGF5TmFtZSB8fCBwYWlyLm5hbWU7XG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xuXHRcdFx0Ly8gQ29tcGxldGVseSBwcmV2ZW50IGNvbGxhcHNlIG9uIHNldHRpbmcgZWxlbWVudCAtIE9OTFkgY2hldnJvbiBjYW4gdG9nZ2xlXG5cdFx0XHQvLyBVc2UgY2FwdHVyZSBwaGFzZSB0byBpbnRlcmNlcHQgQUxMIGNsaWNrcyBiZWZvcmUgdGhleSByZWFjaCBPYnNpZGlhbidzIGhhbmRsZXJzXG5cdFx0XHRzZXR0aW5nLnNldHRpbmdFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0XHQvLyBBbGxvdyBjb2xsYXBzZSBpZiBjbGlja2luZyBvbiBjaGV2cm9uIGljb24gT1Igb24gZXh0cmEgYnV0dG9ucyAoZGVsZXRlLCBtb3ZlIHVwL2Rvd24sIGV0Yy4pXG5cdFx0XHRcdC8vIE9SIG9uIG5hbWUgZGlzcGxheS9wZW5jaWwgaWNvbiBmb3IgcmVuYW1pbmdcblx0XHRcdFx0Y29uc3QgaXNDaGV2cm9uQ2xpY2sgPSB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItY29sbGFwc2UtaWNvbicpICE9PSBudWxsO1xuXHRcdFx0XHRjb25zdCBpc0V4dHJhQnV0dG9uID0gdGFyZ2V0LmNsb3Nlc3QoJy5leHRyYS1zZXR0aW5nLWJ1dHRvbicpICE9PSBudWxsIHx8IHRhcmdldC5jbG9zZXN0KCcuY2xpY2thYmxlLWljb24uZXh0cmEtc2V0dGluZy1idXR0b24nKSAhPT0gbnVsbDtcblx0XHRcdFx0Y29uc3QgaXNOYW1lRWRpdCA9IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1uYW1lLWRpc3BsYXknKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItZWRpdC1pY29uJykgIT09IG51bGwgfHwgdGFyZ2V0LmNsb3Nlc3QoJy51aS10d2Vha2VyLWVkaXRhYmxlLW5hbWUnKSAhPT0gbnVsbDtcblx0XHRcdFx0aWYgKCFpc0NoZXZyb25DbGljayAmJiAhaXNFeHRyYUJ1dHRvbiAmJiAhaXNOYW1lRWRpdCkge1xuXHRcdFx0XHRcdC8vIEJsb2NrIEFMTCBvdGhlciBjbGlja3MgZnJvbSBhZmZlY3RpbmcgY29sbGFwc2Vcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgdHJ1ZSk7IC8vIENhcHR1cmUgcGhhc2UgLSBydW5zIGJlZm9yZSBvdGhlciBoYW5kbGVyc1xuXHRcdFx0XG5cdFx0XHQvLyBBbHNvIHByZXZlbnQgb24gYnViYmxlIHBoYXNlIGFzIGJhY2t1cFxuXHRcdFx0c2V0dGluZy5zZXR0aW5nRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0XHRjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcblx0XHRcdFx0Y29uc3QgaXNDaGV2cm9uQ2xpY2sgPSB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItY29sbGFwc2UtaWNvbicpICE9PSBudWxsO1xuXHRcdFx0XHRjb25zdCBpc0V4dHJhQnV0dG9uID0gdGFyZ2V0LmNsb3Nlc3QoJy5leHRyYS1zZXR0aW5nLWJ1dHRvbicpICE9PSBudWxsIHx8IHRhcmdldC5jbG9zZXN0KCcuY2xpY2thYmxlLWljb24uZXh0cmEtc2V0dGluZy1idXR0b24nKSAhPT0gbnVsbDtcblx0XHRcdFx0Y29uc3QgaXNOYW1lRWRpdCA9IHRhcmdldC5jbG9zZXN0KCcudWktdHdlYWtlci1uYW1lLWRpc3BsYXknKSAhPT0gbnVsbCB8fCB0YXJnZXQuY2xvc2VzdCgnLnVpLXR3ZWFrZXItZWRpdC1pY29uJykgIT09IG51bGwgfHwgdGFyZ2V0LmNsb3Nlc3QoJy51aS10d2Vha2VyLWVkaXRhYmxlLW5hbWUnKSAhPT0gbnVsbDtcblx0XHRcdFx0aWYgKCFpc0NoZXZyb25DbGljayAmJiAhaXNFeHRyYUJ1dHRvbiAmJiAhaXNOYW1lRWRpdCkge1xuXHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCBmYWxzZSk7IC8vIEJ1YmJsZSBwaGFzZSAtIGJhY2t1cFxuXHRcdFx0XG5cdFx0XHQvLyBNYWtlIG5hbWVFbCBhIGZsZXggY29udGFpbmVyIHNvIGNoZXZyb24gY2FuIGJlIHBvc2l0aW9uZWQgdG8gdGhlIGxlZnRcblx0XHRcdGNvbnN0IG5hbWVFbCA9IHNldHRpbmcubmFtZUVsO1xuXHRcdFx0c2V0Q3NzUHJvcHMobmFtZUVsLCB7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogJzAuNXJlbScsIHdpZHRoOiAnMTAwJScgfSk7XG5cdFx0XHRcblx0XHRcdC8vIEFkZCBjaGV2cm9ucy11cC1kb3duIGljb24gdG8gdGhlIExFRlQgb2YgdGhlIG5hbWUgKGJlZm9yZSBuYW1lIGNvbnRhaW5lcilcblx0XHRcdGNvbnN0IGNoZXZyb25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdGNoZXZyb25Db250YWluZXIuY2xhc3NOYW1lID0gJ3VpLXR3ZWFrZXItY29sbGFwc2UtaWNvbic7XG5cdFx0XHRzZXRDc3NQcm9wcyhjaGV2cm9uQ29udGFpbmVyLCB7IFxuXHRcdFx0XHRjdXJzb3I6ICdkZWZhdWx0Jyxcblx0XHRcdFx0YmFja2dyb3VuZDogJ3RyYW5zcGFyZW50Jyxcblx0XHRcdFx0cGFkZGluZzogJzAnLFxuXHRcdFx0XHRtYXJnaW46ICcwJyxcblx0XHRcdFx0ZGlzcGxheTogJ2lubGluZS1mbGV4Jyxcblx0XHRcdFx0YWxpZ25JdGVtczogJ2NlbnRlcicsXG5cdFx0XHRcdGp1c3RpZnlDb250ZW50OiAnY2VudGVyJ1xuXHRcdFx0fSk7XG5cdFx0XHQvLyBJbnNlcnQgYXMgZmlyc3QgY2hpbGQgdG8gZW5zdXJlIGl0J3Mgb24gdGhlIGxlZnRcblx0XHRcdG5hbWVFbC5pbnNlcnRCZWZvcmUoY2hldnJvbkNvbnRhaW5lciwgbmFtZUVsLmZpcnN0Q2hpbGQpO1xuXHRcdFx0Ly8gUmVzdG9yZSBjb2xsYXBzZSBzdGF0ZSBmcm9tIE1hcCwgZGVmYXVsdCB0byBmYWxzZSBpZiBub3Qgc2V0XG5cdFx0XHRsZXQgaXNFeHBhbmRlZCA9IHRoaXMuZXhwYW5kZWRTdGF0ZXMuZ2V0KHBhaXIuaWQpID8/IGZhbHNlO1xuXHRcdFx0c2V0SWNvbihjaGV2cm9uQ29udGFpbmVyLCBpc0V4cGFuZGVkID8gJ2NoZXZyb25zLWRvd24tdXAnIDogJ2NoZXZyb25zLXVwLWRvd24nKTtcblx0XHRcdFxuXHRcdFx0Ly8gVG9nZ2xlIG9uIGNoZXZyb24gY2xpY2sgLSBPTkxZIHdheSB0byBjaGFuZ2UgY29sbGFwc2Ugc3RhdGVcblx0XHRcdGNoZXZyb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGlzRXhwYW5kZWQgPSAhaXNFeHBhbmRlZDtcblx0XHRcdFx0Ly8gU3RvcmUgc3RhdGUgaW4gTWFwIGZvciBwZXJzaXN0ZW5jZSBhY3Jvc3MgcmUtcmVuZGVyc1xuXHRcdFx0XHR0aGlzLmV4cGFuZGVkU3RhdGVzLnNldChwYWlyLmlkLCBpc0V4cGFuZGVkKTtcblx0XHRcdFx0Ly8gU3dhcCBpY29uOiBjaGV2cm9ucy11cC1kb3duIChjb2xsYXBzZWQpIDwtPiBjaGV2cm9ucy1kb3duLXVwIChleHBhbmRlZClcblx0XHRcdFx0c2V0SWNvbihjaGV2cm9uQ29udGFpbmVyLCBpc0V4cGFuZGVkID8gJ2NoZXZyb25zLWRvd24tdXAnIDogJ2NoZXZyb25zLXVwLWRvd24nKTtcblx0XHRcdFx0b3RoZXJTZXR0aW5ncy5mb3JFYWNoKHNldHRpbmdFbCA9PiB7XG5cdFx0XHRcdFx0c2V0Q3NzUHJvcHMoc2V0dGluZ0VsLCB7IGRpc3BsYXk6IGlzRXhwYW5kZWQgPyAnJyA6ICdub25lJyB9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHRcdFxuXHRcdFx0Ly8gQ3JlYXRlIGVkaXRhYmxlIG5hbWUgY29udGFpbmVyIHdpdGggcGVuY2lsIGljb25cblx0XHRcdGNvbnN0IG5hbWVDb250YWluZXIgPSBuYW1lRWwuY3JlYXRlRGl2KHsgY2xzOiAndWktdHdlYWtlci1lZGl0YWJsZS1uYW1lJyB9KTtcblx0XHRcdHNldENzc1Byb3BzKG5hbWVDb250YWluZXIsIHsgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnMC41cmVtJyB9KTtcblx0XHRcdFxuXHRcdFx0Ly8gRnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBkaXNwbGF5IGVsZW1lbnQgd2l0aCBjbGljayBoYW5kbGVyXG5cdFx0XHRjb25zdCBjcmVhdGVOYW1lRGlzcGxheSA9IChuYW1lOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0bmFtZUNvbnRhaW5lci5lbXB0eSgpO1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc3QgZGlzcGxheSA9IG5hbWVDb250YWluZXIuY3JlYXRlU3Bhbih7IFxuXHRcdFx0XHRcdHRleHQ6IG5hbWUgPT09IGRpc3BsYXlOYW1lID8gbmFtZSA6IGAke25hbWV9ICgke2Rpc3BsYXlOYW1lfSlgLFxuXHRcdFx0XHRcdGNsczogJ3VpLXR3ZWFrZXItbmFtZS1kaXNwbGF5J1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIEFkZCBwZW5jaWwgaWNvblxuXHRcdFx0XHRjb25zdCBpY29uQ29udGFpbmVyID0gbmFtZUNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICd1aS10d2Vha2VyLWVkaXQtaWNvbicgfSk7XG5cdFx0XHRcdHNldENzc1Byb3BzKGljb25Db250YWluZXIsIHsgb3BhY2l0eTogJzAuNicgfSk7XG5cdFx0XHRcdHNldEljb24oaWNvbkNvbnRhaW5lciwgJ2x1Y2lkZS1wZW5jaWwtbGluZScpO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gTWFrZSBuYW1lIGFuZCBpY29uIGVkaXRhYmxlIG9uIGNsaWNrXG5cdFx0XHRcdGNvbnN0IHN0YXJ0RWRpdCA9ICgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50TmFtZSA9IHBhaXIubmFtZTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBDbGVhciBjb250YWluZXJcblx0XHRcdFx0XHRuYW1lQ29udGFpbmVyLmVtcHR5KCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gQ3JlYXRlIGlucHV0IHVzaW5nIG5hdGl2ZSBPYnNpZGlhbiBzdHlsaW5nXG5cdFx0XHRcdFx0Y29uc3QgbmFtZUlucHV0ID0gbmFtZUNvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7XG5cdFx0XHRcdFx0XHR0eXBlOiAndGV4dCcsXG5cdFx0XHRcdFx0XHR2YWx1ZTogY3VycmVudE5hbWVcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRuYW1lSW5wdXQuYWRkQ2xhc3MoJ21vZC10ZXh0LWlucHV0Jyk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gRm9jdXMgYW5kIHNlbGVjdCB0ZXh0XG5cdFx0XHRcdFx0bmFtZUlucHV0LmZvY3VzKCk7XG5cdFx0XHRcdFx0bmFtZUlucHV0LnNlbGVjdCgpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIFNhdmUgb24gYmx1clxuXHRcdFx0XHRcdGNvbnN0IHNhdmVOYW1lID0gKCkgPT4ge1xuXHRcdFx0XHRcdFx0bmFtZUlucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCBzYXZlTmFtZSk7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGxldCBuZXdOYW1lID0gbmFtZUlucHV0LnZhbHVlLnRyaW0oKTtcblx0XHRcdFx0XHRcdGlmICghbmV3TmFtZSkge1xuXHRcdFx0XHRcdFx0XHRuZXdOYW1lID0gY3VycmVudE5hbWU7IC8vIFJldmVydCB0byBvcmlnaW5hbCBpZiBlbXB0eVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cGFpci5uYW1lID0gbmV3TmFtZTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Ly8gVXBkYXRlIGV4aXN0aW5nIGJ1dHRvbnMgaW1tZWRpYXRlbHkgKGRvbid0IHdhaXQgZm9yIHJlLXJlbmRlcilcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8udXBkYXRlQnV0dG9uTmFtZXMoKTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Ly8gUmUtcmVuZGVyIHRvIHVwZGF0ZSBkaXNwbGF5IGFuZCBzYXZlXG5cdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XG5cdFx0XHRcdFx0XHR9KSgpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gU2F2ZSBvbiBFbnRlclxuXHRcdFx0XHRcdG5hbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcblx0XHRcdFx0XHRcdGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuXHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHRcdHNhdmVOYW1lKCk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xuXHRcdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHRcdC8vIENhbmNlbDogcmV2ZXJ0IHRvIG9yaWdpbmFsXG5cdFx0XHRcdFx0XHRcdGNyZWF0ZU5hbWVEaXNwbGF5KGN1cnJlbnROYW1lKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBTYXZlIG9uIGJsdXJcblx0XHRcdFx0XHRuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIHNhdmVOYW1lKTtcblx0XHRcdFx0fTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIEFkZCBjbGljayBoYW5kbGVycyB0byBib3RoIG5hbWUgYW5kIGljb25cblx0XHRcdFx0ZGlzcGxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN0YXJ0RWRpdCk7XG5cdFx0XHRcdGljb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzdGFydEVkaXQpO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQWRkIGhvdmVyIGVmZmVjdCB0byBpY29uXG5cdFx0XHRcdGljb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcblx0XHRcdFx0XHRzZXRDc3NQcm9wcyhpY29uQ29udGFpbmVyLCB7IG9wYWNpdHk6ICcxJyB9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGljb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcblx0XHRcdFx0XHRzZXRDc3NQcm9wcyhpY29uQ29udGFpbmVyLCB7IG9wYWNpdHk6ICcwLjYnIH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH07XG5cdFx0XHRcblx0XHRcdC8vIENyZWF0ZSBpbml0aWFsIGRpc3BsYXlcblx0XHRcdGNyZWF0ZU5hbWVEaXNwbGF5KHBhaXIubmFtZSk7XG5cdFx0XHRcblx0XHRcdHNldHRpbmcuc2V0RGVzYygnJylcblx0XHRcdFx0LmFkZEV4dHJhQnV0dG9uKChidXR0b24pID0+IHtcblx0XHRcdFx0XHQvLyBDaGFuZ2UgaWNvbiAtIHByZXZpZXcgd2l0aCBjb2xvciAocmVhbC10aW1lIHVwZGF0ZXMpXG5cdFx0XHRcdFx0Y29uc3QgaWNvbkVsID0gYnV0dG9uLmV4dHJhU2V0dGluZ3NFbDtcblx0XHRcdFx0XHRzZXRJY29uKGljb25FbCwgcGFpci5pY29uKTtcblx0XHRcdFx0XHQvLyBTdG9yZSByZWZlcmVuY2UgZm9yIGNvbG9yIHVwZGF0ZXNcblx0XHRcdFx0XHRpY29uRWwuc2V0QXR0cmlidXRlKCdkYXRhLWV4cGxvcmVyLWNvbW1hbmQtaWQnLCBwYWlyLmlkKTtcblx0XHRcdFx0XHRpZiAocGFpci5jb2xvciAmJiBwYWlyLmNvbG9yICE9PSAnIzAwMDAwMCcpIHtcblx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGljb25FbCwgeyBjb2xvcjogcGFpci5jb2xvciB9KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0aWNvbkVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjb2xvcicpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcCgnQ2hhbmdlIGljb24nKTtcblx0XHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBJY29uUGlja2VyTW9kYWwodGhpcy5hcHAsIChpY29uSWQpID0+IHtcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChpY29uSWQgJiYgaWNvbklkICE9PSBwYWlyLmljb24pIHtcblx0XHRcdFx0XHRcdFx0XHRcdHBhaXIuaWNvbiA9IGljb25JZDtcblx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9KSgpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBvbiBjbGlja1xuXHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5hZGRFeHRyYUJ1dHRvbigoYnV0dG9uKSA9PiB7XG5cdFx0XHRcdFx0Ly8gTW92ZSB1cCAtIGFsd2F5cyBzaG93LCBidXQgZGlzYWJsZSB3aGVuIGF0IHRvcFxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRJY29uKCdjaGV2cm9uLXVwJyk7XG5cdFx0XHRcdFx0aWYgKGluZGV4ID4gMCkge1xuXHRcdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoJ01vdmUgdXAnKTtcblx0XHRcdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGFycmF5TW92ZU11dGFibGUoc2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcywgaW5kZXgsIGluZGV4IC0gMSk7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xuXHRcdFx0XHRcdFx0XHR9KSgpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKCdBbHJlYWR5IGF0IHRvcCcpO1xuXHRcdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRDbGFzcygndWktdHdlYWtlci1kaXNhYmxlZC1idXR0b24nKTtcblx0XHRcdFx0XHRcdC8vIFByZXZlbnQgaG92ZXIgZWZmZWN0cyBvbiBkaXNhYmxlZCBidXR0b25zXG5cdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhidXR0b24uZXh0cmFTZXR0aW5nc0VsLCB7IHBvaW50ZXJFdmVudHM6ICdub25lJyB9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBvbiBjbGlja1xuXHRcdFx0XHRcdGJ1dHRvbi5leHRyYVNldHRpbmdzRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5hZGRFeHRyYUJ1dHRvbigoYnV0dG9uKSA9PiB7XG5cdFx0XHRcdFx0Ly8gTW92ZSBkb3duIC0gYWx3YXlzIHNob3csIGJ1dCBkaXNhYmxlIHdoZW4gYXQgYm90dG9tXG5cdFx0XHRcdFx0YnV0dG9uLnNldEljb24oJ2NoZXZyb24tZG93bicpO1xuXHRcdFx0XHRcdGlmIChpbmRleCA8IHNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMubGVuZ3RoIC0gMSkge1xuXHRcdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoJ01vdmUgZG93bicpO1xuXHRcdFx0XHRcdFx0YnV0dG9uLm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0YXJyYXlNb3ZlTXV0YWJsZShzZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzLCBpbmRleCwgaW5kZXggKyAxKTtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8ucmVvcmRlcigpO1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XG5cdFx0XHRcdFx0XHRcdH0pKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoJ0FscmVhZHkgYXQgYm90dG9tJyk7XG5cdFx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKCd1aS10d2Vha2VyLWRpc2FibGVkLWJ1dHRvbicpO1xuXHRcdFx0XHRcdFx0Ly8gUHJldmVudCBob3ZlciBlZmZlY3RzIG9uIGRpc2FibGVkIGJ1dHRvbnNcblx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGJ1dHRvbi5leHRyYVNldHRpbmdzRWwsIHsgcG9pbnRlckV2ZW50czogJ25vbmUnIH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNsaWNrXG5cdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcblx0XHRcdFx0fSlcblx0XHRcdFx0LmFkZEV4dHJhQnV0dG9uKChidXR0b24pID0+IHtcblx0XHRcdFx0XHQvLyBEZWxldGUgLSByZWQvd2FybmluZyBzdHlsZVxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRJY29uKCd0cmFzaCcpO1xuXHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKCdEZWxldGUnKTtcblx0XHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzKCdtb2Qtd2FybmluZycpO1xuXHRcdFx0XHRcdC8vIE1ha2UgaWNvbiByZWRcblx0XHRcdFx0XHRzZXRDc3NQcm9wcyhidXR0b24uZXh0cmFTZXR0aW5nc0VsLCB7IGNvbG9yOiAndmFyKC0tdGV4dC1lcnJvciknIH0pO1xuXHRcdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgaWR4ID0gc2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcy5pbmRleE9mKHBhaXIpO1xuXHRcdFx0XHRcdFx0XHRpZiAoaWR4ID4gLTEpIHtcblx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzLnNwbGljZShpZHgsIDEpO1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5yZW9yZGVyKCk7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSkoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNsaWNrXG5cdFx0XHRcdFx0YnV0dG9uLmV4dHJhU2V0dGluZ3NFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcblx0XHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHQvLyBEZXZpY2UgbW9kZSBkcm9wZG93blxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcblx0XHRcdG90aGVyU2V0dGluZ3MucHVzaChzZXR0aW5nLnNldHRpbmdFbCk7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKCdEZXZpY2UgbW9kZScpXG5cdFx0XHRcdC5zZXREZXNjKCdDaG9vc2Ugd2hpY2ggZGV2aWNlcyB0aGlzIGJ1dHRvbiBhcHBlYXJzIG9uJylcblx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGFwcElkID0gKHRoaXMuYXBwIGFzIHsgYXBwSWQ/OiBzdHJpbmcgfSkuYXBwSWQgfHwgJ3RoaXMtZGV2aWNlJztcblx0XHRcdFx0XHRkcm9wZG93blxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbignYW55JywgJ0FsbCBkZXZpY2VzJylcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oJ2Rlc2t0b3AnLCAnRGVza3RvcCBvbmx5Jylcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oJ21vYmlsZScsICdNb2JpbGUgb25seScpXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKGFwcElkLCAnVGhpcyBkZXZpY2UnKVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHBhaXIubW9kZSB8fCAnYW55Jylcblx0XHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdHBhaXIubW9kZSA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5yZW9yZGVyKCk7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcblx0XHRcdFx0XHRcdFx0fSkoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdC8vIFByZXZlbnQgY29sbGFwc2Ugb24gY2xpY2tcblx0XHRcdFx0XHRkcm9wZG93bi5zZWxlY3RFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcblx0XHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHQvLyBDdXN0b20gY29sb3IgcGlja2VyIHdpdGggcmVzZXQgYnV0dG9uIChsaWtlIENvbW1hbmRlciAtIGFsd2F5cyBzaG93IGNvbG9yIHBpY2tlcilcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XG5cdFx0XHRvdGhlclNldHRpbmdzLnB1c2goc2V0dGluZy5zZXR0aW5nRWwpO1xuXHRcdFx0Y29uc3QgaGFzQ29sb3IgPSBwYWlyLmNvbG9yICE9PSB1bmRlZmluZWQ7XG5cdFx0XHRcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoJ0N1c3RvbSBjb2xvcicpXG5cdFx0XHRcdC5zZXREZXNjKCdTZXQgYSBjdXN0b20gY29sb3IgZm9yIHRoaXMgaWNvbicpXG5cdFx0XHRcdC5hZGRDb2xvclBpY2tlcigoY29sb3JQaWNrZXIpID0+IHtcblx0XHRcdFx0XHQvLyBVc2UgQ29tbWFuZGVyJ3MgYXBwcm9hY2g6IGFsd2F5cyBzaG93IGNvbG9yIHBpY2tlciwgZGVmYXVsdCB0byAjMDAwIGlmIG5vdCBzZXRcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50Q29sb3IgPSBwYWlyLmNvbG9yID8/ICcjMDAwMDAwJztcblx0XHRcdFx0XHRjb2xvclBpY2tlci5zZXRWYWx1ZShjdXJyZW50Q29sb3IpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIEdldCB0aGUgY29udHJvbCBlbGVtZW50IC0gY29sb3IgcGlja2VyIGlzIGFkZGVkIHRvIGl0XG5cdFx0XHRcdFx0Y29uc3QgY29udHJvbEVsID0gc2V0dGluZy5jb250cm9sRWw7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBvbiBjb2xvciBwaWNrZXIgY2xpY2tzXG5cdFx0XHRcdFx0Y29udHJvbEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIEFkZCBldmVudCBoYW5kbGVyIHRvIHRoZSBhY3R1YWwgY29sb3IgaW5wdXQgZWxlbWVudFxuXHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgY29sb3JJbnB1dCA9IGNvbnRyb2xFbC5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwiY29sb3JcIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXHRcdFx0XHRcdFx0aWYgKGNvbG9ySW5wdXQpIHtcblx0XHRcdFx0XHRcdFx0Y29sb3JJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LCAwKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBBZGQgcmVzZXQgYnV0dG9uIHRvIHRoZSBsZWZ0IG9mIGNvbG9yIHBpY2tlciBpZiBjb2xvciBoYXMgYmVlbiBzZXRcblx0XHRcdFx0XHQvLyBVc2Ugc2V0VGltZW91dCB0byBlbnN1cmUgY29sb3IgcGlja2VyIGlzIGFkZGVkIGZpcnN0LCB0aGVuIGluc2VydCByZXNldCBidXR0b24gYmVmb3JlIGl0XG5cdFx0XHRcdFx0aWYgKGhhc0NvbG9yKSB7XG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0Ly8gRmluZCB0aGUgY29sb3IgcGlja2VyIGVsZW1lbnQgKGl0J3MgdHlwaWNhbGx5IHRoZSBsYXN0IGNoaWxkIG9yIGhhcyBhIHNwZWNpZmljIGNsYXNzKVxuXHRcdFx0XHRcdFx0XHRjb25zdCBjb2xvclBpY2tlckVsID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJy5jb2xvci1waWNrZXInKSB8fCBjb250cm9sRWwubGFzdEVsZW1lbnRDaGlsZDtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHJlc2V0QnV0dG9uID0gY29udHJvbEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XG5cdFx0XHRcdFx0XHRcdFx0Y2xzOiAnY2xpY2thYmxlLWljb24gdWktdHdlYWtlci1jb2xvci1yZXNldCcsXG5cdFx0XHRcdFx0XHRcdFx0YXR0cjogeyAnYXJpYS1sYWJlbCc6ICdSZXNldCB0byBkZWZhdWx0IGNvbG9yJyB9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRzZXRJY29uKHJlc2V0QnV0dG9uLCAnbHVjaWRlLXJvdGF0ZS1jdycpO1xuXHRcdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhyZXNldEJ1dHRvbiwgeyBtYXJnaW5SaWdodDogJzAuNXJlbScgfSk7XG5cdFx0XHRcdFx0XHRcdHJlc2V0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlbW92ZSBjb2xvciBlbnRpcmVseVxuXHRcdFx0XHRcdFx0XHRcdFx0cGFpci5jb2xvciA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gVXBkYXRlIGljb24gcHJldmlldyB0byByZW1vdmUgY29sb3Jcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGljb25CdXR0b24gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihgW2RhdGEtZXhwbG9yZXItY29tbWFuZC1pZD1cIiR7cGFpci5pZH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChpY29uQnV0dG9uKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGljb25CdXR0b24uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2NvbG9yJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XG5cdFx0XHRcdFx0XHRcdFx0fSkoKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHQvLyBJbnNlcnQgcmVzZXQgYnV0dG9uIGJlZm9yZSBjb2xvciBwaWNrZXJcblx0XHRcdFx0XHRcdFx0aWYgKGNvbG9yUGlja2VyRWwpIHtcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sRWwuaW5zZXJ0QmVmb3JlKHJlc2V0QnV0dG9uLCBjb2xvclBpY2tlckVsKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBGYWxsYmFjazogaW5zZXJ0IGF0IHN0YXJ0XG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgY29udHJvbEVsLmZpcnN0Q2hpbGQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9LCAwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y29sb3JQaWNrZXIub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHQvLyBJZiBzZXQgdG8gYmxhY2sgKCMwMDAwMDApLCB0cmVhdCBhcyBcIm5vIGN1c3RvbSBjb2xvclwiIGFuZCByZW1vdmUgaXRcblx0XHRcdFx0XHRcdGlmICh2YWx1ZSA9PT0gJyMwMDAwMDAnKSB7XG5cdFx0XHRcdFx0XHRcdHBhaXIuY29sb3IgPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRwYWlyLmNvbG9yID0gdmFsdWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBpY29uIHByZXZpZXcgY29sb3IgaW4gcmVhbC10aW1lXG5cdFx0XHRcdFx0XHRjb25zdCBpY29uQnV0dG9uID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWV4cGxvcmVyLWNvbW1hbmQtaWQ9XCIke3BhaXIuaWR9XCJdYCkgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRpZiAoaWNvbkJ1dHRvbikge1xuXHRcdFx0XHRcdFx0XHRpZiAocGFpci5jb2xvciAmJiBwYWlyLmNvbG9yICE9PSAnIzAwMDAwMCcpIHtcblx0XHRcdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhpY29uQnV0dG9uLCB7IGNvbG9yOiBwYWlyLmNvbG9yIH0pO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGljb25CdXR0b24uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2NvbG9yJyk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Ly8gU2F2ZSBhbmQgcmVvcmRlciwgdGhlbiByZS1yZW5kZXIgdG8gc2hvdy9oaWRlIHJlc2V0IGJ1dHRvblxuXHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoY29udGFpbmVyKTtcblx0XHRcdFx0XHRcdH0pKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0Ly8gVG9nZ2xlIGljb24gY29uZmlndXJhdGlvblxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcblx0XHRcdG90aGVyU2V0dGluZ3MucHVzaChzZXR0aW5nLnNldHRpbmdFbCk7XG5cdFx0XHRjb25zdCBoYXNUb2dnbGVJY29uID0gcGFpci50b2dnbGVJY29uICE9PSB1bmRlZmluZWQ7XG5cdFx0XHRcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoJ1RvZ2dsZSBpY29uJylcblx0XHRcdFx0LnNldERlc2MoJ0ljb24gdG8gc2hvdyB3aGVuIGNvbW1hbmQgaXMgdG9nZ2xlZCBvbiAobGVhdmUgZW1wdHkgdG8gZGlzYWJsZSB0b2dnbGUpLiBDb21tYW5kcyB3aXRoIGNoZWNrIGNhbGxiYWNrIHdvcmsgYXV0b21hdGljYWxseS4gU2VlIHJlYWRtZSBmb3IgcGx1Z2luIGRldmVsb3BlciBjb21wYXRpYmlsaXR5IG5vdGVzLicpXG5cdFx0XHRcdC5zZXRUb29sdGlwKCdGb3IgcGx1Z2luIGRldmVsb3BlcnM6IENvbW1hbmRzIHdpdGggY2hlY2tDYWxsYmFjayB3b3JrIGF1dG9tYXRpY2FsbHkuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZGF2aWR2a2ltYmFsbC9vYnNpZGlhbi11aS10d2Vha2VyI3RvZ2dsZS1pY29uLWZlYXR1cmUtY29tcGF0aWJpbGl0eSBmb3IgZGV0YWlscy4nKVxuXHRcdFx0XHQuYWRkQnV0dG9uKChidXR0b24pID0+IHtcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50VG9nZ2xlSWNvbiA9IHBhaXIudG9nZ2xlSWNvbiB8fCAnTm9uZSc7XG5cdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoY3VycmVudFRvZ2dsZUljb24gPT09ICdOb25lJyA/ICdTZXQgdG9nZ2xlIGljb24uLi4nIDogY3VycmVudFRvZ2dsZUljb24pLm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgSWNvblBpY2tlck1vZGFsKHRoaXMuYXBwLCAoaWNvbklkKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoaWNvbklkKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRwYWlyLnRvZ2dsZUljb24gPSBpY29uSWQ7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdHBhaXIudG9nZ2xlSWNvbiA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5leHBsb3Jlck1hbmFnZXI/LnJlb3JkZXIoKTtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xuXHRcdFx0XHRcdFx0XHR9KSgpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Ly8gUHJldmVudCBjb2xsYXBzZSBvbiBjbGlja1xuXHRcdFx0XHRcdGJ1dHRvbi5idXR0b25FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBBZGQgcmVzZXQgYnV0dG9uIGlmIHRvZ2dsZSBpY29uIGlzIHNldFxuXHRcdFx0XHRcdGlmIChoYXNUb2dnbGVJY29uKSB7XG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgY29udHJvbEVsID0gc2V0dGluZy5jb250cm9sRWw7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGJ1dHRvbkVsID0gY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpIHx8IGNvbnRyb2xFbC5sYXN0RWxlbWVudENoaWxkO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Y29uc3QgcmVzZXRCdXR0b24gPSBjb250cm9sRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHRcdFx0XHRcdFx0XHRjbHM6ICdjbGlja2FibGUtaWNvbiB1aS10d2Vha2VyLXRvZ2dsZS1pY29uLXJlc2V0Jyxcblx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1Jlc2V0IHRvZ2dsZSBpY29uJyB9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRzZXRJY29uKHJlc2V0QnV0dG9uLCAnbHVjaWRlLXJvdGF0ZS1jdycpO1xuXHRcdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhyZXNldEJ1dHRvbiwgeyBtYXJnaW5SaWdodDogJzAuNXJlbScgfSk7XG5cdFx0XHRcdFx0XHRcdHJlc2V0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0XHRcdC8vIFByZXNlcnZlIHNjcm9sbCBwb3NpdGlvbiB0byBwcmV2ZW50IGp1bXBpbmdcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXIuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHwgXG5cdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fCBcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQtY29udGFpbmVyJykgfHxcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lcjtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxQb3MgPSBzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wO1xuXHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlbW92ZSB0b2dnbGUgaWNvblxuXHRcdFx0XHRcdFx0XHRcdFx0cGFpci50b2dnbGVJY29uID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uZXhwbG9yZXJNYW5hZ2VyPy5yZW9yZGVyKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyIHdpdGggbXVsdGlwbGUgYXR0ZW1wdHNcblx0XHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxQb3M7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEFsc28gdHJ5IGFmdGVyIGEgc2hvcnQgZGVsYXkgaW4gY2FzZSBET00gaXNuJ3QgcmVhZHlcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFBvcztcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSwgMCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XHR9KSgpO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdC8vIEluc2VydCByZXNldCBidXR0b24gYmVmb3JlIHRoZSBtYWluIGJ1dHRvblxuXHRcdFx0XHRcdFx0XHRpZiAoYnV0dG9uRWwpIHtcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sRWwuaW5zZXJ0QmVmb3JlKHJlc2V0QnV0dG9uLCBidXR0b25FbCk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29udHJvbEVsLmluc2VydEJlZm9yZShyZXNldEJ1dHRvbiwgY29udHJvbEVsLmZpcnN0Q2hpbGQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9LCAwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0Ly8gVXNlIGFjdGl2ZSBjbGFzcyBvcHRpb24gKGV4cGxvcmVyIG9ubHkpXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xuXHRcdFx0b3RoZXJTZXR0aW5ncy5wdXNoKHNldHRpbmcuc2V0dGluZ0VsKTtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoJ1VzZSBhY3RpdmUgY2xhc3MgaW5zdGVhZCBvZiBpY29uIHN3YXAnKVxuXHRcdFx0XHQuc2V0RGVzYygnV2hlbiB0b2dnbGVkIG9uLCBhZGQgaXMtYWN0aXZlIGNsYXNzIGluc3RlYWQgb2Ygc3dhcHBpbmcgaWNvbiAoZXhwbG9yZXIgb25seSknKVxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUocGFpci51c2VBY3RpdmVDbGFzcyA/PyBmYWxzZSk7XG5cdFx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRwYWlyLnVzZUFjdGl2ZUNsYXNzID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmV4cGxvcmVyTWFuYWdlcj8ucmVvcmRlcigpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcihjb250YWluZXIpO1xuXHRcdFx0XHRcdFx0fSkoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQvLyBQcmV2ZW50IGNvbGxhcHNlIG9uIGNsaWNrXG5cdFx0XHRcdFx0dG9nZ2xlLnRvZ2dsZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdFx0Ly8gQWZ0ZXIgYWxsIHNldHRpbmdzIGFyZSBhZGRlZCwgYXBwbHkgY29sbGFwc2Ugc3RhdGUgZnJvbSBNYXBcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdGNvbnN0IHNhdmVkRXhwYW5kZWQgPSB0aGlzLmV4cGFuZGVkU3RhdGVzLmdldChwYWlyLmlkKSA/PyBmYWxzZTtcblx0XHRcdG90aGVyU2V0dGluZ3MuZm9yRWFjaChzZXR0aW5nRWwgPT4ge1xuXHRcdFx0XHRzZXRDc3NQcm9wcyhzZXR0aW5nRWwsIHsgZGlzcGxheTogc2F2ZWRFeHBhbmRlZCA/ICcnIDogJ25vbmUnIH0pO1xuXHRcdFx0fSk7XG5cdFx0fSwgMCk7XG5cdH1cbn1cbiIsICIvKipcbiAqIE1vYmlsZSBUYWIgLSBBbGwgbW9iaWxlLXNwZWNpZmljIHNldHRpbmdzXG4gKi9cblxuaW1wb3J0IHsgVGFiUmVuZGVyZXIgfSBmcm9tICcuLi9jb21tb24vVGFiUmVuZGVyZXInO1xuaW1wb3J0IHsgY3JlYXRlU2V0dGluZ3NHcm91cCwgU2V0dGluZ3NDb250YWluZXIgfSBmcm9tICcuLi8uLi91dGlscy9zZXR0aW5ncy1jb21wYXQnO1xuaW1wb3J0IHsgQ29tbWFuZFBpY2tlck1vZGFsIH0gZnJvbSAnLi4vLi4vbW9kYWxzL0NvbW1hbmRQaWNrZXJNb2RhbCc7XG5pbXBvcnQgeyBJY29uUGlja2VyTW9kYWwgfSBmcm9tICcuLi8uLi9tb2RhbHMvSWNvblBpY2tlck1vZGFsJztcbmltcG9ydCB7IFVJU2V0dGluZ3MgfSBmcm9tICcuLi8uLi9zZXR0aW5ncyc7XG5cbmV4cG9ydCBjbGFzcyBNb2JpbGVUYWIgZXh0ZW5kcyBUYWJSZW5kZXJlciB7XG5cdHJlbmRlcihjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdC8vIE1vYmlsZVxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHRjb25zdCBtb2JpbGVHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyLCAnTW9iaWxlJywgJ3VpLXR3ZWFrZXInKTtcblxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhtb2JpbGVHcm91cCwgJ0hpZGUgXCJNb2JpbGUgY2hldnJvbnNcIiBpY29uJywgJ0hpZGUgXCJNb2JpbGUgY2hldnJvbnNcIiBpY29uIChsb25nLXByZXNzIGZsYWlyKSBpbiBtb2JpbGUgbmF2YmFyLicsICdtb2JpbGVDaGV2cm9uc0ljb24nKTtcblxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhtb2JpbGVHcm91cCwgJ0hpZGUgXCJOYXZpZ2F0ZSBiYWNrXCIgYnV0dG9uJywgJ0hpZGUgXCJOYXZpZ2F0ZSBiYWNrXCIgYnV0dG9uIGluIG1vYmlsZSBuYXZiYXIuJywgJ25hdmlnYXRlQmFja0J1dHRvbicpO1xuXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKG1vYmlsZUdyb3VwLCAnSGlkZSBcIk5hdmlnYXRlIGZvcndhcmRcIiBidXR0b24nLCAnSGlkZSBcIk5hdmlnYXRlIGZvcndhcmRcIiBidXR0b24gaW4gbW9iaWxlIG5hdmJhci4nLCAnbmF2aWdhdGVGb3J3YXJkQnV0dG9uJyk7XG5cblx0XHR0aGlzLmFkZFRvZ2dsZVNldHRpbmcobW9iaWxlR3JvdXAsICdIaWRlIFwiUXVpY2sgc3dpdGNoZXJcIiBidXR0b24nLCAnSGlkZSBcIlF1aWNrIHN3aXRjaGVyXCIgYnV0dG9uIGluIG1vYmlsZSBuYXZiYXIuJywgJ3F1aWNrU3dpdGNoZXJCdXR0b24nKTtcblxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhtb2JpbGVHcm91cCwgJ0hpZGUgXCJOZXcgdGFiXCIgYnV0dG9uJywgJ0hpZGUgXCJOZXcgdGFiXCIgYnV0dG9uIGluIG1vYmlsZSBuYXZiYXIuJywgJ21vYmlsZU5ld1RhYkJ1dHRvbicpO1xuXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKG1vYmlsZUdyb3VwLCAnSGlkZSBcIk9wZW4gdGFic1wiIGJ1dHRvbicsICdIaWRlIFwiT3BlbiB0YWJzXCIgYnV0dG9uIGluIG1vYmlsZSBuYXZiYXIuJywgJ29wZW5UYWJCdXR0b24nKTtcblxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhtb2JpbGVHcm91cCwgJ0hpZGUgXCJSaWJib24gbWVudVwiIGJ1dHRvbicsICdIaWRlIFwiUmliYm9uIG1lbnVcIiBidXR0b24gaW4gbW9iaWxlIG5hdmJhci4nLCAncmliYm9uTWVudUJ1dHRvbicpO1xuXG5cdFx0Ly8gU3dhcCBidXR0b24gaWNvblxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhtb2JpbGVHcm91cCwgJ1N3YXAgbW9iaWxlIG5ldyB0YWIgaWNvbicsICdSZXBsYWNlIHRoZSBuZXcgdGFiIHBsdXMgaWNvbiB3aXRoIGEgaG9tZSBidXR0b24gaWNvbiBpbiBtb2JpbGUgbmF2YmFyLicsICdzd2FwTW9iaWxlTmV3VGFiSWNvbicpO1xuXG5cdFx0dGhpcy5hZGRUb2dnbGVTZXR0aW5nKG1vYmlsZUdyb3VwLCAnSGlkZSB0aXRsZScsICdIaWRlIHRoZSB0aXRsZSBpbiBtb2JpbGUgdmlldyBoZWFkZXJzLicsICdoaWRlTW9iaWxlVGl0bGUnKTtcblxuXHRcdHRoaXMuYWRkVG9nZ2xlU2V0dGluZyhtb2JpbGVHcm91cCwgJ0hpZGUgc3luYyBpY29uJywgJ0hpZGUgc3luYyBzdGF0dXMgaWNvbnMgaW4gbW9iaWxlIGludGVyZmFjZS4nLCAnaGlkZU1vYmlsZVN5bmNJY29uJyk7XG5cblx0XHQvLyBSZXBsYWNlIHN5bmMgYnV0dG9uIHdpdGggY3VzdG9tIGFjdGlvblxuXHRcdHRoaXMucmVuZGVyU3luY0J1dHRvblJlcGxhY2VtZW50KG1vYmlsZUdyb3VwKTtcblxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHQvLyBNb2JpbGUgbmF2aWdhdGlvbiBtZW51XG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdGNvbnN0IG1vYmlsZU5hdkdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXIsICdNb2JpbGUgbmF2aWdhdGlvbiBtZW51JywgJ3VpLXR3ZWFrZXInKTtcblxuXHRcdHRoaXMuYWRkUG9zaXRpb25TZXR0aW5nKG1vYmlsZU5hdkdyb3VwLCAnXCJOYXZpZ2F0ZSBiYWNrXCIgYnV0dG9uIHBvc2l0aW9uJywgJ1NlbGVjdCB0aGUgcG9zaXRpb24gZm9yIHRoZSBcIk5hdmlnYXRlIGJhY2tcIiBidXR0b24gKGRlZmF1bHQgMSkuJywgJ25hdmlnYXRlQnV0dG9uUG9zaXRpb24nKTtcblxuXHRcdHRoaXMuYWRkUG9zaXRpb25TZXR0aW5nKG1vYmlsZU5hdkdyb3VwLCAnXCJOYXZpZ2F0ZSBmb3J3YXJkXCIgYnV0dG9uIHBvc2l0aW9uJywgJ1NlbGVjdCB0aGUgcG9zaXRpb24gZm9yIHRoZSBcIk5hdmlnYXRlIGZvcndhcmRcIiBidXR0b24gKGRlZmF1bHQgMikuJywgJ25hdmlnYXRpb25CdXR0b25Qb3NpdGlvbicpO1xuXG5cdFx0dGhpcy5hZGRQb3NpdGlvblNldHRpbmcobW9iaWxlTmF2R3JvdXAsICdcIlF1aWNrIHN3aXRjaGVyXCIgYnV0dG9uIHBvc2l0aW9uJywgJ1NlbGVjdCB0aGUgcG9zaXRpb24gZm9yIHRoZSBcIlF1aWNrIHN3aXRjaGVyXCIgYnV0dG9uIChkZWZhdWx0IDMpLicsICdxdWlja1N3aXRjaGVyUG9zaXRpb24nKTtcblxuXHRcdHRoaXMuYWRkUG9zaXRpb25TZXR0aW5nKG1vYmlsZU5hdkdyb3VwLCAnXCJOZXcgdGFiXCIgYnV0dG9uIHBvc2l0aW9uJywgJ1NlbGVjdCB0aGUgcG9zaXRpb24gZm9yIHRoZSBcIk5ldyB0YWJcIiBidXR0b24gKGRlZmF1bHQgNCkuJywgJ25ld1RhYlBvc2l0aW9uJyk7XG5cblx0XHR0aGlzLmFkZFBvc2l0aW9uU2V0dGluZyhtb2JpbGVOYXZHcm91cCwgJ1wiT3BlbiB0YWJzXCIgYnV0dG9uIHBvc2l0aW9uJywgJ1NlbGVjdCB0aGUgcG9zaXRpb24gZm9yIHRoZSBcIk9wZW4gdGFic1wiIGJ1dHRvbiAoZGVmYXVsdCA1KS4nLCAnb3BlblRhYnNQb3NpdGlvbicpO1xuXG5cdFx0dGhpcy5hZGRQb3NpdGlvblNldHRpbmcobW9iaWxlTmF2R3JvdXAsICdcIlJpYmJvbiBtZW51XCIgYnV0dG9uIHBvc2l0aW9uJywgJ1NlbGVjdCB0aGUgcG9zaXRpb24gZm9yIHRoZSBcIlJpYmJvbiBtZW51XCIgYnV0dG9uIChkZWZhdWx0IDYpLicsICdyaWJib25NZW51UG9zaXRpb24nKTtcblx0fVxuXG5cdHByaXZhdGUgYWRkVG9nZ2xlU2V0dGluZyhncm91cDogU2V0dGluZ3NDb250YWluZXIsIG5hbWU6IHN0cmluZywgZGVzYzogc3RyaW5nLCBrZXk6IGtleW9mIFVJU2V0dGluZ3MpIHtcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKTogdm9pZCA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKG5hbWUpXG5cdFx0XHRcdC5zZXREZXNjKGRlc2MpXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUoQm9vbGVhbih0aGlzLmdldFNldHRpbmdzKClba2V5XSkpLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0KHRoaXMuZ2V0U2V0dGluZ3MoKVtrZXldIGFzIGJvb2xlYW4pID0gdmFsdWU7XG5cdFx0XHRcdFx0XHR2b2lkIHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0KTtcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgYWRkUG9zaXRpb25TZXR0aW5nKGdyb3VwOiBTZXR0aW5nc0NvbnRhaW5lciwgbmFtZTogc3RyaW5nLCBkZXNjOiBzdHJpbmcsIGtleToga2V5b2YgVUlTZXR0aW5ncykge1xuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpOiB2b2lkID0+IHtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUobmFtZSlcblx0XHRcdFx0LnNldERlc2MoZGVzYylcblx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuXHRcdFx0XHRcdGZvciAobGV0IGkgPSAxOyBpIDw9IDY7IGkrKykge1xuXHRcdFx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKFN0cmluZyhpKSwgU3RyaW5nKGkpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudFZhbHVlID0gdGhpcy5nZXRTZXR0aW5ncygpW2tleV07XG5cdFx0XHRcdFx0Y29uc3Qgc3RyaW5nVmFsdWUgPSB0eXBlb2YgY3VycmVudFZhbHVlID09PSAnc3RyaW5nJyA/IGN1cnJlbnRWYWx1ZSA6ICcxJztcblx0XHRcdFx0XHRkcm9wZG93bi5zZXRWYWx1ZShzdHJpbmdWYWx1ZSkub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHQodGhpcy5nZXRTZXR0aW5ncygpW2tleV0gYXMgc3RyaW5nKSA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0dm9pZCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyU3luY0J1dHRvblJlcGxhY2VtZW50KGdyb3VwOiBTZXR0aW5nc0NvbnRhaW5lcik6IHZvaWQge1xuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5nZXRTZXR0aW5ncygpO1xuXHRcdGlmICghc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50KSB7XG5cdFx0XHRzZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQgPSB7XG5cdFx0XHRcdGVuYWJsZWQ6IGZhbHNlLFxuXHRcdFx0XHRjb21tYW5kSWQ6ICdvcGVuLXNldHRpbmdzJyxcblx0XHRcdFx0aWNvbklkOiAnd3JlbmNoJyxcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZSgnUmVwbGFjZSBzeW5jIGJ1dHRvbiB3aXRoIGN1c3RvbSBhY3Rpb24nKVxuXHRcdFx0XHQuc2V0RGVzYygnUmVwbGFjZSB0aGUgc3luYyBidXR0b24gaW4gdGhlIG1vYmlsZSBzaWRlYmFyIHdpdGggYSBjdXN0b20gaWNvbiBhbmQgY29tbWFuZC4gVGhpcyB3aWxsIGhpZGUgdGhlIG9yaWdpbmFsIHN5bmMgYnV0dG9uIGFuZCBzaG93IHlvdXIgY3VzdG9tIGJ1dHRvbiBpbnN0ZWFkLicpXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUoc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50LmVuYWJsZWQpLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKCFzZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQpIHtcblx0XHRcdFx0XHRcdFx0c2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50ID0ge1xuXHRcdFx0XHRcdFx0XHRcdGVuYWJsZWQ6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0Y29tbWFuZElkOiAnJyxcblx0XHRcdFx0XHRcdFx0XHRpY29uSWQ6ICd3cmVuY2gnLFxuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0c2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50LmVuYWJsZWQgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gU2hvdyBjb21tYW5kIGFuZCBpY29uIHBpY2tlcnMgb25seSBpZiByZXBsYWNlbWVudCBpcyBlbmFibGVkXG5cdFx0aWYgKHNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudC5lbmFibGVkKSB7XG5cdFx0XHRjb25zdCBnZXRDb21tYW5kTmFtZSA9IChjb21tYW5kSWQ6IHN0cmluZyk6IHN0cmluZyA9PiB7XG5cdFx0XHRcdGlmICghY29tbWFuZElkKSByZXR1cm4gJ1NlbGVjdCBjb21tYW5kLi4uJztcblx0XHRcdFx0XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Y29uc3QgY29tbWFuZFJlZ2lzdHJ5ID0gKHRoaXMuYXBwIGFzIHsgY29tbWFuZHM/OiB7IGxpc3RDb21tYW5kcz86ICgpID0+IEFycmF5PHsgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nIH0+IH0gfSkuY29tbWFuZHM7XG5cdFx0XHRcdFx0aWYgKGNvbW1hbmRSZWdpc3RyeSAmJiB0eXBlb2YgY29tbWFuZFJlZ2lzdHJ5Lmxpc3RDb21tYW5kcyA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdFx0Y29uc3QgY29tbWFuZHMgPSBjb21tYW5kUmVnaXN0cnkubGlzdENvbW1hbmRzKCk7XG5cdFx0XHRcdFx0XHRjb25zdCBjb21tYW5kID0gY29tbWFuZHMuZmluZCgoY21kKSA9PiBcblx0XHRcdFx0XHRcdFx0Y21kICYmIGNtZC5uYW1lICYmIChcblx0XHRcdFx0XHRcdFx0XHRjbWQuaWQgPT09IGNvbW1hbmRJZCB8fCBcblx0XHRcdFx0XHRcdFx0XHRjbWQuaWQgPT09IGNvbW1hbmRJZC5yZXBsYWNlKC9edWktdHdlYWtlcjorL2csICcnKSB8fFxuXHRcdFx0XHRcdFx0XHRcdGNtZC5pZCA9PT0gYHVpLXR3ZWFrZXI6JHtjb21tYW5kSWQucmVwbGFjZSgvXnVpLXR3ZWFrZXI6Ky9nLCAnJyl9YFxuXHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0aWYgKGNvbW1hbmQ/Lm5hbWUpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGNvbW1hbmQubmFtZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdC8vIEVycm9yIGdldHRpbmcgY29tbWFuZCBuYW1lXG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuICdTZWxlY3QgY29tbWFuZC4uLic7XG5cdFx0XHR9O1xuXG5cdFx0XHRjb25zdCBjb21tYW5kTmFtZSA9IGdldENvbW1hbmROYW1lKHNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudC5jb21tYW5kSWQpO1xuXHRcdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xuXHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0LnNldE5hbWUoJ0NvbW1hbmQnKVxuXHRcdFx0XHRcdC5zZXREZXNjKCdTZWxlY3QgdGhlIGNvbW1hbmQgdG8gZXhlY3V0ZSB3aGVuIHRoZSBidXR0b24gaXMgY2xpY2tlZCcpXG5cdFx0XHRcdFx0LmFkZEJ1dHRvbigoYnV0dG9uKSA9PlxuXHRcdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoY29tbWFuZE5hbWUgfHwgJ1NlbGVjdCBjb21tYW5kLi4uJykub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IENvbW1hbmRQaWNrZXJNb2RhbCh0aGlzLmFwcCwgKGNvbW1hbmRJZCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmICghc2V0dGluZ3Muc3luY0J1dHRvblJlcGxhY2VtZW50KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQgPSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGVuYWJsZWQ6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbW1hbmRJZDogJycsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGljb25JZDogJ3dyZW5jaCcsXG5cdFx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQuY29tbWFuZElkID0gY29tbWFuZElkO1xuXHRcdFx0XHRcdFx0XHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdG1vZGFsLm9wZW4oKTtcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0KTtcblx0XHRcdH0pO1xuXG5cdFx0XHRjb25zdCBnZXRJY29uTmFtZSA9IChpY29uSWQ6IHN0cmluZyk6IHN0cmluZyA9PiB7XG5cdFx0XHRcdGlmICghaWNvbklkKSByZXR1cm4gJyc7XG5cdFx0XHRcdHJldHVybiBpY29uSWRcblx0XHRcdFx0XHQucmVwbGFjZSgvXmx1Y2lkZS0vLCAnJylcblx0XHRcdFx0XHQuc3BsaXQoJy0nKVxuXHRcdFx0XHRcdC5tYXAoKHdvcmQpID0+IHdvcmQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB3b3JkLnNsaWNlKDEpKVxuXHRcdFx0XHRcdC5qb2luKCcgJyk7XG5cdFx0XHR9O1xuXG5cdFx0XHRjb25zdCBpY29uTmFtZSA9IGdldEljb25OYW1lKHNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudC5pY29uSWQpO1xuXHRcdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZyk6IHZvaWQgPT4ge1xuXHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0LnNldE5hbWUoJ0ljb24nKVxuXHRcdFx0XHRcdC5zZXREZXNjKCdTZWxlY3QgdGhlIGljb24gdG8gZGlzcGxheSBvbiB0aGUgYnV0dG9uJylcblx0XHRcdFx0XHQuYWRkQnV0dG9uKChidXR0b24pID0+XG5cdFx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChpY29uTmFtZSB8fCAnU2VsZWN0IGljb24uLi4nKS5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgSWNvblBpY2tlck1vZGFsKHRoaXMuYXBwLCAoaWNvbklkKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCFzZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHNldHRpbmdzLnN5bmNCdXR0b25SZXBsYWNlbWVudCA9IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZW5hYmxlZDogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29tbWFuZElkOiAnb3Blbi1zZXR0aW5ncycsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGljb25JZDogJ3dyZW5jaCcsXG5cdFx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5zeW5jQnV0dG9uUmVwbGFjZW1lbnQuaWNvbklkID0gaWNvbklkO1xuXHRcdFx0XHRcdFx0XHRcdHZvaWQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdG1vZGFsLm9wZW4oKTtcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxufVxuIiwgIi8qKlxuICogVGFiIEJhciBNYW5hZ2VyIC0gTWFuYWdlcyBjdXN0b20gY29tbWFuZCBidXR0b25zIGluIHBhZ2UgaGVhZGVycyAodGFiIGJhcilcbiAqIEJhc2VkIG9uIENvbW1hbmRlcidzIFBhZ2VIZWFkZXJNYW5hZ2VyIHdpdGggbWQvbWR4LW9ubHkgZmlsdGVyaW5nXG4gKi9cblxuaW1wb3J0IHsgSXRlbVZpZXcsIE1lbnUsIFdvcmtzcGFjZUxlYWYsIHNldEljb24gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgVUlUd2Vha2VyUGx1Z2luIGZyb20gJy4uL21haW4nO1xuaW1wb3J0IHsgQ29tbWFuZEljb25QYWlyIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgbWF0Y2hlc0ZpbGVUeXBlRmlsdGVyLCBpc01vZGVBY3RpdmUsIGlzQ29tbWFuZENoZWNrZWQgfSBmcm9tICcuLi91dGlscy9jb21tYW5kVXRpbHMnO1xuaW1wb3J0IHsgSWNvblBpY2tlck1vZGFsIH0gZnJvbSAnLi4vbW9kYWxzL0ljb25QaWNrZXJNb2RhbCc7XG5pbXBvcnQgeyBzZXRDc3NQcm9wcyB9IGZyb20gJy4uL3VpTWFuYWdlcic7XG5cbmV4cG9ydCBjbGFzcyBUYWJCYXJNYW5hZ2VyIHtcblx0cHJpdmF0ZSBwbHVnaW46IFVJVHdlYWtlclBsdWdpbjtcblx0cHJpdmF0ZSBidXR0b25zID0gbmV3IFdlYWtNYXA8SXRlbVZpZXcsIE1hcDxzdHJpbmcsIEhUTUxFbGVtZW50Pj4oKTtcblxuXHRjb25zdHJ1Y3RvcihwbHVnaW46IFVJVHdlYWtlclBsdWdpbikge1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHRcdHRoaXMuaW5pdCgpO1xuXHR9XG5cblx0cHJpdmF0ZSBnZXQgcGFpcnMoKTogQ29tbWFuZEljb25QYWlyW10ge1xuXHRcdHJldHVybiB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJCYXJDb21tYW5kcyB8fCBbXTtcblx0fVxuXG5cdHByaXZhdGUgaW5pdCgpOiB2b2lkIHtcblx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlcigoKSA9PiB7XG5cdFx0XHQvLyBSZW1vdmUgYWxsIGJ1dHRvbnMgb24gcGx1Z2luIHVubG9hZFxuXHRcdFx0dGhpcy5yZW1vdmVCdXR0b25zRnJvbUFsbExlYXZlcygpO1xuXHRcdH0pO1xuXHRcdFxuXHRcdHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQoXG5cdFx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKCdsYXlvdXQtY2hhbmdlJywgKCkgPT4ge1xuXHRcdFx0XHR0aGlzLmFkZEJ1dHRvbnNUb0FsbExlYXZlcygpO1xuXHRcdFx0fSlcblx0XHQpO1xuXHRcdFxuXHRcdHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PlxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB0aGlzLmFkZEJ1dHRvbnNUb0FsbExlYXZlcygpLCAxMDApXG5cdFx0KTtcblx0fVxuXG5cdHByaXZhdGUgYWRkUGFnZUhlYWRlckJ1dHRvbihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwYWlyOiBDb21tYW5kSWNvblBhaXIpOiB2b2lkIHtcblx0XHRjb25zdCB7IGlkIH0gPSBwYWlyO1xuXHRcdC8vIFVzZSB1c2VyLXNldCBuYW1lIGZvciB0aGUgYnV0dG9uIHRvb2x0aXBcblx0XHRjb25zdCBuYW1lID0gcGFpci5uYW1lO1xuXHRcdGNvbnN0IHsgdmlldyB9ID0gbGVhZjtcblx0XHRpZiAoISh2aWV3IGluc3RhbmNlb2YgSXRlbVZpZXcpKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdFxuXHRcdGNvbnN0IGJ1dHRvbnMgPSB0aGlzLmJ1dHRvbnNGb3IobGVhZiwgdHJ1ZSk7XG5cdFx0aWYgKCFidXR0b25zKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdFxuXHRcdC8vIElmIGJ1dHRvbiBhbHJlYWR5IGV4aXN0cywgdXBkYXRlIGl0cyBuYW1lIGFuZCBjb2xvciBpbnN0ZWFkIG9mIGNyZWF0aW5nIG5ldyBvbmVcblx0XHRpZiAoYnV0dG9ucy5oYXMoaWQpKSB7XG5cdFx0XHRjb25zdCBleGlzdGluZ0J1dHRvbiA9IGJ1dHRvbnMuZ2V0KGlkKTtcblx0XHRcdGlmIChleGlzdGluZ0J1dHRvbikge1xuXHRcdFx0XHQvLyBVcGRhdGUgdG9vbHRpcC9hcmlhLWxhYmVsIHdpdGggbmV3IG5hbWVcblx0XHRcdFx0ZXhpc3RpbmdCdXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgbmFtZSk7XG5cdFx0XHRcdGV4aXN0aW5nQnV0dG9uLnNldEF0dHJpYnV0ZSgndGl0bGUnLCBuYW1lKTtcblx0XHRcdFx0Ly8gVXBkYXRlIGNvbG9yIGlmIG5lZWRlZCAob25seSBpZiBub3QgYmxhY2sgLSBibGFjayA9IGRlZmF1bHQpXG5cdFx0XHRcdGlmIChwYWlyLmNvbG9yICYmIHBhaXIuY29sb3IgIT09ICcjMDAwMDAwJykge1xuXHRcdFx0XHRcdHNldENzc1Byb3BzKGV4aXN0aW5nQnV0dG9uLCB7IGNvbG9yOiBwYWlyLmNvbG9yIH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGV4aXN0aW5nQnV0dG9uLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjb2xvcicpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIFVwZGF0ZSB0b2dnbGUgc3RhdGVcblx0XHRcdFx0dGhpcy51cGRhdGVCdXR0b25Ub2dnbGVTdGF0ZShleGlzdGluZ0J1dHRvbiwgcGFpcik7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDaGVjayBmaWxlIHR5cGUgZmlsdGVyc1xuXHRcdGlmICghbWF0Y2hlc0ZpbGVUeXBlRmlsdGVyKGxlYWYsIHBhaXIuc2hvd09uRmlsZVR5cGVzLCBwYWlyLmhpZGVPbkZpbGVUeXBlcykpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBEZXRlcm1pbmUgaW5pdGlhbCBpY29uIGJhc2VkIG9uIHRvZ2dsZSBzdGF0ZVxuXHRcdGNvbnN0IGluaXRpYWxJY29uID0gdGhpcy5nZXRJY29uRm9yVG9nZ2xlU3RhdGUocGFpcik7XG5cdFx0XG5cdFx0Y29uc3QgYnV0dG9uSWNvbiA9IHZpZXcuYWRkQWN0aW9uKGluaXRpYWxJY29uLCBuYW1lLCAoKSA9PiB7XG5cdFx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYobGVhZiwgeyBmb2N1czogdHJ1ZSB9KTtcblx0XHRcdGNvbnN0IGNvbW1hbmRzID0gKHRoaXMucGx1Z2luLmFwcCBhcyB7IGNvbW1hbmRzPzogeyBleGVjdXRlQ29tbWFuZEJ5SWQ/OiAoaWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPiB9IH0pLmNvbW1hbmRzO1xuXHRcdFx0aWYgKGNvbW1hbmRzPy5leGVjdXRlQ29tbWFuZEJ5SWQpIHtcblx0XHRcdFx0Ly8gQ29tbWFuZCBleGVjdXRpb24gaXMgdHJhY2tlZCBieSB0aGUgaW50ZXJjZXB0b3IgaW4gbWFpbi50c1xuXHRcdFx0XHQvLyBKdXN0IGV4ZWN1dGUgdGhlIGNvbW1hbmQgLSB0aGUgaW50ZXJjZXB0b3Igd2lsbCBoYW5kbGUgdG9nZ2xlIHRyYWNraW5nXG5cdFx0XHRcdHZvaWQgY29tbWFuZHMuZXhlY3V0ZUNvbW1hbmRCeUlkKGlkKTtcblx0XHRcdFx0Ly8gVXBkYXRlIHRvZ2dsZSBzdGF0ZSBhZnRlciBjb21tYW5kIGV4ZWN1dGlvblxuXHRcdFx0XHQvLyBUaGUgaW50ZXJjZXB0b3Igd2lsbCBhbHNvIHJlZnJlc2gsIGJ1dCB3ZSB1cGRhdGUgdGhpcyBidXR0b24gaW1tZWRpYXRlbHkgZm9yIHJlc3BvbnNpdmVuZXNzXG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMudXBkYXRlQnV0dG9uVG9nZ2xlU3RhdGUoYnV0dG9uSWNvbiwgcGFpcik7XG5cdFx0XHRcdFx0Ly8gQWxzbyB1cGRhdGUgYWxsIG90aGVyIGJ1dHRvbnMgZm9yIHRoaXMgY29tbWFuZFxuXHRcdFx0XHRcdHRoaXMudXBkYXRlQWxsQnV0dG9uc0ZvckNvbW1hbmQoaWQpO1xuXHRcdFx0XHR9LCAxMDApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGJ1dHRvbnMuc2V0KGlkLCBidXR0b25JY29uKTtcblxuXHRcdGJ1dHRvbkljb24uYWRkQ2xhc3NlcyhbJ3VpLXR3ZWFrZXItdGFiLWJhci1idXR0b24nLCBpZF0pO1xuXHRcdC8vIE9ubHkgYXBwbHkgY29sb3IgaWYgaXQncyBzZXQgYW5kIG5vdCBibGFjayAoYmxhY2sgPSBkZWZhdWx0KVxuXHRcdGlmIChwYWlyLmNvbG9yICYmIHBhaXIuY29sb3IgIT09ICcjMDAwMDAwJykge1xuXHRcdFx0c2V0Q3NzUHJvcHMoYnV0dG9uSWNvbiwgeyBjb2xvcjogcGFpci5jb2xvciB9KTtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gVXBkYXRlIHRvZ2dsZSBzdGF0ZSBhZnRlciBjcmVhdGlvblxuXHRcdHRoaXMudXBkYXRlQnV0dG9uVG9nZ2xlU3RhdGUoYnV0dG9uSWNvbiwgcGFpcik7XG5cblx0XHRidXR0b25JY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgKGV2ZW50KSA9PiB7XG5cdFx0XHRldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblx0XHRcdG5ldyBNZW51KClcblx0XHRcdFx0LmFkZEl0ZW0oKGl0ZW0pID0+IHtcblx0XHRcdFx0XHRpdGVtLnNldFRpdGxlKCdDaGFuZ2UgaWNvbicpXG5cdFx0XHRcdFx0XHQuc2V0SWNvbignbHVjaWRlLWltYWdlLXBsdXMnKVxuXHRcdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBJY29uUGlja2VyTW9kYWwodGhpcy5wbHVnaW4uYXBwLCAoaWNvbklkKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGljb25JZCAmJiBpY29uSWQgIT09IHBhaXIuaWNvbikge1xuXHRcdFx0XHRcdFx0XHRcdFx0cGFpci5pY29uID0gaWNvbklkO1xuXHRcdFx0XHRcdFx0XHRcdFx0dm9pZCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVvcmRlcigpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdG1vZGFsLm9wZW4oKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuYWRkSXRlbSgoaXRlbSkgPT4ge1xuXHRcdFx0XHRcdGl0ZW0uc2V0VGl0bGUoJ0RlbGV0ZScpXG5cdFx0XHRcdFx0XHQuc2V0SWNvbignbHVjaWRlLXRyYXNoJylcblx0XHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0dm9pZCB0aGlzLnJlbW92ZUNvbW1hbmQocGFpcik7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQvLyBBZGQgd2FybmluZyBjbGFzcyB0byBtYWtlIHRleHQgYW5kIGljb24gcmVkXG5cdFx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2VzcywgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSwgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50XG5cdFx0XHRcdFx0Y29uc3QgZG9tID0gKGl0ZW0gYXMgYW55KS5kb207XG5cdFx0XHRcdFx0aWYgKGRvbSkge1xuXHRcdFx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbCwgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG5cdFx0XHRcdFx0XHRkb20uY2xhc3NMaXN0LmFkZCgnbW9kLXdhcm5pbmcnKTtcblx0XHRcdFx0XHRcdC8vIEFsc28gbWFrZSB0aGUgaWNvbiByZWRcblx0XHRcdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnQsIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbCwgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG5cdFx0XHRcdFx0XHRjb25zdCBpY29uRWwgPSBkb20ucXVlcnlTZWxlY3RvcignLm1lbnUtaXRlbS1pY29uIHN2ZycpO1xuXHRcdFx0XHRcdFx0aWYgKGljb25FbCkge1xuXHRcdFx0XHRcdFx0XHQvLyBVc2Ugc2V0Q3NzUHJvcHMgdG8gc2V0IGNvbG9yIChhbHJlYWR5IGltcG9ydGVkIGZyb20gdWlNYW5hZ2VyKVxuXHRcdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhpY29uRWwgYXMgSFRNTEVsZW1lbnQsIHsgY29sb3I6ICd2YXIoLS10ZXh0LWVycm9yKScgfSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KVxuXHRcdFx0XHQuc2hvd0F0TW91c2VFdmVudChldmVudCk7XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIGJ1dHRvbnNGb3IobGVhZjogV29ya3NwYWNlTGVhZiwgY3JlYXRlID0gZmFsc2UpIHtcblx0XHRpZiAoIShsZWFmLnZpZXcgaW5zdGFuY2VvZiBJdGVtVmlldykpIHJldHVybjtcblx0XHRpZiAoY3JlYXRlICYmICF0aGlzLmJ1dHRvbnMuaGFzKGxlYWYudmlldykpXG5cdFx0XHR0aGlzLmJ1dHRvbnMuc2V0KGxlYWYudmlldywgbmV3IE1hcCgpKTtcblx0XHRyZXR1cm4gdGhpcy5idXR0b25zLmdldChsZWFmLnZpZXcpO1xuXHR9XG5cblx0cHJpdmF0ZSBhZGRCdXR0b25zVG9BbGxMZWF2ZXMocmVmcmVzaCA9IGZhbHNlKTogdm9pZCB7XG5cdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcblx0XHRcdHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xuXHRcdFx0XHR0aGlzLmFkZEJ1dHRvbnNUb0xlYWYobGVhZiwgcmVmcmVzaCk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgcmVtb3ZlQnV0dG9uc0Zyb21BbGxMZWF2ZXMoKTogdm9pZCB7XG5cdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+XG5cdFx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+XG5cdFx0XHRcdHRoaXMucmVtb3ZlQnV0dG9uc0Zyb21MZWFmKGxlYWYpXG5cdFx0XHQpXG5cdFx0KTtcblx0fVxuXG5cdHByaXZhdGUgYWRkQnV0dG9uc1RvTGVhZihsZWFmOiBXb3Jrc3BhY2VMZWFmLCByZWZyZXNoID0gZmFsc2UpOiB2b2lkIHtcblx0XHRpZiAoIShsZWFmLnZpZXcgaW5zdGFuY2VvZiBJdGVtVmlldykpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0aWYgKHJlZnJlc2gpIHtcblx0XHRcdHRoaXMucmVtb3ZlQnV0dG9uc0Zyb21MZWFmKGxlYWYpO1xuXHRcdH0gZWxzZSBpZiAodGhpcy5idXR0b25zRm9yKGxlYWYpPy5zaXplKSB7XG5cdFx0XHQvLyBWaWV3IGFscmVhZHkgaGFzIGJ1dHRvbnMgYW5kIHdlJ3JlIG5vdCBkb2luZyBhIGZ1bGwgcmVmcmVzaFxuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRmb3IgKGxldCBpID0gdGhpcy5wYWlycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0Y29uc3QgcGFpciA9IHRoaXMucGFpcnNbaV07XG5cdFx0XHRpZiAoaXNNb2RlQWN0aXZlKHBhaXIubW9kZSwgdGhpcy5wbHVnaW4pKSB7XG5cdFx0XHRcdHRoaXMuYWRkUGFnZUhlYWRlckJ1dHRvbihsZWFmLCBwYWlyKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIHJlbW92ZUJ1dHRvbnNGcm9tTGVhZihsZWFmOiBXb3Jrc3BhY2VMZWFmKSB7XG5cdFx0Y29uc3QgYnV0dG9ucyA9IHRoaXMuYnV0dG9uc0ZvcihsZWFmKTtcblx0XHRpZiAoYnV0dG9ucykge1xuXHRcdFx0Zm9yIChjb25zdCBidXR0b24gb2YgYnV0dG9ucy52YWx1ZXMoKSkgYnV0dG9uLmRldGFjaCgpO1xuXHRcdFx0YnV0dG9ucz8uY2xlYXIoKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgcmVvcmRlcigpOiB2b2lkIHtcblx0XHR0aGlzLmFkZEJ1dHRvbnNUb0FsbExlYXZlcyh0cnVlKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBVcGRhdGUgYnV0dG9uIG5hbWVzL3Rvb2x0aXBzIGZvciBhbGwgZXhpc3RpbmcgYnV0dG9uc1xuXHQgKi9cblx0cHVibGljIHVwZGF0ZUJ1dHRvbk5hbWVzKCk6IHZvaWQge1xuXHRcdHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xuXHRcdFx0aWYgKCEobGVhZi52aWV3IGluc3RhbmNlb2YgSXRlbVZpZXcpKSByZXR1cm47XG5cdFx0XHRjb25zdCBidXR0b25zID0gdGhpcy5idXR0b25zRm9yKGxlYWYpO1xuXHRcdFx0aWYgKCFidXR0b25zKSByZXR1cm47XG5cdFx0XHRcblx0XHRcdGZvciAoY29uc3QgW2lkLCBidXR0b25dIG9mIGJ1dHRvbnMuZW50cmllcygpKSB7XG5cdFx0XHRcdGNvbnN0IHBhaXIgPSB0aGlzLnBhaXJzLmZpbmQocCA9PiBwLmlkID09PSBpZCk7XG5cdFx0XHRcdGlmIChwYWlyKSB7XG5cdFx0XHRcdFx0Ly8gVXBkYXRlIHRvb2x0aXAvYXJpYS1sYWJlbCB3aXRoIGN1cnJlbnQgbmFtZVxuXHRcdFx0XHRcdGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBwYWlyLm5hbWUpO1xuXHRcdFx0XHRcdGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgcGFpci5uYW1lKTtcblx0XHRcdFx0XHQvLyBVcGRhdGUgY29sb3IgaWYgbmVlZGVkXG5cdFx0XHRcdFx0aWYgKHBhaXIuY29sb3IgJiYgcGFpci5jb2xvciAhPT0gJyMwMDAwMDAnKSB7XG5cdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhidXR0b24sIHsgY29sb3I6IHBhaXIuY29sb3IgfSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGJ1dHRvbi5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnY29sb3InKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly8gVXBkYXRlIHRvZ2dsZSBzdGF0ZVxuXHRcdFx0XHRcdHRoaXMudXBkYXRlQnV0dG9uVG9nZ2xlU3RhdGUoYnV0dG9uLCBwYWlyKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldCBpY29uIGZvciBjdXJyZW50IHRvZ2dsZSBzdGF0ZVxuXHQgKi9cblx0cHJpdmF0ZSBnZXRJY29uRm9yVG9nZ2xlU3RhdGUocGFpcjogQ29tbWFuZEljb25QYWlyKTogc3RyaW5nIHtcblx0XHRpZiAoIXBhaXIudG9nZ2xlSWNvbikge1xuXHRcdFx0cmV0dXJuIHBhaXIuaWNvbjtcblx0XHR9XG5cdFx0Y29uc3QgaXNDaGVja2VkID0gaXNDb21tYW5kQ2hlY2tlZChwYWlyLmlkLCB0aGlzLnBsdWdpbik7XG5cdFx0cmV0dXJuIGlzQ2hlY2tlZCA/IHBhaXIudG9nZ2xlSWNvbiA6IHBhaXIuaWNvbjtcblx0fVxuXG5cdC8qKlxuXHQgKiBVcGRhdGUgYnV0dG9uIHRvZ2dsZSBzdGF0ZSAoaWNvbiBzd2FwIG9ubHkgZm9yIHRhYiBiYXIpXG5cdCAqL1xuXHRwcml2YXRlIHVwZGF0ZUJ1dHRvblRvZ2dsZVN0YXRlKGJ1dHRvbjogSFRNTEVsZW1lbnQsIHBhaXI6IENvbW1hbmRJY29uUGFpcik6IHZvaWQge1xuXHRcdGlmICghcGFpci50b2dnbGVJY29uKSB7XG5cdFx0XHQvLyBObyB0b2dnbGUgY29uZmlndXJlZCAtIHVzZSBkZWZhdWx0IGljb25cblx0XHRcdHNldEljb24oYnV0dG9uLCBwYWlyLmljb24pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGlmIGNvbW1hbmQgaXMgY3VycmVudGx5IHRvZ2dsZWQgb25cblx0XHRjb25zdCBpc0NoZWNrZWQgPSBpc0NvbW1hbmRDaGVja2VkKHBhaXIuaWQsIHRoaXMucGx1Z2luKTtcblx0XHRcblx0XHQvLyBTd2FwIGljb24gYmFzZWQgb24gdG9nZ2xlIHN0YXRlXG5cdFx0c2V0SWNvbihidXR0b24sIGlzQ2hlY2tlZCA/IHBhaXIudG9nZ2xlSWNvbiA6IHBhaXIuaWNvbik7XG5cdH1cblxuXHQvKipcblx0ICogVXBkYXRlIGFsbCBidXR0b25zIGZvciBhIHNwZWNpZmljIGNvbW1hbmQgSUQgYWNyb3NzIGFsbCBsZWF2ZXNcblx0ICovXG5cdHByaXZhdGUgdXBkYXRlQWxsQnV0dG9uc0ZvckNvbW1hbmQoY29tbWFuZElkOiBzdHJpbmcpOiB2b2lkIHtcblx0XHRjb25zdCBwYWlyID0gdGhpcy5wYWlycy5maW5kKHAgPT4gcC5pZCA9PT0gY29tbWFuZElkKTtcblx0XHRpZiAoIXBhaXIpIHJldHVybjtcblxuXHRcdHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xuXHRcdFx0aWYgKCEobGVhZi52aWV3IGluc3RhbmNlb2YgSXRlbVZpZXcpKSByZXR1cm47XG5cdFx0XHRjb25zdCBidXR0b25zID0gdGhpcy5idXR0b25zRm9yKGxlYWYpO1xuXHRcdFx0aWYgKCFidXR0b25zKSByZXR1cm47XG5cblx0XHRcdGNvbnN0IGJ1dHRvbiA9IGJ1dHRvbnMuZ2V0KGNvbW1hbmRJZCk7XG5cdFx0XHRpZiAoYnV0dG9uKSB7XG5cdFx0XHRcdHRoaXMudXBkYXRlQnV0dG9uVG9nZ2xlU3RhdGUoYnV0dG9uLCBwYWlyKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZWZyZXNoIHRvZ2dsZSBzdGF0ZXMgZm9yIGFsbCBidXR0b25zXG5cdCAqL1xuXHRwdWJsaWMgcmVmcmVzaFRvZ2dsZVN0YXRlcygpOiB2b2lkIHtcblx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcblx0XHRcdGlmICghKGxlYWYudmlldyBpbnN0YW5jZW9mIEl0ZW1WaWV3KSkgcmV0dXJuO1xuXHRcdFx0Y29uc3QgYnV0dG9ucyA9IHRoaXMuYnV0dG9uc0ZvcihsZWFmKTtcblx0XHRcdGlmICghYnV0dG9ucykgcmV0dXJuO1xuXG5cdFx0XHRmb3IgKGNvbnN0IFtpZCwgYnV0dG9uXSBvZiBidXR0b25zLmVudHJpZXMoKSkge1xuXHRcdFx0XHRjb25zdCBwYWlyID0gdGhpcy5wYWlycy5maW5kKHAgPT4gcC5pZCA9PT0gaWQpO1xuXHRcdFx0XHRpZiAocGFpciAmJiBwYWlyLnRvZ2dsZUljb24pIHtcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUJ1dHRvblRvZ2dsZVN0YXRlKGJ1dHRvbiwgcGFpcik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBhc3luYyBhZGRDb21tYW5kKHBhaXI6IENvbW1hbmRJY29uUGFpcik6IFByb21pc2U8dm9pZD4ge1xuXHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiQmFyQ29tbWFuZHMpIHtcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYkJhckNvbW1hbmRzID0gW107XG5cdFx0fVxuXHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnRhYkJhckNvbW1hbmRzLnB1c2gocGFpcik7XG5cdFx0dGhpcy5hZGRCdXR0b25zVG9BbGxMZWF2ZXModHJ1ZSk7XG5cdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdH1cblxuXHRwdWJsaWMgYXN5bmMgcmVtb3ZlQ29tbWFuZChwYWlyOiBDb21tYW5kSWNvblBhaXIpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLnRhYkJhckNvbW1hbmRzKSByZXR1cm47XG5cdFx0Y29uc3QgaW5kZXggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJCYXJDb21tYW5kcy5pbmRleE9mKHBhaXIpO1xuXHRcdGlmIChpbmRleCA+IC0xKSB7XG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJCYXJDb21tYW5kcy5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdH1cblx0XHR0aGlzLmFkZEJ1dHRvbnNUb0FsbExlYXZlcyh0cnVlKTtcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0fVxuXG5cdHB1YmxpYyBhc3luYyB1cGRhdGVDb21tYW5kKG9sZFBhaXI6IENvbW1hbmRJY29uUGFpciwgbmV3UGFpcjogQ29tbWFuZEljb25QYWlyKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWJCYXJDb21tYW5kcykgcmV0dXJuO1xuXHRcdGNvbnN0IGluZGV4ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiQmFyQ29tbWFuZHMuaW5kZXhPZihvbGRQYWlyKTtcblx0XHRpZiAoaW5kZXggPiAtMSkge1xuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudGFiQmFyQ29tbWFuZHNbaW5kZXhdID0gbmV3UGFpcjtcblx0XHRcdHRoaXMuYWRkQnV0dG9uc1RvQWxsTGVhdmVzKHRydWUpO1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0fVxuXHR9XG59XG4iLCAiLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgY29tbWFuZCBtYW5hZ2VtZW50XG4gKi9cblxuaW1wb3J0IHsgQ29tbWFuZCwgTWFya2Rvd25WaWV3LCBXb3Jrc3BhY2VMZWFmLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBVSVR3ZWFrZXJQbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBNb2RlIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG4vKipcbiAqIENoZWNrIGlmIGEgdmlldyBpcyBhIG1hcmtkb3duIG9yIG1hcmtkb3dueCBmaWxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc01hcmtkb3duVmlldyhsZWFmOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbCk6IGJvb2xlYW4ge1xuXHRpZiAoIWxlYWY/LnZpZXcpIHJldHVybiBmYWxzZTtcblx0XG5cdGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcpIHtcblx0XHRjb25zdCBmaWxlID0gbGVhZi52aWV3LmZpbGU7XG5cdFx0aWYgKCFmaWxlKSByZXR1cm4gZmFsc2U7XG5cdFx0XG5cdFx0Ly8gQ2hlY2sgaWYgZmlsZSBleHRlbnNpb24gaXMgLm1kIG9yIC5tZHhcblx0XHRjb25zdCBleHQgPSBmaWxlLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpO1xuXHRcdHJldHVybiBleHQgPT09ICdtZCcgfHwgZXh0ID09PSAnbWR4Jztcblx0fVxuXHRcblx0cmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIEdldCBmaWxlIGV4dGVuc2lvbiBmcm9tIGEgd29ya3NwYWNlIGxlYWZcbiAqL1xuZnVuY3Rpb24gZ2V0RmlsZUV4dGVuc2lvbihsZWFmOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbCk6IHN0cmluZyB8IG51bGwge1xuXHRpZiAoIWxlYWY/LnZpZXcpIHJldHVybiBudWxsO1xuXHRcblx0Ly8gVHJ5IHRvIGdldCBmaWxlIGZyb20gdmlldyAod29ya3MgZm9yIEl0ZW1WaWV3IGFuZCBNYXJrZG93blZpZXcpXG5cdGNvbnN0IHZpZXcgPSBsZWFmLnZpZXcgYXMgeyBmaWxlPzogVEZpbGUgfCBudWxsIH07XG5cdGNvbnN0IGZpbGUgPSB2aWV3LmZpbGU7XG5cdGlmICghZmlsZSkgcmV0dXJuIG51bGw7XG5cdFxuXHRyZXR1cm4gZmlsZS5leHRlbnNpb24udG9Mb3dlckNhc2UoKTtcbn1cblxuLyoqXG4gKiBQYXJzZSBjb21tYS1zZXBhcmF0ZWQgZmlsZSBleHRlbnNpb25zIGludG8gYW4gYXJyYXlcbiAqL1xuZnVuY3Rpb24gcGFyc2VGaWxlVHlwZXModHlwZXM6IHN0cmluZyB8IHVuZGVmaW5lZCk6IHN0cmluZ1tdIHtcblx0aWYgKCF0eXBlcyB8fCAhdHlwZXMudHJpbSgpKSByZXR1cm4gW107XG5cdHJldHVybiB0eXBlc1xuXHRcdC5zcGxpdCgnLCcpXG5cdFx0Lm1hcChwID0+IHAudHJpbSgpLnJlcGxhY2UoL15cXC4vLCAnJykudG9Mb3dlckNhc2UoKSlcblx0XHQuZmlsdGVyKHAgPT4gcCk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBmaWxlIG1hdGNoZXMgdGhlIGZpbGUgdHlwZSBmaWx0ZXJzXG4gKiBzaG93T25GaWxlVHlwZXM6IFNob3cgb25seSBvbiB0aGVzZSBmaWxlIHR5cGVzIChlLmcuLCBcIm1kLG1keFwiKVxuICogaGlkZU9uRmlsZVR5cGVzOiBOZXZlciBzaG93IG9uIHRoZXNlIGZpbGUgdHlwZXMgKGUuZy4sIFwianBnLHBuZ1wiKVxuICovXG5leHBvcnQgZnVuY3Rpb24gbWF0Y2hlc0ZpbGVUeXBlRmlsdGVyKFxuXHRsZWFmOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbCxcblx0c2hvd09uRmlsZVR5cGVzOiBzdHJpbmcgfCB1bmRlZmluZWQsXG5cdGhpZGVPbkZpbGVUeXBlczogc3RyaW5nIHwgdW5kZWZpbmVkXG4pOiBib29sZWFuIHtcblx0Ly8gR2V0IGZpbGUgZXh0ZW5zaW9uIGZyb20gbGVhZlxuXHRjb25zdCBmaWxlRXh0ID0gZ2V0RmlsZUV4dGVuc2lvbihsZWFmKTtcblx0aWYgKCFmaWxlRXh0KSByZXR1cm4gZmFsc2U7IC8vIE5vIGZpbGUgPSBkb24ndCBzaG93XG5cdFxuXHQvLyBQYXJzZSB0aGUgZmlsdGVyIHN0cmluZ3Ncblx0Y29uc3Qgc2hvd1R5cGVzID0gcGFyc2VGaWxlVHlwZXMoc2hvd09uRmlsZVR5cGVzKTtcblx0Y29uc3QgaGlkZVR5cGVzID0gcGFyc2VGaWxlVHlwZXMoaGlkZU9uRmlsZVR5cGVzKTtcblx0XG5cdC8vIElmIGhpZGUgbGlzdCBleGlzdHMgYW5kIGZpbGUgbWF0Y2hlcywgZG9uJ3Qgc2hvd1xuXHRpZiAoaGlkZVR5cGVzLmxlbmd0aCA+IDAgJiYgaGlkZVR5cGVzLmluY2x1ZGVzKGZpbGVFeHQpKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdFxuXHQvLyBJZiBzaG93IGxpc3QgZXhpc3RzLCBtdXN0IG1hdGNoIG9uZSBvZiB0aGVtXG5cdGlmIChzaG93VHlwZXMubGVuZ3RoID4gMCkge1xuXHRcdHJldHVybiBzaG93VHlwZXMuaW5jbHVkZXMoZmlsZUV4dCk7XG5cdH1cblx0XG5cdC8vIE5vIGZpbHRlcnMgPSBzaG93IG9uIGFsbCBmaWxlcyAodW5sZXNzIGhpZGRlbilcblx0cmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgbW9kZSBpcyBhY3RpdmUgKGRlc2t0b3AvbW9iaWxlL2FueS90aGlzIGRldmljZSlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTW9kZUFjdGl2ZShtb2RlOiBNb2RlLCBwbHVnaW46IFVJVHdlYWtlclBsdWdpbik6IGJvb2xlYW4ge1xuXHRjb25zdCBhcHAgPSBwbHVnaW4uYXBwIGFzIHsgaXNNb2JpbGU/OiBib29sZWFuOyBhcHBJZD86IHN0cmluZyB9O1xuXHRjb25zdCBpc01vYmlsZSA9IGFwcC5pc01vYmlsZSA/PyBmYWxzZTtcblx0Y29uc3QgYXBwSWQgPSBhcHAuYXBwSWQ7XG5cdFxuXHQvLyBIYW5kbGUgXCJ0aGlzIGRldmljZVwiIG1vZGUgKGFwcC5hcHBJZClcblx0aWYgKG1vZGUgIT09ICdhbnknICYmIG1vZGUgIT09ICdkZXNrdG9wJyAmJiBtb2RlICE9PSAnbW9iaWxlJykge1xuXHRcdHJldHVybiBtb2RlID09PSBhcHBJZDtcblx0fVxuXHRcblx0cmV0dXJuIChcblx0XHRtb2RlID09PSAnYW55JyB8fFxuXHRcdChtb2RlID09PSAnbW9iaWxlJyAmJiBpc01vYmlsZSkgfHxcblx0XHQobW9kZSA9PT0gJ2Rlc2t0b3AnICYmICFpc01vYmlsZSlcblx0KTtcbn1cblxuLyoqXG4gKiBHZXQgY29tbWFuZCBmcm9tIElEXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb21tYW5kRnJvbUlkKGlkOiBzdHJpbmcsIHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luKTogQ29tbWFuZCB8IG51bGwge1xuXHRjb25zdCBjb21tYW5kcyA9IChwbHVnaW4uYXBwIGFzIHsgY29tbWFuZHM/OiB7IGNvbW1hbmRzPzogeyBbaWQ6IHN0cmluZ106IENvbW1hbmQgfSB9IH0pLmNvbW1hbmRzO1xuXHRyZXR1cm4gY29tbWFuZHM/LmNvbW1hbmRzPy5baWRdID8/IG51bGw7XG59XG5cbi8qKlxuICogQ29tbWFuZCB0b2dnbGUgc3RhdGUgdHJhY2tlclxuICogVHJhY2tzIHRvZ2dsZSBzdGF0ZSBmb3IgY29tbWFuZHMgdGhhdCBkb24ndCBoYXZlIGNoZWNrQ2FsbGJhY2tcbiAqIEFsc28gdHJhY2tzIHByZXZpb3VzIHN0YXRlcyB0byBkZXRlY3QgY2hhbmdlc1xuICovXG5jbGFzcyBDb21tYW5kVG9nZ2xlVHJhY2tlciB7XG5cdHByaXZhdGUgdG9nZ2xlU3RhdGVzID0gbmV3IE1hcDxzdHJpbmcsIGJvb2xlYW4+KCk7XG5cdHByaXZhdGUgcHJldmlvdXNTdGF0ZXMgPSBuZXcgTWFwPHN0cmluZywgYm9vbGVhbj4oKTtcblx0cHJpdmF0ZSBleGVjdXRpb25Db3VudHMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xuXG5cdC8qKlxuXHQgKiBSZWNvcmQgdGhhdCBhIGNvbW1hbmQgd2FzIGV4ZWN1dGVkXG5cdCAqL1xuXHRyZWNvcmRFeGVjdXRpb24oaWQ6IHN0cmluZyk6IHZvaWQge1xuXHRcdGNvbnN0IGN1cnJlbnRDb3VudCA9IHRoaXMuZXhlY3V0aW9uQ291bnRzLmdldChpZCkgfHwgMDtcblx0XHR0aGlzLmV4ZWN1dGlvbkNvdW50cy5zZXQoaWQsIGN1cnJlbnRDb3VudCArIDEpO1xuXHRcdFxuXHRcdC8vIFRvZ2dsZSBzdGF0ZSBiYXNlZCBvbiBleGVjdXRpb24gY291bnQgKG9kZCA9IG9uLCBldmVuID0gb2ZmKVxuXHRcdC8vIFRoaXMgaXMgYSBmYWxsYmFjayBmb3IgY29tbWFuZHMgd2l0aG91dCBjaGVja0NhbGxiYWNrXG5cdFx0dGhpcy50b2dnbGVTdGF0ZXMuc2V0KGlkLCAoY3VycmVudENvdW50ICsgMSkgJSAyID09PSAxKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBHZXQgdHJhY2tlZCB0b2dnbGUgc3RhdGUgKGZvciBjb21tYW5kcyB3aXRob3V0IGNoZWNrQ2FsbGJhY2spXG5cdCAqL1xuXHRnZXRUcmFja2VkU3RhdGUoaWQ6IHN0cmluZyk6IGJvb2xlYW4gfCBudWxsIHtcblx0XHRyZXR1cm4gdGhpcy50b2dnbGVTdGF0ZXMuZ2V0KGlkKSA/PyBudWxsO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldCBwcmV2aW91cyB0b2dnbGUgc3RhdGUgKGZvciBjaGFuZ2UgZGV0ZWN0aW9uKVxuXHQgKi9cblx0Z2V0UHJldmlvdXNTdGF0ZShpZDogc3RyaW5nKTogYm9vbGVhbiB8IG51bGwge1xuXHRcdHJldHVybiB0aGlzLnByZXZpb3VzU3RhdGVzLmdldChpZCkgPz8gbnVsbDtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXNldCB0cmFja2VkIHN0YXRlIGZvciBhIGNvbW1hbmRcblx0ICovXG5cdHJlc2V0U3RhdGUoaWQ6IHN0cmluZyk6IHZvaWQge1xuXHRcdHRoaXMudG9nZ2xlU3RhdGVzLmRlbGV0ZShpZCk7XG5cdFx0dGhpcy5wcmV2aW91c1N0YXRlcy5kZWxldGUoaWQpO1xuXHRcdHRoaXMuZXhlY3V0aW9uQ291bnRzLmRlbGV0ZShpZCk7XG5cdH1cblxuXHQvKipcblx0ICogU3luYyB0cmFja2VkIHN0YXRlIHdpdGggYWN0dWFsIGNvbW1hbmQgc3RhdGVcblx0ICogVXNlZCB3aGVuIGNoZWNrQ2FsbGJhY2sgcmVwb3J0cyBhIGRpZmZlcmVudCBzdGF0ZSB0aGFuIHRyYWNrZWRcblx0ICogUmV0dXJucyB0cnVlIGlmIHN0YXRlIGNoYW5nZWQsIGZhbHNlIG90aGVyd2lzZVxuXHQgKi9cblx0c3luY1N0YXRlKGlkOiBzdHJpbmcsIGFjdHVhbFN0YXRlOiBib29sZWFuKTogYm9vbGVhbiB7XG5cdFx0Y29uc3QgY3VycmVudFRyYWNrZWRTdGF0ZSA9IHRoaXMudG9nZ2xlU3RhdGVzLmdldChpZCk7XG5cdFx0XG5cdFx0Ly8gU3RvcmUgY3VycmVudCBzdGF0ZSBhcyBwcmV2aW91cyBiZWZvcmUgdXBkYXRpbmdcblx0XHRpZiAoY3VycmVudFRyYWNrZWRTdGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHR0aGlzLnByZXZpb3VzU3RhdGVzLnNldChpZCwgY3VycmVudFRyYWNrZWRTdGF0ZSk7XG5cdFx0fVxuXHRcdFxuXHRcdGlmIChjdXJyZW50VHJhY2tlZFN0YXRlICE9PSBhY3R1YWxTdGF0ZSkge1xuXHRcdFx0Ly8gU3RhdGUgY2hhbmdlZCAtIHVwZGF0ZSB0cmFja2VkIHN0YXRlIHRvIG1hdGNoXG5cdFx0XHQvLyBBZGp1c3QgZXhlY3V0aW9uIGNvdW50IHRvIHJlZmxlY3QgdGhlIGNoYW5nZVxuXHRcdFx0Y29uc3QgY3VycmVudENvdW50ID0gdGhpcy5leGVjdXRpb25Db3VudHMuZ2V0KGlkKSB8fCAwO1xuXHRcdFx0dGhpcy5leGVjdXRpb25Db3VudHMuc2V0KGlkLCBjdXJyZW50Q291bnQgKyAxKTtcblx0XHRcdHRoaXMudG9nZ2xlU3RhdGVzLnNldChpZCwgYWN0dWFsU3RhdGUpO1xuXHRcdFx0cmV0dXJuIHRydWU7IC8vIFN0YXRlIGNoYW5nZWRcblx0XHR9XG5cdFx0XG5cdFx0cmV0dXJuIGZhbHNlOyAvLyBObyBjaGFuZ2Vcblx0fVxuXG5cdC8qKlxuXHQgKiBDaGVjayBpZiBzdGF0ZSBoYXMgY2hhbmdlZCBzaW5jZSBsYXN0IGNoZWNrXG5cdCAqL1xuXHRoYXNTdGF0ZUNoYW5nZWQoaWQ6IHN0cmluZywgY3VycmVudFN0YXRlOiBib29sZWFuKTogYm9vbGVhbiB7XG5cdFx0Y29uc3QgcHJldmlvdXNTdGF0ZSA9IHRoaXMucHJldmlvdXNTdGF0ZXMuZ2V0KGlkKTtcblx0XHRyZXR1cm4gcHJldmlvdXNTdGF0ZSAhPT0gdW5kZWZpbmVkICYmIHByZXZpb3VzU3RhdGUgIT09IGN1cnJlbnRTdGF0ZTtcblx0fVxufVxuXG4vLyBHbG9iYWwgdHJhY2tlciBpbnN0YW5jZVxuY29uc3QgY29tbWFuZFRvZ2dsZVRyYWNrZXIgPSBuZXcgQ29tbWFuZFRvZ2dsZVRyYWNrZXIoKTtcblxuLyoqXG4gKiBDaGVjayBpZiBhIGNvbW1hbmQgaXMgY3VycmVudGx5IGNoZWNrZWQvdG9nZ2xlZCBvblxuICogRmlyc3QgdHJpZXMgY2hlY2tDYWxsYmFjayBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSB1c2VzIHRyYWNrZWQgc3RhdGVcbiAqIEZvciBzcGVjaWZpYyBjb21tYW5kcyAobGlrZSB0aGVtZSB0b2dnbGUpLCBjaGVja3MgYWN0dWFsIHN0YXRlIGRpcmVjdGx5XG4gKiBcbiAqIFRoaXMgZnVuY3Rpb24gYWx3YXlzIGNoZWNrcyB0aGUgYWN0dWFsIHN0YXRlICh2aWEgY2hlY2tDYWxsYmFjayBvciBkaXJlY3QgZGV0ZWN0aW9uKVxuICogYW5kIHN5bmNzIGl0IHdpdGggdHJhY2tlZCBzdGF0ZSwgZW5zdXJpbmcgYnV0dG9ucyBzdGF5IGluIHN5bmMgZXZlbiB3aGVuIGNvbW1hbmRzXG4gKiBhcmUgZXhlY3V0ZWQgZXh0ZXJuYWxseSAoa2V5Ym9hcmQgc2hvcnRjdXRzLCBjb21tYW5kIHBhbGV0dGUsIGV0Yy4pXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0NvbW1hbmRDaGVja2VkKGlkOiBzdHJpbmcsIHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luKTogYm9vbGVhbiB7XG5cdC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIGNvbW1hbmRzIHRoYXQgbmVlZCBkaXJlY3Qgc3RhdGUgZGV0ZWN0aW9uXG5cdC8vIFRoZXNlIGNvbW1hbmRzIGRvbid0IGhhdmUgcmVsaWFibGUgY2hlY2tDYWxsYmFjaywgc28gd2UgY2hlY2sgRE9NL2FwcCBzdGF0ZSBkaXJlY3RseVxuXHRcblx0Ly8gVGhlbWUgdG9nZ2xlIC0gY2hlY2sgRE9NIGNsYXNzXG5cdGlmIChpZCA9PT0gJ3RoZW1lOnRvZ2dsZS1saWdodC1kYXJrJykge1xuXHRcdC8vIENoZWNrIHRoZW1lIHN0YXRlIGRpcmVjdGx5IGZyb20gRE9NXG5cdFx0Ly8gT2JzaWRpYW4gdXNlcyAndGhlbWUtZGFyaycgY2xhc3Mgb24gYm9keSBmb3IgZGFyayBtb2RlXG5cdFx0Y29uc3QgaXNEYXJrID0gZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3RoZW1lLWRhcmsnKTtcblx0XHQvLyBTeW5jIHRyYWNrZWQgc3RhdGUgd2l0aCBhY3R1YWwgc3RhdGVcblx0XHRjb21tYW5kVG9nZ2xlVHJhY2tlci5zeW5jU3RhdGUoaWQsIGlzRGFyayk7XG5cdFx0cmV0dXJuIGlzRGFyaztcblx0fVxuXG5cdC8vIEVkaXRpbmcgVG9vbGJhciBoaWRlL3Nob3cgLSBjaGVjayBwbHVnaW4gc2V0dGluZ3Ncblx0Ly8gVGhlIGNvbW1hbmQgSUQgaXMgJ2hpZGUtc2hvdy1tZW51JyBidXQgaXQncyByZWdpc3RlcmVkIHVuZGVyICdlZGl0aW5nLXRvb2xiYXI6aGlkZS1zaG93LW1lbnUnXG5cdGlmIChpZCA9PT0gJ2VkaXRpbmctdG9vbGJhcjpoaWRlLXNob3ctbWVudScgfHwgaWQgPT09ICdoaWRlLXNob3ctbWVudScpIHtcblx0XHQvLyBUcnkgdG8gYWNjZXNzIHRoZSBlZGl0aW5nIHRvb2xiYXIgcGx1Z2luJ3Mgc2V0dGluZ3Ncblx0XHRjb25zdCBwbHVnaW5zID0gKHBsdWdpbi5hcHAgYXMgeyBwbHVnaW5zPzogeyBwbHVnaW5zPzogeyBbaWQ6IHN0cmluZ106IHsgc2V0dGluZ3M/OiB7IGNNZW51VmlzaWJpbGl0eT86IGJvb2xlYW4gfSB9IH0gfSB9KS5wbHVnaW5zO1xuXHRcdGNvbnN0IGVkaXRpbmdUb29sYmFyUGx1Z2luID0gcGx1Z2lucz8ucGx1Z2lucz8uWydlZGl0aW5nLXRvb2xiYXInXTtcblx0XHRpZiAoZWRpdGluZ1Rvb2xiYXJQbHVnaW4/LnNldHRpbmdzPy5jTWVudVZpc2liaWxpdHkgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0Y29uc3QgaXNWaXNpYmxlID0gZWRpdGluZ1Rvb2xiYXJQbHVnaW4uc2V0dGluZ3MuY01lbnVWaXNpYmlsaXR5O1xuXHRcdFx0Ly8gU3luYyB0cmFja2VkIHN0YXRlIHdpdGggYWN0dWFsIHN0YXRlXG5cdFx0XHRjb21tYW5kVG9nZ2xlVHJhY2tlci5zeW5jU3RhdGUoaWQsIGlzVmlzaWJsZSk7XG5cdFx0XHRyZXR1cm4gaXNWaXNpYmxlO1xuXHRcdH1cblx0XHQvLyBGYWxsYmFjayB0byB0cmFja2VkIHN0YXRlIGlmIHBsdWdpbiBub3QgZm91bmRcblx0XHRyZXR1cm4gY29tbWFuZFRvZ2dsZVRyYWNrZXIuZ2V0VHJhY2tlZFN0YXRlKGlkKSA/PyBmYWxzZTtcblx0fVxuXG5cdGNvbnN0IGNvbW1hbmQgPSBnZXRDb21tYW5kRnJvbUlkKGlkLCBwbHVnaW4pO1xuXHRpZiAoIWNvbW1hbmQpIHtcblx0XHQvLyBDb21tYW5kIG5vdCBmb3VuZCAtIGZhbGxiYWNrIHRvIHRyYWNrZWQgc3RhdGVcblx0XHQvLyBUaGlzIGNhbiBoYXBwZW4gd2l0aCBjdXN0b20gcGx1Z2luIGNvbW1hbmRzIHRoYXQgaGF2ZW4ndCByZWdpc3RlcmVkIHlldFxuXHRcdHJldHVybiBjb21tYW5kVG9nZ2xlVHJhY2tlci5nZXRUcmFja2VkU3RhdGUoaWQpID8/IGZhbHNlO1xuXHR9XG5cdFxuXHQvLyBDaGVjayBpZiBjb21tYW5kIGhhcyBhIGNoZWNrQ2FsbGJhY2sgKHByZWZlcnJlZCBtZXRob2QgZm9yIGFsbCBjb21tYW5kcylcblx0aWYgKHR5cGVvZiBjb21tYW5kLmNoZWNrQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcblx0XHR0cnkge1xuXHRcdFx0Ly8gQ2FsbCBjaGVja0NhbGxiYWNrIHdpdGggY2hlY2tpbmc9dHJ1ZSB0byBzZWUgaWYgaXQgcmV0dXJucyB0cnVlIChjaGVja2VkIHN0YXRlKVxuXHRcdFx0Ly8gTm90ZTogY2hlY2tDYWxsYmFjayBzaG91bGQgcmV0dXJuIHRydWUgaWYgY2hlY2tlZCwgZmFsc2UgaWYgdW5jaGVja2VkXG5cdFx0XHRjb25zdCByZXN1bHQgPSBjb21tYW5kLmNoZWNrQ2FsbGJhY2sodHJ1ZSk7XG5cdFx0XHRjb25zdCBpc0NoZWNrZWQgPSByZXN1bHQgPT09IHRydWU7XG5cdFx0XHRcblx0XHRcdC8vIEFsd2F5cyBzeW5jIHRyYWNrZWQgc3RhdGUgd2l0aCBjaGVja0NhbGxiYWNrIHJlc3VsdFxuXHRcdFx0Ly8gVGhpcyBlbnN1cmVzIGJ1dHRvbnMgc3RheSBpbiBzeW5jIGV2ZW4gd2hlbiBjb21tYW5kcyBhcmUgZXhlY3V0ZWQgZXh0ZXJuYWxseVxuXHRcdFx0Ly8gKGtleWJvYXJkIHNob3J0Y3V0cywgY29tbWFuZCBwYWxldHRlLCBvdGhlciBwbHVnaW5zLCBldGMuKVxuXHRcdFx0Y29tbWFuZFRvZ2dsZVRyYWNrZXIuc3luY1N0YXRlKGlkLCBpc0NoZWNrZWQpO1xuXHRcdFx0XG5cdFx0XHQvLyBBbHdheXMgdHJ1c3QgY2hlY2tDYWxsYmFjayBvdmVyIHRyYWNrZWQgc3RhdGUgd2hlbiBhdmFpbGFibGVcblx0XHRcdHJldHVybiBpc0NoZWNrZWQ7XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHQvLyBJZiBjaGVja0NhbGxiYWNrIHRocm93cywgZmFsbCBiYWNrIHRvIHRyYWNrZWQgc3RhdGVcblx0XHRcdC8vIFRoaXMgY2FuIGhhcHBlbiBpZiB0aGUgY29tbWFuZCdzIGNoZWNrQ2FsbGJhY2sgaGFzIGJ1Z3Mgb3IgaXNuJ3QgcmVhZHkgeWV0XG5cdFx0XHRyZXR1cm4gY29tbWFuZFRvZ2dsZVRyYWNrZXIuZ2V0VHJhY2tlZFN0YXRlKGlkKSA/PyBmYWxzZTtcblx0XHR9XG5cdH1cblx0XG5cdC8vIE5vIGNoZWNrQ2FsbGJhY2sgLSB1c2UgdHJhY2tlZCBzdGF0ZVxuXHQvLyBUaGlzIGlzIGEgZmFsbGJhY2sgZm9yIGNvbW1hbmRzIHRoYXQgZG9uJ3QgcHJvdmlkZSBjaGVja0NhbGxiYWNrXG5cdC8vIFRoZSBwZXJpb2RpYyByZWZyZXNoIHdpbGwga2VlcCB0cnlpbmcgdG8gZGV0ZWN0IHN0YXRlIGNoYW5nZXNcblx0cmV0dXJuIGNvbW1hbmRUb2dnbGVUcmFja2VyLmdldFRyYWNrZWRTdGF0ZShpZCkgPz8gZmFsc2U7XG59XG5cbi8qKlxuICogUmVjb3JkIHRoYXQgYSBjb21tYW5kIHdhcyBleGVjdXRlZCAoZm9yIHRvZ2dsZSB0cmFja2luZylcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlY29yZENvbW1hbmRFeGVjdXRpb24oaWQ6IHN0cmluZyk6IHZvaWQge1xuXHRjb21tYW5kVG9nZ2xlVHJhY2tlci5yZWNvcmRFeGVjdXRpb24oaWQpO1xufVxuXG4vKipcbiAqIFJlc2V0IHRyYWNrZWQgc3RhdGUgZm9yIGEgY29tbWFuZFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRDb21tYW5kU3RhdGUoaWQ6IHN0cmluZyk6IHZvaWQge1xuXHRjb21tYW5kVG9nZ2xlVHJhY2tlci5yZXNldFN0YXRlKGlkKTtcbn0iLCAiLyoqXG4gKiBTdGF0dXMgQmFyIE1hbmFnZXIgLSBVbmlmaWVkIG1hbmFnZXIgZm9yIGV4aXN0aW5nICsgY3VzdG9tIHN0YXR1cyBiYXIgaXRlbXNcbiAqIENvbWJpbmVzIGZ1bmN0aW9uYWxpdHkgZnJvbSBTdGF0dXMgQmFyIE9yZ2FuaXplciAocmVvcmRlcmluZy9oaWRpbmcgZXhpc3RpbmcgaXRlbXMpXG4gKiBhbmQgQ29tbWFuZGVyIChhZGRpbmcgY3VzdG9tIGNvbW1hbmRzKVxuICovXG5cbmltcG9ydCB7IE1lbnUsIHNldEljb24gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgVUlUd2Vha2VyUGx1Z2luIGZyb20gJy4uL21haW4nO1xuaW1wb3J0IHsgU3RhdHVzQmFySXRlbSwgQ29tbWFuZEljb25QYWlyIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgaXNNYXJrZG93blZpZXcsIGlzTW9kZUFjdGl2ZSB9IGZyb20gJy4uL3V0aWxzL2NvbW1hbmRVdGlscyc7XG5pbXBvcnQgeyBJY29uUGlja2VyTW9kYWwgfSBmcm9tICcuLi9tb2RhbHMvSWNvblBpY2tlck1vZGFsJztcbmltcG9ydCB7IHNldENzc1Byb3BzIH0gZnJvbSAnLi4vdWlNYW5hZ2VyJztcblxuZXhwb3J0IGNsYXNzIFN0YXR1c0Jhck1hbmFnZXIge1xuXHRwcml2YXRlIHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luO1xuXHRwcml2YXRlIGN1c3RvbUFjdGlvbnMgPSBuZXcgTWFwPFN0YXR1c0Jhckl0ZW0sIEhUTUxFbGVtZW50PigpO1xuXHRwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSBvYnNlcnZlcj86IE11dGF0aW9uT2JzZXJ2ZXI7XG5cdHByaXZhdGUgaXNSZW9yZGVyaW5nID0gZmFsc2U7IC8vIEZsYWcgdG8gcHJldmVudCBvYnNlcnZlciBmcm9tIHRyaWdnZXJpbmcgZHVyaW5nIHJlb3JkZXJcblxuXHRwcml2YXRlIGdldCBpdGVtcygpOiBTdGF0dXNCYXJJdGVtW10ge1xuXHRcdHJldHVybiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGF0dXNCYXJJdGVtcyB8fCBbXTtcblx0fVxuXG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luKSB7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdFx0dGhpcy5pbml0KCk7XG5cdH1cblxuXHRwcml2YXRlIGluaXQoKTogdm9pZCB7XG5cdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcblx0XHRcdHRoaXMuY29udGFpbmVyID0gKHRoaXMucGx1Z2luLmFwcCBhcyB7IHN0YXR1c0Jhcj86IHsgY29udGFpbmVyRWw/OiBIVE1MRWxlbWVudCB9IH0pLnN0YXR1c0Jhcj8uY29udGFpbmVyRWwgPz8gbnVsbDtcblx0XHRcdGlmICghdGhpcy5jb250YWluZXIpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJbml0aWFsaXplIGl0ZW1zIGFycmF5IGlmIG5lZWRlZFxuXHRcdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGF0dXNCYXJJdGVtcykge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGF0dXNCYXJJdGVtcyA9IFtdO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDb25zb2xpZGF0ZSBzZXR0aW5ncyBhbmQgZWxlbWVudHMgKGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXG5cdFx0XHQvLyBUaGlzIG1lcmdlcyBzYXZlZCBpdGVtcyB3aXRoIGN1cnJlbnQgRE9NIGVsZW1lbnRzIGFuZCBzYXZlcyBpbW1lZGlhdGVseVxuXHRcdFx0dGhpcy5jb25zb2xpZGF0ZVNldHRpbmdzQW5kRWxlbWVudHMoKTtcblxuXHRcdFx0Ly8gQXBwbHkgb3JkZXJpbmcgYW5kIHZpc2liaWxpdHlcblx0XHRcdHRoaXMucmVvcmRlcigpO1xuXG5cdFx0XHQvLyBXYXRjaCBmb3IgbmV3IHN0YXR1cyBiYXIgaXRlbXMgKGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIgZG9lcylcblx0XHRcdC8vIFVzZSBhIGRlYm91bmNlIHRvIHByZXZlbnQgZXhjZXNzaXZlIHJlLXJlbmRlcnMgZHVyaW5nIHNldHRpbmdzIGNoYW5nZXNcblx0XHRcdGxldCBvYnNlcnZlclRpbWVvdXQ6IFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+IHwgbnVsbCA9IG51bGw7XG5cdFx0XHR0aGlzLm9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xuXHRcdFx0XHQvLyBEb24ndCB0cmlnZ2VyIGlmIHdlJ3JlIGN1cnJlbnRseSByZW9yZGVyaW5nIChwcmV2ZW50cyBpbmZpbml0ZSBsb29wcylcblx0XHRcdFx0aWYgKHRoaXMuaXNSZW9yZGVyaW5nKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBEZWJvdW5jZSBvYnNlcnZlciBjYWxsYmFja3MgdG8gcHJldmVudCBleGNlc3NpdmUgdXBkYXRlc1xuXHRcdFx0XHRpZiAob2JzZXJ2ZXJUaW1lb3V0KSB7XG5cdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KG9ic2VydmVyVGltZW91dCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0b2JzZXJ2ZXJUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0Ly8gT25seSBkZXRlY3QgYW5kIHJlb3JkZXIgaWYgd2UncmUgbm90IGluIHRoZSBtaWRkbGUgb2YgYSByZW9yZGVyIG9wZXJhdGlvblxuXHRcdFx0XHRcdGlmICghdGhpcy5pc1Jlb3JkZXJpbmcpIHtcblx0XHRcdFx0XHRcdHRoaXMuY29uc29saWRhdGVTZXR0aW5nc0FuZEVsZW1lbnRzKCk7XG5cdFx0XHRcdFx0XHR0aGlzLnJlb3JkZXIoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sIDIwMCk7XG5cdFx0XHR9KTtcblx0XHRcdHRoaXMub2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmNvbnRhaW5lciwgeyBjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IGZhbHNlIH0pO1xuXG5cdFx0XHQvLyBSZWdpc3RlciBjbGVhbnVwXG5cdFx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlcigoKSA9PiB7XG5cdFx0XHRcdGlmICh0aGlzLm9ic2VydmVyKSB7XG5cdFx0XHRcdFx0dGhpcy5vYnNlcnZlci5kaXNjb25uZWN0KCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy5jdXN0b21BY3Rpb25zLmZvckVhY2goKGFjdGlvbikgPT4gYWN0aW9uLnJlbW92ZSgpKTtcblx0XHRcdFx0dGhpcy5jdXN0b21BY3Rpb25zLmNsZWFyKCk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb25zb2xpZGF0ZSBzZXR0aW5ncyBhbmQgZWxlbWVudHMgKEVYQUNUTFkgbGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplcilcblx0ICogTWVyZ2VzIHNhdmVkIGl0ZW1zIHdpdGggY3VycmVudCBET00gZWxlbWVudHMsIHByZXNlcnZlcyBvcmRlciBhbmQgc2V0dGluZ3Ncblx0ICogU2F2ZXMgaW1tZWRpYXRlbHkgdG8gcHJldmVudCBkdXBsaWNhdGVzXG5cdCAqL1xuXHRwcml2YXRlIGNvbnNvbGlkYXRlU2V0dGluZ3NBbmRFbGVtZW50cygpOiB2b2lkIHtcblx0XHRpZiAoIXRoaXMuY29udGFpbmVyKSByZXR1cm47XG5cblx0XHRjb25zdCBpZ25vcmVkQ2xhc3NlcyA9IFsnbW9kLWNsaWNrYWJsZScsICdzdGF0dXMtYmFyLWl0ZW0nLCAndWktdHdlYWtlci1zdGF0dXMtYmFyLWl0ZW0nLCAndWktdHdlYWtlci1zdGF0dXMtYmFyLWhpZGRlbiddO1xuXHRcdFxuXHRcdC8vIEdldCBhbGwgZXhpc3Rpbmcgc3RhdHVzIGJhciBlbGVtZW50cyBmcm9tIERPTVxuXHRcdGNvbnN0IGV4aXN0aW5nRWxlbWVudHMgPSBBcnJheS5mcm9tKHRoaXMuY29udGFpbmVyLmNoaWxkcmVuKS5maWx0ZXIoXG5cdFx0XHRlbCA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ3N0YXR1cy1iYXItaXRlbScpICYmICFlbC5jbGFzc0xpc3QuY29udGFpbnMoJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1pdGVtJylcblx0XHQpIGFzIEhUTUxFbGVtZW50W107XG5cblx0XHQvLyBHZXQgc2F2ZWQgaXRlbXMgZnJvbSBzZXR0aW5ncyAocHJlc2VydmUgQUxMIHNhdmVkIGl0ZW1zLCBldmVuIGlmIG5vdCBjdXJyZW50bHkgdmlzaWJsZSlcblx0XHRjb25zdCBzYXZlZEl0ZW1zID0gdGhpcy5pdGVtcy5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09ICdleGlzdGluZycpO1xuXHRcdFxuXHRcdC8vIENyZWF0ZSBhIG1hcCBvZiBzYXZlZCBpdGVtcyBieSBJRCBmb3IgcXVpY2sgbG9va3VwXG5cdFx0Y29uc3Qgc2F2ZWRJdGVtc01hcCA9IG5ldyBNYXAoc2F2ZWRJdGVtcy5tYXAoaXRlbSA9PiBbaXRlbS5pZCwgaXRlbV0pKTtcblxuXHRcdC8vIFRyYWNrIHdoaWNoIHNhdmVkIGl0ZW1zIHdlJ3ZlIG1hdGNoZWQgdG8gRE9NIGVsZW1lbnRzXG5cdFx0Y29uc3QgbWF0Y2hlZFNhdmVkSWRzID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cdFx0Y29uc3QgbmV3SXRlbXM6IFN0YXR1c0Jhckl0ZW1bXSA9IFtdO1xuXG5cdFx0Ly8gRklSU1QgUEFTUzogTWF0Y2ggZWxlbWVudHMgdGhhdCBhbHJlYWR5IGhhdmUgSURzXG5cdFx0ZXhpc3RpbmdFbGVtZW50cy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG5cdFx0XHRjb25zdCBleGlzdGluZ0lkID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWktdHdlYWtlci1zdGF0dXMtYmFyLWlkJyk7XG5cdFx0XHRpZiAoZXhpc3RpbmdJZCAmJiBzYXZlZEl0ZW1zTWFwLmhhcyhleGlzdGluZ0lkKSkge1xuXHRcdFx0XHQvLyBFbGVtZW50IGhhcyBJRCBhbmQgaXQncyBpbiBzYXZlZCBpdGVtcyAtIG1hdGNoZWQhXG5cdFx0XHRcdG1hdGNoZWRTYXZlZElkcy5hZGQoZXhpc3RpbmdJZCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIFNFQ09ORCBQQVNTOiBGb3IgZWxlbWVudHMgd2l0aG91dCBJRHMsIGdlbmVyYXRlIElEIGZyb20gY2xhc3MgbmFtZXMgRklSU1Rcblx0XHQvLyBUaGVuIGNoZWNrIGlmIHRoYXQgSUQgKG9yIHNpbWlsYXIpIGV4aXN0cyBpbiBzYXZlZCBpdGVtc1xuXHRcdGV4aXN0aW5nRWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuXHRcdFx0Ly8gU2tpcCBpZiBhbHJlYWR5IG1hdGNoZWRcblx0XHRcdGNvbnN0IGV4aXN0aW5nSWQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS11aS10d2Vha2VyLXN0YXR1cy1iYXItaWQnKTtcblx0XHRcdGlmIChleGlzdGluZ0lkICYmIG1hdGNoZWRTYXZlZElkcy5oYXMoZXhpc3RpbmdJZCkpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBHZW5lcmF0ZSBJRCBmcm9tIGNsYXNzIG5hbWVzIChsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyIGRvZXMgRklSU1QpXG5cdFx0XHRjb25zdCBuYW1lID0gQXJyYXkuZnJvbShlbGVtZW50LmNsYXNzTGlzdClcblx0XHRcdFx0LmZpbHRlcihjbHMgPT4gIWlnbm9yZWRDbGFzc2VzLmluY2x1ZGVzKGNscykpXG5cdFx0XHRcdC5qb2luKCctJykgfHwgJ3N0YXR1cy1iYXItaXRlbSc7XG5cdFx0XHRcblx0XHRcdC8vIEZpbmQgYWxsIHNhdmVkIGl0ZW1zIHdpdGggdGhpcyBuYW1lIHBhdHRlcm5cblx0XHRcdGNvbnN0IG1hdGNoaW5nU2F2ZWRJdGVtcyA9IHNhdmVkSXRlbXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5pZC5zdGFydHNXaXRoKG5hbWUgKyAnOycpKTtcblx0XHRcdFxuXHRcdFx0Ly8gSWYgd2UgaGF2ZSBzYXZlZCBpdGVtcyB3aXRoIHRoaXMgbmFtZSBwYXR0ZXJuLCB0cnkgdG8gbWF0Y2hcblx0XHRcdGlmIChtYXRjaGluZ1NhdmVkSXRlbXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHQvLyBGaW5kIHRoZSBmaXJzdCB1bm1hdGNoZWQgc2F2ZWQgaXRlbSB3aXRoIHRoaXMgbmFtZSBwYXR0ZXJuXG5cdFx0XHRcdGZvciAoY29uc3Qgc2F2ZWRJdGVtIG9mIG1hdGNoaW5nU2F2ZWRJdGVtcykge1xuXHRcdFx0XHRcdGlmIChtYXRjaGVkU2F2ZWRJZHMuaGFzKHNhdmVkSXRlbS5pZCkpIGNvbnRpbnVlO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIE1hdGNoIHRoaXMgZWxlbWVudCB0byB0aGUgc2F2ZWQgaXRlbSAtIHVzZSB0aGUgc2F2ZWQgaXRlbSdzIElEXG5cdFx0XHRcdFx0ZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdWktdHdlYWtlci1zdGF0dXMtYmFyLWlkJywgc2F2ZWRJdGVtLmlkKTtcblx0XHRcdFx0XHRtYXRjaGVkU2F2ZWRJZHMuYWRkKHNhdmVkSXRlbS5pZCk7XG5cdFx0XHRcdFx0cmV0dXJuOyAvLyBNYXRjaGVkLCBkb25lIHdpdGggdGhpcyBlbGVtZW50XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gTm8gbWF0Y2ggZm91bmQgLSB0aGlzIGlzIGEgdHJ1bHkgbmV3IGVsZW1lbnRcblx0XHRcdC8vIEdlbmVyYXRlIG5ldyBJRCB3aXRoIG5leHQgYXZhaWxhYmxlIGluZGV4XG5cdFx0XHRsZXQgbWF4SW5kZXggPSAwO1xuXHRcdFx0Zm9yIChjb25zdCBzYXZlZEl0ZW0gb2Ygc2F2ZWRJdGVtcykge1xuXHRcdFx0XHRpZiAoc2F2ZWRJdGVtLmlkLnN0YXJ0c1dpdGgobmFtZSArICc7JykpIHtcblx0XHRcdFx0XHRjb25zdCBtYXRjaCA9IHNhdmVkSXRlbS5pZC5tYXRjaCgvOyhcXGQrKSQvKTtcblx0XHRcdFx0XHRpZiAobWF0Y2gpIHtcblx0XHRcdFx0XHRcdG1heEluZGV4ID0gTWF0aC5tYXgobWF4SW5kZXgsIHBhcnNlSW50KG1hdGNoWzFdLCAxMCkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRjb25zdCBpbmRleE51bSA9IG1heEluZGV4ICsgMTtcblx0XHRcdGNvbnN0IGlkID0gYCR7bmFtZX07JHtpbmRleE51bX1gO1xuXHRcdFx0ZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdWktdHdlYWtlci1zdGF0dXMtYmFyLWlkJywgaWQpO1xuXG5cdFx0XHQvLyBHZXQgZWxlbWVudCBuYW1lIGZvciBkaXNwbGF5XG5cdFx0XHRjb25zdCBlbGVtZW50TmFtZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJykgfHwgXG5cdFx0XHRcdGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0aXRsZScpIHx8XG5cdFx0XHRcdGVsZW1lbnQudGV4dENvbnRlbnQ/LnRyaW0oKSB8fCBcblx0XHRcdFx0aWQuc3BsaXQoJzsnKVswXSB8fCAnU3RhdHVzIGJhciBpdGVtJztcblxuXHRcdFx0Ly8gVHJ1bHkgbmV3IGl0ZW0gLSBjcmVhdGUgZGVmYXVsdCBlbnRyeVxuXHRcdFx0bmV3SXRlbXMucHVzaCh7XG5cdFx0XHRcdGlkOiBpZCxcblx0XHRcdFx0bmFtZTogZWxlbWVudE5hbWUsXG5cdFx0XHRcdHR5cGU6ICdleGlzdGluZycsXG5cdFx0XHRcdGhpZGRlbjogZmFsc2UsXG5cdFx0XHRcdG1kT25seTogZmFsc2UsXG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdC8vIEFkZCBuZXcgaXRlbXMgdG8gc2V0dGluZ3MgKHByZXNlcnZlIGV4aXN0aW5nIGl0ZW1zIHRoYXQgYXJlbid0IGN1cnJlbnRseSB2aXNpYmxlKVxuXHRcdGlmIChuZXdJdGVtcy5sZW5ndGggPiAwKSB7XG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGF0dXNCYXJJdGVtcy5wdXNoKC4uLm5ld0l0ZW1zKTtcblx0XHRcdC8vIFNhdmUgaW1tZWRpYXRlbHkgdG8gcHJldmVudCBkdXBsaWNhdGVzXG5cdFx0XHR2b2lkIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdH1cblxuXHRcdC8vIEl0ZW1zIGluIHNldHRpbmdzIGJ1dCBub3QgY3VycmVudGx5IHZpc2libGUgYXJlIGtlcHQgKGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXG5cdFx0Ly8gVGhleSdsbCBzaG93IHVwIGluIHRoZSBVSSBidXQgbWFya2VkIGFzIFwibm90IGN1cnJlbnRseSB2aXNpYmxlXCJcblx0fVxuXG5cdC8qKlxuXHQgKiBSZW9yZGVyIGFuZCBhcHBseSB2aXNpYmlsaXR5IHRvIGFsbCBzdGF0dXMgYmFyIGl0ZW1zIChsaWtlIFN0YXR1cyBCYXIgT3JnYW5pemVyKVxuXHQgKiBIYW5kbGVzIHN0aWNreSBpdGVtcyAobGVmdC9yaWdodCkgYW5kIGl0ZW1zIHRoYXQgYXJlbid0IGN1cnJlbnRseSB2aXNpYmxlXG5cdCAqIFxuXHQgKiBOb3RlOiBJdGVtcyB3aXRoIHRoZSBzYW1lIHN0aWNreSBwb3NpdGlvbiBtYWludGFpbiB0aGVpciByZWxhdGl2ZSBvcmRlclxuXHQgKiAoZS5nLiwgaWYgMyBpdGVtcyBhcmUgc3RpY2t5LWxlZnQsIHRoZXkgYXBwZWFyIGluIHRoZSBvcmRlciB0aGV5J3JlIGluIHNldHRpbmdzKVxuXHQgKi9cblx0cHVibGljIHJlb3JkZXIoKTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLmNvbnRhaW5lcikgcmV0dXJuO1xuXHRcdFxuXHRcdC8vIFNldCBmbGFnIHRvIHByZXZlbnQgb2JzZXJ2ZXIgZnJvbSB0cmlnZ2VyaW5nIGR1cmluZyByZW9yZGVyXG5cdFx0dGhpcy5pc1Jlb3JkZXJpbmcgPSB0cnVlO1xuXG5cdFx0Ly8gUmVtb3ZlIGFsbCBjdXN0b20gYWN0aW9ucyBmaXJzdFxuXHRcdHRoaXMuY3VzdG9tQWN0aW9ucy5mb3JFYWNoKChhY3Rpb24pID0+IGFjdGlvbi5yZW1vdmUoKSk7XG5cdFx0dGhpcy5jdXN0b21BY3Rpb25zLmNsZWFyKCk7XG5cblx0XHQvLyBHZXQgYWxsIGV4aXN0aW5nIHN0YXR1cyBiYXIgaXRlbXMgKGV4Y2x1ZGluZyBvdXIgY3VzdG9tIG9uZXMpXG5cdFx0Y29uc3QgYWxsRXhpc3RpbmdFbGVtZW50cyA9IEFycmF5LmZyb20odGhpcy5jb250YWluZXIuY2hpbGRyZW4pLmZpbHRlcihcblx0XHRcdGVsID0+IGVsLmNsYXNzTGlzdC5jb250YWlucygnc3RhdHVzLWJhci1pdGVtJykgJiYgIWVsLmNsYXNzTGlzdC5jb250YWlucygndWktdHdlYWtlci1zdGF0dXMtYmFyLWl0ZW0nKVxuXHRcdCkgYXMgSFRNTEVsZW1lbnRbXTtcblxuXHRcdC8vIFNlcGFyYXRlIGl0ZW1zIGJ5IHN0aWNreSBwb3NpdGlvblxuXHRcdGNvbnN0IGxlZnRTdGlja3k6IEhUTUxFbGVtZW50W10gPSBbXTtcblx0XHRjb25zdCByaWdodFN0aWNreTogSFRNTEVsZW1lbnRbXSA9IFtdO1xuXHRcdGNvbnN0IHJlZ3VsYXI6IEhUTUxFbGVtZW50W10gPSBbXTtcblx0XHRjb25zdCBhY3RpdmVMZWFmID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRNb3N0UmVjZW50TGVhZigpO1xuXG5cdFx0Ly8gUHJvY2VzcyBpdGVtcyBpbiBvcmRlciBmcm9tIHNldHRpbmdzXG5cdFx0Zm9yIChjb25zdCBpdGVtIG9mIHRoaXMuaXRlbXMpIHtcblx0XHRcdC8vIENoZWNrIHZpc2liaWxpdHlcblx0XHRcdGlmIChpdGVtLmhpZGRlbikge1xuXHRcdFx0XHQvLyBIaWRlIGV4aXN0aW5nIGl0ZW1zXG5cdFx0XHRcdGlmIChpdGVtLnR5cGUgPT09ICdleGlzdGluZycpIHtcblx0XHRcdFx0XHRjb25zdCBlbGVtZW50ID0gYWxsRXhpc3RpbmdFbGVtZW50cy5maW5kKChlbCkgPT4gXG5cdFx0XHRcdFx0XHRlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWktdHdlYWtlci1zdGF0dXMtYmFyLWlkJykgPT09IGl0ZW0uaWRcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdGlmIChlbGVtZW50KSB7XG5cdFx0XHRcdFx0XHRlbGVtZW50LmFkZENsYXNzKCd1aS10d2Vha2VyLXN0YXR1cy1iYXItaGlkZGVuJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDaGVjayBtZC9tZHgtb25seSBmaWx0ZXJcblx0XHRcdGlmIChpdGVtLm1kT25seSAmJiAhaXNNYXJrZG93blZpZXcoYWN0aXZlTGVhZikpIHtcblx0XHRcdFx0Ly8gSGlkZSBpZiBub3QgbWFya2Rvd24gdmlld1xuXHRcdFx0XHRpZiAoaXRlbS50eXBlID09PSAnZXhpc3RpbmcnKSB7XG5cdFx0XHRcdFx0Y29uc3QgZWxlbWVudCA9IGFsbEV4aXN0aW5nRWxlbWVudHMuZmluZCgoZWwpID0+IFxuXHRcdFx0XHRcdFx0ZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXVpLXR3ZWFrZXItc3RhdHVzLWJhci1pZCcpID09PSBpdGVtLmlkXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRpZiAoZWxlbWVudCkge1xuXHRcdFx0XHRcdFx0ZWxlbWVudC5hZGRDbGFzcygndWktdHdlYWtlci1zdGF0dXMtYmFyLWhpZGRlbicpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGl0ZW0udHlwZSA9PT0gJ2N1c3RvbScpIHtcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgY29tbWFuZCBleGlzdHMgYW5kIG1vZGUgaXMgYWN0aXZlXG5cdFx0XHRcdGNvbnN0IGNvbW1hbmRzID0gKHRoaXMucGx1Z2luLmFwcCBhcyB7IGNvbW1hbmRzPzogeyBjb21tYW5kcz86IHsgW2lkOiBzdHJpbmddOiB7IGlkOiBzdHJpbmcgfSB9IH0gfSkuY29tbWFuZHM7XG5cdFx0XHRcdGNvbnN0IGNvbW1hbmQgPSBjb21tYW5kcz8uY29tbWFuZHM/LltpdGVtLmNvbW1hbmRJZCB8fCAnJ107XG5cdFx0XHRcdGNvbnN0IG1vZGUgPSBpdGVtLm1vZGUgfHwgJ2FueSc7XG5cdFx0XHRcdGlmIChjb21tYW5kICYmIGlzTW9kZUFjdGl2ZShtb2RlLCB0aGlzLnBsdWdpbikpIHtcblx0XHRcdFx0XHR0aGlzLmFkZEN1c3RvbUFjdGlvbihpdGVtKTtcblx0XHRcdFx0XHRjb25zdCBhY3Rpb24gPSB0aGlzLmN1c3RvbUFjdGlvbnMuZ2V0KGl0ZW0pO1xuXHRcdFx0XHRcdGlmIChhY3Rpb24pIHtcblx0XHRcdFx0XHRcdC8vIEFkZCB0byBhcHByb3ByaWF0ZSBsaXN0IGJhc2VkIG9uIHN0aWNreSBwb3NpdGlvblxuXHRcdFx0XHRcdFx0aWYgKGl0ZW0uc3RpY2t5ID09PSAnbGVmdCcpIHtcblx0XHRcdFx0XHRcdFx0bGVmdFN0aWNreS5wdXNoKGFjdGlvbik7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGl0ZW0uc3RpY2t5ID09PSAncmlnaHQnKSB7XG5cdFx0XHRcdFx0XHRcdHJpZ2h0U3RpY2t5LnB1c2goYWN0aW9uKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHJlZ3VsYXIucHVzaChhY3Rpb24pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gRmluZCBleGlzdGluZyBlbGVtZW50IChtYXkgbm90IGV4aXN0IGlmIHBsdWdpbiBpc24ndCBsb2FkZWQpXG5cdFx0XHRcdGNvbnN0IGVsZW1lbnQgPSBhbGxFeGlzdGluZ0VsZW1lbnRzLmZpbmQoKGVsKSA9PiBcblx0XHRcdFx0XHRlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdWktdHdlYWtlci1zdGF0dXMtYmFyLWlkJykgPT09IGl0ZW0uaWRcblx0XHRcdFx0KTtcblxuXHRcdFx0XHRpZiAoZWxlbWVudCkge1xuXHRcdFx0XHRcdGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1oaWRkZW4nKTtcblx0XHRcdFx0XHQvLyBBZGQgdG8gYXBwcm9wcmlhdGUgbGlzdCBiYXNlZCBvbiBzdGlja3kgcG9zaXRpb25cblx0XHRcdFx0XHRpZiAoaXRlbS5zdGlja3kgPT09ICdsZWZ0Jykge1xuXHRcdFx0XHRcdFx0bGVmdFN0aWNreS5wdXNoKGVsZW1lbnQpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoaXRlbS5zdGlja3kgPT09ICdyaWdodCcpIHtcblx0XHRcdFx0XHRcdHJpZ2h0U3RpY2t5LnB1c2goZWxlbWVudCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlZ3VsYXIucHVzaChlbGVtZW50KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gSWYgZWxlbWVudCBkb2Vzbid0IGV4aXN0LCBpdGVtIGlzIGtlcHQgaW4gc2V0dGluZ3MgYnV0IG5vdCBkaXNwbGF5ZWQgKGxpa2UgU3RhdHVzIEJhciBPcmdhbml6ZXIpXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ29tYmluZTogbGVmdCBzdGlja3kgaXRlbXMgZmlyc3QsIHRoZW4gcmVndWxhciBpdGVtcywgdGhlbiByaWdodCBzdGlja3kgaXRlbXNcblx0XHRjb25zdCBvcmRlcmVkRWxlbWVudHMgPSBbLi4ubGVmdFN0aWNreSwgLi4ucmVndWxhciwgLi4ucmlnaHRTdGlja3ldO1xuXG5cdFx0Ly8gUGh5c2ljYWxseSByZW9yZGVyIERPTSBlbGVtZW50cyAobGlrZSBTdGF0dXMgQmFyIE9yZ2FuaXplciBkb2VzKVxuXHRcdC8vIFRoaXMgaXMgbW9yZSByZWxpYWJsZSB0aGFuIENTUyBvcmRlciBwcm9wZXJ0eVxuXHRcdG9yZGVyZWRFbGVtZW50cy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG5cdFx0XHRpZiAodGhpcy5jb250YWluZXIgJiYgZWxlbWVudC5wYXJlbnRFbGVtZW50ID09PSB0aGlzLmNvbnRhaW5lcikge1xuXHRcdFx0XHR0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChlbGVtZW50KTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIEFsc28gc2V0IENTUyBvcmRlciBhcyBiYWNrdXAgKGluIGNhc2UgY29udGFpbmVyIHVzZXMgZmxleGJveClcblx0XHRvcmRlcmVkRWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCwgaW5kZXgpID0+IHtcblx0XHRcdHNldENzc1Byb3BzKGVsZW1lbnQsIHsgb3JkZXI6IChpbmRleCArIDEpLnRvU3RyaW5nKCkgfSk7XG5cdFx0fSk7XG5cdFx0XG5cdFx0Ly8gQ2xlYXIgZmxhZyBhZnRlciBhIHNob3J0IGRlbGF5IHRvIGFsbG93IERPTSB0byBzZXR0bGVcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdHRoaXMuaXNSZW9yZGVyaW5nID0gZmFsc2U7XG5cdFx0fSwgNTApO1xuXHR9XG5cblx0LyoqXG5cdCAqIEFkZCBhIGN1c3RvbSBjb21tYW5kIGFjdGlvbiB0byB0aGUgc3RhdHVzIGJhciAobGlrZSBDb21tYW5kZXIpXG5cdCAqL1xuXHRwcml2YXRlIGFkZEN1c3RvbUFjdGlvbihpdGVtOiBTdGF0dXNCYXJJdGVtKTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLmNvbnRhaW5lciB8fCAhaXRlbS5jb21tYW5kSWQpIHJldHVybjtcblxuXHRcdC8vIERvbid0IGNyZWF0ZSBkdXBsaWNhdGUgaWYgYWxyZWFkeSBleGlzdHNcblx0XHRpZiAodGhpcy5jdXN0b21BY3Rpb25zLmhhcyhpdGVtKSkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgYnRuID0gdGhpcy5jb250YWluZXIuY3JlYXRlRGl2KHtcblx0XHRcdGNsczogJ3VpLXR3ZWFrZXItc3RhdHVzLWJhci1pdGVtIHN0YXR1cy1iYXItaXRlbSBjbGlja2FibGUtaWNvbicsXG5cdFx0XHRhdHRyOiB7IFxuXHRcdFx0XHQnYXJpYS1sYWJlbCc6IGl0ZW0ubmFtZSxcblx0XHRcdFx0J2RhdGEtdG9vbHRpcC1wb3NpdGlvbic6ICd0b3AnLFxuXHRcdFx0XHQnZGF0YS11aS10d2Vha2VyLXN0YXR1cy1iYXItaWQnOiBpdGVtLmlkLFxuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdGlmIChpdGVtLmljb24pIHtcblx0XHRcdHNldEljb24oYnRuLCBpdGVtLmljb24pO1xuXHRcdH1cblxuXHRcdC8vIEFwcGx5IGNvbG9yIGlmIHNldFxuXHRcdGlmIChpdGVtLmNvbG9yICYmIGl0ZW0uY29sb3IgIT09ICcjMDAwMDAwJykge1xuXHRcdFx0c2V0Q3NzUHJvcHMoYnRuLCB7IGNvbG9yOiBpdGVtLmNvbG9yIH0pO1xuXHRcdH1cblxuXHRcdGJ0bi5vbmNsaWNrID0gKCk6IHZvaWQgPT4ge1xuXHRcdFx0Y29uc3QgY29tbWFuZHMgPSAodGhpcy5wbHVnaW4uYXBwIGFzIHsgY29tbWFuZHM/OiB7IGV4ZWN1dGVDb21tYW5kQnlJZD86IChpZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+IH0gfSkuY29tbWFuZHM7XG5cdFx0XHRpZiAoY29tbWFuZHM/LmV4ZWN1dGVDb21tYW5kQnlJZCAmJiBpdGVtLmNvbW1hbmRJZCkge1xuXHRcdFx0XHR2b2lkIGNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kQnlJZChpdGVtLmNvbW1hbmRJZCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIChldmVudCkgPT4ge1xuXHRcdFx0ZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0XHRuZXcgTWVudSgpXG5cdFx0XHRcdC5hZGRJdGVtKChtZW51SXRlbSkgPT4ge1xuXHRcdFx0XHRcdG1lbnVJdGVtLnNldFRpdGxlKCdDaGFuZ2UgaWNvbicpXG5cdFx0XHRcdFx0XHQuc2V0SWNvbignbHVjaWRlLWltYWdlLXBsdXMnKVxuXHRcdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBJY29uUGlja2VyTW9kYWwodGhpcy5wbHVnaW4uYXBwLCAoaWNvbklkKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGljb25JZCAmJiBpY29uSWQgIT09IGl0ZW0uaWNvbikge1xuXHRcdFx0XHRcdFx0XHRcdFx0aXRlbS5pY29uID0gaWNvbklkO1xuXHRcdFx0XHRcdFx0XHRcdFx0dm9pZCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVvcmRlcigpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdG1vZGFsLm9wZW4oKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuYWRkSXRlbSgobWVudUl0ZW0pID0+IHtcblx0XHRcdFx0XHRtZW51SXRlbS5zZXRUaXRsZSgnRGVsZXRlJylcblx0XHRcdFx0XHRcdC5zZXRJY29uKCdsdWNpZGUtdHJhc2gnKVxuXHRcdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHR2b2lkIHRoaXMucmVtb3ZlSXRlbShpdGVtKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdC8vIEFkZCB3YXJuaW5nIGNsYXNzIHRvIG1ha2UgdGV4dCBhbmQgaWNvbiByZWRcblx0XHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55LCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcblx0XHRcdFx0XHRjb25zdCBkb20gPSAobWVudUl0ZW0gYXMgYW55KS5kb207XG5cdFx0XHRcdFx0aWYgKGRvbSkge1xuXHRcdFx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbCwgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG5cdFx0XHRcdFx0XHRkb20uY2xhc3NMaXN0LmFkZCgnbW9kLXdhcm5pbmcnKTtcblx0XHRcdFx0XHRcdC8vIEFsc28gbWFrZSB0aGUgaWNvbiByZWRcblx0XHRcdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnQsIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbCwgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG5cdFx0XHRcdFx0XHRjb25zdCBpY29uRWwgPSBkb20ucXVlcnlTZWxlY3RvcignLm1lbnUtaXRlbS1pY29uIHN2ZycpO1xuXHRcdFx0XHRcdFx0aWYgKGljb25FbCkge1xuXHRcdFx0XHRcdFx0XHQvLyBVc2Ugc2V0Q3NzUHJvcHMgdG8gc2V0IGNvbG9yIChhbHJlYWR5IGltcG9ydGVkIGZyb20gdWlNYW5hZ2VyKVxuXHRcdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyhpY29uRWwgYXMgSFRNTEVsZW1lbnQsIHsgY29sb3I6ICd2YXIoLS10ZXh0LWVycm9yKScgfSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KVxuXHRcdFx0XHQuc2hvd0F0TW91c2VFdmVudChldmVudCk7XG5cdFx0fSk7XG5cblx0XHR0aGlzLmN1c3RvbUFjdGlvbnMuc2V0KGl0ZW0sIGJ0bik7XG5cdH1cblxuXHQvKipcblx0ICogQWRkIGEgbmV3IGN1c3RvbSBjb21tYW5kIGl0ZW1cblx0ICovXG5cdHB1YmxpYyBhc3luYyBhZGRDdXN0b21Db21tYW5kKHBhaXI6IENvbW1hbmRJY29uUGFpcik6IFByb21pc2U8dm9pZD4ge1xuXHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMpIHtcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnN0YXR1c0Jhckl0ZW1zID0gW107XG5cdFx0fVxuXG5cdFx0Ly8gQ29udmVydCBzaG93T25GaWxlVHlwZXMgdG8gbWRPbmx5IGZvciBTdGF0dXNCYXJJdGVtIChTdGF0dXNCYXJJdGVtIHN0aWxsIHVzZXMgbWRPbmx5KVxuXHRcdC8vIElmIHNob3dPbkZpbGVUeXBlcyBpbmNsdWRlcyBcIm1kXCIgb3IgXCJtZHhcIiwgc2V0IG1kT25seSB0byB0cnVlXG5cdFx0Y29uc3QgaGFzTWFya2Rvd25GaWx0ZXIgPSBwYWlyLnNob3dPbkZpbGVUeXBlcyAmJiBcblx0XHRcdChwYWlyLnNob3dPbkZpbGVUeXBlcy5pbmNsdWRlcygnbWQnKSB8fCBwYWlyLnNob3dPbkZpbGVUeXBlcy5pbmNsdWRlcygnbWR4JykpO1xuXHRcdGNvbnN0IG1kT25seSA9IGhhc01hcmtkb3duRmlsdGVyID8gdHJ1ZSA6IGZhbHNlO1xuXG5cdFx0Y29uc3QgaXRlbTogU3RhdHVzQmFySXRlbSA9IHtcblx0XHRcdGlkOiBgY3VzdG9tLSR7cGFpci5pZH1gLFxuXHRcdFx0bmFtZTogcGFpci5uYW1lLFxuXHRcdFx0ZGlzcGxheU5hbWU6IHBhaXIuZGlzcGxheU5hbWUsXG5cdFx0XHRpY29uOiBwYWlyLmljb24sXG5cdFx0XHR0eXBlOiAnY3VzdG9tJyxcblx0XHRcdGhpZGRlbjogZmFsc2UsXG5cdFx0XHRtZE9ubHk6IG1kT25seSxcblx0XHRcdGNvbW1hbmRJZDogcGFpci5pZCxcblx0XHRcdGNvbG9yOiBwYWlyLmNvbG9yLFxuXHRcdFx0bW9kZTogcGFpci5tb2RlLFxuXHRcdH07XG5cblx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGF0dXNCYXJJdGVtcy5wdXNoKGl0ZW0pO1xuXHRcdHRoaXMucmVvcmRlcigpO1xuXHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJlbW92ZSBhbiBpdGVtXG5cdCAqL1xuXHRwdWJsaWMgYXN5bmMgcmVtb3ZlSXRlbShpdGVtOiBTdGF0dXNCYXJJdGVtKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGF0dXNCYXJJdGVtcykgcmV0dXJuO1xuXHRcdGNvbnN0IGluZGV4ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMuaW5kZXhPZihpdGVtKTtcblx0XHRpZiAoaW5kZXggPiAtMSkge1xuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RhdHVzQmFySXRlbXMuc3BsaWNlKGluZGV4LCAxKTtcblx0XHR9XG5cdFx0dGhpcy5yZW9yZGVyKCk7XG5cdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdH1cblxuXHQvKipcblx0ICogVXBkYXRlIGl0ZW0gdmlzaWJpbGl0eVxuXHQgKi9cblx0cHVibGljIGFzeW5jIHVwZGF0ZUl0ZW1WaXNpYmlsaXR5KGl0ZW06IFN0YXR1c0Jhckl0ZW0sIGhpZGRlbjogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xuXHRcdGl0ZW0uaGlkZGVuID0gaGlkZGVuO1xuXHRcdHRoaXMucmVvcmRlcigpO1xuXHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZSBpdGVtIG1kL21keC1vbmx5IHNldHRpbmdcblx0ICovXG5cdHB1YmxpYyBhc3luYyB1cGRhdGVJdGVtTWRPbmx5KGl0ZW06IFN0YXR1c0Jhckl0ZW0sIG1kT25seTogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xuXHRcdGl0ZW0ubWRPbmx5ID0gbWRPbmx5O1xuXHRcdHRoaXMucmVvcmRlcigpO1xuXHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZSBidXR0b24gbmFtZXMvdG9vbHRpcHMgZm9yIGFsbCBleGlzdGluZyBjdXN0b20gYnV0dG9uc1xuXHQgKi9cblx0cHVibGljIHVwZGF0ZUJ1dHRvbk5hbWVzKCk6IHZvaWQge1xuXHRcdHRoaXMuY3VzdG9tQWN0aW9ucy5mb3JFYWNoKChidXR0b24sIGl0ZW0pID0+IHtcblx0XHRcdGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBpdGVtLm5hbWUpO1xuXHRcdFx0Ly8gVXBkYXRlIGNvbG9yIGlmIG5lZWRlZFxuXHRcdFx0aWYgKGl0ZW0uY29sb3IgJiYgaXRlbS5jb2xvciAhPT0gJyMwMDAwMDAnKSB7XG5cdFx0XHRcdHNldENzc1Byb3BzKGJ1dHRvbiwgeyBjb2xvcjogaXRlbS5jb2xvciB9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGJ1dHRvbi5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnY29sb3InKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxufVxuIiwgIi8qKlxuICogRXhwbG9yZXIgTWFuYWdlciAtIE1hbmFnZXMgY3VzdG9tIGNvbW1hbmQgYnV0dG9ucyBpbiB0aGUgZmlsZSBleHBsb3JlciBuYXZpZ2F0aW9uIGFyZWFcbiAqIEJhc2VkIG9uIENvbW1hbmRlcidzIEV4cGxvcmVyTWFuYWdlciwgYnV0IHdpdGggbmF0aXZlIENTUyBjbGFzc2VzXG4gKi9cblxuaW1wb3J0IHsgV29ya3NwYWNlTGVhZiwgc2V0SWNvbiwgTWVudSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBVSVR3ZWFrZXJQbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBDb21tYW5kSWNvblBhaXIgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBpc01vZGVBY3RpdmUsIGlzQ29tbWFuZENoZWNrZWQgfSBmcm9tICcuLi91dGlscy9jb21tYW5kVXRpbHMnO1xuaW1wb3J0IHsgSWNvblBpY2tlck1vZGFsIH0gZnJvbSAnLi4vbW9kYWxzL0ljb25QaWNrZXJNb2RhbCc7XG5pbXBvcnQgeyBzZXRDc3NQcm9wcyB9IGZyb20gJy4uL3VpTWFuYWdlcic7XG5cbmV4cG9ydCBjbGFzcyBFeHBsb3Jlck1hbmFnZXIge1xuXHRwcml2YXRlIHBsdWdpbjogVUlUd2Vha2VyUGx1Z2luO1xuXHRwcml2YXRlIGJ1dHRvbnM6IE1hcDxzdHJpbmcsIEhUTUxFbGVtZW50PiA9IG5ldyBNYXAoKTtcblxuXHRjb25zdHJ1Y3RvcihwbHVnaW46IFVJVHdlYWtlclBsdWdpbikge1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHRcdHRoaXMuaW5pdCgpO1xuXHR9XG5cblx0cHJpdmF0ZSBpbml0KCk6IHZvaWQge1xuXHRcdC8vIFdhaXQgZm9yIHdvcmtzcGFjZSB0byBiZSByZWFkeVxuXHRcdHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XG5cdFx0XHRcblx0XHRcdC8vIFNldCB1cCBsYXlvdXQgY2hhbmdlIGxpc3RlbmVyIG9uY2UgKGxpa2UgQ29tbWFuZGVyIGRvZXMpXG5cdFx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KFxuXHRcdFx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKCdsYXlvdXQtY2hhbmdlJywgKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMuYWRkQnV0dG9uc1RvQWxsTGVhdmVzKCk7XG5cdFx0XHRcdFx0Ly8gQXBwbHkgbmF0aXZlIGljb24gb3ZlcnJpZGVzIGFmdGVyIGxheW91dCBjaGFuZ2VzXG5cdFx0XHRcdFx0dGhpcy5hcHBseU5hdGl2ZUljb25PdmVycmlkZXMoKTtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdFx0XHRcblx0XHRcdC8vIEFkZCBidXR0b25zIHRvIGFsbCBleGlzdGluZyBleHBsb3JlcnNcblx0XHRcdHRoaXMuYWRkQnV0dG9uc1RvQWxsTGVhdmVzKCk7XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIGFkZEJ1dHRvbnNUb0FsbExlYXZlcygpOiB2b2lkIHtcblx0XHRjb25zdCBleHBsb3JlcnMgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnZmlsZS1leHBsb3JlcicpO1xuXHRcdGV4cGxvcmVycy5mb3JFYWNoKChsZWFmKSA9PiB7XG5cdFx0XHR0aGlzLmFkZEJ1dHRvbnNUb0V4cGxvcmVyKGxlYWYpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHJpdmF0ZSBhZGRCdXR0b25zVG9FeHBsb3JlcihsZWFmOiBXb3Jrc3BhY2VMZWFmKTogdm9pZCB7XG5cdFx0Ly8gRmluZCB0aGUgbmF2LWJ1dHRvbnMtY29udGFpbmVyIChsaWtlIENvbW1hbmRlciBkb2VzKVxuXHRcdGNvbnN0IG5hdkJ1dHRvbnNDb250YWluZXIgPSBsZWFmLnZpZXc/LmNvbnRhaW5lckVsPy5xdWVyeVNlbGVjdG9yKCdkaXYubmF2LWJ1dHRvbnMtY29udGFpbmVyJykgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0aWYgKCFuYXZCdXR0b25zQ29udGFpbmVyKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gQWRkIGJ1dHRvbnMgZm9yIGVhY2ggY29tbWFuZFxuXHRcdGZvciAoY29uc3QgcGFpciBvZiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzKSB7XG5cdFx0XHR0aGlzLmFkZEV4cGxvcmVyQnV0dG9uKG5hdkJ1dHRvbnNDb250YWluZXIsIHBhaXIsIGxlYWYpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgYWRkRXhwbG9yZXJCdXR0b24oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgcGFpcjogQ29tbWFuZEljb25QYWlyLCBsZWFmOiBXb3Jrc3BhY2VMZWFmKTogdm9pZCB7XG5cdFx0Ly8gQ2hlY2sgaWYgYnV0dG9uIGFscmVhZHkgZXhpc3RzIChsaWtlIENvbW1hbmRlcilcblx0XHRjb25zdCBleGlzdGluZ0J1dHRvbiA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGBbZGF0YS1leHBsb3Jlci1jb21tYW5kLWlkPVwiJHtwYWlyLmlkfVwiXWApIGFzIEhUTUxFbGVtZW50O1xuXHRcdGlmIChleGlzdGluZ0J1dHRvbikge1xuXHRcdFx0Ly8gVXBkYXRlIGV4aXN0aW5nIGJ1dHRvblxuXHRcdFx0ZXhpc3RpbmdCdXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgcGFpci5uYW1lKTtcblx0XHRcdC8vIEFwcGx5IGNvbG9yIG9ubHkgaWYgY3VzdG9tIGNvbG9yIGlzIHNldCAobm90IGJsYWNrL2RlZmF1bHQpXG5cdFx0XHRpZiAocGFpci5jb2xvciAmJiBwYWlyLmNvbG9yICE9PSAnIzAwMDAwMCcpIHtcblx0XHRcdFx0ZXhpc3RpbmdCdXR0b24uc3R5bGUuY29sb3IgPSBwYWlyLmNvbG9yO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZXhpc3RpbmdCdXR0b24uc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2NvbG9yJyk7XG5cdFx0XHR9XG5cdFx0XHQvLyBVcGRhdGUgdG9nZ2xlIHN0YXRlXG5cdFx0XHR0aGlzLnVwZGF0ZUJ1dHRvblRvZ2dsZVN0YXRlKGV4aXN0aW5nQnV0dG9uLCBwYWlyKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBkZXZpY2UgbW9kZVxuXHRcdGlmICghaXNNb2RlQWN0aXZlKHBhaXIubW9kZSwgdGhpcy5wbHVnaW4pKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gQ3JlYXRlIGJ1dHRvbiB3aXRoIG5hdGl2ZSBDU1MgY2xhc3NlcyAoZXhhY3RseSBsaWtlIENvbW1hbmRlcilcblx0XHRjb25zdCBidXR0b24gPSBjcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiAnY2xpY2thYmxlLWljb24gbmF2LWFjdGlvbi1idXR0b24nLFxuXHRcdFx0YXR0cjoge1xuXHRcdFx0XHQnZGF0YS1leHBsb3Jlci1jb21tYW5kLWlkJzogcGFpci5pZCxcblx0XHRcdFx0J2FyaWEtbGFiZWwnOiBwYWlyLm5hbWUsXG5cdFx0XHRcdCdhcmlhLWxhYmVsLXBvc2l0aW9uJzogJ3RvcCcsXG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0Ly8gQ2hlY2sgdG9nZ2xlIHN0YXRlIGFuZCBhcHBseSBpY29uL2NsYXNzXG5cdFx0dGhpcy51cGRhdGVCdXR0b25Ub2dnbGVTdGF0ZShidXR0b24sIHBhaXIpO1xuXG5cdFx0Ly8gQ2xpY2sgaGFuZGxlclxuXHRcdGJ1dHRvbi5vbmNsaWNrID0gKCk6IHZvaWQgPT4ge1xuXHRcdFx0Y29uc3QgY29tbWFuZHMgPSAodGhpcy5wbHVnaW4uYXBwIGFzIHsgY29tbWFuZHM/OiB7IGV4ZWN1dGVDb21tYW5kQnlJZD86IChpZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+IH0gfSkuY29tbWFuZHM7XG5cdFx0XHRpZiAoY29tbWFuZHM/LmV4ZWN1dGVDb21tYW5kQnlJZCkge1xuXHRcdFx0XHQvLyBDb21tYW5kIGV4ZWN1dGlvbiBpcyB0cmFja2VkIGJ5IHRoZSBpbnRlcmNlcHRvciBpbiBtYWluLnRzXG5cdFx0XHRcdC8vIEp1c3QgZXhlY3V0ZSB0aGUgY29tbWFuZCAtIHRoZSBpbnRlcmNlcHRvciB3aWxsIGhhbmRsZSB0b2dnbGUgdHJhY2tpbmdcblx0XHRcdFx0dm9pZCBjb21tYW5kcy5leGVjdXRlQ29tbWFuZEJ5SWQocGFpci5pZCk7XG5cdFx0XHRcdC8vIFVwZGF0ZSB0b2dnbGUgc3RhdGUgYWZ0ZXIgY29tbWFuZCBleGVjdXRpb25cblx0XHRcdFx0Ly8gVGhlIGludGVyY2VwdG9yIHdpbGwgYWxzbyByZWZyZXNoLCBidXQgd2UgdXBkYXRlIHRoaXMgYnV0dG9uIGltbWVkaWF0ZWx5IGZvciByZXNwb25zaXZlbmVzc1xuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUJ1dHRvblRvZ2dsZVN0YXRlKGJ1dHRvbiwgcGFpcik7XG5cdFx0XHRcdFx0Ly8gQWxzbyB1cGRhdGUgYWxsIG90aGVyIGJ1dHRvbnMgZm9yIHRoaXMgY29tbWFuZFxuXHRcdFx0XHRcdHRoaXMudXBkYXRlQWxsQnV0dG9uc0ZvckNvbW1hbmQocGFpci5pZCk7XG5cdFx0XHRcdH0sIDEwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdHRoaXMuYnV0dG9ucy5zZXQocGFpci5pZCwgYnV0dG9uKTtcblxuXHRcdC8vIEFkZCBjb250ZXh0IG1lbnUgKHJpZ2h0LWNsaWNrKVxuXHRcdGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIChldmVudCkgPT4ge1xuXHRcdFx0ZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0XHRuZXcgTWVudSgpXG5cdFx0XHRcdC5hZGRJdGVtKChpdGVtKSA9PiB7XG5cdFx0XHRcdFx0aXRlbS5zZXRUaXRsZSgnQ2hhbmdlIGljb24nKVxuXHRcdFx0XHRcdFx0LnNldEljb24oJ2x1Y2lkZS1pbWFnZS1wbHVzJylcblx0XHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgSWNvblBpY2tlck1vZGFsKHRoaXMucGx1Z2luLmFwcCwgKGljb25JZCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChpY29uSWQgJiYgaWNvbklkICE9PSBwYWlyLmljb24pIHtcblx0XHRcdFx0XHRcdFx0XHRcdHBhaXIuaWNvbiA9IGljb25JZDtcblx0XHRcdFx0XHRcdFx0XHRcdHZvaWQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlb3JkZXIoKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSlcblx0XHRcdFx0LmFkZEl0ZW0oKGl0ZW0pID0+IHtcblx0XHRcdFx0XHRpdGVtLnNldFRpdGxlKCdEZWxldGUnKVxuXHRcdFx0XHRcdFx0LnNldEljb24oJ2x1Y2lkZS10cmFzaCcpXG5cdFx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHZvaWQgdGhpcy5yZW1vdmVDb21tYW5kKHBhaXIpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Ly8gQWRkIHdhcm5pbmcgY2xhc3MgdG8gbWFrZSB0ZXh0IGFuZCBpY29uIHJlZFxuXHRcdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3MsIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnksIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudFxuXHRcdFx0XHRcdGNvbnN0IGRvbSA9IChpdGVtIGFzIGFueSkuZG9tO1xuXHRcdFx0XHRcdGlmIChkb20pIHtcblx0XHRcdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWNhbGwsIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuXHRcdFx0XHRcdFx0ZG9tLmNsYXNzTGlzdC5hZGQoJ21vZC13YXJuaW5nJyk7XG5cdFx0XHRcdFx0XHQvLyBBbHNvIG1ha2UgdGhlIGljb24gcmVkXG5cdFx0XHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50LCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWNhbGwsIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtbWVtYmVyLWFjY2Vzc1xuXHRcdFx0XHRcdFx0Y29uc3QgaWNvbkVsID0gZG9tLnF1ZXJ5U2VsZWN0b3IoJy5tZW51LWl0ZW0taWNvbiBzdmcnKTtcblx0XHRcdFx0XHRcdGlmIChpY29uRWwpIHtcblx0XHRcdFx0XHRcdFx0Ly8gVXNlIHNldENzc1Byb3BzIHRvIHNldCBjb2xvciAoYWxyZWFkeSBpbXBvcnRlZCBmcm9tIHVpTWFuYWdlcilcblx0XHRcdFx0XHRcdFx0c2V0Q3NzUHJvcHMoaWNvbkVsIGFzIEhUTUxFbGVtZW50LCB7IGNvbG9yOiAndmFyKC0tdGV4dC1lcnJvciknIH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSlcblx0XHRcdFx0LnNob3dBdE1vdXNlRXZlbnQoZXZlbnQpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gQXBwZW5kIGJ1dHRvbiB0byBjb250YWluZXIgKGV4YWN0bHkgbGlrZSBDb21tYW5kZXIpXG5cdFx0Y29udGFpbmVyLmFwcGVuZENoaWxkKGJ1dHRvbik7XG5cdH1cblxuXHQvKipcblx0ICogUmVvcmRlciBidXR0b25zIGJhc2VkIG9uIHNldHRpbmdzIG9yZGVyXG5cdCAqL1xuXHRwdWJsaWMgcmVvcmRlcigpOiB2b2lkIHtcblx0XHRjb25zdCBleHBsb3JlcnMgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnZmlsZS1leHBsb3JlcicpO1xuXHRcdGV4cGxvcmVycy5mb3JFYWNoKChsZWFmKSA9PiB7XG5cdFx0XHRjb25zdCBuYXZCdXR0b25zQ29udGFpbmVyID0gbGVhZi52aWV3Py5jb250YWluZXJFbD8ucXVlcnlTZWxlY3RvcignZGl2Lm5hdi1idXR0b25zLWNvbnRhaW5lcicpIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0aWYgKCFuYXZCdXR0b25zQ29udGFpbmVyKSByZXR1cm47XG5cblx0XHRcdC8vIFJlbW92ZSBhbGwgb3VyIGJ1dHRvbnNcblx0XHRcdG5hdkJ1dHRvbnNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtZXhwbG9yZXItY29tbWFuZC1pZF0nKS5mb3JFYWNoKGJ0biA9PiBidG4ucmVtb3ZlKCkpO1xuXG5cdFx0XHQvLyBSZS1hZGQgaW4gb3JkZXJcblx0XHRcdGZvciAoY29uc3QgcGFpciBvZiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzKSB7XG5cdFx0XHRcdHRoaXMuYWRkRXhwbG9yZXJCdXR0b24obmF2QnV0dG9uc0NvbnRhaW5lciwgcGFpciwgbGVhZik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogVXBkYXRlIGJ1dHRvbiB0b2dnbGUgc3RhdGUgKGljb24gb3IgaXMtYWN0aXZlIGNsYXNzKVxuXHQgKi9cblx0cHJpdmF0ZSB1cGRhdGVCdXR0b25Ub2dnbGVTdGF0ZShidXR0b246IEhUTUxFbGVtZW50LCBwYWlyOiBDb21tYW5kSWNvblBhaXIpOiB2b2lkIHtcblx0XHQvLyBDaGVjayBpZiB0b2dnbGUgaXMgY29uZmlndXJlZFxuXHRcdC8vIElmIHVzZUFjdGl2ZUNsYXNzIGlzIHRydWUsIHdlIHN0aWxsIG5lZWQgdG8gY2hlY2sgdG9nZ2xlIHN0YXRlIGV2ZW4gd2l0aG91dCB0b2dnbGVJY29uXG5cdFx0aWYgKCFwYWlyLnRvZ2dsZUljb24gJiYgIXBhaXIudXNlQWN0aXZlQ2xhc3MpIHtcblx0XHRcdC8vIE5vIHRvZ2dsZSBjb25maWd1cmVkIC0gdXNlIGRlZmF1bHQgaWNvblxuXHRcdFx0YnV0dG9uLmVtcHR5KCk7XG5cdFx0XHRzZXRJY29uKGJ1dHRvbiwgcGFpci5pY29uKTtcblx0XHRcdGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKTtcblx0XHRcdC8vIEFwcGx5IGNvbG9yIG9ubHkgaWYgY3VzdG9tIGNvbG9yIGlzIHNldCAobm90IGJsYWNrL2RlZmF1bHQpXG5cdFx0XHRpZiAocGFpci5jb2xvciAmJiBwYWlyLmNvbG9yICE9PSAnIzAwMDAwMCcpIHtcblx0XHRcdFx0YnV0dG9uLnN0eWxlLmNvbG9yID0gcGFpci5jb2xvcjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGJ1dHRvbi5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnY29sb3InKTtcblx0XHRcdH1cblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBpZiBjb21tYW5kIGlzIGN1cnJlbnRseSB0b2dnbGVkIG9uXG5cdFx0Y29uc3QgaXNDaGVja2VkID0gaXNDb21tYW5kQ2hlY2tlZChwYWlyLmlkLCB0aGlzLnBsdWdpbik7XG5cblx0XHRpZiAocGFpci51c2VBY3RpdmVDbGFzcykge1xuXHRcdFx0Ly8gVXNlIGlzLWFjdGl2ZSBjbGFzcyBpbnN0ZWFkIG9mIGljb24gc3dhcFxuXHRcdFx0Ly8gT25seSB1cGRhdGUgaWNvbiBpZiBpdCdzIGRpZmZlcmVudCAodG8gYXZvaWQgdW5uZWNlc3NhcnkgRE9NIG1hbmlwdWxhdGlvbilcblx0XHRcdGNvbnN0IGN1cnJlbnRJY29uID0gYnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJy5zdmctaWNvbicpO1xuXHRcdFx0Y29uc3QgaWNvbk5hbWUgPSBwYWlyLmljb24ucmVwbGFjZSgnbHVjaWRlLScsICcnKTtcblx0XHRcdGlmICghY3VycmVudEljb24gfHwgIWN1cnJlbnRJY29uLmNsYXNzTGlzdC5jb250YWlucyhpY29uTmFtZSkpIHtcblx0XHRcdFx0YnV0dG9uLmVtcHR5KCk7XG5cdFx0XHRcdHNldEljb24oYnV0dG9uLCBwYWlyLmljb24pO1xuXHRcdFx0fVxuXHRcdFx0Ly8gQWx3YXlzIHVwZGF0ZSBpcy1hY3RpdmUgY2xhc3MgYmFzZWQgb24gdG9nZ2xlIHN0YXRlXG5cdFx0XHRpZiAoaXNDaGVja2VkKSB7XG5cdFx0XHRcdGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdpcy1hY3RpdmUnKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKHBhaXIudG9nZ2xlSWNvbikge1xuXHRcdFx0Ly8gU3dhcCBpY29uIGJhc2VkIG9uIHRvZ2dsZSBzdGF0ZSAob25seSBpZiB0b2dnbGVJY29uIGlzIHNldClcblx0XHRcdGJ1dHRvbi5lbXB0eSgpO1xuXHRcdFx0c2V0SWNvbihidXR0b24sIGlzQ2hlY2tlZCA/IHBhaXIudG9nZ2xlSWNvbiA6IHBhaXIuaWNvbik7XG5cdFx0XHRidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaXMtYWN0aXZlJyk7XG5cdFx0fVxuXG5cdFx0Ly8gQXBwbHkgY29sb3Igb25seSBpZiBjdXN0b20gY29sb3IgaXMgc2V0IChub3QgYmxhY2svZGVmYXVsdClcblx0XHRpZiAocGFpci5jb2xvciAmJiBwYWlyLmNvbG9yICE9PSAnIzAwMDAwMCcpIHtcblx0XHRcdGJ1dHRvbi5zdHlsZS5jb2xvciA9IHBhaXIuY29sb3I7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGJ1dHRvbi5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnY29sb3InKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogVXBkYXRlIGJ1dHRvbiBuYW1lcy90b29sdGlwcyBmb3IgYWxsIGV4aXN0aW5nIGJ1dHRvbnNcblx0ICovXG5cdHB1YmxpYyB1cGRhdGVCdXR0b25OYW1lcygpOiB2b2lkIHtcblx0XHRjb25zdCBleHBsb3JlcnMgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnZmlsZS1leHBsb3JlcicpO1xuXHRcdGV4cGxvcmVycy5mb3JFYWNoKChsZWFmKSA9PiB7XG5cdFx0XHRjb25zdCBuYXZCdXR0b25zQ29udGFpbmVyID0gbGVhZi52aWV3Py5jb250YWluZXJFbD8ucXVlcnlTZWxlY3RvcignZGl2Lm5hdi1idXR0b25zLWNvbnRhaW5lcicpIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0aWYgKCFuYXZCdXR0b25zQ29udGFpbmVyKSByZXR1cm47XG5cblx0XHRcdGZvciAoY29uc3QgcGFpciBvZiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBsb3JlckNvbW1hbmRzKSB7XG5cdFx0XHRcdGNvbnN0IGJ1dHRvbiA9IG5hdkJ1dHRvbnNDb250YWluZXIucXVlcnlTZWxlY3RvcihgW2RhdGEtZXhwbG9yZXItY29tbWFuZC1pZD1cIiR7cGFpci5pZH1cIl1gKSBhcyBIVE1MRWxlbWVudDtcblx0XHRcdFx0aWYgKGJ1dHRvbikge1xuXHRcdFx0XHRcdGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBwYWlyLm5hbWUpO1xuXHRcdFx0XHRcdC8vIFVwZGF0ZSB0b2dnbGUgc3RhdGUgYXMgd2VsbFxuXHRcdFx0XHRcdHRoaXMudXBkYXRlQnV0dG9uVG9nZ2xlU3RhdGUoYnV0dG9uLCBwYWlyKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZSBhbGwgYnV0dG9ucyBmb3IgYSBzcGVjaWZpYyBjb21tYW5kIElEIGFjcm9zcyBhbGwgZXhwbG9yZXJzXG5cdCAqL1xuXHRwcml2YXRlIHVwZGF0ZUFsbEJ1dHRvbnNGb3JDb21tYW5kKGNvbW1hbmRJZDogc3RyaW5nKTogdm9pZCB7XG5cdFx0Y29uc3QgcGFpciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMuZmluZChwID0+IHAuaWQgPT09IGNvbW1hbmRJZCk7XG5cdFx0aWYgKCFwYWlyKSByZXR1cm47XG5cblx0XHRjb25zdCBleHBsb3JlcnMgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnZmlsZS1leHBsb3JlcicpO1xuXHRcdGV4cGxvcmVycy5mb3JFYWNoKChsZWFmKSA9PiB7XG5cdFx0XHRjb25zdCBuYXZCdXR0b25zQ29udGFpbmVyID0gbGVhZi52aWV3Py5jb250YWluZXJFbD8ucXVlcnlTZWxlY3RvcignZGl2Lm5hdi1idXR0b25zLWNvbnRhaW5lcicpIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0aWYgKCFuYXZCdXR0b25zQ29udGFpbmVyKSByZXR1cm47XG5cblx0XHRcdGNvbnN0IGJ1dHRvbiA9IG5hdkJ1dHRvbnNDb250YWluZXIucXVlcnlTZWxlY3RvcihgW2RhdGEtZXhwbG9yZXItY29tbWFuZC1pZD1cIiR7Y29tbWFuZElkfVwiXWApIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0aWYgKGJ1dHRvbikge1xuXHRcdFx0XHR0aGlzLnVwZGF0ZUJ1dHRvblRvZ2dsZVN0YXRlKGJ1dHRvbiwgcGFpcik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogUmVmcmVzaCB0b2dnbGUgc3RhdGVzIGZvciBhbGwgYnV0dG9uc1xuXHQgKi9cblx0cHVibGljIHJlZnJlc2hUb2dnbGVTdGF0ZXMoKTogdm9pZCB7XG5cdFx0Y29uc3QgZXhwbG9yZXJzID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ2ZpbGUtZXhwbG9yZXInKTtcblx0XHRleHBsb3JlcnMuZm9yRWFjaCgobGVhZikgPT4ge1xuXHRcdFx0Y29uc3QgbmF2QnV0dG9uc0NvbnRhaW5lciA9IGxlYWYudmlldz8uY29udGFpbmVyRWw/LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5uYXYtYnV0dG9ucy1jb250YWluZXInKSBhcyBIVE1MRWxlbWVudDtcblx0XHRcdGlmICghbmF2QnV0dG9uc0NvbnRhaW5lcikgcmV0dXJuO1xuXG5cdFx0XHRmb3IgKGNvbnN0IHBhaXIgb2YgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcykge1xuXHRcdFx0XHRjb25zdCBidXR0b24gPSBuYXZCdXR0b25zQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWV4cGxvcmVyLWNvbW1hbmQtaWQ9XCIke3BhaXIuaWR9XCJdYCkgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRcdC8vIFJlZnJlc2ggaWYgdG9nZ2xlSWNvbiBpcyBzZXQgT1IgaWYgdXNlQWN0aXZlQ2xhc3MgaXMgdHJ1ZSAoYm90aCBuZWVkIHN0YXRlIHVwZGF0ZXMpXG5cdFx0XHRcdGlmIChidXR0b24gJiYgKHBhaXIudG9nZ2xlSWNvbiB8fCBwYWlyLnVzZUFjdGl2ZUNsYXNzKSkge1xuXHRcdFx0XHRcdC8vIEFsd2F5cyB1cGRhdGUgYnV0dG9uIHN0YXRlIC0gdGhpcyB3aWxsIGNoZWNrIHRoZSBhY3R1YWwgY29tbWFuZCBzdGF0ZVxuXHRcdFx0XHRcdHRoaXMudXBkYXRlQnV0dG9uVG9nZ2xlU3RhdGUoYnV0dG9uLCBwYWlyKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEFwcGx5IGljb24gb3ZlcnJpZGVzIHRvIG5hdGl2ZSBleHBsb3JlciBidXR0b25zXG5cdCAqL1xuXHRwdWJsaWMgYXBwbHlOYXRpdmVJY29uT3ZlcnJpZGVzKCk6IHZvaWQge1xuXHRcdGNvbnN0IGV4cGxvcmVycyA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdmaWxlLWV4cGxvcmVyJyk7XG5cdFx0Y29uc3QgaWNvbk92ZXJyaWRlcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm5hdGl2ZUV4cGxvcmVyQnV0dG9uSWNvbnM7XG5cdFx0aWYgKCFpY29uT3ZlcnJpZGVzKSByZXR1cm47XG5cblx0XHRleHBsb3JlcnMuZm9yRWFjaCgobGVhZikgPT4ge1xuXHRcdFx0Y29uc3QgbmF2QnV0dG9uc0NvbnRhaW5lciA9IGxlYWYudmlldz8uY29udGFpbmVyRWw/LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5uYXYtYnV0dG9ucy1jb250YWluZXInKSBhcyBIVE1MRWxlbWVudDtcblx0XHRcdGlmICghbmF2QnV0dG9uc0NvbnRhaW5lcikgcmV0dXJuO1xuXG5cdFx0XHQvLyBNYXAgb2YgYXJpYS1sYWJlbHMgdG8gaWNvbiBrZXlzXG5cdFx0XHRjb25zdCBidXR0b25NYXA6IFJlY29yZDxzdHJpbmcsICduZXdOb3RlJyB8ICduZXdGb2xkZXInIHwgJ3NvcnRPcmRlcicgfCAnYXV0b1JldmVhbCcgfCAnY29sbGFwc2VBbGwnPiA9IHtcblx0XHRcdFx0J05ldyBub3RlJzogJ25ld05vdGUnLFxuXHRcdFx0XHQnTmV3IGZvbGRlcic6ICduZXdGb2xkZXInLFxuXHRcdFx0XHQnQ2hhbmdlIHNvcnQgb3JkZXInOiAnc29ydE9yZGVyJyxcblx0XHRcdFx0J0F1dG8tcmV2ZWFsIGN1cnJlbnQgZmlsZSc6ICdhdXRvUmV2ZWFsJyxcblx0XHRcdFx0J0NvbGxhcHNlIGFsbCc6ICdjb2xsYXBzZUFsbCcsXG5cdFx0XHR9O1xuXG5cdFx0XHQvLyBGaW5kIGFsbCBuYXRpdmUgYnV0dG9ucyAodGhvc2Ugd2l0aG91dCBkYXRhLWV4cGxvcmVyLWNvbW1hbmQtaWQpXG5cdFx0XHRjb25zdCBuYXRpdmVCdXR0b25zID0gbmF2QnV0dG9uc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcubmF2LWFjdGlvbi1idXR0b246bm90KFtkYXRhLWV4cGxvcmVyLWNvbW1hbmQtaWRdKScpO1xuXHRcdFx0bmF0aXZlQnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcblx0XHRcdFx0Y29uc3QgYXJpYUxhYmVsID0gYnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcpO1xuXHRcdFx0XHRpZiAoIWFyaWFMYWJlbCkgcmV0dXJuO1xuXG5cdFx0XHRcdGNvbnN0IGljb25LZXkgPSBidXR0b25NYXBbYXJpYUxhYmVsXTtcblx0XHRcdFx0aWYgKCFpY29uS2V5KSByZXR1cm47XG5cblx0XHRcdFx0Y29uc3QgaWNvbk92ZXJyaWRlID0gaWNvbk92ZXJyaWRlc1tpY29uS2V5XTtcblx0XHRcdFx0Y29uc3QgY29sb3JPdmVycmlkZXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5uYXRpdmVFeHBsb3JlckJ1dHRvbkNvbG9ycztcblx0XHRcdFx0Y29uc3QgY29sb3IgPSBjb2xvck92ZXJyaWRlcz8uW2ljb25LZXldO1xuXHRcdFx0XHRcblx0XHRcdFx0aWYgKGljb25PdmVycmlkZSkge1xuXHRcdFx0XHRcdC8vIEFwcGx5IGljb24gb3ZlcnJpZGVcblx0XHRcdFx0XHRidXR0b24uZW1wdHkoKTtcblx0XHRcdFx0XHRzZXRJY29uKGJ1dHRvbiBhcyBIVE1MRWxlbWVudCwgaWNvbk92ZXJyaWRlKTtcblx0XHRcdFx0XHQvLyBBcHBseSBjb2xvciBpZiBzZXQgKGRpcmVjdGx5IHRvIGJ1dHRvbiBzaW5jZSBDU1Mgc2VsZWN0b3Igd29uJ3QgbWF0Y2ggY3VzdG9tIGljb24pXG5cdFx0XHRcdFx0aWYgKGNvbG9yKSB7XG5cdFx0XHRcdFx0XHQoYnV0dG9uIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5jb2xvciA9IGNvbG9yO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQoYnV0dG9uIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnY29sb3InKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gUmVtb3ZlIG92ZXJyaWRlIC0gcmVzdG9yZSBvcmlnaW5hbCBpY29uXG5cdFx0XHRcdFx0Ly8gV2UgbmVlZCB0byBpZGVudGlmeSB3aGljaCBidXR0b24gdGhpcyBpcyBhbmQgcmVzdG9yZSBpdHMgb3JpZ2luYWwgaWNvblxuXHRcdFx0XHRcdGNvbnN0IG9yaWdpbmFsSWNvbnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG5cdFx0XHRcdFx0XHQnTmV3IG5vdGUnOiAnbHVjaWRlLWVkaXQnLFxuXHRcdFx0XHRcdFx0J05ldyBmb2xkZXInOiAnbHVjaWRlLWZvbGRlci1wbHVzJyxcblx0XHRcdFx0XHRcdCdDaGFuZ2Ugc29ydCBvcmRlcic6ICdsdWNpZGUtc29ydC1hc2MnLFxuXHRcdFx0XHRcdFx0J0F1dG8tcmV2ZWFsIGN1cnJlbnQgZmlsZSc6ICdsdWNpZGUtZ2FsbGVyeS12ZXJ0aWNhbCcsXG5cdFx0XHRcdFx0XHQnQ29sbGFwc2UgYWxsJzogJ2x1Y2lkZS1jaGV2cm9ucy11cC1kb3duJywgLy8gTWF5IHZhcnksIGJ1dCB0aGlzIGlzIHRoZSBkZWZhdWx0XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRjb25zdCBvcmlnaW5hbEljb24gPSBvcmlnaW5hbEljb25zW2FyaWFMYWJlbF07XG5cdFx0XHRcdFx0aWYgKG9yaWdpbmFsSWNvbikge1xuXHRcdFx0XHRcdFx0YnV0dG9uLmVtcHR5KCk7XG5cdFx0XHRcdFx0XHRzZXRJY29uKGJ1dHRvbiBhcyBIVE1MRWxlbWVudCwgb3JpZ2luYWxJY29uKTtcblx0XHRcdFx0XHRcdC8vIFJlbW92ZSBpbmxpbmUgY29sb3IgLSBsZXQgQ1NTIGhhbmRsZSBpdCBmb3Igb3JpZ2luYWwgaWNvbnNcblx0XHRcdFx0XHRcdChidXR0b24gYXMgSFRNTEVsZW1lbnQpLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdjb2xvcicpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogUmVtb3ZlIGEgY29tbWFuZCBmcm9tIGV4cGxvcmVyXG5cdCAqL1xuXHRwdWJsaWMgYXN5bmMgcmVtb3ZlQ29tbWFuZChwYWlyOiBDb21tYW5kSWNvblBhaXIpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMpIHJldHVybjtcblx0XHRjb25zdCBpbmRleCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmV4cGxvcmVyQ29tbWFuZHMuaW5kZXhPZihwYWlyKTtcblx0XHRpZiAoaW5kZXggPiAtMSkge1xuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhwbG9yZXJDb21tYW5kcy5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdH1cblx0XHR0aGlzLnJlb3JkZXIoKTtcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0fVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFJQSxJQUFBQSxvQkFBa0Q7OztBQ29HM0MsSUFBTSxtQkFBK0I7QUFBQTtBQUFBLEVBRTNDLFVBQVU7QUFBQSxFQUNWLHVCQUF1QjtBQUFBLEVBQ3ZCLGlCQUFpQjtBQUFBLEVBQ2pCLGdCQUFnQjtBQUFBLEVBQ2hCLGlCQUFpQjtBQUFBLEVBQ2pCLHFCQUFxQjtBQUFBLEVBQ3JCLGVBQWU7QUFBQSxFQUNmLFlBQVk7QUFBQSxFQUNaLGdCQUFnQjtBQUFBO0FBQUEsRUFHaEIsUUFBUTtBQUFBLEVBQ1Isc0JBQXNCO0FBQUEsRUFDdEIsZUFBZTtBQUFBLEVBQ2YsaUJBQWlCO0FBQUEsRUFDakIsaUJBQWlCO0FBQUEsRUFDakIsa0JBQWtCO0FBQUEsRUFDbEIsbUJBQW1CO0FBQUEsRUFDbkIsbUJBQW1CO0FBQUEsRUFDbkIsc0JBQXNCO0FBQUEsRUFDdEIsYUFBYTtBQUFBLEVBQ2IsWUFBWTtBQUFBLEVBQ1osZ0JBQWdCO0FBQUEsRUFDaEIsV0FBVztBQUFBLEVBQ1gsWUFBWTtBQUFBLEVBQ1oseUJBQXlCO0FBQUEsRUFDekIsMEJBQTBCO0FBQUEsRUFDMUIsVUFBVTtBQUFBLEVBQ1YsbUJBQW1CO0FBQUEsRUFDbkIsa0JBQWtCO0FBQUEsRUFDbEIseUJBQXlCO0FBQUEsRUFDekIscUJBQXFCO0FBQUEsRUFDckIsbUJBQW1CO0FBQUEsRUFDbkIsY0FBYztBQUFBO0FBQUEsRUFHZCxvQkFBb0I7QUFBQSxFQUNwQixvQkFBb0I7QUFBQSxFQUNwQix1QkFBdUI7QUFBQSxFQUN2QixxQkFBcUI7QUFBQSxFQUNyQixvQkFBb0I7QUFBQSxFQUNw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QUMsVUFBSyxTQUFTLDBCQUFkLG1CQUFxQyxVQUFTO0FBQ2xELFVBQUksS0FBSyxvQkFBb0IsU0FBUyxLQUFLLFNBQVMsS0FBSyxnQkFBZ0IsR0FBRztBQUMzRSxhQUFLLGlCQUFpQixPQUFPO0FBQUEsTUFDOUI7QUFDQSxXQUFLLG1CQUFtQjtBQUd4QixVQUFJLEtBQUssc0JBQXNCLFNBQVMsS0FBSyxTQUFTLEtBQUssa0JBQWtCLEdBQUc7QUFDL0UsYUFBSyxtQkFBbUIsTUFBTSxlQUFlLFNBQVM7QUFBQSxNQUN2RDtBQUNBLFdBQUsscUJBQXFCO0FBQUEsSUFDM0I7QUFBQSxFQUNEO0FBQ0Q7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgInZhbHVlIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiX2EiLCAiaW1wb3J0X29ic2lkaWFuIiwgImFycmF5TW92ZU11dGFibGUiLCAiX2EiLCAiaW1wb3J0X29ic2lkaWFuIiwgImFycmF5TW92ZU11dGFibGUiLCAiX2EiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIl9hIiwgInZhdWx0QWN0aW9ucyIsICJfYiIsICJfYyIsICJfZCIsICJyaWdodERyYXdlciJdCn0K
